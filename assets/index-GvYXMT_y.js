(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function Ab(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var XA={exports:{}},Pm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT;function bL(){if(sT)return Pm;sT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,r){var o=null;if(r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),"key"in s){r={};for(var c in s)c!=="key"&&(r[c]=s[c])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:o,ref:s!==void 0?s:null,props:r}}return Pm.Fragment=e,Pm.jsx=t,Pm.jsxs=t,Pm}var aT;function EL(){return aT||(aT=1,XA.exports=bL()),XA.exports}var pe=EL(),jA={exports:{}},xn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function TL(){if(rT)return xn;rT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function y(X){return X===null||typeof X!="object"?null:(X=v&&X[v]||X["@@iterator"],typeof X=="function"?X:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function E(X,re,Ae){this.props=X,this.context=re,this.refs=T,this.updater=Ae||x}E.prototype.isReactComponent={},E.prototype.setState=function(X,re){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,re,"setState")},E.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function A(){}A.prototype=E.prototype;function w(X,re,Ae){this.props=X,this.context=re,this.refs=T,this.updater=Ae||x}var B=w.prototype=new A;B.constructor=w,S(B,E.prototype),B.isPureReactComponent=!0;var D=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function z(X,re,Ae,Ce,oe,Ne){return Ae=Ne.ref,{$$typeof:i,type:X,key:re,ref:Ae!==void 0?Ae:null,props:Ne}}function P(X,re){return z(X.type,re,void 0,void 0,void 0,X.props)}function L(X){return typeof X=="object"&&X!==null&&X.$$typeof===i}function N(X){var re={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ae){return re[Ae]})}var j=/\/+/g;function ce(X,re){return typeof X=="object"&&X!==null&&X.key!=null?N(""+X.key):re.toString(36)}function ne(){}function fe(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(ne,ne):(X.status="pending",X.then(function(re){X.status==="pending"&&(X.status="fulfilled",X.value=re)},function(re){X.status==="pending"&&(X.status="rejected",X.reason=re)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function _e(X,re,Ae,Ce,oe){var Ne=typeof X;(Ne==="undefined"||Ne==="boolean")&&(X=null);var Oe=!1;if(X===null)Oe=!0;else switch(Ne){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(X.$$typeof){case i:case e:Oe=!0;break;case m:return Oe=X._init,_e(Oe(X._payload),re,Ae,Ce,oe)}}if(Oe)return oe=oe(X),Oe=Ce===""?"."+ce(X,0):Ce,D(oe)?(Ae="",Oe!=null&&(Ae=Oe.replace(j,"$&/")+"/"),_e(oe,re,Ae,"",function(Dt){return Dt})):oe!=null&&(L(oe)&&(oe=P(oe,Ae+(oe.key==null||X&&X.key===oe.key?"":(""+oe.key).replace(j,"$&/")+"/")+Oe)),re.push(oe)),1;Oe=0;var $e=Ce===""?".":Ce+":";if(D(X))for(var tt=0;tt<X.length;tt++)Ce=X[tt],Ne=$e+ce(Ce,tt),Oe+=_e(Ce,re,Ae,Ne,oe);else if(tt=y(X),typeof tt=="function")for(X=tt.call(X),tt=0;!(Ce=X.next()).done;)Ce=Ce.value,Ne=$e+ce(Ce,tt++),Oe+=_e(Ce,re,Ae,Ne,oe);else if(Ne==="object"){if(typeof X.then=="function")return _e(fe(X),re,Ae,Ce,oe);throw re=String(X),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function H(X,re,Ae){if(X==null)return X;var Ce=[],oe=0;return _e(X,Ce,"","",function(Ne){return re.call(Ae,Ne,oe++)}),Ce}function W(X){if(X._status===-1){var re=X._result;re=re(),re.then(function(Ae){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ae)},function(Ae){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ae)}),X._status===-1&&(X._status=0,X._result=re)}if(X._status===1)return X._result.default;throw X._result}var Q=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function ve(){}return xn.Children={map:H,forEach:function(X,re,Ae){H(X,function(){re.apply(this,arguments)},Ae)},count:function(X){var re=0;return H(X,function(){re++}),re},toArray:function(X){return H(X,function(re){return re})||[]},only:function(X){if(!L(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},xn.Component=E,xn.Fragment=t,xn.Profiler=s,xn.PureComponent=w,xn.StrictMode=n,xn.Suspense=f,xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,xn.__COMPILER_RUNTIME={__proto__:null,c:function(X){return O.H.useMemoCache(X)}},xn.cache=function(X){return function(){return X.apply(null,arguments)}},xn.cloneElement=function(X,re,Ae){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Ce=S({},X.props),oe=X.key,Ne=void 0;if(re!=null)for(Oe in re.ref!==void 0&&(Ne=void 0),re.key!==void 0&&(oe=""+re.key),re)!I.call(re,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&re.ref===void 0||(Ce[Oe]=re[Oe]);var Oe=arguments.length-2;if(Oe===1)Ce.children=Ae;else if(1<Oe){for(var $e=Array(Oe),tt=0;tt<Oe;tt++)$e[tt]=arguments[tt+2];Ce.children=$e}return z(X.type,oe,void 0,void 0,Ne,Ce)},xn.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:r,_context:X},X},xn.createElement=function(X,re,Ae){var Ce,oe={},Ne=null;if(re!=null)for(Ce in re.key!==void 0&&(Ne=""+re.key),re)I.call(re,Ce)&&Ce!=="key"&&Ce!=="__self"&&Ce!=="__source"&&(oe[Ce]=re[Ce]);var Oe=arguments.length-2;if(Oe===1)oe.children=Ae;else if(1<Oe){for(var $e=Array(Oe),tt=0;tt<Oe;tt++)$e[tt]=arguments[tt+2];oe.children=$e}if(X&&X.defaultProps)for(Ce in Oe=X.defaultProps,Oe)oe[Ce]===void 0&&(oe[Ce]=Oe[Ce]);return z(X,Ne,void 0,void 0,null,oe)},xn.createRef=function(){return{current:null}},xn.forwardRef=function(X){return{$$typeof:c,render:X}},xn.isValidElement=L,xn.lazy=function(X){return{$$typeof:m,_payload:{_status:-1,_result:X},_init:W}},xn.memo=function(X,re){return{$$typeof:p,type:X,compare:re===void 0?null:re}},xn.startTransition=function(X){var re=O.T,Ae={};O.T=Ae;try{var Ce=X(),oe=O.S;oe!==null&&oe(Ae,Ce),typeof Ce=="object"&&Ce!==null&&typeof Ce.then=="function"&&Ce.then(ve,Q)}catch(Ne){Q(Ne)}finally{O.T=re}},xn.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},xn.use=function(X){return O.H.use(X)},xn.useActionState=function(X,re,Ae){return O.H.useActionState(X,re,Ae)},xn.useCallback=function(X,re){return O.H.useCallback(X,re)},xn.useContext=function(X){return O.H.useContext(X)},xn.useDebugValue=function(){},xn.useDeferredValue=function(X,re){return O.H.useDeferredValue(X,re)},xn.useEffect=function(X,re,Ae){var Ce=O.H;if(typeof Ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ce.useEffect(X,re)},xn.useId=function(){return O.H.useId()},xn.useImperativeHandle=function(X,re,Ae){return O.H.useImperativeHandle(X,re,Ae)},xn.useInsertionEffect=function(X,re){return O.H.useInsertionEffect(X,re)},xn.useLayoutEffect=function(X,re){return O.H.useLayoutEffect(X,re)},xn.useMemo=function(X,re){return O.H.useMemo(X,re)},xn.useOptimistic=function(X,re){return O.H.useOptimistic(X,re)},xn.useReducer=function(X,re,Ae){return O.H.useReducer(X,re,Ae)},xn.useRef=function(X){return O.H.useRef(X)},xn.useState=function(X){return O.H.useState(X)},xn.useSyncExternalStore=function(X,re,Ae){return O.H.useSyncExternalStore(X,re,Ae)},xn.useTransition=function(){return O.H.useTransition()},xn.version="19.1.0",xn}var oT;function dp(){return oT||(oT=1,jA.exports=TL()),jA.exports}var ee=dp();const CL=Ab(ee);var YA={exports:{}},Fm={},qA={exports:{}},JA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function RL(){return lT||(lT=1,function(i){function e(H,W){var Q=H.length;H.push(W);e:for(;0<Q;){var ve=Q-1>>>1,X=H[ve];if(0<s(X,W))H[ve]=W,H[Q]=X,Q=ve;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var W=H[0],Q=H.pop();if(Q!==W){H[0]=Q;e:for(var ve=0,X=H.length,re=X>>>1;ve<re;){var Ae=2*(ve+1)-1,Ce=H[Ae],oe=Ae+1,Ne=H[oe];if(0>s(Ce,Q))oe<X&&0>s(Ne,Ce)?(H[ve]=Ne,H[oe]=Q,ve=oe):(H[ve]=Ce,H[Ae]=Q,ve=Ae);else if(oe<X&&0>s(Ne,Q))H[ve]=Ne,H[oe]=Q,ve=oe;else break e}}return W}function s(H,W){var Q=H.sortIndex-W.sortIndex;return Q!==0?Q:H.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],p=[],m=1,v=null,y=3,x=!1,S=!1,T=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(H){for(var W=t(p);W!==null;){if(W.callback===null)n(p);else if(W.startTime<=H)n(p),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(p)}}function O(H){if(T=!1,D(H),!S)if(t(f)!==null)S=!0,I||(I=!0,ce());else{var W=t(p);W!==null&&_e(O,W.startTime-H)}}var I=!1,z=-1,P=5,L=-1;function N(){return E?!0:!(i.unstable_now()-L<P)}function j(){if(E=!1,I){var H=i.unstable_now();L=H;var W=!0;try{e:{S=!1,T&&(T=!1,w(z),z=-1),x=!0;var Q=y;try{t:{for(D(H),v=t(f);v!==null&&!(v.expirationTime>H&&N());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,y=v.priorityLevel;var X=ve(v.expirationTime<=H);if(H=i.unstable_now(),typeof X=="function"){v.callback=X,D(H),W=!0;break t}v===t(f)&&n(f),D(H)}else n(f);v=t(f)}if(v!==null)W=!0;else{var re=t(p);re!==null&&_e(O,re.startTime-H),W=!1}}break e}finally{v=null,y=Q,x=!1}W=void 0}}finally{W?ce():I=!1}}}var ce;if(typeof B=="function")ce=function(){B(j)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,fe=ne.port2;ne.port1.onmessage=j,ce=function(){fe.postMessage(null)}}else ce=function(){A(j,0)};function _e(H,W){z=A(function(){H(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(H){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var Q=y;y=W;try{return H()}finally{y=Q}},i.unstable_requestPaint=function(){E=!0},i.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=y;y=H;try{return W()}finally{y=Q}},i.unstable_scheduleCallback=function(H,W,Q){var ve=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ve+Q:ve):Q=ve,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Q+X,H={id:m++,callback:W,priorityLevel:H,startTime:Q,expirationTime:X,sortIndex:-1},Q>ve?(H.sortIndex=Q,e(p,H),t(f)===null&&H===t(p)&&(T?(w(z),z=-1):T=!0,_e(O,Q-ve))):(H.sortIndex=X,e(f,H),S||x||(S=!0,I||(I=!0,ce()))),H},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(H){var W=y;return function(){var Q=y;y=W;try{return H.apply(this,arguments)}finally{y=Q}}}}(JA)),JA}var cT;function wL(){return cT||(cT=1,qA.exports=RL()),qA.exports}var KA={exports:{}},Qs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function BL(){if(uT)return Qs;uT=1;var i=dp();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(f,p,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:f,containerInfo:p,implementation:m}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Qs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qs.createPortal=function(f,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return r(f,p,null,m)},Qs.flushSync=function(f){var p=o.T,m=n.p;try{if(o.T=null,n.p=2,f)return f()}finally{o.T=p,n.p=m,n.d.f()}},Qs.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(f,p))},Qs.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Qs.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var m=p.as,v=c(m,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?n.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:x}):m==="script"&&n.d.X(f,{crossOrigin:v,integrity:y,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Qs.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=c(p.as,p.crossOrigin);n.d.M(f,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(f)},Qs.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,v=c(m,p.crossOrigin);n.d.L(f,m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Qs.preloadModule=function(f,p){if(typeof f=="string")if(p){var m=c(p.as,p.crossOrigin);n.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(f)},Qs.requestFormReset=function(f){n.d.r(f)},Qs.unstable_batchedUpdates=function(f,p){return f(p)},Qs.useFormState=function(f,p,m){return o.H.useFormState(f,p,m)},Qs.useFormStatus=function(){return o.H.useHostTransitionStatus()},Qs.version="19.1.0",Qs}var fT;function DL(){if(fT)return KA.exports;fT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),KA.exports=BL(),KA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT;function UL(){if(hT)return Fm;hT=1;var i=wL(),e=dp(),t=DL();function n(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(r(a)!==a)throw Error(n(188))}function f(a){var l=a.alternate;if(!l){if(l=r(a),l===null)throw Error(n(188));return l!==a?null:a}for(var d=a,g=l;;){var M=d.return;if(M===null)break;var C=M.alternate;if(C===null){if(g=M.return,g!==null){d=g;continue}break}if(M.child===C.child){for(C=M.child;C;){if(C===d)return c(M),a;if(C===g)return c(M),l;C=C.sibling}throw Error(n(188))}if(d.return!==g.return)d=M,g=C;else{for(var F=!1,Y=M.child;Y;){if(Y===d){F=!0,d=M,g=C;break}if(Y===g){F=!0,g=M,d=C;break}Y=Y.sibling}if(!F){for(Y=C.child;Y;){if(Y===d){F=!0,d=C,g=M;break}if(Y===g){F=!0,g=C,d=M;break}Y=Y.sibling}if(!F)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?a:l}function p(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=p(a),l!==null)return l;a=a.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),B=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function ce(a){return a===null||typeof a!="object"?null:(a=j&&a[j]||a["@@iterator"],typeof a=="function"?a:null)}var ne=Symbol.for("react.client.reference");function fe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ne?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case O:return"Suspense";case I:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case B:return(a.displayName||"Context")+".Provider";case w:return(a._context.displayName||"Context")+".Consumer";case D:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return l=a.displayName||null,l!==null?l:fe(a.type)||"Memo";case P:l=a._payload,a=a._init;try{return fe(a(l))}catch{}}return null}var _e=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ve=[],X=-1;function re(a){return{current:a}}function Ae(a){0>X||(a.current=ve[X],ve[X]=null,X--)}function Ce(a,l){X++,ve[X]=a.current,a.current=l}var oe=re(null),Ne=re(null),Oe=re(null),$e=re(null);function tt(a,l){switch(Ce(Oe,l),Ce(Ne,a),Ce(oe,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?U1(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=U1(l),a=L1(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Ae(oe),Ce(oe,a)}function Dt(){Ae(oe),Ae(Ne),Ae(Oe)}function wt(a){a.memoizedState!==null&&Ce($e,a);var l=oe.current,d=L1(l,a.type);l!==d&&(Ce(Ne,a),Ce(oe,d))}function Pt(a){Ne.current===a&&(Ae(oe),Ae(Ne)),$e.current===a&&(Ae($e),Um._currentValue=Q)}var ot=Object.prototype.hasOwnProperty,dt=i.unstable_scheduleCallback,K=i.unstable_cancelCallback,rt=i.unstable_shouldYield,Ze=i.unstable_requestPaint,je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,_t=i.unstable_ImmediatePriority,We=i.unstable_UserBlockingPriority,Z=i.unstable_NormalPriority,k=i.unstable_LowPriority,xe=i.unstable_IdlePriority,ze=i.log,Qe=i.unstable_setDisableYieldValue,He=null,pt=null;function ut(a){if(typeof ze=="function"&&Qe(a),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(He,a)}catch{}}var xt=Math.clz32?Math.clz32:At,Nt=Math.log,at=Math.LN2;function At(a){return a>>>=0,a===0?32:31-(Nt(a)/at|0)|0}var Et=256,St=4194304;function mt(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function he(a,l,d){var g=a.pendingLanes;if(g===0)return 0;var M=0,C=a.suspendedLanes,F=a.pingedLanes;a=a.warmLanes;var Y=g&134217727;return Y!==0?(g=Y&~C,g!==0?M=mt(g):(F&=Y,F!==0?M=mt(F):d||(d=Y&~a,d!==0&&(M=mt(d))))):(Y=g&~C,Y!==0?M=mt(Y):F!==0?M=mt(F):d||(d=g&~a,d!==0&&(M=mt(d)))),M===0?0:l!==0&&l!==M&&(l&C)===0&&(C=M&-M,d=l&-l,C>=d||C===32&&(d&4194048)!==0)?l:M}function Fe(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function lt(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ue(){var a=Et;return Et<<=1,(Et&4194048)===0&&(Et=256),a}function be(){var a=St;return St<<=1,(St&62914560)===0&&(St=4194304),a}function De(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function ke(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function yt(a,l,d,g,M,C){var F=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var Y=a.entanglements,ie=a.expirationTimes,Re=a.hiddenUpdates;for(d=F&~d;0<d;){var Je=31-xt(d),nt=1<<Je;Y[Je]=0,ie[Je]=-1;var Le=Re[Je];if(Le!==null)for(Re[Je]=null,Je=0;Je<Le.length;Je++){var Ie=Le[Je];Ie!==null&&(Ie.lane&=-536870913)}d&=~nt}g!==0&&gt(a,g,0),C!==0&&M===0&&a.tag!==0&&(a.suspendedLanes|=C&~(F&~l))}function gt(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var g=31-xt(l);a.entangledLanes|=l,a.entanglements[g]=a.entanglements[g]|1073741824|d&4194090}function Ft(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var g=31-xt(d),M=1<<g;M&l|a[g]&l&&(a[g]|=l),d&=~M}}function rn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function wn(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function on(){var a=W.p;return a!==0?a:(a=window.event,a===void 0?32:Q1(a.type))}function yi(a,l){var d=W.p;try{return W.p=a,l()}finally{W.p=d}}var ai=Math.random().toString(36).slice(2),_i="__reactFiber$"+ai,Ti="__reactProps$"+ai,Ci="__reactContainer$"+ai,vs="__reactEvents$"+ai,qa="__reactListeners$"+ai,as="__reactHandles$"+ai,Yt="__reactResources$"+ai,ks="__reactMarker$"+ai;function Gn(a){delete a[_i],delete a[Ti],delete a[vs],delete a[qa],delete a[as]}function G(a){var l=a[_i];if(l)return l;for(var d=a.parentNode;d;){if(l=d[Ci]||d[_i]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=P1(a);a!==null;){if(d=a[_i])return d;a=P1(a)}return l}a=d,d=a.parentNode}return null}function J(a){if(a=a[_i]||a[Ci]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function de(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(n(33))}function we(a){var l=a[Yt];return l||(l=a[Yt]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ue(a){a[ks]=!0}var Ge=new Set,ct={};function st(a,l){V(a,l),V(a+"Capture",l)}function V(a,l){for(ct[a]=l,a=0;a<l.length;a++)Ge.add(l[a])}var te=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),se={},ae={};function ge(a){return ot.call(ae,a)?!0:ot.call(se,a)?!1:te.test(a)?ae[a]=!0:(se[a]=!0,!1)}function Te(a,l,d){if(ge(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function Ve(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function Ye(a,l,d,g){if(g===null)a.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+g)}}var it,Mt;function vt(a){if(it===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);it=l&&l[1]||"",Mt=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+a+Mt}var bt=!1;function kt(a,l){if(!a||bt)return"";bt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Ie){var Le=Ie}Reflect.construct(a,[],nt)}else{try{nt.call()}catch(Ie){Le=Ie}a.call(nt.prototype)}}else{try{throw Error()}catch(Ie){Le=Ie}(nt=a())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Ie){if(Ie&&Le&&typeof Ie.stack=="string")return[Ie.stack,Le.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=g.DetermineComponentFrameRoot(),F=C[0],Y=C[1];if(F&&Y){var ie=F.split(`
`),Re=Y.split(`
`);for(M=g=0;g<ie.length&&!ie[g].includes("DetermineComponentFrameRoot");)g++;for(;M<Re.length&&!Re[M].includes("DetermineComponentFrameRoot");)M++;if(g===ie.length||M===Re.length)for(g=ie.length-1,M=Re.length-1;1<=g&&0<=M&&ie[g]!==Re[M];)M--;for(;1<=g&&0<=M;g--,M--)if(ie[g]!==Re[M]){if(g!==1||M!==1)do if(g--,M--,0>M||ie[g]!==Re[M]){var Je=`
`+ie[g].replace(" at new "," at ");return a.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",a.displayName)),Je}while(1<=g&&0<=M);break}}}finally{bt=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?vt(d):""}function Ht(a){switch(a.tag){case 26:case 27:case 5:return vt(a.type);case 16:return vt("Lazy");case 13:return vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return kt(a.type,!1);case 11:return kt(a.type.render,!1);case 1:return kt(a.type,!0);case 31:return vt("Activity");default:return""}}function Tn(a){try{var l="";do l+=Ht(a),a=a.return;while(a);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Ut(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Gt(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Lt(a){var l=Gt(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var M=d.get,C=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return M.call(this)},set:function(F){g=""+F,C.call(this,F)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(F){g=""+F},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Yn(a){a._valueTracker||(a._valueTracker=Lt(a))}function $t(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return a&&(g=Gt(a)?a.checked?"true":"false":a.value),a=g,a!==d?(l.setValue(a),!0):!1}function an(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Zn=/[\n"\\]/g;function jt(a){return a.replace(Zn,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function vn(a,l,d,g,M,C,F,Y){a.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?a.type=F:a.removeAttribute("type"),l!=null?F==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Ut(l)):a.value!==""+Ut(l)&&(a.value=""+Ut(l)):F!=="submit"&&F!=="reset"||a.removeAttribute("value"),l!=null?fi(a,F,Ut(l)):d!=null?fi(a,F,Ut(d)):g!=null&&a.removeAttribute("value"),M==null&&C!=null&&(a.defaultChecked=!!C),M!=null&&(a.checked=M&&typeof M!="function"&&typeof M!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?a.name=""+Ut(Y):a.removeAttribute("name")}function pn(a,l,d,g,M,C,F,Y){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),l!=null||d!=null){if(!(C!=="submit"&&C!=="reset"||l!=null))return;d=d!=null?""+Ut(d):"",l=l!=null?""+Ut(l):d,Y||l===a.value||(a.value=l),a.defaultValue=l}g=g??M,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=Y?a.checked:!!g,a.defaultChecked=!!g,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(a.name=F)}function fi(a,l,d){l==="number"&&an(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function Bn(a,l,d,g){if(a=a.options,l){l={};for(var M=0;M<d.length;M++)l["$"+d[M]]=!0;for(d=0;d<a.length;d++)M=l.hasOwnProperty("$"+a[d].value),a[d].selected!==M&&(a[d].selected=M),M&&g&&(a[d].defaultSelected=!0)}else{for(d=""+Ut(d),l=null,M=0;M<a.length;M++){if(a[M].value===d){a[M].selected=!0,g&&(a[M].defaultSelected=!0);return}l!==null||a[M].disabled||(l=a[M])}l!==null&&(l.selected=!0)}}function Qn(a,l,d){if(l!=null&&(l=""+Ut(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+Ut(d):""}function Qi(a,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(n(92));if(_e(g)){if(1<g.length)throw Error(n(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=Ut(l),a.defaultValue=d,g=a.textContent,g===d&&g!==""&&g!==null&&(a.value=g)}function ws(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var fr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bu(a,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":g?a.setProperty(l,d):typeof d!="number"||d===0||fr.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function Du(a,l,d){if(l!=null&&typeof l!="object")throw Error(n(62));if(a=a.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var M in l)g=l[M],l.hasOwnProperty(M)&&d[M]!==g&&Bu(a,M,g)}else for(var C in l)l.hasOwnProperty(C)&&Bu(a,C,l[C])}function vh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uu(a){return Tv.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var yh=null;function _h(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ro=null,bl=null;function Ep(a){var l=J(a);if(l&&(a=l.stateNode)){var d=a[Ti]||null;e:switch(a=l.stateNode,l.type){case"input":if(vn(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+jt(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==a&&g.form===a.form){var M=g[Ti]||null;if(!M)throw Error(n(90));vn(g,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===a.form&&$t(g)}break e;case"textarea":Qn(a,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Bn(a,!!d.multiple,l,!1)}}}var Lu=!1;function Tp(a,l,d){if(Lu)return a(l,d);Lu=!0;try{var g=a(l);return g}finally{if(Lu=!1,(Ro!==null||bl!==null)&&(Cr(),Ro&&(l=Ro,a=bl,bl=Ro=null,Ep(l),a)))for(l=0;l<a.length;l++)Ep(a[l])}}function pc(a,l){var d=a.stateNode;if(d===null)return null;var g=d[Ti]||null;if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nu=!1;if(hr)try{var mc={};Object.defineProperty(mc,"passive",{get:function(){Nu=!0}}),window.addEventListener("test",mc,mc),window.removeEventListener("test",mc,mc)}catch{Nu=!1}var Vr=null,Cp=null,xh=null;function Rp(){if(xh)return xh;var a,l=Cp,d=l.length,g,M="value"in Vr?Vr.value:Vr.textContent,C=M.length;for(a=0;a<d&&l[a]===M[a];a++);var F=d-a;for(g=1;g<=F&&l[d-g]===M[C-g];g++);return xh=M.slice(a,1<g?1-g:void 0)}function wo(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function gc(){return!0}function Ou(){return!1}function Bs(a){function l(d,g,M,C,F){this._reactName=d,this._targetInst=M,this.type=g,this.nativeEvent=C,this.target=F,this.currentTarget=null;for(var Y in a)a.hasOwnProperty(Y)&&(d=a[Y],this[Y]=d?d(C):C[Y]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?gc:Ou,this.isPropagationStopped=Ou,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),l}var Bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vc=Bs(Bo),yc=m({},Bo,{view:0,detail:0}),Cv=Bs(yc),kr,_c,xc,Ac=m({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pu,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==xc&&(xc&&a.type==="mousemove"?(kr=a.screenX-xc.screenX,_c=a.screenY-xc.screenY):_c=kr=0,xc=a),kr)},movementY:function(a){return"movementY"in a?a.movementY:_c}}),wp=Bs(Ac),Rv=m({},Ac,{dataTransfer:0}),lA=Bs(Rv),rs=m({},yc,{relatedTarget:0}),Ah=Bs(rs),wv=m({},Bo,{animationName:0,elapsedTime:0,pseudoElement:0}),Bv=Bs(wv),Dv=m({},Bo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Uv=Bs(Dv),Iu=m({},Bo,{data:0}),Sh=Bs(Iu),Lv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ov={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bp(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Ov[a])?!!l[a]:!1}function Pu(){return Bp}var Iv=m({},yc,{key:function(a){if(a.key){var l=Lv[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=wo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nv[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pu,charCode:function(a){return a.type==="keypress"?wo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?wo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Dp=Bs(Iv),Up=m({},Ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mh=Bs(Up),Pv=m({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pu}),Lp=Bs(Pv),Fv=m({},Bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xr=Bs(Fv),Np=m({},Ac,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),cA=Bs(Np),Hv=m({},Bo,{newState:0,oldState:0}),Do=Bs(Hv),jr=[9,13,27,32],Fu=hr&&"CompositionEvent"in window,El=null;hr&&"documentMode"in document&&(El=document.documentMode);var Hu=hr&&"TextEvent"in window&&!El,zu=hr&&(!Fu||El&&8<El&&11>=El),Uo=" ",os=!1;function Gu(a,l){switch(a){case"keyup":return jr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Op(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Lo=!1;function Vu(a,l){switch(a){case"compositionend":return Op(l);case"keypress":return l.which!==32?null:(os=!0,Uo);case"textInput":return a=l.data,a===Uo&&os?null:a;default:return null}}function Ip(a,l){if(Lo)return a==="compositionend"||!Fu&&Gu(a,l)?(a=Rp(),xh=Cp=Vr=null,Lo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return zu&&l.locale!=="ko"?null:l.data;default:return null}}var bh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pp(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!bh[a.type]:l==="textarea"}function Xs(a,l,d,g){Ro?bl?bl.push(g):bl=[g]:Ro=g,l=F0(l,"onChange"),0<l.length&&(d=new vc("onChange","change",null,d,g),a.push({event:d,listeners:l}))}var Sc=null,Tl=null;function zv(a){C1(a,0)}function ku(a){var l=de(a);if($t(l))return a}function Eh(a,l){if(a==="change")return l}var Th=!1;if(hr){var Ch;if(hr){var Mc="oninput"in document;if(!Mc){var bc=document.createElement("div");bc.setAttribute("oninput","return;"),Mc=typeof bc.oninput=="function"}Ch=Mc}else Ch=!1;Th=Ch&&(!document.documentMode||9<document.documentMode)}function pi(){Sc&&(Sc.detachEvent("onpropertychange",Gv),Tl=Sc=null)}function Gv(a){if(a.propertyName==="value"&&ku(Tl)){var l=[];Xs(l,Tl,a,_h(a)),Tp(zv,l)}}function uA(a,l,d){a==="focusin"?(pi(),Sc=l,Tl=d,Sc.attachEvent("onpropertychange",Gv)):a==="focusout"&&pi()}function Vv(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ku(Tl)}function Xu(a,l){if(a==="click")return ku(l)}function No(a,l){if(a==="input"||a==="change")return ku(l)}function kv(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var js=typeof Object.is=="function"?Object.is:kv;function Ja(a,l){if(js(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var M=d[g];if(!ot.call(l,M)||!js(a[M],l[M]))return!1}return!0}function Ys(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Fp(a,l){var d=Ys(a);a=0;for(var g;d;){if(d.nodeType===3){if(g=a+d.textContent.length,a<=l&&g>=l)return{node:d,offset:l-a};a=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Ys(d)}}function Hp(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Hp(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function zp(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=an(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=an(a.document)}return l}function ju(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var Gp=hr&&"documentMode"in document&&11>=document.documentMode,Yr=null,Rh=null,Yu=null,wh=!1;function Vp(a,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;wh||Yr==null||Yr!==an(g)||(g=Yr,"selectionStart"in g&&ju(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Yu&&Ja(Yu,g)||(Yu=g,g=F0(Rh,"onSelect"),0<g.length&&(l=new vc("onSelect","select",null,l,d),a.push({event:l,listeners:g}),l.target=Yr)))}function ls(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var Oo={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},Bh={},Xv={};hr&&(Xv=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function qr(a){if(Bh[a])return Bh[a];if(!Oo[a])return a;var l=Oo[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in Xv)return Bh[a]=l[d];return a}var Ds=qr("animationend"),kp=qr("animationiteration"),qs=qr("animationstart"),jv=qr("transitionrun"),Jr=qr("transitionstart"),Ec=qr("transitioncancel"),Kr=qr("transitionend"),Dh=new Map,qu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qu.push("scrollEnd");function $i(a,l){Dh.set(a,l),st(l,[a])}var Xp=new WeakMap;function cs(a,l){if(typeof a=="object"&&a!==null){var d=Xp.get(a);return d!==void 0?d:(l={value:a,source:l,stack:Tn(l)},Xp.set(a,l),l)}return{value:a,source:l,stack:Tn(l)}}var ys=[],Ca=0,Uh=0;function Ju(){for(var a=Ca,l=Uh=Ca=0;l<a;){var d=ys[l];ys[l++]=null;var g=ys[l];ys[l++]=null;var M=ys[l];ys[l++]=null;var C=ys[l];if(ys[l++]=null,g!==null&&M!==null){var F=g.pending;F===null?M.next=M:(M.next=F.next,F.next=M),g.pending=M}C!==0&&jp(d,M,C)}}function Io(a,l,d,g){ys[Ca++]=a,ys[Ca++]=l,ys[Ca++]=d,ys[Ca++]=g,Uh|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function Lh(a,l,d,g){return Io(a,l,d,g),Tc(a)}function Wr(a,l){return Io(a,null,null,l),Tc(a)}function jp(a,l,d){a.lanes|=d;var g=a.alternate;g!==null&&(g.lanes|=d);for(var M=!1,C=a.return;C!==null;)C.childLanes|=d,g=C.alternate,g!==null&&(g.childLanes|=d),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(M=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,M&&l!==null&&(M=31-xt(d),a=C.hiddenUpdates,g=a[M],g===null?a[M]=[l]:g.push(l),l.lane=d|536870912),C):null}function Tc(a){if(50<Tr)throw Tr=0,Xl=null,Error(n(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Po={};function Yp(a,l,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(a,l,d,g){return new Yp(a,l,d,g)}function Ku(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ri(a,l){var d=a.alternate;return d===null?(d=Js(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function qp(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function es(a,l,d,g,M,C){var F=0;if(g=a,typeof a=="function")Ku(a)&&(F=1);else if(typeof a=="string")F=fL(a,d,oe.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case L:return a=Js(31,d,l,M),a.elementType=L,a.lanes=C,a;case S:return Fo(d.children,M,C,l);case T:F=8,M|=24;break;case E:return a=Js(12,d,l,M|2),a.elementType=E,a.lanes=C,a;case O:return a=Js(13,d,l,M),a.elementType=O,a.lanes=C,a;case I:return a=Js(19,d,l,M),a.elementType=I,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:case B:F=10;break e;case w:F=9;break e;case D:F=11;break e;case z:F=14;break e;case P:F=16,g=null;break e}F=29,d=Error(n(130,a===null?"null":typeof a,"")),g=null}return l=Js(F,d,l,M),l.elementType=a,l.type=g,l.lanes=C,l}function Fo(a,l,d,g){return a=Js(7,a,g,l),a.lanes=d,a}function Wu(a,l,d){return a=Js(6,a,null,l),a.lanes=d,a}function Nh(a,l,d){return l=Js(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var Cc=[],Ks=0,Zu=null,Rc=0,us=[],aa=0,Ho=null,dr=1,pr="";function Zr(a,l){Cc[Ks++]=Rc,Cc[Ks++]=Zu,Zu=a,Rc=l}function Oh(a,l,d){us[aa++]=dr,us[aa++]=pr,us[aa++]=Ho,Ho=a;var g=dr;a=pr;var M=32-xt(g)-1;g&=~(1<<M),d+=1;var C=32-xt(l)+M;if(30<C){var F=M-M%5;C=(g&(1<<F)-1).toString(32),g>>=F,M-=F,dr=1<<32-xt(l)+M|d<<M|g,pr=C+a}else dr=1<<C|d<<M|g,pr=a}function Jp(a){a.return!==null&&(Zr(a,1),Oh(a,1,0))}function Kp(a){for(;a===Zu;)Zu=Cc[--Ks],Cc[Ks]=null,Rc=Cc[--Ks],Cc[Ks]=null;for(;a===Ho;)Ho=us[--aa],us[aa]=null,pr=us[--aa],us[aa]=null,dr=us[--aa],us[aa]=null}var Us=null,mi=null,In=!1,Ra=null,ra=!1,Ih=Error(n(519));function zo(a){var l=Error(n(418,""));throw Cl(cs(l,a)),Ih}function Yv(a){var l=a.stateNode,d=a.type,g=a.memoizedProps;switch(l[_i]=a,l[Ti]=g,d){case"dialog":Cn("cancel",l),Cn("close",l);break;case"iframe":case"object":case"embed":Cn("load",l);break;case"video":case"audio":for(d=0;d<Tm.length;d++)Cn(Tm[d],l);break;case"source":Cn("error",l);break;case"img":case"image":case"link":Cn("error",l),Cn("load",l);break;case"details":Cn("toggle",l);break;case"input":Cn("invalid",l),pn(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Yn(l);break;case"select":Cn("invalid",l);break;case"textarea":Cn("invalid",l),Qi(l,g.value,g.defaultValue,g.children),Yn(l)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||D1(l.textContent,d)?(g.popover!=null&&(Cn("beforetoggle",l),Cn("toggle",l)),g.onScroll!=null&&Cn("scroll",l),g.onScrollEnd!=null&&Cn("scrollend",l),g.onClick!=null&&(l.onclick=H0),l=!0):l=!1,l||zo(a)}function Wp(a){for(Us=a.return;Us;)switch(Us.tag){case 5:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:Us=Us.return}}function Ka(a){if(a!==Us)return!1;if(!In)return Wp(a),In=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||BA(a.type,a.memoizedProps)),d=!d),d&&mi&&zo(a),Wp(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(l===0){mi=fo(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;a=a.nextSibling}mi=null}}else l===27?(l=mi,$c(a.type)?(a=NA,NA=null,mi=a):mi=l):mi=Us?fo(a.stateNode.nextSibling):null;return!0}function wc(){mi=Us=null,In=!1}function Vn(){var a=Ra;return a!==null&&(Kt===null?Kt=a:Kt.push.apply(Kt,a),Ra=null),a}function Cl(a){Ra===null?Ra=[a]:Ra.push(a)}var Zp=re(null),Go=null,Qr=null;function Vo(a,l,d){Ce(Zp,l._currentValue),l._currentValue=d}function $r(a){a._currentValue=Zp.current,Ae(Zp)}function Qp(a,l,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===d)break;a=a.return}}function Qu(a,l,d,g){var M=a.child;for(M!==null&&(M.return=a);M!==null;){var C=M.dependencies;if(C!==null){var F=M.child;C=C.firstContext;e:for(;C!==null;){var Y=C;C=M;for(var ie=0;ie<l.length;ie++)if(Y.context===l[ie]){C.lanes|=d,Y=C.alternate,Y!==null&&(Y.lanes|=d),Qp(C.return,d,a),g||(F=null);break e}C=Y.next}}else if(M.tag===18){if(F=M.return,F===null)throw Error(n(341));F.lanes|=d,C=F.alternate,C!==null&&(C.lanes|=d),Qp(F,d,a),F=null}else F=M.child;if(F!==null)F.return=M;else for(F=M;F!==null;){if(F===a){F=null;break}if(M=F.sibling,M!==null){M.return=F.return,F=M;break}F=F.return}M=F}}function wa(a,l,d,g){a=null;for(var M=l,C=!1;M!==null;){if(!C){if((M.flags&524288)!==0)C=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var F=M.alternate;if(F===null)throw Error(n(387));if(F=F.memoizedProps,F!==null){var Y=M.type;js(M.pendingProps.value,F.value)||(a!==null?a.push(Y):a=[Y])}}else if(M===$e.current){if(F=M.alternate,F===null)throw Error(n(387));F.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(a!==null?a.push(Um):a=[Um])}M=M.return}a!==null&&Qu(l,a,d,g),l.flags|=262144}function $u(a){for(a=a.firstContext;a!==null;){if(!js(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function mr(a){Go=a,Qr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function xi(a){return Ph(Go,a)}function ef(a,l){return Go===null&&mr(a),Ph(a,l)}function Ph(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Qr===null){if(a===null)throw Error(n(308));Qr=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Qr=Qr.next=l;return d}var $p=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,g){a.push(g)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},fA=i.unstable_scheduleCallback,qv=i.unstable_NormalPriority,Fi={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fh(){return{controller:new $p,data:new Map,refCount:0}}function Bc(a){a.refCount--,a.refCount===0&&fA(qv,function(){a.controller.abort()})}var Dc=null,tf=0,un=0,Uc=null;function oa(a,l){if(Dc===null){var d=Dc=[];tf=0,un=AA(),Uc={status:"pending",value:void 0,then:function(g){d.push(g)}}}return tf++,l.then(Hh,Hh),l}function Hh(){if(--tf===0&&Dc!==null){Uc!==null&&(Uc.status="fulfilled");var a=Dc;Dc=null,un=0,Uc=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function hA(a,l){var d=[],g={status:"pending",value:null,reason:null,then:function(M){d.push(M)}};return a.then(function(){g.status="fulfilled",g.value=l;for(var M=0;M<d.length;M++)(0,d[M])(l)},function(M){for(g.status="rejected",g.reason=M,M=0;M<d.length;M++)(0,d[M])(void 0)}),g}var nf=H.S;H.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&oa(a,l),nf!==null&&nf(a,l)};var Ba=re(null);function ko(){var a=Ba.current;return a!==null?a:ln.pooledCache}function sf(a,l){l===null?Ce(Ba,Ba.current):Ce(Ba,l.pool)}function zh(){var a=ko();return a===null?null:{parent:Fi._currentValue,pool:a}}var af=Error(n(460)),em=Error(n(474)),Wa=Error(n(542)),rf={then:function(){}};function Gh(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Lc(){}function Vh(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(Lc,Lc),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Jv(a),a;default:if(typeof l.status=="string")l.then(Lc,Lc);else{if(a=ln,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=l,a.status="pending",a.then(function(g){if(l.status==="pending"){var M=l;M.status="fulfilled",M.value=g}},function(g){if(l.status==="pending"){var M=l;M.status="rejected",M.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Jv(a),a}throw Da=l,af}}var Da=null;function tm(){if(Da===null)throw Error(n(459));var a=Da;return Da=null,a}function Jv(a){if(a===af||a===Wa)throw Error(n(483))}var eo=!1;function nm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function en(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function gr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function to(a,l,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(kn&2)!==0){var M=g.pending;return M===null?l.next=l:(l.next=M.next,M.next=l),g.pending=l,l=Tc(a),jp(a,null,d),l}return Io(a,g,l,d),Tc(a)}function Rl(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Ft(a,d)}}function Nc(a,l){var d=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var M=null,C=null;if(d=d.firstBaseUpdate,d!==null){do{var F={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};C===null?M=C=F:C=C.next=F,d=d.next}while(d!==null);C===null?M=C=l:C=C.next=l}else M=C=l;d={baseState:g.baseState,firstBaseUpdate:M,lastBaseUpdate:C,shared:g.shared,callbacks:g.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var im=!1;function of(){if(im){var a=Uc;if(a!==null)throw a}}function Oc(a,l,d,g){im=!1;var M=a.updateQueue;eo=!1;var C=M.firstBaseUpdate,F=M.lastBaseUpdate,Y=M.shared.pending;if(Y!==null){M.shared.pending=null;var ie=Y,Re=ie.next;ie.next=null,F===null?C=Re:F.next=Re,F=ie;var Je=a.alternate;Je!==null&&(Je=Je.updateQueue,Y=Je.lastBaseUpdate,Y!==F&&(Y===null?Je.firstBaseUpdate=Re:Y.next=Re,Je.lastBaseUpdate=ie))}if(C!==null){var nt=M.baseState;F=0,Je=Re=ie=null,Y=C;do{var Le=Y.lane&-536870913,Ie=Le!==Y.lane;if(Ie?(Xt&Le)===Le:(g&Le)===Le){Le!==0&&Le===un&&(im=!0),Je!==null&&(Je=Je.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var nn=a,Zt=Y;Le=l;var ui=d;switch(Zt.tag){case 1:if(nn=Zt.payload,typeof nn=="function"){nt=nn.call(ui,nt,Le);break e}nt=nn;break e;case 3:nn.flags=nn.flags&-65537|128;case 0:if(nn=Zt.payload,Le=typeof nn=="function"?nn.call(ui,nt,Le):nn,Le==null)break e;nt=m({},nt,Le);break e;case 2:eo=!0}}Le=Y.callback,Le!==null&&(a.flags|=64,Ie&&(a.flags|=8192),Ie=M.callbacks,Ie===null?M.callbacks=[Le]:Ie.push(Le))}else Ie={lane:Le,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Je===null?(Re=Je=Ie,ie=nt):Je=Je.next=Ie,F|=Le;if(Y=Y.next,Y===null){if(Y=M.shared.pending,Y===null)break;Ie=Y,Y=Ie.next,Ie.next=null,M.lastBaseUpdate=Ie,M.shared.pending=null}}while(!0);Je===null&&(ie=nt),M.baseState=ie,M.firstBaseUpdate=Re,M.lastBaseUpdate=Je,C===null&&(M.shared.lanes=0),sr|=F,a.lanes=F,a.memoizedState=nt}}function Ic(a,l){if(typeof a!="function")throw Error(n(191,a));a.call(l)}function Kv(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)Ic(d[a],l)}var Pc=re(null),kh=re(0);function Wv(a,l){a=Pa,Ce(kh,a),Ce(Pc,l),Pa=a|l.baseLanes}function sm(){Ce(kh,Pa),Ce(Pc,Pc.current)}function lf(){Pa=kh.current,Ae(Pc),Ae(kh)}var no=0,fn=null,qn=null,Hi=null,Xh=!1,Xo=!1,Ls=!1,Xi=0,Ua=0,fs=null,Zv=0;function wi(){throw Error(n(321))}function _s(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!js(a[d],l[d]))return!1;return!0}function io(a,l,d,g,M,C){return no=C,fn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=a===null||a.memoizedState===null?$h:xm,Ls=!1,C=d(g,M),Ls=!1,Xo&&(C=$v(l,d,g,M)),Qv(a),C}function Qv(a){H.H=ff;var l=qn!==null&&qn.next!==null;if(no=0,Hi=qn=fn=null,Xh=!1,Ua=0,fs=null,l)throw Error(n(300));a===null||ts||(a=a.dependencies,a!==null&&$u(a)&&(ts=!0))}function $v(a,l,d,g){fn=a;var M=0;do{if(Xo&&(fs=null),Ua=0,Xo=!1,25<=M)throw Error(n(301));if(M+=1,Hi=qn=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}H.H=E0,C=l(d,g)}while(Xo);return C}function dA(){var a=H.H,l=a.useState()[0];return l=typeof l.then=="function"?Za(l):l,a=a.useState()[0],(qn!==null?qn.memoizedState:null)!==a&&(fn.flags|=1024),l}function am(){var a=Xi!==0;return Xi=0,a}function jh(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function rm(a){if(Xh){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Xh=!1}no=0,Hi=qn=fn=null,Xo=!1,Ua=Xi=0,fs=null}function Ns(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hi===null?fn.memoizedState=Hi=a:Hi=Hi.next=a,Hi}function zi(){if(qn===null){var a=fn.alternate;a=a!==null?a.memoizedState:null}else a=qn.next;var l=Hi===null?fn.memoizedState:Hi.next;if(l!==null)Hi=l,qn=a;else{if(a===null)throw fn.alternate===null?Error(n(467)):Error(n(310));qn=a,a={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},Hi===null?fn.memoizedState=Hi=a:Hi=Hi.next=a}return Hi}function jo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Za(a){var l=Ua;return Ua+=1,fs===null&&(fs=[]),a=Vh(fs,a,l),l=fn,(Hi===null?l.memoizedState:Hi.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?$h:xm),a}function Yh(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Za(a);if(a.$$typeof===B)return xi(a)}throw Error(n(438,String(a)))}function om(a){var l=null,d=fn.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=fn.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(M){return M.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=jo(),fn.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),g=0;g<a;g++)d[g]=N;return l.index++,d}function so(a,l){return typeof l=="function"?l(a):l}function Yo(a){var l=zi();return lm(l,qn,a)}function lm(a,l,d){var g=a.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=d;var M=a.baseQueue,C=g.pending;if(C!==null){if(M!==null){var F=M.next;M.next=C.next,C.next=F}l.baseQueue=M=C,g.pending=null}if(C=a.baseState,M===null)a.memoizedState=C;else{l=M.next;var Y=F=null,ie=null,Re=l,Je=!1;do{var nt=Re.lane&-536870913;if(nt!==Re.lane?(Xt&nt)===nt:(no&nt)===nt){var Le=Re.revertLane;if(Le===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),nt===un&&(Je=!0);else if((no&Le)===Le){Re=Re.next,Le===un&&(Je=!0);continue}else nt={lane:0,revertLane:Re.revertLane,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},ie===null?(Y=ie=nt,F=C):ie=ie.next=nt,fn.lanes|=Le,sr|=Le;nt=Re.action,Ls&&d(C,nt),C=Re.hasEagerState?Re.eagerState:d(C,nt)}else Le={lane:nt,revertLane:Re.revertLane,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},ie===null?(Y=ie=Le,F=C):ie=ie.next=Le,fn.lanes|=nt,sr|=nt;Re=Re.next}while(Re!==null&&Re!==l);if(ie===null?F=C:ie.next=Y,!js(C,a.memoizedState)&&(ts=!0,Je&&(d=Uc,d!==null)))throw d;a.memoizedState=C,a.baseState=F,a.baseQueue=ie,g.lastRenderedState=C}return M===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function cm(a){var l=zi(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=a;var g=d.dispatch,M=d.pending,C=l.memoizedState;if(M!==null){d.pending=null;var F=M=M.next;do C=a(C,F.action),F=F.next;while(F!==M);js(C,l.memoizedState)||(ts=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),d.lastRenderedState=C}return[C,g]}function e0(a,l,d){var g=fn,M=zi(),C=In;if(C){if(d===void 0)throw Error(n(407));d=d()}else d=l();var F=!js((qn||M).memoizedState,d);F&&(M.memoizedState=d,ts=!0),M=M.queue;var Y=n0.bind(null,g,M,a);if(zc(2048,8,Y,[a]),M.getSnapshot!==l||F||Hi!==null&&Hi.memoizedState.tag&1){if(g.flags|=2048,Hc(9,cf(),t0.bind(null,g,M,d,l),null),ln===null)throw Error(n(349));C||(no&124)!==0||Fc(g,l,d)}return d}function Fc(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=fn.updateQueue,l===null?(l=jo(),fn.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function t0(a,l,d,g){l.value=d,l.getSnapshot=g,i0(l)&&s0(a)}function n0(a,l,d){return d(function(){i0(l)&&s0(a)})}function i0(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!js(a,d)}catch{return!0}}function s0(a){var l=Wr(a,2);l!==null&&Ps(l,a,2)}function um(a){var l=Ns();if(typeof a=="function"){var d=a;if(a=d(),Ls){ut(!0);try{d()}finally{ut(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:a},l}function a0(a,l,d,g){return a.baseState=d,lm(a,qn,typeof g=="function"?g:so)}function pA(a,l,d,g,M){if(Qh(a))throw Error(n(485));if(a=l.action,a!==null){var C={payload:M,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){C.listeners.push(F)}};H.T!==null?d(!0):C.isTransition=!1,g(C),d=l.pending,d===null?(C.next=l.pending=C,r0(l,C)):(C.next=d.next,l.pending=d.next=C)}}function r0(a,l){var d=l.action,g=l.payload,M=a.state;if(l.isTransition){var C=H.T,F={};H.T=F;try{var Y=d(M,g),ie=H.S;ie!==null&&ie(F,Y),o0(a,l,Y)}catch(Re){fm(a,l,Re)}finally{H.T=C}}else try{C=d(M,g),o0(a,l,C)}catch(Re){fm(a,l,Re)}}function o0(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){l0(a,l,g)},function(g){return fm(a,l,g)}):l0(a,l,d)}function l0(a,l,d){l.status="fulfilled",l.value=d,c0(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,r0(a,d)))}function fm(a,l,d){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,c0(l),l=l.next;while(l!==g)}a.action=null}function c0(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function hm(a,l){return l}function u0(a,l){if(In){var d=ln.formState;if(d!==null){e:{var g=fn;if(In){if(mi){t:{for(var M=mi,C=ra;M.nodeType!==8;){if(!C){M=null;break t}if(M=fo(M.nextSibling),M===null){M=null;break t}}C=M.data,M=C==="F!"||C==="F"?M:null}if(M){mi=fo(M.nextSibling),g=M.data==="F!";break e}}zo(g)}g=!1}g&&(l=d[0])}}return d=Ns(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hm,lastRenderedState:l},d.queue=g,d=M0.bind(null,fn,g),g.dispatch=d,g=um(!1),C=Zh.bind(null,fn,!1,g.queue),g=Ns(),M={state:l,dispatch:null,action:a,pending:null},g.queue=M,d=pA.bind(null,fn,M,C,d),M.dispatch=d,g.memoizedState=a,[l,d,!1]}function f0(a){var l=zi();return h0(l,qn,a)}function h0(a,l,d){if(l=lm(a,l,hm)[0],a=Yo(so)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Za(l)}catch(F){throw F===af?Wa:F}else g=l;l=zi();var M=l.queue,C=M.dispatch;return d!==l.memoizedState&&(fn.flags|=2048,Hc(9,cf(),mA.bind(null,M,d),null)),[g,C,a]}function mA(a,l){a.action=l}function d0(a){var l=zi(),d=qn;if(d!==null)return h0(l,d,a);zi(),l=l.memoizedState,d=zi();var g=d.queue.dispatch;return d.memoizedState=a,[l,g,!1]}function Hc(a,l,d,g){return a={tag:a,create:d,deps:g,inst:l,next:null},l=fn.updateQueue,l===null&&(l=jo(),fn.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,l.lastEffect=a),a}function cf(){return{destroy:void 0,resource:void 0}}function dm(){return zi().memoizedState}function qh(a,l,d,g){var M=Ns();g=g===void 0?null:g,fn.flags|=a,M.memoizedState=Hc(1|l,cf(),d,g)}function zc(a,l,d,g){var M=zi();g=g===void 0?null:g;var C=M.memoizedState.inst;qn!==null&&g!==null&&_s(g,qn.memoizedState.deps)?M.memoizedState=Hc(l,C,d,g):(fn.flags|=a,M.memoizedState=Hc(1|l,C,d,g))}function pm(a,l){qh(8390656,8,a,l)}function mm(a,l){zc(2048,8,a,l)}function Jh(a,l){return zc(4,2,a,l)}function Kh(a,l){return zc(4,4,a,l)}function p0(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function m0(a,l,d){d=d!=null?d.concat([a]):null,zc(4,4,p0.bind(null,l,a),d)}function gm(){}function g0(a,l){var d=zi();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&_s(l,g[1])?g[0]:(d.memoizedState=[a,l],a)}function vm(a,l){var d=zi();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&_s(l,g[1]))return g[0];if(g=a(),Ls){ut(!0);try{a()}finally{ut(!1)}}return d.memoizedState=[g,l],g}function Wh(a,l,d){return d===void 0||(no&1073741824)!==0?a.memoizedState=l:(a.memoizedState=d,a=ud(),fn.lanes|=a,sr|=a,d)}function v0(a,l,d,g){return js(d,l)?d:Pc.current!==null?(a=Wh(a,d,g),js(a,l)||(ts=!0),a):(no&42)===0?(ts=!0,a.memoizedState=d):(a=ud(),fn.lanes|=a,sr|=a,l)}function y0(a,l,d,g,M){var C=W.p;W.p=C!==0&&8>C?C:8;var F=H.T,Y={};H.T=Y,Zh(a,!1,l,d);try{var ie=M(),Re=H.S;if(Re!==null&&Re(Y,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Je=hA(ie,g);uf(a,l,Je,Mi(a))}else uf(a,l,g,Mi(a))}catch(nt){uf(a,l,{then:function(){},status:"rejected",reason:nt},Mi())}finally{W.p=C,H.T=F}}function gA(){}function ym(a,l,d,g){if(a.tag!==5)throw Error(n(476));var M=_0(a).queue;y0(a,M,l,Q,d===null?gA:function(){return x0(a),d(g)})}function _0(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:Q},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function x0(a){var l=_0(a).next.queue;uf(a,l,{},Mi())}function _m(){return xi(Um)}function A0(){return zi().memoizedState}function S0(){return zi().memoizedState}function vA(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=Mi();a=gr(d);var g=to(l,a,d);g!==null&&(Ps(g,l,d),Rl(g,l,d)),l={cache:Fh()},a.payload=l;return}l=l.return}}function yA(a,l,d){var g=Mi();d={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Qh(a)?b0(l,d):(d=Lh(a,l,d,g),d!==null&&(Ps(d,a,g),la(d,l,g)))}function M0(a,l,d){var g=Mi();uf(a,l,d,g)}function uf(a,l,d,g){var M={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Qh(a))b0(l,M);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=l.lastRenderedReducer,C!==null))try{var F=l.lastRenderedState,Y=C(F,d);if(M.hasEagerState=!0,M.eagerState=Y,js(Y,F))return Io(a,l,M,0),ln===null&&Ju(),!1}catch{}finally{}if(d=Lh(a,l,M,g),d!==null)return Ps(d,a,g),la(d,l,g),!0}return!1}function Zh(a,l,d,g){if(g={lane:2,revertLane:AA(),action:g,hasEagerState:!1,eagerState:null,next:null},Qh(a)){if(l)throw Error(n(479))}else l=Lh(a,d,g,2),l!==null&&Ps(l,a,2)}function Qh(a){var l=a.alternate;return a===fn||l!==null&&l===fn}function b0(a,l){Xo=Xh=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function la(a,l,d){if((d&4194048)!==0){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Ft(a,d)}}var ff={readContext:xi,use:Yh,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useLayoutEffect:wi,useInsertionEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useSyncExternalStore:wi,useId:wi,useHostTransitionStatus:wi,useFormState:wi,useActionState:wi,useOptimistic:wi,useMemoCache:wi,useCacheRefresh:wi},$h={readContext:xi,use:Yh,useCallback:function(a,l){return Ns().memoizedState=[a,l===void 0?null:l],a},useContext:xi,useEffect:pm,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,qh(4194308,4,p0.bind(null,l,a),d)},useLayoutEffect:function(a,l){return qh(4194308,4,a,l)},useInsertionEffect:function(a,l){qh(4,2,a,l)},useMemo:function(a,l){var d=Ns();l=l===void 0?null:l;var g=a();if(Ls){ut(!0);try{a()}finally{ut(!1)}}return d.memoizedState=[g,l],g},useReducer:function(a,l,d){var g=Ns();if(d!==void 0){var M=d(l);if(Ls){ut(!0);try{d(l)}finally{ut(!1)}}}else M=l;return g.memoizedState=g.baseState=M,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:M},g.queue=a,a=a.dispatch=yA.bind(null,fn,a),[g.memoizedState,a]},useRef:function(a){var l=Ns();return a={current:a},l.memoizedState=a},useState:function(a){a=um(a);var l=a.queue,d=M0.bind(null,fn,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:gm,useDeferredValue:function(a,l){var d=Ns();return Wh(d,a,l)},useTransition:function(){var a=um(!1);return a=y0.bind(null,fn,a.queue,!0,!1),Ns().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var g=fn,M=Ns();if(In){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),ln===null)throw Error(n(349));(Xt&124)!==0||Fc(g,l,d)}M.memoizedState=d;var C={value:d,getSnapshot:l};return M.queue=C,pm(n0.bind(null,g,C,a),[a]),g.flags|=2048,Hc(9,cf(),t0.bind(null,g,C,d,l),null),d},useId:function(){var a=Ns(),l=ln.identifierPrefix;if(In){var d=pr,g=dr;d=(g&~(1<<32-xt(g)-1)).toString(32)+d,l="«"+l+"R"+d,d=Xi++,0<d&&(l+="H"+d.toString(32)),l+="»"}else d=Zv++,l="«"+l+"r"+d.toString(32)+"»";return a.memoizedState=l},useHostTransitionStatus:_m,useFormState:u0,useActionState:u0,useOptimistic:function(a){var l=Ns();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Zh.bind(null,fn,!0,d),d.dispatch=l,[a,l]},useMemoCache:om,useCacheRefresh:function(){return Ns().memoizedState=vA.bind(null,fn)}},xm={readContext:xi,use:Yh,useCallback:g0,useContext:xi,useEffect:mm,useImperativeHandle:m0,useInsertionEffect:Jh,useLayoutEffect:Kh,useMemo:vm,useReducer:Yo,useRef:dm,useState:function(){return Yo(so)},useDebugValue:gm,useDeferredValue:function(a,l){var d=zi();return v0(d,qn.memoizedState,a,l)},useTransition:function(){var a=Yo(so)[0],l=zi().memoizedState;return[typeof a=="boolean"?a:Za(a),l]},useSyncExternalStore:e0,useId:A0,useHostTransitionStatus:_m,useFormState:f0,useActionState:f0,useOptimistic:function(a,l){var d=zi();return a0(d,qn,a,l)},useMemoCache:om,useCacheRefresh:S0},E0={readContext:xi,use:Yh,useCallback:g0,useContext:xi,useEffect:mm,useImperativeHandle:m0,useInsertionEffect:Jh,useLayoutEffect:Kh,useMemo:vm,useReducer:cm,useRef:dm,useState:function(){return cm(so)},useDebugValue:gm,useDeferredValue:function(a,l){var d=zi();return qn===null?Wh(d,a,l):v0(d,qn.memoizedState,a,l)},useTransition:function(){var a=cm(so)[0],l=zi().memoizedState;return[typeof a=="boolean"?a:Za(a),l]},useSyncExternalStore:e0,useId:A0,useHostTransitionStatus:_m,useFormState:d0,useActionState:d0,useOptimistic:function(a,l){var d=zi();return qn!==null?a0(d,qn,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:om,useCacheRefresh:S0},wl=null,hf=0;function df(a){var l=hf;return hf+=1,wl===null&&(wl=[]),Vh(wl,a,l)}function Gc(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function ed(a,l){throw l.$$typeof===v?Error(n(525)):(a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function T0(a){var l=a._init;return l(a._payload)}function C0(a){function l(Se,ye){if(a){var Ee=Se.deletions;Ee===null?(Se.deletions=[ye],Se.flags|=16):Ee.push(ye)}}function d(Se,ye){if(!a)return null;for(;ye!==null;)l(Se,ye),ye=ye.sibling;return null}function g(Se){for(var ye=new Map;Se!==null;)Se.key!==null?ye.set(Se.key,Se):ye.set(Se.index,Se),Se=Se.sibling;return ye}function M(Se,ye){return Se=Ri(Se,ye),Se.index=0,Se.sibling=null,Se}function C(Se,ye,Ee){return Se.index=Ee,a?(Ee=Se.alternate,Ee!==null?(Ee=Ee.index,Ee<ye?(Se.flags|=67108866,ye):Ee):(Se.flags|=67108866,ye)):(Se.flags|=1048576,ye)}function F(Se){return a&&Se.alternate===null&&(Se.flags|=67108866),Se}function Y(Se,ye,Ee,et){return ye===null||ye.tag!==6?(ye=Wu(Ee,Se.mode,et),ye.return=Se,ye):(ye=M(ye,Ee),ye.return=Se,ye)}function ie(Se,ye,Ee,et){var Ot=Ee.type;return Ot===S?Je(Se,ye,Ee.props.children,et,Ee.key):ye!==null&&(ye.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===P&&T0(Ot)===ye.type)?(ye=M(ye,Ee.props),Gc(ye,Ee),ye.return=Se,ye):(ye=es(Ee.type,Ee.key,Ee.props,null,Se.mode,et),Gc(ye,Ee),ye.return=Se,ye)}function Re(Se,ye,Ee,et){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ee.containerInfo||ye.stateNode.implementation!==Ee.implementation?(ye=Nh(Ee,Se.mode,et),ye.return=Se,ye):(ye=M(ye,Ee.children||[]),ye.return=Se,ye)}function Je(Se,ye,Ee,et,Ot){return ye===null||ye.tag!==7?(ye=Fo(Ee,Se.mode,et,Ot),ye.return=Se,ye):(ye=M(ye,Ee),ye.return=Se,ye)}function nt(Se,ye,Ee){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Wu(""+ye,Se.mode,Ee),ye.return=Se,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case y:return Ee=es(ye.type,ye.key,ye.props,null,Se.mode,Ee),Gc(Ee,ye),Ee.return=Se,Ee;case x:return ye=Nh(ye,Se.mode,Ee),ye.return=Se,ye;case P:var et=ye._init;return ye=et(ye._payload),nt(Se,ye,Ee)}if(_e(ye)||ce(ye))return ye=Fo(ye,Se.mode,Ee,null),ye.return=Se,ye;if(typeof ye.then=="function")return nt(Se,df(ye),Ee);if(ye.$$typeof===B)return nt(Se,ef(Se,ye),Ee);ed(Se,ye)}return null}function Le(Se,ye,Ee,et){var Ot=ye!==null?ye.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ot!==null?null:Y(Se,ye,""+Ee,et);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case y:return Ee.key===Ot?ie(Se,ye,Ee,et):null;case x:return Ee.key===Ot?Re(Se,ye,Ee,et):null;case P:return Ot=Ee._init,Ee=Ot(Ee._payload),Le(Se,ye,Ee,et)}if(_e(Ee)||ce(Ee))return Ot!==null?null:Je(Se,ye,Ee,et,null);if(typeof Ee.then=="function")return Le(Se,ye,df(Ee),et);if(Ee.$$typeof===B)return Le(Se,ye,ef(Se,Ee),et);ed(Se,Ee)}return null}function Ie(Se,ye,Ee,et,Ot){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Se=Se.get(Ee)||null,Y(ye,Se,""+et,Ot);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case y:return Se=Se.get(et.key===null?Ee:et.key)||null,ie(ye,Se,et,Ot);case x:return Se=Se.get(et.key===null?Ee:et.key)||null,Re(ye,Se,et,Ot);case P:var En=et._init;return et=En(et._payload),Ie(Se,ye,Ee,et,Ot)}if(_e(et)||ce(et))return Se=Se.get(Ee)||null,Je(ye,Se,et,Ot,null);if(typeof et.then=="function")return Ie(Se,ye,Ee,df(et),Ot);if(et.$$typeof===B)return Ie(Se,ye,Ee,ef(ye,et),Ot);ed(ye,et)}return null}function nn(Se,ye,Ee,et){for(var Ot=null,En=null,Vt=ye,Qt=ye=0,Ss=null;Vt!==null&&Qt<Ee.length;Qt++){Vt.index>Qt?(Ss=Vt,Vt=null):Ss=Vt.sibling;var jn=Le(Se,Vt,Ee[Qt],et);if(jn===null){Vt===null&&(Vt=Ss);break}a&&Vt&&jn.alternate===null&&l(Se,Vt),ye=C(jn,ye,Qt),En===null?Ot=jn:En.sibling=jn,En=jn,Vt=Ss}if(Qt===Ee.length)return d(Se,Vt),In&&Zr(Se,Qt),Ot;if(Vt===null){for(;Qt<Ee.length;Qt++)Vt=nt(Se,Ee[Qt],et),Vt!==null&&(ye=C(Vt,ye,Qt),En===null?Ot=Vt:En.sibling=Vt,En=Vt);return In&&Zr(Se,Qt),Ot}for(Vt=g(Vt);Qt<Ee.length;Qt++)Ss=Ie(Vt,Se,Qt,Ee[Qt],et),Ss!==null&&(a&&Ss.alternate!==null&&Vt.delete(Ss.key===null?Qt:Ss.key),ye=C(Ss,ye,Qt),En===null?Ot=Ss:En.sibling=Ss,En=Ss);return a&&Vt.forEach(function(su){return l(Se,su)}),In&&Zr(Se,Qt),Ot}function Zt(Se,ye,Ee,et){if(Ee==null)throw Error(n(151));for(var Ot=null,En=null,Vt=ye,Qt=ye=0,Ss=null,jn=Ee.next();Vt!==null&&!jn.done;Qt++,jn=Ee.next()){Vt.index>Qt?(Ss=Vt,Vt=null):Ss=Vt.sibling;var su=Le(Se,Vt,jn.value,et);if(su===null){Vt===null&&(Vt=Ss);break}a&&Vt&&su.alternate===null&&l(Se,Vt),ye=C(su,ye,Qt),En===null?Ot=su:En.sibling=su,En=su,Vt=Ss}if(jn.done)return d(Se,Vt),In&&Zr(Se,Qt),Ot;if(Vt===null){for(;!jn.done;Qt++,jn=Ee.next())jn=nt(Se,jn.value,et),jn!==null&&(ye=C(jn,ye,Qt),En===null?Ot=jn:En.sibling=jn,En=jn);return In&&Zr(Se,Qt),Ot}for(Vt=g(Vt);!jn.done;Qt++,jn=Ee.next())jn=Ie(Vt,Se,Qt,jn.value,et),jn!==null&&(a&&jn.alternate!==null&&Vt.delete(jn.key===null?Qt:jn.key),ye=C(jn,ye,Qt),En===null?Ot=jn:En.sibling=jn,En=jn);return a&&Vt.forEach(function(ML){return l(Se,ML)}),In&&Zr(Se,Qt),Ot}function ui(Se,ye,Ee,et){if(typeof Ee=="object"&&Ee!==null&&Ee.type===S&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case y:e:{for(var Ot=Ee.key;ye!==null;){if(ye.key===Ot){if(Ot=Ee.type,Ot===S){if(ye.tag===7){d(Se,ye.sibling),et=M(ye,Ee.props.children),et.return=Se,Se=et;break e}}else if(ye.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===P&&T0(Ot)===ye.type){d(Se,ye.sibling),et=M(ye,Ee.props),Gc(et,Ee),et.return=Se,Se=et;break e}d(Se,ye);break}else l(Se,ye);ye=ye.sibling}Ee.type===S?(et=Fo(Ee.props.children,Se.mode,et,Ee.key),et.return=Se,Se=et):(et=es(Ee.type,Ee.key,Ee.props,null,Se.mode,et),Gc(et,Ee),et.return=Se,Se=et)}return F(Se);case x:e:{for(Ot=Ee.key;ye!==null;){if(ye.key===Ot)if(ye.tag===4&&ye.stateNode.containerInfo===Ee.containerInfo&&ye.stateNode.implementation===Ee.implementation){d(Se,ye.sibling),et=M(ye,Ee.children||[]),et.return=Se,Se=et;break e}else{d(Se,ye);break}else l(Se,ye);ye=ye.sibling}et=Nh(Ee,Se.mode,et),et.return=Se,Se=et}return F(Se);case P:return Ot=Ee._init,Ee=Ot(Ee._payload),ui(Se,ye,Ee,et)}if(_e(Ee))return nn(Se,ye,Ee,et);if(ce(Ee)){if(Ot=ce(Ee),typeof Ot!="function")throw Error(n(150));return Ee=Ot.call(Ee),Zt(Se,ye,Ee,et)}if(typeof Ee.then=="function")return ui(Se,ye,df(Ee),et);if(Ee.$$typeof===B)return ui(Se,ye,ef(Se,Ee),et);ed(Se,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,ye!==null&&ye.tag===6?(d(Se,ye.sibling),et=M(ye,Ee),et.return=Se,Se=et):(d(Se,ye),et=Wu(Ee,Se.mode,et),et.return=Se,Se=et),F(Se)):d(Se,ye)}return function(Se,ye,Ee,et){try{hf=0;var Ot=ui(Se,ye,Ee,et);return wl=null,Ot}catch(Vt){if(Vt===af||Vt===Wa)throw Vt;var En=Js(29,Vt,null,Se.mode);return En.lanes=et,En.return=Se,En}finally{}}}var Bl=C0(!0),R0=C0(!1),$n=re(null),Qa=null;function qo(a){var l=a.alternate;Ce(Bi,Bi.current&1),Ce($n,a),Qa===null&&(l===null||Pc.current!==null||l.memoizedState!==null)&&(Qa=a)}function w0(a){if(a.tag===22){if(Ce(Bi,Bi.current),Ce($n,a),Qa===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(Qa=a)}}else Jo()}function Jo(){Ce(Bi,Bi.current),Ce($n,$n.current)}function vr(a){Ae($n),Qa===a&&(Qa=null),Ae(Bi)}var Bi=re(0);function ao(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||LA(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Ko(a,l,d,g){l=a.memoizedState,d=d(g,l),d=d==null?l:m({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Os={enqueueSetState:function(a,l,d){a=a._reactInternals;var g=Mi(),M=gr(g);M.payload=l,d!=null&&(M.callback=d),l=to(a,M,g),l!==null&&(Ps(l,a,g),Rl(l,a,g))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var g=Mi(),M=gr(g);M.tag=1,M.payload=l,d!=null&&(M.callback=d),l=to(a,M,g),l!==null&&(Ps(l,a,g),Rl(l,a,g))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=Mi(),g=gr(d);g.tag=2,l!=null&&(g.callback=l),l=to(a,g,d),l!==null&&(Ps(l,a,d),Rl(l,a,d))}};function B0(a,l,d,g,M,C,F){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,C,F):l.prototype&&l.prototype.isPureReactComponent?!Ja(d,g)||!Ja(M,C):!0}function D0(a,l,d,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==a&&Os.enqueueReplaceState(l,l.state,null)}function yr(a,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(a=a.defaultProps){d===l&&(d=m({},d));for(var M in a)d[M]===void 0&&(d[M]=a[M])}return d}var Dl=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function pf(a){Dl(a)}function td(a){console.error(a)}function U0(a){Dl(a)}function nd(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function La(a,l,d){try{var g=a.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function id(a,l,d){return d=gr(d),d.tag=3,d.payload={element:null},d.callback=function(){nd(a,l)},d}function L0(a){return a=gr(a),a.tag=3,a}function sd(a,l,d,g){var M=d.type.getDerivedStateFromError;if(typeof M=="function"){var C=g.value;a.payload=function(){return M(C)},a.callback=function(){La(l,d,g)}}var F=d.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(a.callback=function(){La(l,d,g),typeof M!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var Y=g.stack;this.componentDidCatch(g.value,{componentStack:Y!==null?Y:""})})}function _A(a,l,d,g,M){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&wa(l,d,M,!0),d=$n.current,d!==null){switch(d.tag){case 13:return Qa===null?u():d.alternate===null&&hi===0&&(hi=3),d.flags&=-257,d.flags|=65536,d.lanes=M,g===rf?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),Pe(a,g,M)),!1;case 22:return d.flags|=65536,g===rf?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),Pe(a,g,M)),!1}throw Error(n(435,d.tag))}return Pe(a,g,M),u(),!1}if(In)return l=$n.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=M,g!==Ih&&(a=Error(n(422),{cause:g}),Cl(cs(a,d)))):(g!==Ih&&(l=Error(n(423),{cause:g}),Cl(cs(l,d))),a=a.current.alternate,a.flags|=65536,M&=-M,a.lanes|=M,g=cs(g,d),M=id(a.stateNode,g,M),Nc(a,M),hi!==4&&(hi=2)),!1;var C=Error(n(520),{cause:g});if(C=cs(C,d),Xn===null?Xn=[C]:Xn.push(C),hi!==4&&(hi=2),l===null)return!0;g=cs(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=M&-M,d.lanes|=a,a=id(d.stateNode,g,a),Nc(d,a),!1;case 1:if(l=d.type,C=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ga===null||!ga.has(C))))return d.flags|=65536,M&=-M,d.lanes|=M,M=L0(M),sd(M,a,d,g),Nc(d,M),!1}d=d.return}while(d!==null);return!1}var N0=Error(n(461)),ts=!1;function Di(a,l,d,g){l.child=a===null?R0(l,null,d,g):Bl(l,a.child,d,g)}function Ws(a,l,d,g,M){d=d.render;var C=l.ref;if("ref"in g){var F={};for(var Y in g)Y!=="ref"&&(F[Y]=g[Y])}else F=g;return mr(l),g=io(a,l,d,F,C,M),Y=am(),a!==null&&!ts?(jh(a,l,M),ns(a,l,M)):(In&&Y&&Jp(l),l.flags|=1,Di(a,l,g,M),l.child)}function Zs(a,l,d,g,M){if(a===null){var C=d.type;return typeof C=="function"&&!Ku(C)&&C.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=C,Am(a,l,C,g,M)):(a=es(d.type,null,g,l,l.mode,M),a.ref=l.ref,a.return=l,l.child=a)}if(C=a.child,!mf(a,M)){var F=C.memoizedProps;if(d=d.compare,d=d!==null?d:Ja,d(F,g)&&a.ref===l.ref)return ns(a,l,M)}return l.flags|=1,a=Ri(C,g),a.ref=l.ref,a.return=l,l.child=a}function Am(a,l,d,g,M){if(a!==null){var C=a.memoizedProps;if(Ja(C,g)&&a.ref===l.ref)if(ts=!1,l.pendingProps=g=C,mf(a,M))(a.flags&131072)!==0&&(ts=!0);else return l.lanes=a.lanes,ns(a,l,M)}return Vc(a,l,d,g,M)}function Ul(a,l,d){var g=l.pendingProps,M=g.children,C=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((l.flags&128)!==0){if(g=C!==null?C.baseLanes|d:d,a!==null){for(M=l.child=a.child,C=0;M!==null;)C=C|M.lanes|M.childLanes,M=M.sibling;l.childLanes=C&~g}else l.childLanes=0,l.child=null;return Ll(a,l,g,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&sf(l,C!==null?C.cachePool:null),C!==null?Wv(l,C):sm(),w0(l);else return l.lanes=l.childLanes=536870912,Ll(a,l,C!==null?C.baseLanes|d:d,d)}else C!==null?(sf(l,C.cachePool),Wv(l,C),Jo(),l.memoizedState=null):(a!==null&&sf(l,null),sm(),Jo());return Di(a,l,M,d),l.child}function Ll(a,l,d,g){var M=ko();return M=M===null?null:{parent:Fi._currentValue,pool:M},l.memoizedState={baseLanes:d,cachePool:M},a!==null&&sf(l,null),sm(),w0(l),a!==null&&wa(a,l,g,!0),null}function Nl(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function Vc(a,l,d,g,M){return mr(l),d=io(a,l,d,g,void 0,M),g=am(),a!==null&&!ts?(jh(a,l,M),ns(a,l,M)):(In&&g&&Jp(l),l.flags|=1,Di(a,l,d,M),l.child)}function ca(a,l,d,g,M,C){return mr(l),l.updateQueue=null,d=$v(l,g,d,M),Qv(a),g=am(),a!==null&&!ts?(jh(a,l,C),ns(a,l,C)):(In&&g&&Jp(l),l.flags|=1,Di(a,l,d,C),l.child)}function ua(a,l,d,g,M){if(mr(l),l.stateNode===null){var C=Po,F=d.contextType;typeof F=="object"&&F!==null&&(C=xi(F)),C=new d(g,C),l.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Os,l.stateNode=C,C._reactInternals=l,C=l.stateNode,C.props=g,C.state=l.memoizedState,C.refs={},nm(l),F=d.contextType,C.context=typeof F=="object"&&F!==null?xi(F):Po,C.state=l.memoizedState,F=d.getDerivedStateFromProps,typeof F=="function"&&(Ko(l,d,F,g),C.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(F=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),F!==C.state&&Os.enqueueReplaceState(C,C.state,null),Oc(l,g,C,M),of(),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(a===null){C=l.stateNode;var Y=l.memoizedProps,ie=yr(d,Y);C.props=ie;var Re=C.context,Je=d.contextType;F=Po,typeof Je=="object"&&Je!==null&&(F=xi(Je));var nt=d.getDerivedStateFromProps;Je=typeof nt=="function"||typeof C.getSnapshotBeforeUpdate=="function",Y=l.pendingProps!==Y,Je||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(Y||Re!==F)&&D0(l,C,g,F),eo=!1;var Le=l.memoizedState;C.state=Le,Oc(l,g,C,M),of(),Re=l.memoizedState,Y||Le!==Re||eo?(typeof nt=="function"&&(Ko(l,d,nt,g),Re=l.memoizedState),(ie=eo||B0(l,d,ie,g,Le,Re,F))?(Je||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(l.flags|=4194308)):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Re),C.props=g,C.state=Re,C.context=F,g=ie):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{C=l.stateNode,en(a,l),F=l.memoizedProps,Je=yr(d,F),C.props=Je,nt=l.pendingProps,Le=C.context,Re=d.contextType,ie=Po,typeof Re=="object"&&Re!==null&&(ie=xi(Re)),Y=d.getDerivedStateFromProps,(Re=typeof Y=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==nt||Le!==ie)&&D0(l,C,g,ie),eo=!1,Le=l.memoizedState,C.state=Le,Oc(l,g,C,M),of();var Ie=l.memoizedState;F!==nt||Le!==Ie||eo||a!==null&&a.dependencies!==null&&$u(a.dependencies)?(typeof Y=="function"&&(Ko(l,d,Y,g),Ie=l.memoizedState),(Je=eo||B0(l,d,Je,g,Le,Ie,ie)||a!==null&&a.dependencies!==null&&$u(a.dependencies))?(Re||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,Ie,ie),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,Ie,ie)),typeof C.componentDidUpdate=="function"&&(l.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof C.componentDidUpdate!="function"||F===a.memoizedProps&&Le===a.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&Le===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Ie),C.props=g,C.state=Ie,C.context=ie,g=Je):(typeof C.componentDidUpdate!="function"||F===a.memoizedProps&&Le===a.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&Le===a.memoizedState||(l.flags|=1024),g=!1)}return C=g,Nl(a,l),g=(l.flags&128)!==0,C||g?(C=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:C.render(),l.flags|=1,a!==null&&g?(l.child=Bl(l,a.child,null,M),l.child=Bl(l,null,d,M)):Di(a,l,d,M),l.memoizedState=C.state,a=l.child):a=ns(a,l,M),a}function Wo(a,l,d,g){return wc(),l.flags|=256,Di(a,l,d,g),l.child}var $a={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function er(a){return{baseLanes:a,cachePool:zh()}}function ji(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=Fa),a}function kc(a,l,d){var g=l.pendingProps,M=!1,C=(l.flags&128)!==0,F;if((F=C)||(F=a!==null&&a.memoizedState===null?!1:(Bi.current&2)!==0),F&&(M=!0,l.flags&=-129),F=(l.flags&32)!==0,l.flags&=-33,a===null){if(In){if(M?qo(l):Jo(),In){var Y=mi,ie;if(ie=Y){e:{for(ie=Y,Y=ra;ie.nodeType!==8;){if(!Y){Y=null;break e}if(ie=fo(ie.nextSibling),ie===null){Y=null;break e}}Y=ie}Y!==null?(l.memoizedState={dehydrated:Y,treeContext:Ho!==null?{id:dr,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},ie=Js(18,null,null,0),ie.stateNode=Y,ie.return=l,l.child=ie,Us=l,mi=null,ie=!0):ie=!1}ie||zo(l)}if(Y=l.memoizedState,Y!==null&&(Y=Y.dehydrated,Y!==null))return LA(Y)?l.lanes=32:l.lanes=536870912,null;vr(l)}return Y=g.children,g=g.fallback,M?(Jo(),M=l.mode,Y=Ol({mode:"hidden",children:Y},M),g=Fo(g,M,d,null),Y.return=l,g.return=l,Y.sibling=g,l.child=Y,M=l.child,M.memoizedState=er(d),M.childLanes=ji(a,F,d),l.memoizedState=$a,g):(qo(l),_r(l,Y))}if(ie=a.memoizedState,ie!==null&&(Y=ie.dehydrated,Y!==null)){if(C)l.flags&256?(qo(l),l.flags&=-257,l=hs(a,l,d)):l.memoizedState!==null?(Jo(),l.child=a.child,l.flags|=128,l=null):(Jo(),M=g.fallback,Y=l.mode,g=Ol({mode:"visible",children:g.children},Y),M=Fo(M,Y,d,null),M.flags|=2,g.return=l,M.return=l,g.sibling=M,l.child=g,Bl(l,a.child,null,d),g=l.child,g.memoizedState=er(d),g.childLanes=ji(a,F,d),l.memoizedState=$a,l=M);else if(qo(l),LA(Y)){if(F=Y.nextSibling&&Y.nextSibling.dataset,F)var Re=F.dgst;F=Re,g=Error(n(419)),g.stack="",g.digest=F,Cl({value:g,source:null,stack:null}),l=hs(a,l,d)}else if(ts||wa(a,l,d,!1),F=(d&a.childLanes)!==0,ts||F){if(F=ln,F!==null&&(g=d&-d,g=(g&42)!==0?1:rn(g),g=(g&(F.suspendedLanes|d))!==0?0:g,g!==0&&g!==ie.retryLane))throw ie.retryLane=g,Wr(a,g),Ps(F,a,g),N0;Y.data==="$?"||u(),l=hs(a,l,d)}else Y.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=ie.treeContext,mi=fo(Y.nextSibling),Us=l,In=!0,Ra=null,ra=!1,a!==null&&(us[aa++]=dr,us[aa++]=pr,us[aa++]=Ho,dr=a.id,pr=a.overflow,Ho=l),l=_r(l,g.children),l.flags|=4096);return l}return M?(Jo(),M=g.fallback,Y=l.mode,ie=a.child,Re=ie.sibling,g=Ri(ie,{mode:"hidden",children:g.children}),g.subtreeFlags=ie.subtreeFlags&65011712,Re!==null?M=Ri(Re,M):(M=Fo(M,Y,d,null),M.flags|=2),M.return=l,g.return=l,g.sibling=M,l.child=g,g=M,M=l.child,Y=a.child.memoizedState,Y===null?Y=er(d):(ie=Y.cachePool,ie!==null?(Re=Fi._currentValue,ie=ie.parent!==Re?{parent:Re,pool:Re}:ie):ie=zh(),Y={baseLanes:Y.baseLanes|d,cachePool:ie}),M.memoizedState=Y,M.childLanes=ji(a,F,d),l.memoizedState=$a,g):(qo(l),d=a.child,a=d.sibling,d=Ri(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,a!==null&&(F=l.deletions,F===null?(l.deletions=[a],l.flags|=16):F.push(a)),l.child=d,l.memoizedState=null,d)}function _r(a,l){return l=Ol({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Ol(a,l){return a=Js(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function hs(a,l,d){return Bl(l,a.child,null,d),a=_r(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function ds(a,l,d){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),Qp(a.return,l,d)}function Dn(a,l,d,g,M){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:M}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=d,C.tailMode=M)}function Na(a,l,d){var g=l.pendingProps,M=g.revealOrder,C=g.tail;if(Di(a,l,g.children,d),g=Bi.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ds(a,d,l);else if(a.tag===19)ds(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(Ce(Bi,g),M){case"forwards":for(d=l.child,M=null;d!==null;)a=d.alternate,a!==null&&ao(a)===null&&(M=d),d=d.sibling;d=M,d===null?(M=l.child,l.child=null):(M=d.sibling,d.sibling=null),Dn(l,!1,M,d,C);break;case"backwards":for(d=null,M=l.child,l.child=null;M!==null;){if(a=M.alternate,a!==null&&ao(a)===null){l.child=M;break}a=M.sibling,M.sibling=d,d=M,M=a}Dn(l,!0,d,null,C);break;case"together":Dn(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ns(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),sr|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(wa(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,d=Ri(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=Ri(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function mf(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&$u(a)))}function Oa(a,l,d){switch(l.tag){case 3:tt(l,l.stateNode.containerInfo),Vo(l,Fi,a.memoizedState.cache),wc();break;case 27:case 5:wt(l);break;case 4:tt(l,l.stateNode.containerInfo);break;case 10:Vo(l,l.type,l.memoizedProps.value);break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(qo(l),l.flags|=128,null):(d&l.child.childLanes)!==0?kc(a,l,d):(qo(l),a=ns(a,l,d),a!==null?a.sibling:null);qo(l);break;case 19:var M=(a.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(wa(a,l,d,!1),g=(d&l.childLanes)!==0),M){if(g)return Na(a,l,d);l.flags|=128}if(M=l.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Ce(Bi,Bi.current),g)break;return null;case 22:case 23:return l.lanes=0,Ul(a,l,d);case 24:Vo(l,Fi,a.memoizedState.cache)}return ns(a,l,d)}function Il(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)ts=!0;else{if(!mf(a,d)&&(l.flags&128)===0)return ts=!1,Oa(a,l,d);ts=(a.flags&131072)!==0}else ts=!1,In&&(l.flags&1048576)!==0&&Oh(l,Rc,l.index);switch(l.lanes=0,l.tag){case 16:e:{a=l.pendingProps;var g=l.elementType,M=g._init;if(g=M(g._payload),l.type=g,typeof g=="function")Ku(g)?(a=yr(g,a),l.tag=1,l=ua(null,l,g,a,d)):(l.tag=0,l=Vc(null,l,g,a,d));else{if(g!=null){if(M=g.$$typeof,M===D){l.tag=11,l=Ws(null,l,g,a,d);break e}else if(M===z){l.tag=14,l=Zs(null,l,g,a,d);break e}}throw l=fe(g)||g,Error(n(306,l,""))}}return l;case 0:return Vc(a,l,l.type,l.pendingProps,d);case 1:return g=l.type,M=yr(g,l.pendingProps),ua(a,l,g,M,d);case 3:e:{if(tt(l,l.stateNode.containerInfo),a===null)throw Error(n(387));g=l.pendingProps;var C=l.memoizedState;M=C.element,en(a,l),Oc(l,g,null,d);var F=l.memoizedState;if(g=F.cache,Vo(l,Fi,g),g!==C.cache&&Qu(l,[Fi],d,!0),of(),g=F.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:F.cache},l.updateQueue.baseState=C,l.memoizedState=C,l.flags&256){l=Wo(a,l,g,d);break e}else if(g!==M){M=cs(Error(n(424)),l),Cl(M),l=Wo(a,l,g,d);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(mi=fo(a.firstChild),Us=l,In=!0,Ra=null,ra=!0,d=R0(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(wc(),g===M){l=ns(a,l,d);break e}Di(a,l,g,d)}l=l.child}return l;case 26:return Nl(a,l),a===null?(d=G1(l.type,null,l.pendingProps,null))?l.memoizedState=d:In||(d=l.type,a=l.pendingProps,g=z0(Oe.current).createElement(d),g[_i]=l,g[Ti]=a,Fs(g,d,a),Ue(g),l.stateNode=g):l.memoizedState=G1(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return wt(l),a===null&&In&&(g=l.stateNode=F1(l.type,l.pendingProps,Oe.current),Us=l,ra=!0,M=mi,$c(l.type)?(NA=M,mi=fo(g.firstChild)):mi=M),Di(a,l,l.pendingProps.children,d),Nl(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&In&&((M=g=mi)&&(g=QU(g,l.type,l.pendingProps,ra),g!==null?(l.stateNode=g,Us=l,mi=fo(g.firstChild),ra=!1,M=!0):M=!1),M||zo(l)),wt(l),M=l.type,C=l.pendingProps,F=a!==null?a.memoizedProps:null,g=C.children,BA(M,C)?g=null:F!==null&&BA(M,F)&&(l.flags|=32),l.memoizedState!==null&&(M=io(a,l,dA,null,null,d),Um._currentValue=M),Nl(a,l),Di(a,l,g,d),l.child;case 6:return a===null&&In&&((a=d=mi)&&(d=$U(d,l.pendingProps,ra),d!==null?(l.stateNode=d,Us=l,mi=null,a=!0):a=!1),a||zo(l)),null;case 13:return kc(a,l,d);case 4:return tt(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=Bl(l,null,g,d):Di(a,l,g,d),l.child;case 11:return Ws(a,l,l.type,l.pendingProps,d);case 7:return Di(a,l,l.pendingProps,d),l.child;case 8:return Di(a,l,l.pendingProps.children,d),l.child;case 12:return Di(a,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,Vo(l,l.type,g.value),Di(a,l,g.children,d),l.child;case 9:return M=l.type._context,g=l.pendingProps.children,mr(l),M=xi(M),g=g(M),l.flags|=1,Di(a,l,g,d),l.child;case 14:return Zs(a,l,l.type,l.pendingProps,d);case 15:return Am(a,l,l.type,l.pendingProps,d);case 19:return Na(a,l,d);case 31:return g=l.pendingProps,d=l.mode,g={mode:g.mode,children:g.children},a===null?(d=Ol(g,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=Ri(a.child,g),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return Ul(a,l,d);case 24:return mr(l),g=xi(Fi),a===null?(M=ko(),M===null&&(M=ln,C=Fh(),M.pooledCache=C,C.refCount++,C!==null&&(M.pooledCacheLanes|=d),M=C),l.memoizedState={parent:g,cache:M},nm(l),Vo(l,Fi,M)):((a.lanes&d)!==0&&(en(a,l),Oc(l,null,null,d),of()),M=a.memoizedState,C=l.memoizedState,M.parent!==g?(M={parent:g,cache:g},l.memoizedState=M,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=M),Vo(l,Fi,g)):(g=C.cache,Vo(l,Fi,g),g!==M.cache&&Qu(l,[Fi],d,!0))),Di(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function tr(a){a.flags|=4}function gf(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Y1(l)){if(l=$n.current,l!==null&&((Xt&4194048)===Xt?Qa!==null:(Xt&62914560)!==Xt&&(Xt&536870912)===0||l!==Qa))throw Da=rf,em;a.flags|=8192}}function ro(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?be():536870912,a.lanes|=l,Ln|=l)}function Pl(a,l){if(!In)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function ri(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(l)for(var M=a.child;M!==null;)d|=M.lanes|M.childLanes,g|=M.subtreeFlags&65011712,g|=M.flags&65011712,M.return=a,M=M.sibling;else for(M=a.child;M!==null;)d|=M.lanes|M.childLanes,g|=M.subtreeFlags,g|=M.flags,M.return=a,M=M.sibling;return a.subtreeFlags|=g,a.childLanes=d,l}function Sm(a,l,d){var g=l.pendingProps;switch(Kp(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(l),null;case 1:return ri(l),null;case 3:return d=l.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),$r(Fi),Dt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Ka(l)?tr(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Vn())),ri(l),null;case 26:return d=l.memoizedState,a===null?(tr(l),d!==null?(ri(l),gf(l,d)):(ri(l),l.flags&=-16777217)):d?d!==a.memoizedState?(tr(l),ri(l),gf(l,d)):(ri(l),l.flags&=-16777217):(a.memoizedProps!==g&&tr(l),ri(l),l.flags&=-16777217),null;case 27:Pt(l),d=Oe.current;var M=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==g&&tr(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return ri(l),null}a=oe.current,Ka(l)?Yv(l):(a=F1(M,g,d),l.stateNode=a,tr(l))}return ri(l),null;case 5:if(Pt(l),d=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&tr(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return ri(l),null}if(a=oe.current,Ka(l))Yv(l);else{switch(M=z0(Oe.current),a){case 1:a=M.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=M.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=M.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=M.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=M.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?M.createElement("select",{is:g.is}):M.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?M.createElement(d,{is:g.is}):M.createElement(d)}}a[_i]=l,a[Ti]=g;e:for(M=l.child;M!==null;){if(M.tag===5||M.tag===6)a.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===l)break e;for(;M.sibling===null;){if(M.return===null||M.return===l)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}l.stateNode=a;e:switch(Fs(a,d,g),d){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&tr(l)}}return ri(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==g&&tr(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(a=Oe.current,Ka(l)){if(a=l.stateNode,d=l.memoizedProps,g=null,M=Us,M!==null)switch(M.tag){case 27:case 5:g=M.memoizedProps}a[_i]=l,a=!!(a.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||D1(a.nodeValue,d)),a||zo(l)}else a=z0(a).createTextNode(g),a[_i]=l,l.stateNode=a}return ri(l),null;case 13:if(g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(M=Ka(l),g!==null&&g.dehydrated!==null){if(a===null){if(!M)throw Error(n(318));if(M=l.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[_i]=l}else wc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ri(l),M=!1}else M=Vn(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=M),M=!0;if(!M)return l.flags&256?(vr(l),l):(vr(l),null)}if(vr(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=g!==null,a=a!==null&&a.memoizedState!==null,d){g=l.child,M=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(M=g.alternate.memoizedState.cachePool.pool);var C=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==M&&(g.flags|=2048)}return d!==a&&d&&(l.child.flags|=8192),ro(l,l.updateQueue),ri(l),null;case 4:return Dt(),a===null&&EA(l.stateNode.containerInfo),ri(l),null;case 10:return $r(l.type),ri(l),null;case 19:if(Ae(Bi),M=l.memoizedState,M===null)return ri(l),null;if(g=(l.flags&128)!==0,C=M.rendering,C===null)if(g)Pl(M,!1);else{if(hi!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(C=ao(a),C!==null){for(l.flags|=128,Pl(M,!1),a=C.updateQueue,l.updateQueue=a,ro(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)qp(d,a),d=d.sibling;return Ce(Bi,Bi.current&1|2),l.child}a=a.sibling}M.tail!==null&&je()>xs&&(l.flags|=128,g=!0,Pl(M,!1),l.lanes=4194304)}else{if(!g)if(a=ao(C),a!==null){if(l.flags|=128,g=!0,a=a.updateQueue,l.updateQueue=a,ro(l,a),Pl(M,!0),M.tail===null&&M.tailMode==="hidden"&&!C.alternate&&!In)return ri(l),null}else 2*je()-M.renderingStartTime>xs&&d!==536870912&&(l.flags|=128,g=!0,Pl(M,!1),l.lanes=4194304);M.isBackwards?(C.sibling=l.child,l.child=C):(a=M.last,a!==null?a.sibling=C:l.child=C,M.last=C)}return M.tail!==null?(l=M.tail,M.rendering=l,M.tail=l.sibling,M.renderingStartTime=je(),l.sibling=null,a=Bi.current,Ce(Bi,g?a&1|2:a&1),l):(ri(l),null);case 22:case 23:return vr(l),lf(),g=l.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(ri(l),l.subtreeFlags&6&&(l.flags|=8192)):ri(l),d=l.updateQueue,d!==null&&ro(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),a!==null&&Ae(Ba),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),$r(Fi),ri(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function Xc(a,l){switch(Kp(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return $r(Fi),Dt(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return Pt(l),null;case 13:if(vr(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));wc()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Ae(Bi),null;case 4:return Dt(),null;case 10:return $r(l.type),null;case 22:case 23:return vr(l),lf(),a!==null&&Ae(Ba),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return $r(Fi),null;case 25:return null;default:return null}}function jc(a,l){switch(Kp(l),l.tag){case 3:$r(Fi),Dt();break;case 26:case 27:case 5:Pt(l);break;case 4:Dt();break;case 13:vr(l);break;case 19:Ae(Bi);break;case 10:$r(l.type);break;case 22:case 23:vr(l),lf(),a!==null&&Ae(Ba);break;case 24:$r(Fi)}}function Fl(a,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var M=g.next;d=M;do{if((d.tag&a)===a){g=void 0;var C=d.create,F=d.inst;g=C(),F.destroy=g}d=d.next}while(d!==M)}}catch(Y){me(l,l.return,Y)}}function fa(a,l,d){try{var g=l.updateQueue,M=g!==null?g.lastEffect:null;if(M!==null){var C=M.next;g=C;do{if((g.tag&a)===a){var F=g.inst,Y=F.destroy;if(Y!==void 0){F.destroy=void 0,M=l;var ie=d,Re=Y;try{Re()}catch(Je){me(M,ie,Je)}}}g=g.next}while(g!==C)}}catch(Je){me(l,l.return,Je)}}function Hl(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{Kv(l,d)}catch(g){me(a,a.return,g)}}}function oo(a,l,d){d.props=yr(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(g){me(a,l,g)}}function zl(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof d=="function"?a.refCleanup=d(g):d.current=g}}catch(M){me(a,l,M)}}function xr(a,l){var d=a.ref,g=a.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(M){me(a,l,M)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(M){me(a,l,M)}else d.current=null}function Yc(a){var l=a.type,d=a.memoizedProps,g=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(M){me(a,a.return,M)}}function vf(a,l,d){try{var g=a.stateNode;qU(g,a.type,d,l),g[Ti]=l}catch(M){me(a,a.return,M)}}function yf(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&$c(a.type)||a.tag===4}function Zo(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||yf(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&$c(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Qo(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=H0));else if(g!==4&&(g===27&&$c(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for(Qo(a,l,d),a=a.sibling;a!==null;)Qo(a,l,d),a=a.sibling}function $o(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(g!==4&&(g===27&&$c(a.type)&&(d=a.stateNode),a=a.child,a!==null))for($o(a,l,d),a=a.sibling;a!==null;)$o(a,l,d),a=a.sibling}function el(a){var l=a.stateNode,d=a.memoizedProps;try{for(var g=a.type,M=l.attributes;M.length;)l.removeAttributeNode(M[0]);Fs(l,g,d),l[_i]=a,l[Ti]=d}catch(C){me(a,a.return,C)}}var Ar=!1,oi=!1,qc=!1,ha=typeof WeakSet=="function"?WeakSet:Set,ei=null;function Yi(a,l){if(a=a.containerInfo,RA=Y0,a=zp(a),ju(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var M=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{d.nodeType,C.nodeType}catch{d=null;break e}var F=0,Y=-1,ie=-1,Re=0,Je=0,nt=a,Le=null;t:for(;;){for(var Ie;nt!==d||M!==0&&nt.nodeType!==3||(Y=F+M),nt!==C||g!==0&&nt.nodeType!==3||(ie=F+g),nt.nodeType===3&&(F+=nt.nodeValue.length),(Ie=nt.firstChild)!==null;)Le=nt,nt=Ie;for(;;){if(nt===a)break t;if(Le===d&&++Re===M&&(Y=F),Le===C&&++Je===g&&(ie=F),(Ie=nt.nextSibling)!==null)break;nt=Le,Le=nt.parentNode}nt=Ie}d=Y===-1||ie===-1?null:{start:Y,end:ie}}else d=null}d=d||{start:0,end:0}}else d=null;for(wA={focusedElem:a,selectionRange:d},Y0=!1,ei=l;ei!==null;)if(l=ei,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,ei=a;else for(;ei!==null;){switch(l=ei,C=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,d=l,M=C.memoizedProps,C=C.memoizedState,g=d.stateNode;try{var nn=yr(d.type,M,d.elementType===d.type);a=g.getSnapshotBeforeUpdate(nn,C),g.__reactInternalSnapshotBeforeUpdate=a}catch(Zt){me(d,d.return,Zt)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)UA(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":UA(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=l.sibling,a!==null){a.return=l.return,ei=a;break}ei=l.return}}function lo(a,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:Is(a,d),g&4&&Fl(5,d);break;case 1:if(Is(a,d),g&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(F){me(d,d.return,F)}else{var M=yr(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(M,l,a.__reactInternalSnapshotBeforeUpdate)}catch(F){me(d,d.return,F)}}g&64&&Hl(d),g&512&&zl(d,d.return);break;case 3:if(Is(a,d),g&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{Kv(a,l)}catch(F){me(d,d.return,F)}}break;case 27:l===null&&g&4&&el(d);case 26:case 5:Is(a,d),l===null&&g&4&&Yc(d),g&512&&zl(d,d.return);break;case 12:Is(a,d);break;case 13:Is(a,d),g&4&&tl(a,d),g&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=di.bind(null,d),eL(a,d))));break;case 22:if(g=d.memoizedState!==null||Ar,!g){l=l!==null&&l.memoizedState!==null||oi,M=Ar;var C=oi;Ar=g,(oi=l)&&!C?Sr(a,d,(d.subtreeFlags&8772)!==0):Is(a,d),Ar=M,oi=C}break;case 30:break;default:Is(a,d)}}function yn(a){var l=a.alternate;l!==null&&(a.alternate=null,yn(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Gn(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var qt=null,Un=!1;function Ia(a,l,d){for(d=d.child;d!==null;)Gl(a,l,d),d=d.sibling}function Gl(a,l,d){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(He,d)}catch{}switch(d.tag){case 26:oi||xr(d,l),Ia(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:oi||xr(d,l);var g=qt,M=Un;$c(d.type)&&(qt=d.stateNode,Un=!1),Ia(a,l,d),Rm(d.stateNode),qt=g,Un=M;break;case 5:oi||xr(d,l);case 6:if(g=qt,M=Un,qt=null,Ia(a,l,d),qt=g,Un=M,qt!==null)if(Un)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(d.stateNode)}catch(C){me(d,l,C)}else try{qt.removeChild(d.stateNode)}catch(C){me(d,l,C)}break;case 18:qt!==null&&(Un?(a=qt,I1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Im(a)):I1(qt,d.stateNode));break;case 4:g=qt,M=Un,qt=d.stateNode.containerInfo,Un=!0,Ia(a,l,d),qt=g,Un=M;break;case 0:case 11:case 14:case 15:oi||fa(2,d,l),oi||fa(4,d,l),Ia(a,l,d);break;case 1:oi||(xr(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&oo(d,l,g)),Ia(a,l,d);break;case 21:Ia(a,l,d);break;case 22:oi=(g=oi)||d.memoizedState!==null,Ia(a,l,d),oi=g;break;default:Ia(a,l,d)}}function tl(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Im(a)}catch(d){me(l,l.return,d)}}function ad(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new ha),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new ha),l;default:throw Error(n(435,a.tag))}}function Vl(a,l){var d=ad(a);l.forEach(function(g){var M=tn.bind(null,a,g);d.has(g)||(d.add(g),g.then(M,M))})}function is(a,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var M=d[g],C=a,F=l,Y=F;e:for(;Y!==null;){switch(Y.tag){case 27:if($c(Y.type)){qt=Y.stateNode,Un=!1;break e}break;case 5:qt=Y.stateNode,Un=!1;break e;case 3:case 4:qt=Y.stateNode.containerInfo,Un=!0;break e}Y=Y.return}if(qt===null)throw Error(n(160));Gl(C,F,M),qt=null,Un=!1,C=M.alternate,C!==null&&(C.return=null),M.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)rd(l,a),l=l.sibling}var nr=null;function rd(a,l){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:is(l,a),Ai(a),g&4&&(fa(3,a,a.return),Fl(3,a),fa(5,a,a.return));break;case 1:is(l,a),Ai(a),g&512&&(oi||d===null||xr(d,d.return)),g&64&&Ar&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var M=nr;if(is(l,a),Ai(a),g&512&&(oi||d===null||xr(d,d.return)),g&4){var C=d!==null?d.memoizedState:null;if(g=a.memoizedState,d===null)if(g===null)if(a.stateNode===null){e:{g=a.type,d=a.memoizedProps,M=M.ownerDocument||M;t:switch(g){case"title":C=M.getElementsByTagName("title")[0],(!C||C[ks]||C[_i]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=M.createElement(g),M.head.insertBefore(C,M.querySelector("head > title"))),Fs(C,g,d),C[_i]=a,Ue(C),g=C;break e;case"link":var F=X1("link","href",M).get(g+(d.href||""));if(F){for(var Y=0;Y<F.length;Y++)if(C=F[Y],C.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&C.getAttribute("rel")===(d.rel==null?null:d.rel)&&C.getAttribute("title")===(d.title==null?null:d.title)&&C.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){F.splice(Y,1);break t}}C=M.createElement(g),Fs(C,g,d),M.head.appendChild(C);break;case"meta":if(F=X1("meta","content",M).get(g+(d.content||""))){for(Y=0;Y<F.length;Y++)if(C=F[Y],C.getAttribute("content")===(d.content==null?null:""+d.content)&&C.getAttribute("name")===(d.name==null?null:d.name)&&C.getAttribute("property")===(d.property==null?null:d.property)&&C.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&C.getAttribute("charset")===(d.charSet==null?null:d.charSet)){F.splice(Y,1);break t}}C=M.createElement(g),Fs(C,g,d),M.head.appendChild(C);break;default:throw Error(n(468,g))}C[_i]=a,Ue(C),g=C}a.stateNode=g}else j1(M,a.type,a.stateNode);else a.stateNode=k1(M,g,a.memoizedProps);else C!==g?(C===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):C.count--,g===null?j1(M,a.type,a.stateNode):k1(M,g,a.memoizedProps)):g===null&&a.stateNode!==null&&vf(a,a.memoizedProps,d.memoizedProps)}break;case 27:is(l,a),Ai(a),g&512&&(oi||d===null||xr(d,d.return)),d!==null&&g&4&&vf(a,a.memoizedProps,d.memoizedProps);break;case 5:if(is(l,a),Ai(a),g&512&&(oi||d===null||xr(d,d.return)),a.flags&32){M=a.stateNode;try{ws(M,"")}catch(Ie){me(a,a.return,Ie)}}g&4&&a.stateNode!=null&&(M=a.memoizedProps,vf(a,M,d!==null?d.memoizedProps:M)),g&1024&&(qc=!0);break;case 6:if(is(l,a),Ai(a),g&4){if(a.stateNode===null)throw Error(n(162));g=a.memoizedProps,d=a.stateNode;try{d.nodeValue=g}catch(Ie){me(a,a.return,Ie)}}break;case 3:if(k0=null,M=nr,nr=G0(l.containerInfo),is(l,a),nr=M,Ai(a),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Im(l.containerInfo)}catch(Ie){me(a,a.return,Ie)}qc&&(qc=!1,nl(a));break;case 4:g=nr,nr=G0(a.stateNode.containerInfo),is(l,a),Ai(a),nr=g;break;case 12:is(l,a),Ai(a);break;case 13:is(l,a),Ai(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Kn=je()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Vl(a,g)));break;case 22:M=a.memoizedState!==null;var ie=d!==null&&d.memoizedState!==null,Re=Ar,Je=oi;if(Ar=Re||M,oi=Je||ie,is(l,a),oi=Je,Ar=Re,Ai(a),g&8192)e:for(l=a.stateNode,l._visibility=M?l._visibility&-2:l._visibility|1,M&&(d===null||ie||Ar||oi||da(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){ie=d=l;try{if(C=ie.stateNode,M)F=C.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{Y=ie.stateNode;var nt=ie.memoizedProps.style,Le=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;Y.style.display=Le==null||typeof Le=="boolean"?"":(""+Le).trim()}}catch(Ie){me(ie,ie.return,Ie)}}}else if(l.tag===6){if(d===null){ie=l;try{ie.stateNode.nodeValue=M?"":ie.memoizedProps}catch(Ie){me(ie,ie.return,Ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=a.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,Vl(a,d))));break;case 19:is(l,a),Ai(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Vl(a,g)));break;case 30:break;case 21:break;default:is(l,a),Ai(a)}}function Ai(a){var l=a.flags;if(l&2){try{for(var d,g=a.return;g!==null;){if(yf(g)){d=g;break}g=g.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var M=d.stateNode,C=Zo(a);$o(a,C,M);break;case 5:var F=d.stateNode;d.flags&32&&(ws(F,""),d.flags&=-33);var Y=Zo(a);$o(a,Y,F);break;case 3:case 4:var ie=d.stateNode.containerInfo,Re=Zo(a);Qo(a,Re,ie);break;default:throw Error(n(161))}}catch(Je){me(a,a.return,Je)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function nl(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;nl(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Is(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)lo(a,l.alternate,l),l=l.sibling}function da(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:fa(4,l,l.return),da(l);break;case 1:xr(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&oo(l,l.return,d),da(l);break;case 27:Rm(l.stateNode);case 26:case 5:xr(l,l.return),da(l);break;case 22:l.memoizedState===null&&da(l);break;case 30:da(l);break;default:da(l)}a=a.sibling}}function Sr(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,M=a,C=l,F=C.flags;switch(C.tag){case 0:case 11:case 15:Sr(M,C,d),Fl(4,C);break;case 1:if(Sr(M,C,d),g=C,M=g.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(Re){me(g,g.return,Re)}if(g=C,M=g.updateQueue,M!==null){var Y=g.stateNode;try{var ie=M.shared.hiddenCallbacks;if(ie!==null)for(M.shared.hiddenCallbacks=null,M=0;M<ie.length;M++)Ic(ie[M],Y)}catch(Re){me(g,g.return,Re)}}d&&F&64&&Hl(C),zl(C,C.return);break;case 27:el(C);case 26:case 5:Sr(M,C,d),d&&g===null&&F&4&&Yc(C),zl(C,C.return);break;case 12:Sr(M,C,d);break;case 13:Sr(M,C,d),d&&F&4&&tl(M,C);break;case 22:C.memoizedState===null&&Sr(M,C,d),zl(C,C.return);break;case 30:break;default:Sr(M,C,d)}l=l.sibling}}function od(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Bc(d))}function ld(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Bc(a))}function ti(a,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)cd(a,l,d,g),l=l.sibling}function cd(a,l,d,g){var M=l.flags;switch(l.tag){case 0:case 11:case 15:ti(a,l,d,g),M&2048&&Fl(9,l);break;case 1:ti(a,l,d,g);break;case 3:ti(a,l,d,g),M&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Bc(a)));break;case 12:if(M&2048){ti(a,l,d,g),a=l.stateNode;try{var C=l.memoizedProps,F=C.id,Y=C.onPostCommit;typeof Y=="function"&&Y(F,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ie){me(l,l.return,ie)}}else ti(a,l,d,g);break;case 13:ti(a,l,d,g);break;case 23:break;case 22:C=l.stateNode,F=l.alternate,l.memoizedState!==null?C._visibility&2?ti(a,l,d,g):ir(a,l):C._visibility&2?ti(a,l,d,g):(C._visibility|=2,co(a,l,d,g,(l.subtreeFlags&10256)!==0)),M&2048&&od(F,l);break;case 24:ti(a,l,d,g),M&2048&&ld(l.alternate,l);break;default:ti(a,l,d,g)}}function co(a,l,d,g,M){for(M=M&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var C=a,F=l,Y=d,ie=g,Re=F.flags;switch(F.tag){case 0:case 11:case 15:co(C,F,Y,ie,M),Fl(8,F);break;case 23:break;case 22:var Je=F.stateNode;F.memoizedState!==null?Je._visibility&2?co(C,F,Y,ie,M):ir(C,F):(Je._visibility|=2,co(C,F,Y,ie,M)),M&&Re&2048&&od(F.alternate,F);break;case 24:co(C,F,Y,ie,M),M&&Re&2048&&ld(F.alternate,F);break;default:co(C,F,Y,ie,M)}l=l.sibling}}function ir(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,g=l,M=g.flags;switch(g.tag){case 22:ir(d,g),M&2048&&od(g.alternate,g);break;case 24:ir(d,g),M&2048&&ld(g.alternate,g);break;default:ir(d,g)}l=l.sibling}}var pa=8192;function Jc(a){if(a.subtreeFlags&pa)for(a=a.child;a!==null;)O0(a),a=a.sibling}function O0(a){switch(a.tag){case 26:Jc(a),a.flags&pa&&a.memoizedState!==null&&dL(nr,a.memoizedState,a.memoizedProps);break;case 5:Jc(a);break;case 3:case 4:var l=nr;nr=G0(a.stateNode.containerInfo),Jc(a),nr=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=pa,pa=16777216,Jc(a),pa=l):Jc(a));break;default:Jc(a)}}function I0(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function li(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];ei=g,br(g,a)}I0(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Mm(a),a=a.sibling}function Mm(a){switch(a.tag){case 0:case 11:case 15:li(a),a.flags&2048&&fa(9,a,a.return);break;case 3:li(a);break;case 12:li(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Mr(a)):li(a);break;default:li(a)}}function Mr(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];ei=g,br(g,a)}I0(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:fa(8,l,l.return),Mr(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Mr(l));break;default:Mr(l)}a=a.sibling}}function br(a,l){for(;ei!==null;){var d=ei;switch(d.tag){case 0:case 11:case 15:fa(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Bc(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,ei=g;else e:for(d=a;ei!==null;){g=ei;var M=g.sibling,C=g.return;if(yn(g),g===d){ei=null;break e}if(M!==null){M.return=C,ei=M;break e}ei=C}}}var Si={getCacheForType:function(a){var l=xi(Fi),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d}},bm=typeof WeakMap=="function"?WeakMap:Map,kn=0,ln=null,Sn=null,Xt=0,mn=0,gi=null,ma=!1,Kc=!1,Wc=!1,Pa=0,hi=0,sr=0,Er=0,kl=0,Fa=0,Ln=0,Xn=null,Kt=null,bn=!1,Kn=0,xs=1/0,Ha=null,ga=null,qi=0,As=null,ni=null,va=0,uo=0,_f=null,ya=null,Tr=0,Xl=null;function Mi(){if((kn&2)!==0&&Xt!==0)return Xt&-Xt;if(H.T!==null){var a=un;return a!==0?a:AA()}return on()}function ud(){Fa===0&&(Fa=(Xt&536870912)===0||In?ue():536870912);var a=$n.current;return a!==null&&(a.flags|=32),Fa}function Ps(a,l,d){(a===ln&&(mn===2||mn===9)||a.cancelPendingCommit!==null)&&(sl(a,0),ar(a,Xt,Fa,!1)),ke(a,d),((kn&2)===0||a!==ln)&&(a===ln&&((kn&2)===0&&(Er|=d),hi===4&&ar(a,Xt,Fa,!1)),ol(a))}function Zc(a,l,d){if((kn&6)!==0)throw Error(n(327));var g=!d&&(l&124)===0&&(l&a.expiredLanes)===0||Fe(a,l),M=g?b(a,l):h(a,l,!0),C=g;do{if(M===0){Kc&&!g&&ar(a,l,0,!1);break}else{if(d=a.current.alternate,C&&!il(d)){M=h(a,l,!1),C=!1;continue}if(M===2){if(C=l,a.errorRecoveryDisabledLanes&C)var F=0;else F=a.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){l=F;e:{var Y=a;M=Xn;var ie=Y.current.memoizedState.isDehydrated;if(ie&&(sl(Y,F).flags|=256),F=h(Y,F,!1),F!==2){if(Wc&&!ie){Y.errorRecoveryDisabledLanes|=C,Er|=C,M=4;break e}C=Kt,Kt=M,C!==null&&(Kt===null?Kt=C:Kt.push.apply(Kt,C))}M=F}if(C=!1,M!==2)continue}}if(M===1){sl(a,0),ar(a,l,0,!0);break}e:{switch(g=a,C=M,C){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:ar(g,l,Fa,!ma);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(M=Kn+300-je(),10<M)){if(ar(g,l,Fa,!ma),he(g,0,!0)!==0)break e;g.timeoutHandle=N1(xf.bind(null,g,d,Kt,Ha,bn,l,Fa,Er,Ln,ma,C,2,-0,0),M);break e}xf(g,d,Kt,Ha,bn,l,Fa,Er,Ln,ma,C,0,-0,0)}}break}while(!0);ol(a)}function xf(a,l,d,g,M,C,F,Y,ie,Re,Je,nt,Le,Ie){if(a.timeoutHandle=-1,nt=l.subtreeFlags,(nt&8192||(nt&16785408)===16785408)&&(Dm={stylesheets:null,count:0,unsuspend:hL},O0(l),nt=pL(),nt!==null)){a.cancelPendingCommit=nt(ht.bind(null,a,l,C,d,g,M,F,Y,ie,Je,1,Le,Ie)),ar(a,C,F,!Re);return}ht(a,l,C,d,g,M,F,Y,ie)}function il(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var M=d[g],C=M.getSnapshot;M=M.value;try{if(!js(C(),M))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ar(a,l,d,g){l&=~kl,l&=~Er,a.suspendedLanes|=l,a.pingedLanes&=~l,g&&(a.warmLanes|=l),g=a.expirationTimes;for(var M=l;0<M;){var C=31-xt(M),F=1<<C;g[C]=-1,M&=~F}d!==0&&gt(a,d,l)}function Cr(){return(kn&6)===0?(Em(0),!1):!0}function jl(){if(Sn!==null){if(mn===0)var a=Sn.return;else a=Sn,Qr=Go=null,rm(a),wl=null,hf=0,a=Sn;for(;a!==null;)jc(a.alternate,a),a=a.return;Sn=null}}function sl(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,KU(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),jl(),ln=a,Sn=d=Ri(a.current,null),Xt=l,mn=0,gi=null,ma=!1,Kc=Fe(a,l),Wc=!1,Ln=Fa=kl=Er=sr=hi=0,Kt=Xn=null,bn=!1,(l&8)!==0&&(l|=l&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=l;0<g;){var M=31-xt(g),C=1<<M;l|=a[M],g&=~C}return Pa=l,Ju(),d}function fd(a,l){fn=null,H.H=ff,l===af||l===Wa?(l=tm(),mn=3):l===em?(l=tm(),mn=4):mn=l===N0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,gi=l,Sn===null&&(hi=1,nd(a,cs(l,a.current)))}function Qc(){var a=H.H;return H.H=ff,a===null?ff:a}function hd(){var a=H.A;return H.A=Si,a}function u(){hi=4,ma||(Xt&4194048)!==Xt&&$n.current!==null||(Kc=!0),(sr&134217727)===0&&(Er&134217727)===0||ln===null||ar(ln,Xt,Fa,!1)}function h(a,l,d){var g=kn;kn|=2;var M=Qc(),C=hd();(ln!==a||Xt!==l)&&(Ha=null,sl(a,l)),l=!1;var F=hi;e:do try{if(mn!==0&&Sn!==null){var Y=Sn,ie=gi;switch(mn){case 8:jl(),F=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(l=!0);var Re=mn;if(mn=0,gi=null,le(a,Y,ie,Re),d&&Kc){F=0;break e}break;default:Re=mn,mn=0,gi=null,le(a,Y,ie,Re)}}_(),F=hi;break}catch(Je){fd(a,Je)}while(!0);return l&&a.shellSuspendCounter++,Qr=Go=null,kn=g,H.H=M,H.A=C,Sn===null&&(ln=null,Xt=0,Ju()),F}function _(){for(;Sn!==null;)U(Sn)}function b(a,l){var d=kn;kn|=2;var g=Qc(),M=hd();ln!==a||Xt!==l?(Ha=null,xs=je()+500,sl(a,l)):Kc=Fe(a,l);e:do try{if(mn!==0&&Sn!==null){l=Sn;var C=gi;t:switch(mn){case 1:mn=0,gi=null,le(a,l,C,1);break;case 2:case 9:if(Gh(C)){mn=0,gi=null,q(l);break}l=function(){mn!==2&&mn!==9||ln!==a||(mn=7),ol(a)},C.then(l,l);break e;case 3:mn=7;break e;case 4:mn=5;break e;case 7:Gh(C)?(mn=0,gi=null,q(l)):(mn=0,gi=null,le(a,l,C,7));break;case 5:var F=null;switch(Sn.tag){case 26:F=Sn.memoizedState;case 5:case 27:var Y=Sn;if(!F||Y1(F)){mn=0,gi=null;var ie=Y.sibling;if(ie!==null)Sn=ie;else{var Re=Y.return;Re!==null?(Sn=Re,Me(Re)):Sn=null}break t}}mn=0,gi=null,le(a,l,C,5);break;case 6:mn=0,gi=null,le(a,l,C,6);break;case 8:jl(),hi=6;break e;default:throw Error(n(462))}}R();break}catch(Je){fd(a,Je)}while(!0);return Qr=Go=null,H.H=g,H.A=M,kn=d,Sn!==null?0:(ln=null,Xt=0,Ju(),hi)}function R(){for(;Sn!==null&&!rt();)U(Sn)}function U(a){var l=Il(a.alternate,a,Pa);a.memoizedProps=a.pendingProps,l===null?Me(a):Sn=l}function q(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=ca(d,l,l.pendingProps,l.type,void 0,Xt);break;case 11:l=ca(d,l,l.pendingProps,l.type.render,l.ref,Xt);break;case 5:rm(l);default:jc(d,l),l=Sn=qp(l,Pa),l=Il(d,l,Pa)}a.memoizedProps=a.pendingProps,l===null?Me(a):Sn=l}function le(a,l,d,g){Qr=Go=null,rm(l),wl=null,hf=0;var M=l.return;try{if(_A(a,M,l,d,Xt)){hi=1,nd(a,cs(d,a.current)),Sn=null;return}}catch(C){if(M!==null)throw Sn=M,C;hi=1,nd(a,cs(d,a.current)),Sn=null;return}l.flags&32768?(In||g===1?a=!0:Kc||(Xt&536870912)!==0?a=!1:(ma=a=!0,(g===2||g===9||g===3||g===6)&&(g=$n.current,g!==null&&g.tag===13&&(g.flags|=16384))),qe(l,a)):Me(l)}function Me(a){var l=a;do{if((l.flags&32768)!==0){qe(l,ma);return}a=l.return;var d=Sm(l.alternate,l,Pa);if(d!==null){Sn=d;return}if(l=l.sibling,l!==null){Sn=l;return}Sn=l=a}while(l!==null);hi===0&&(hi=5)}function qe(a,l){do{var d=Xc(a.alternate,a);if(d!==null){d.flags&=32767,Sn=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){Sn=a;return}Sn=a=d}while(a!==null);hi=6,Sn=null}function ht(a,l,d,g,M,C,F,Y,ie){a.cancelPendingCommit=null;do al();while(qi!==0);if((kn&6)!==0)throw Error(n(327));if(l!==null){if(l===a.current)throw Error(n(177));if(C=l.lanes|l.childLanes,C|=Uh,yt(a,d,C,F,Y,ie),a===ln&&(Sn=ln=null,Xt=0),ni=l,As=a,va=d,uo=C,_f=M,ya=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Pn(Z,function(){return rl(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,M=W.p,W.p=2,F=kn,kn|=4;try{Yi(a,l,d)}finally{kn=F,W.p=M,H.T=g}}qi=1,Ct(),Bt(),cn()}}function Ct(){if(qi===1){qi=0;var a=As,l=ni,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=H.T,H.T=null;var g=W.p;W.p=2;var M=kn;kn|=4;try{rd(l,a);var C=wA,F=zp(a.containerInfo),Y=C.focusedElem,ie=C.selectionRange;if(F!==Y&&Y&&Y.ownerDocument&&Hp(Y.ownerDocument.documentElement,Y)){if(ie!==null&&ju(Y)){var Re=ie.start,Je=ie.end;if(Je===void 0&&(Je=Re),"selectionStart"in Y)Y.selectionStart=Re,Y.selectionEnd=Math.min(Je,Y.value.length);else{var nt=Y.ownerDocument||document,Le=nt&&nt.defaultView||window;if(Le.getSelection){var Ie=Le.getSelection(),nn=Y.textContent.length,Zt=Math.min(ie.start,nn),ui=ie.end===void 0?Zt:Math.min(ie.end,nn);!Ie.extend&&Zt>ui&&(F=ui,ui=Zt,Zt=F);var Se=Fp(Y,Zt),ye=Fp(Y,ui);if(Se&&ye&&(Ie.rangeCount!==1||Ie.anchorNode!==Se.node||Ie.anchorOffset!==Se.offset||Ie.focusNode!==ye.node||Ie.focusOffset!==ye.offset)){var Ee=nt.createRange();Ee.setStart(Se.node,Se.offset),Ie.removeAllRanges(),Zt>ui?(Ie.addRange(Ee),Ie.extend(ye.node,ye.offset)):(Ee.setEnd(ye.node,ye.offset),Ie.addRange(Ee))}}}}for(nt=[],Ie=Y;Ie=Ie.parentNode;)Ie.nodeType===1&&nt.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<nt.length;Y++){var et=nt[Y];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Y0=!!RA,wA=RA=null}finally{kn=M,W.p=g,H.T=d}}a.current=l,qi=2}}function Bt(){if(qi===2){qi=0;var a=As,l=ni,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=H.T,H.T=null;var g=W.p;W.p=2;var M=kn;kn|=4;try{lo(a,l.alternate,l)}finally{kn=M,W.p=g,H.T=d}}qi=3}}function cn(){if(qi===4||qi===3){qi=0,Ze();var a=As,l=ni,d=va,g=ya;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?qi=5:(qi=0,ni=As=null,_a(a,a.pendingLanes));var M=a.pendingLanes;if(M===0&&(ga=null),wn(d),l=l.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(He,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=H.T,M=W.p,W.p=2,H.T=null;try{for(var C=a.onRecoverableError,F=0;F<g.length;F++){var Y=g[F];C(Y.value,{componentStack:Y.stack})}}finally{H.T=l,W.p=M}}(va&3)!==0&&al(),ol(a),M=a.pendingLanes,(d&4194090)!==0&&(M&42)!==0?a===Xl?Tr++:(Tr=0,Xl=a):Tr=0,Em(0)}}function _a(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,Bc(l)))}function al(a){return Ct(),Bt(),cn(),rl()}function rl(){if(qi!==5)return!1;var a=As,l=uo;uo=0;var d=wn(va),g=H.T,M=W.p;try{W.p=32>d?32:d,H.T=null,d=_f,_f=null;var C=As,F=va;if(qi=0,ni=As=null,va=0,(kn&6)!==0)throw Error(n(331));var Y=kn;if(kn|=4,Mm(C.current),cd(C,C.current,F,d),kn=Y,Em(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(He,C)}catch{}return!0}finally{W.p=M,H.T=g,_a(a,l)}}function Be(a,l,d){l=cs(d,l),l=id(a.stateNode,l,2),a=to(a,l,2),a!==null&&(ke(a,2),ol(a))}function me(a,l,d){if(a.tag===3)Be(a,a,d);else for(;l!==null;){if(l.tag===3){Be(l,a,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ga===null||!ga.has(g))){a=cs(d,a),d=L0(2),g=to(l,d,2),g!==null&&(sd(d,g,l,a),ke(g,2),ol(g));break}}l=l.return}}function Pe(a,l,d){var g=a.pingCache;if(g===null){g=a.pingCache=new bm;var M=new Set;g.set(l,M)}else M=g.get(l),M===void 0&&(M=new Set,g.set(l,M));M.has(d)||(Wc=!0,M.add(d),a=ft.bind(null,a,l,d),l.then(a,a))}function ft(a,l,d){var g=a.pingCache;g!==null&&g.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,ln===a&&(Xt&d)===d&&(hi===4||hi===3&&(Xt&62914560)===Xt&&300>je()-Kn?(kn&2)===0&&sl(a,0):kl|=d,Ln===Xt&&(Ln=0)),ol(a)}function zt(a,l){l===0&&(l=be()),a=Wr(a,l),a!==null&&(ke(a,l),ol(a))}function di(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),zt(a,d)}function tn(a,l){var d=0;switch(a.tag){case 13:var g=a.stateNode,M=a.memoizedState;M!==null&&(d=M.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(l),zt(a,d)}function Pn(a,l){return dt(a,l)}var Ui=null,Mn=null,Rr=!1,dd=!1,xA=!1,Af=0;function ol(a){a!==Mn&&a.next===null&&(Mn===null?Ui=Mn=a:Mn=Mn.next=a),dd=!0,Rr||(Rr=!0,zU())}function Em(a,l){if(!xA&&dd){xA=!0;do for(var d=!1,g=Ui;g!==null;){if(a!==0){var M=g.pendingLanes;if(M===0)var C=0;else{var F=g.suspendedLanes,Y=g.pingedLanes;C=(1<<31-xt(42|a)+1)-1,C&=M&~(F&~Y),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(d=!0,b1(g,C))}else C=Xt,C=he(g,g===ln?C:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(C&3)===0||Fe(g,C)||(d=!0,b1(g,C));g=g.next}while(d);xA=!1}}function HU(){A1()}function A1(){dd=Rr=!1;var a=0;Af!==0&&(JU()&&(a=Af),Af=0);for(var l=je(),d=null,g=Ui;g!==null;){var M=g.next,C=S1(g,l);C===0?(g.next=null,d===null?Ui=M:d.next=M,M===null&&(Mn=d)):(d=g,(a!==0||(C&3)!==0)&&(dd=!0)),g=M}Em(a)}function S1(a,l){for(var d=a.suspendedLanes,g=a.pingedLanes,M=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var F=31-xt(C),Y=1<<F,ie=M[F];ie===-1?((Y&d)===0||(Y&g)!==0)&&(M[F]=lt(Y,l)):ie<=l&&(a.expiredLanes|=Y),C&=~Y}if(l=ln,d=Xt,d=he(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,d===0||a===l&&(mn===2||mn===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&K(g),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||Fe(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(g!==null&&K(g),wn(d)){case 2:case 8:d=We;break;case 32:d=Z;break;case 268435456:d=xe;break;default:d=Z}return g=M1.bind(null,a),d=dt(d,g),a.callbackPriority=l,a.callbackNode=d,l}return g!==null&&g!==null&&K(g),a.callbackPriority=2,a.callbackNode=null,2}function M1(a,l){if(qi!==0&&qi!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(al()&&a.callbackNode!==d)return null;var g=Xt;return g=he(a,a===ln?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(Zc(a,g,l),S1(a,je()),a.callbackNode!=null&&a.callbackNode===d?M1.bind(null,a):null)}function b1(a,l){if(al())return null;Zc(a,l,!0)}function zU(){WU(function(){(kn&6)!==0?dt(_t,HU):A1()})}function AA(){return Af===0&&(Af=ue()),Af}function E1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Uu(""+a)}function T1(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function GU(a,l,d,g,M){if(l==="submit"&&d&&d.stateNode===M){var C=E1((M[Ti]||null).action),F=g.submitter;F&&(l=(l=F[Ti]||null)?E1(l.formAction):F.getAttribute("formAction"),l!==null&&(C=l,F=null));var Y=new vc("action","action",null,g,M);a.push({event:Y,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Af!==0){var ie=F?T1(M,F):new FormData(M);ym(d,{pending:!0,data:ie,method:M.method,action:C},null,ie)}}else typeof C=="function"&&(Y.preventDefault(),ie=F?T1(M,F):new FormData(M),ym(d,{pending:!0,data:ie,method:M.method,action:C},C,ie))},currentTarget:M}]})}}for(var SA=0;SA<qu.length;SA++){var MA=qu[SA],VU=MA.toLowerCase(),kU=MA[0].toUpperCase()+MA.slice(1);$i(VU,"on"+kU)}$i(Ds,"onAnimationEnd"),$i(kp,"onAnimationIteration"),$i(qs,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(jv,"onTransitionRun"),$i(Jr,"onTransitionStart"),$i(Ec,"onTransitionCancel"),$i(Kr,"onTransitionEnd"),V("onMouseEnter",["mouseout","mouseover"]),V("onMouseLeave",["mouseout","mouseover"]),V("onPointerEnter",["pointerout","pointerover"]),V("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tm));function C1(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var g=a[d],M=g.event;g=g.listeners;e:{var C=void 0;if(l)for(var F=g.length-1;0<=F;F--){var Y=g[F],ie=Y.instance,Re=Y.currentTarget;if(Y=Y.listener,ie!==C&&M.isPropagationStopped())break e;C=Y,M.currentTarget=Re;try{C(M)}catch(Je){Dl(Je)}M.currentTarget=null,C=ie}else for(F=0;F<g.length;F++){if(Y=g[F],ie=Y.instance,Re=Y.currentTarget,Y=Y.listener,ie!==C&&M.isPropagationStopped())break e;C=Y,M.currentTarget=Re;try{C(M)}catch(Je){Dl(Je)}M.currentTarget=null,C=ie}}}}function Cn(a,l){var d=l[vs];d===void 0&&(d=l[vs]=new Set);var g=a+"__bubble";d.has(g)||(R1(l,a,2,!1),d.add(g))}function bA(a,l,d){var g=0;l&&(g|=4),R1(d,a,g,l)}var P0="_reactListening"+Math.random().toString(36).slice(2);function EA(a){if(!a[P0]){a[P0]=!0,Ge.forEach(function(d){d!=="selectionchange"&&(XU.has(d)||bA(d,!1,a),bA(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[P0]||(l[P0]=!0,bA("selectionchange",!1,l))}}function R1(a,l,d,g){switch(Q1(l)){case 2:var M=vL;break;case 8:M=yL;break;default:M=HA}d=M.bind(null,l,d,a),M=void 0,!Nu||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(M=!0),g?M!==void 0?a.addEventListener(l,d,{capture:!0,passive:M}):a.addEventListener(l,d,!0):M!==void 0?a.addEventListener(l,d,{passive:M}):a.addEventListener(l,d,!1)}function TA(a,l,d,g,M){var C=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var F=g.tag;if(F===3||F===4){var Y=g.stateNode.containerInfo;if(Y===M)break;if(F===4)for(F=g.return;F!==null;){var ie=F.tag;if((ie===3||ie===4)&&F.stateNode.containerInfo===M)return;F=F.return}for(;Y!==null;){if(F=G(Y),F===null)return;if(ie=F.tag,ie===5||ie===6||ie===26||ie===27){g=C=F;continue e}Y=Y.parentNode}}g=g.return}Tp(function(){var Re=C,Je=_h(d),nt=[];e:{var Le=Dh.get(a);if(Le!==void 0){var Ie=vc,nn=a;switch(a){case"keypress":if(wo(d)===0)break e;case"keydown":case"keyup":Ie=Dp;break;case"focusin":nn="focus",Ie=Ah;break;case"focusout":nn="blur",Ie=Ah;break;case"beforeblur":case"afterblur":Ie=Ah;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=wp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=lA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Lp;break;case Ds:case kp:case qs:Ie=Bv;break;case Kr:Ie=Xr;break;case"scroll":case"scrollend":Ie=Cv;break;case"wheel":Ie=cA;break;case"copy":case"cut":case"paste":Ie=Uv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Mh;break;case"toggle":case"beforetoggle":Ie=Do}var Zt=(l&4)!==0,ui=!Zt&&(a==="scroll"||a==="scrollend"),Se=Zt?Le!==null?Le+"Capture":null:Le;Zt=[];for(var ye=Re,Ee;ye!==null;){var et=ye;if(Ee=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||Ee===null||Se===null||(et=pc(ye,Se),et!=null&&Zt.push(Cm(ye,et,Ee))),ui)break;ye=ye.return}0<Zt.length&&(Le=new Ie(Le,nn,null,d,Je),nt.push({event:Le,listeners:Zt}))}}if((l&7)===0){e:{if(Le=a==="mouseover"||a==="pointerover",Ie=a==="mouseout"||a==="pointerout",Le&&d!==yh&&(nn=d.relatedTarget||d.fromElement)&&(G(nn)||nn[Ci]))break e;if((Ie||Le)&&(Le=Je.window===Je?Je:(Le=Je.ownerDocument)?Le.defaultView||Le.parentWindow:window,Ie?(nn=d.relatedTarget||d.toElement,Ie=Re,nn=nn?G(nn):null,nn!==null&&(ui=r(nn),Zt=nn.tag,nn!==ui||Zt!==5&&Zt!==27&&Zt!==6)&&(nn=null)):(Ie=null,nn=Re),Ie!==nn)){if(Zt=wp,et="onMouseLeave",Se="onMouseEnter",ye="mouse",(a==="pointerout"||a==="pointerover")&&(Zt=Mh,et="onPointerLeave",Se="onPointerEnter",ye="pointer"),ui=Ie==null?Le:de(Ie),Ee=nn==null?Le:de(nn),Le=new Zt(et,ye+"leave",Ie,d,Je),Le.target=ui,Le.relatedTarget=Ee,et=null,G(Je)===Re&&(Zt=new Zt(Se,ye+"enter",nn,d,Je),Zt.target=Ee,Zt.relatedTarget=ui,et=Zt),ui=et,Ie&&nn)t:{for(Zt=Ie,Se=nn,ye=0,Ee=Zt;Ee;Ee=pd(Ee))ye++;for(Ee=0,et=Se;et;et=pd(et))Ee++;for(;0<ye-Ee;)Zt=pd(Zt),ye--;for(;0<Ee-ye;)Se=pd(Se),Ee--;for(;ye--;){if(Zt===Se||Se!==null&&Zt===Se.alternate)break t;Zt=pd(Zt),Se=pd(Se)}Zt=null}else Zt=null;Ie!==null&&w1(nt,Le,Ie,Zt,!1),nn!==null&&ui!==null&&w1(nt,ui,nn,Zt,!0)}}e:{if(Le=Re?de(Re):window,Ie=Le.nodeName&&Le.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&Le.type==="file")var Ot=Eh;else if(Pp(Le))if(Th)Ot=No;else{Ot=Vv;var En=uA}else Ie=Le.nodeName,!Ie||Ie.toLowerCase()!=="input"||Le.type!=="checkbox"&&Le.type!=="radio"?Re&&vh(Re.elementType)&&(Ot=Eh):Ot=Xu;if(Ot&&(Ot=Ot(a,Re))){Xs(nt,Ot,d,Je);break e}En&&En(a,Le,Re),a==="focusout"&&Re&&Le.type==="number"&&Re.memoizedProps.value!=null&&fi(Le,"number",Le.value)}switch(En=Re?de(Re):window,a){case"focusin":(Pp(En)||En.contentEditable==="true")&&(Yr=En,Rh=Re,Yu=null);break;case"focusout":Yu=Rh=Yr=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,Vp(nt,d,Je);break;case"selectionchange":if(Gp)break;case"keydown":case"keyup":Vp(nt,d,Je)}var Vt;if(Fu)e:{switch(a){case"compositionstart":var Qt="onCompositionStart";break e;case"compositionend":Qt="onCompositionEnd";break e;case"compositionupdate":Qt="onCompositionUpdate";break e}Qt=void 0}else Lo?Gu(a,d)&&(Qt="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Qt="onCompositionStart");Qt&&(zu&&d.locale!=="ko"&&(Lo||Qt!=="onCompositionStart"?Qt==="onCompositionEnd"&&Lo&&(Vt=Rp()):(Vr=Je,Cp="value"in Vr?Vr.value:Vr.textContent,Lo=!0)),En=F0(Re,Qt),0<En.length&&(Qt=new Sh(Qt,a,null,d,Je),nt.push({event:Qt,listeners:En}),Vt?Qt.data=Vt:(Vt=Op(d),Vt!==null&&(Qt.data=Vt)))),(Vt=Hu?Vu(a,d):Ip(a,d))&&(Qt=F0(Re,"onBeforeInput"),0<Qt.length&&(En=new Sh("onBeforeInput","beforeinput",null,d,Je),nt.push({event:En,listeners:Qt}),En.data=Vt)),GU(nt,a,Re,d,Je)}C1(nt,l)})}function Cm(a,l,d){return{instance:a,listener:l,currentTarget:d}}function F0(a,l){for(var d=l+"Capture",g=[];a!==null;){var M=a,C=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||C===null||(M=pc(a,d),M!=null&&g.unshift(Cm(a,M,C)),M=pc(a,l),M!=null&&g.push(Cm(a,M,C))),a.tag===3)return g;a=a.return}return[]}function pd(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function w1(a,l,d,g,M){for(var C=l._reactName,F=[];d!==null&&d!==g;){var Y=d,ie=Y.alternate,Re=Y.stateNode;if(Y=Y.tag,ie!==null&&ie===g)break;Y!==5&&Y!==26&&Y!==27||Re===null||(ie=Re,M?(Re=pc(d,C),Re!=null&&F.unshift(Cm(d,Re,ie))):M||(Re=pc(d,C),Re!=null&&F.push(Cm(d,Re,ie)))),d=d.return}F.length!==0&&a.push({event:l,listeners:F})}var jU=/\r\n?/g,YU=/\u0000|\uFFFD/g;function B1(a){return(typeof a=="string"?a:""+a).replace(jU,`
`).replace(YU,"")}function D1(a,l){return l=B1(l),B1(a)===l}function H0(){}function ci(a,l,d,g,M,C){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||ws(a,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&ws(a,""+g);break;case"className":Ve(a,"class",g);break;case"tabIndex":Ve(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Ve(a,d,g);break;case"style":Du(a,g,C);break;case"data":if(l!=="object"){Ve(a,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=Uu(""+g),a.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(d==="formAction"?(l!=="input"&&ci(a,l,"name",M.name,M,null),ci(a,l,"formEncType",M.formEncType,M,null),ci(a,l,"formMethod",M.formMethod,M,null),ci(a,l,"formTarget",M.formTarget,M,null)):(ci(a,l,"encType",M.encType,M,null),ci(a,l,"method",M.method,M,null),ci(a,l,"target",M.target,M,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=Uu(""+g),a.setAttribute(d,g);break;case"onClick":g!=null&&(a.onclick=H0);break;case"onScroll":g!=null&&Cn("scroll",a);break;case"onScrollEnd":g!=null&&Cn("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(d=g.__html,d!=null){if(M.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}d=Uu(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""+g):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":g===!0?a.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,g):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(d,g):a.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(d):a.setAttribute(d,g);break;case"popover":Cn("beforetoggle",a),Cn("toggle",a),Te(a,"popover",g);break;case"xlinkActuate":Ye(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ye(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ye(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ye(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ye(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ye(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ye(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ye(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ye(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Te(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=bp.get(d)||d,Te(a,d,g))}}function CA(a,l,d,g,M,C){switch(d){case"style":Du(a,g,C);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(d=g.__html,d!=null){if(M.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"children":typeof g=="string"?ws(a,g):(typeof g=="number"||typeof g=="bigint")&&ws(a,""+g);break;case"onScroll":g!=null&&Cn("scroll",a);break;case"onScrollEnd":g!=null&&Cn("scrollend",a);break;case"onClick":g!=null&&(a.onclick=H0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ct.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(M=d.endsWith("Capture"),l=d.slice(2,M?d.length-7:void 0),C=a[Ti]||null,C=C!=null?C[d]:null,typeof C=="function"&&a.removeEventListener(l,C,M),typeof g=="function")){typeof C!="function"&&C!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,g,M);break e}d in a?a[d]=g:g===!0?a.setAttribute(d,""):Te(a,d,g)}}}function Fs(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cn("error",a),Cn("load",a);var g=!1,M=!1,C;for(C in d)if(d.hasOwnProperty(C)){var F=d[C];if(F!=null)switch(C){case"src":g=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:ci(a,l,C,F,d,null)}}M&&ci(a,l,"srcSet",d.srcSet,d,null),g&&ci(a,l,"src",d.src,d,null);return;case"input":Cn("invalid",a);var Y=C=F=M=null,ie=null,Re=null;for(g in d)if(d.hasOwnProperty(g)){var Je=d[g];if(Je!=null)switch(g){case"name":M=Je;break;case"type":F=Je;break;case"checked":ie=Je;break;case"defaultChecked":Re=Je;break;case"value":C=Je;break;case"defaultValue":Y=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(n(137,l));break;default:ci(a,l,g,Je,d,null)}}pn(a,C,Y,ie,Re,F,M,!1),Yn(a);return;case"select":Cn("invalid",a),g=F=C=null;for(M in d)if(d.hasOwnProperty(M)&&(Y=d[M],Y!=null))switch(M){case"value":C=Y;break;case"defaultValue":F=Y;break;case"multiple":g=Y;default:ci(a,l,M,Y,d,null)}l=C,d=F,a.multiple=!!g,l!=null?Bn(a,!!g,l,!1):d!=null&&Bn(a,!!g,d,!0);return;case"textarea":Cn("invalid",a),C=M=g=null;for(F in d)if(d.hasOwnProperty(F)&&(Y=d[F],Y!=null))switch(F){case"value":g=Y;break;case"defaultValue":M=Y;break;case"children":C=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:ci(a,l,F,Y,d,null)}Qi(a,g,M,C),Yn(a);return;case"option":for(ie in d)if(d.hasOwnProperty(ie)&&(g=d[ie],g!=null))switch(ie){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ci(a,l,ie,g,d,null)}return;case"dialog":Cn("beforetoggle",a),Cn("toggle",a),Cn("cancel",a),Cn("close",a);break;case"iframe":case"object":Cn("load",a);break;case"video":case"audio":for(g=0;g<Tm.length;g++)Cn(Tm[g],a);break;case"image":Cn("error",a),Cn("load",a);break;case"details":Cn("toggle",a);break;case"embed":case"source":case"link":Cn("error",a),Cn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Re in d)if(d.hasOwnProperty(Re)&&(g=d[Re],g!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:ci(a,l,Re,g,d,null)}return;default:if(vh(l)){for(Je in d)d.hasOwnProperty(Je)&&(g=d[Je],g!==void 0&&CA(a,l,Je,g,d,void 0));return}}for(Y in d)d.hasOwnProperty(Y)&&(g=d[Y],g!=null&&ci(a,l,Y,g,d,null))}function qU(a,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,C=null,F=null,Y=null,ie=null,Re=null,Je=null;for(Ie in d){var nt=d[Ie];if(d.hasOwnProperty(Ie)&&nt!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":ie=nt;default:g.hasOwnProperty(Ie)||ci(a,l,Ie,null,g,nt)}}for(var Le in g){var Ie=g[Le];if(nt=d[Le],g.hasOwnProperty(Le)&&(Ie!=null||nt!=null))switch(Le){case"type":C=Ie;break;case"name":M=Ie;break;case"checked":Re=Ie;break;case"defaultChecked":Je=Ie;break;case"value":F=Ie;break;case"defaultValue":Y=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(n(137,l));break;default:Ie!==nt&&ci(a,l,Le,Ie,g,nt)}}vn(a,F,Y,ie,Re,Je,C,M);return;case"select":Ie=F=Y=Le=null;for(C in d)if(ie=d[C],d.hasOwnProperty(C)&&ie!=null)switch(C){case"value":break;case"multiple":Ie=ie;default:g.hasOwnProperty(C)||ci(a,l,C,null,g,ie)}for(M in g)if(C=g[M],ie=d[M],g.hasOwnProperty(M)&&(C!=null||ie!=null))switch(M){case"value":Le=C;break;case"defaultValue":Y=C;break;case"multiple":F=C;default:C!==ie&&ci(a,l,M,C,g,ie)}l=Y,d=F,g=Ie,Le!=null?Bn(a,!!d,Le,!1):!!g!=!!d&&(l!=null?Bn(a,!!d,l,!0):Bn(a,!!d,d?[]:"",!1));return;case"textarea":Ie=Le=null;for(Y in d)if(M=d[Y],d.hasOwnProperty(Y)&&M!=null&&!g.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:ci(a,l,Y,null,g,M)}for(F in g)if(M=g[F],C=d[F],g.hasOwnProperty(F)&&(M!=null||C!=null))switch(F){case"value":Le=M;break;case"defaultValue":Ie=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==C&&ci(a,l,F,M,g,C)}Qn(a,Le,Ie);return;case"option":for(var nn in d)if(Le=d[nn],d.hasOwnProperty(nn)&&Le!=null&&!g.hasOwnProperty(nn))switch(nn){case"selected":a.selected=!1;break;default:ci(a,l,nn,null,g,Le)}for(ie in g)if(Le=g[ie],Ie=d[ie],g.hasOwnProperty(ie)&&Le!==Ie&&(Le!=null||Ie!=null))switch(ie){case"selected":a.selected=Le&&typeof Le!="function"&&typeof Le!="symbol";break;default:ci(a,l,ie,Le,g,Ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in d)Le=d[Zt],d.hasOwnProperty(Zt)&&Le!=null&&!g.hasOwnProperty(Zt)&&ci(a,l,Zt,null,g,Le);for(Re in g)if(Le=g[Re],Ie=d[Re],g.hasOwnProperty(Re)&&Le!==Ie&&(Le!=null||Ie!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,l));break;default:ci(a,l,Re,Le,g,Ie)}return;default:if(vh(l)){for(var ui in d)Le=d[ui],d.hasOwnProperty(ui)&&Le!==void 0&&!g.hasOwnProperty(ui)&&CA(a,l,ui,void 0,g,Le);for(Je in g)Le=g[Je],Ie=d[Je],!g.hasOwnProperty(Je)||Le===Ie||Le===void 0&&Ie===void 0||CA(a,l,Je,Le,g,Ie);return}}for(var Se in d)Le=d[Se],d.hasOwnProperty(Se)&&Le!=null&&!g.hasOwnProperty(Se)&&ci(a,l,Se,null,g,Le);for(nt in g)Le=g[nt],Ie=d[nt],!g.hasOwnProperty(nt)||Le===Ie||Le==null&&Ie==null||ci(a,l,nt,Le,g,Ie)}var RA=null,wA=null;function z0(a){return a.nodeType===9?a:a.ownerDocument}function U1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L1(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function BA(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var DA=null;function JU(){var a=window.event;return a&&a.type==="popstate"?a===DA?!1:(DA=a,!0):(DA=null,!1)}var N1=typeof setTimeout=="function"?setTimeout:void 0,KU=typeof clearTimeout=="function"?clearTimeout:void 0,O1=typeof Promise=="function"?Promise:void 0,WU=typeof queueMicrotask=="function"?queueMicrotask:typeof O1<"u"?function(a){return O1.resolve(null).then(a).catch(ZU)}:N1;function ZU(a){setTimeout(function(){throw a})}function $c(a){return a==="head"}function I1(a,l){var d=l,g=0,M=0;do{var C=d.nextSibling;if(a.removeChild(d),C&&C.nodeType===8)if(d=C.data,d==="/$"){if(0<g&&8>g){d=g;var F=a.ownerDocument;if(d&1&&Rm(F.documentElement),d&2&&Rm(F.body),d&4)for(d=F.head,Rm(d),F=d.firstChild;F;){var Y=F.nextSibling,ie=F.nodeName;F[ks]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&F.rel.toLowerCase()==="stylesheet"||d.removeChild(F),F=Y}}if(M===0){a.removeChild(C),Im(l);return}M--}else d==="$"||d==="$?"||d==="$!"?M++:g=d.charCodeAt(0)-48;else g=0;d=C}while(d);Im(l)}function UA(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":UA(d),Gn(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function QU(a,l,d,g){for(;a.nodeType===1;){var M=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[ks])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==M.rel||a.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||a.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||a.getAttribute("title")!==(M.title==null?null:M.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(M.src==null?null:M.src)||a.getAttribute("type")!==(M.type==null?null:M.type)||a.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var C=M.name==null?null:""+M.name;if(M.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=fo(a.nextSibling),a===null)break}return null}function $U(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=fo(a.nextSibling),a===null))return null;return a}function LA(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function eL(a,l){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function fo(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var NA=null;function P1(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}function F1(a,l,d){switch(l=z0(d),a){case"html":if(a=l.documentElement,!a)throw Error(n(452));return a;case"head":if(a=l.head,!a)throw Error(n(453));return a;case"body":if(a=l.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Rm(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Gn(a)}var wr=new Map,H1=new Set;function G0(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Yl=W.d;W.d={f:tL,r:nL,D:iL,C:sL,L:aL,m:rL,X:lL,S:oL,M:cL};function tL(){var a=Yl.f(),l=Cr();return a||l}function nL(a){var l=J(a);l!==null&&l.tag===5&&l.type==="form"?x0(l):Yl.r(a)}var md=typeof document>"u"?null:document;function z1(a,l,d){var g=md;if(g&&typeof l=="string"&&l){var M=jt(l);M='link[rel="'+a+'"][href="'+M+'"]',typeof d=="string"&&(M+='[crossorigin="'+d+'"]'),H1.has(M)||(H1.add(M),a={rel:a,crossOrigin:d,href:l},g.querySelector(M)===null&&(l=g.createElement("link"),Fs(l,"link",a),Ue(l),g.head.appendChild(l)))}}function iL(a){Yl.D(a),z1("dns-prefetch",a,null)}function sL(a,l){Yl.C(a,l),z1("preconnect",a,l)}function aL(a,l,d){Yl.L(a,l,d);var g=md;if(g&&a&&l){var M='link[rel="preload"][as="'+jt(l)+'"]';l==="image"&&d&&d.imageSrcSet?(M+='[imagesrcset="'+jt(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(M+='[imagesizes="'+jt(d.imageSizes)+'"]')):M+='[href="'+jt(a)+'"]';var C=M;switch(l){case"style":C=gd(a);break;case"script":C=vd(a)}wr.has(C)||(a=m({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),wr.set(C,a),g.querySelector(M)!==null||l==="style"&&g.querySelector(wm(C))||l==="script"&&g.querySelector(Bm(C))||(l=g.createElement("link"),Fs(l,"link",a),Ue(l),g.head.appendChild(l)))}}function rL(a,l){Yl.m(a,l);var d=md;if(d&&a){var g=l&&typeof l.as=="string"?l.as:"script",M='link[rel="modulepreload"][as="'+jt(g)+'"][href="'+jt(a)+'"]',C=M;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=vd(a)}if(!wr.has(C)&&(a=m({rel:"modulepreload",href:a},l),wr.set(C,a),d.querySelector(M)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Bm(C)))return}g=d.createElement("link"),Fs(g,"link",a),Ue(g),d.head.appendChild(g)}}}function oL(a,l,d){Yl.S(a,l,d);var g=md;if(g&&a){var M=we(g).hoistableStyles,C=gd(a);l=l||"default";var F=M.get(C);if(!F){var Y={loading:0,preload:null};if(F=g.querySelector(wm(C)))Y.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":l},d),(d=wr.get(C))&&OA(a,d);var ie=F=g.createElement("link");Ue(ie),Fs(ie,"link",a),ie._p=new Promise(function(Re,Je){ie.onload=Re,ie.onerror=Je}),ie.addEventListener("load",function(){Y.loading|=1}),ie.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,V0(F,l,g)}F={type:"stylesheet",instance:F,count:1,state:Y},M.set(C,F)}}}function lL(a,l){Yl.X(a,l);var d=md;if(d&&a){var g=we(d).hoistableScripts,M=vd(a),C=g.get(M);C||(C=d.querySelector(Bm(M)),C||(a=m({src:a,async:!0},l),(l=wr.get(M))&&IA(a,l),C=d.createElement("script"),Ue(C),Fs(C,"link",a),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(M,C))}}function cL(a,l){Yl.M(a,l);var d=md;if(d&&a){var g=we(d).hoistableScripts,M=vd(a),C=g.get(M);C||(C=d.querySelector(Bm(M)),C||(a=m({src:a,async:!0,type:"module"},l),(l=wr.get(M))&&IA(a,l),C=d.createElement("script"),Ue(C),Fs(C,"link",a),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(M,C))}}function G1(a,l,d,g){var M=(M=Oe.current)?G0(M):null;if(!M)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=gd(d.href),d=we(M).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=gd(d.href);var C=we(M).hoistableStyles,F=C.get(a);if(F||(M=M.ownerDocument||M,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,F),(C=M.querySelector(wm(a)))&&!C._p&&(F.instance=C,F.state.loading=5),wr.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},wr.set(a,d),C||uL(M,a,d,F.state))),l&&g===null)throw Error(n(528,""));return F}if(l&&g!==null)throw Error(n(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=vd(d),d=we(M).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function gd(a){return'href="'+jt(a)+'"'}function wm(a){return'link[rel="stylesheet"]['+a+"]"}function V1(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function uL(a,l,d,g){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=a.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),Fs(l,"link",d),Ue(l),a.head.appendChild(l))}function vd(a){return'[src="'+jt(a)+'"]'}function Bm(a){return"script[async]"+a}function k1(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=a.querySelector('style[data-href~="'+jt(d.href)+'"]');if(g)return l.instance=g,Ue(g),g;var M=m({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),Ue(g),Fs(g,"style",M),V0(g,d.precedence,a),l.instance=g;case"stylesheet":M=gd(d.href);var C=a.querySelector(wm(M));if(C)return l.state.loading|=4,l.instance=C,Ue(C),C;g=V1(d),(M=wr.get(M))&&OA(g,M),C=(a.ownerDocument||a).createElement("link"),Ue(C);var F=C;return F._p=new Promise(function(Y,ie){F.onload=Y,F.onerror=ie}),Fs(C,"link",g),l.state.loading|=4,V0(C,d.precedence,a),l.instance=C;case"script":return C=vd(d.src),(M=a.querySelector(Bm(C)))?(l.instance=M,Ue(M),M):(g=d,(M=wr.get(C))&&(g=m({},d),IA(g,M)),a=a.ownerDocument||a,M=a.createElement("script"),Ue(M),Fs(M,"link",g),a.head.appendChild(M),l.instance=M);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,V0(g,d.precedence,a));return l.instance}function V0(a,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=g.length?g[g.length-1]:null,C=M,F=0;F<g.length;F++){var Y=g[F];if(Y.dataset.precedence===l)C=Y;else if(C!==M)break}C?C.parentNode.insertBefore(a,C.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function OA(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function IA(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var k0=null;function X1(a,l,d){if(k0===null){var g=new Map,M=k0=new Map;M.set(d,g)}else M=k0,g=M.get(d),g||(g=new Map,M.set(d,g));if(g.has(a))return g;for(g.set(a,null),d=d.getElementsByTagName(a),M=0;M<d.length;M++){var C=d[M];if(!(C[ks]||C[_i]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var F=C.getAttribute(l)||"";F=a+F;var Y=g.get(F);Y?Y.push(C):g.set(F,[C])}}return g}function j1(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function fL(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Y1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Dm=null;function hL(){}function dL(a,l,d){if(Dm===null)throw Error(n(475));var g=Dm;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var M=gd(d.href),C=a.querySelector(wm(M));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=X0.bind(g),a.then(g,g)),l.state.loading|=4,l.instance=C,Ue(C);return}C=a.ownerDocument||a,d=V1(d),(M=wr.get(M))&&OA(d,M),C=C.createElement("link"),Ue(C);var F=C;F._p=new Promise(function(Y,ie){F.onload=Y,F.onerror=ie}),Fs(C,"link",d),l.instance=C}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(g.count++,l=X0.bind(g),a.addEventListener("load",l),a.addEventListener("error",l))}}function pL(){if(Dm===null)throw Error(n(475));var a=Dm;return a.stylesheets&&a.count===0&&PA(a,a.stylesheets),0<a.count?function(l){var d=setTimeout(function(){if(a.stylesheets&&PA(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d)}}:null}function X0(){if(this.count--,this.count===0){if(this.stylesheets)PA(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var j0=null;function PA(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,j0=new Map,l.forEach(mL,a),j0=null,X0.call(a))}function mL(a,l){if(!(l.state.loading&4)){var d=j0.get(a);if(d)var g=d.get(null);else{d=new Map,j0.set(a,d);for(var M=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<M.length;C++){var F=M[C];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(d.set(F.dataset.precedence,F),g=F)}g&&d.set(null,g)}M=l.instance,F=M.getAttribute("data-precedence"),C=d.get(F)||g,C===g&&d.set(null,M),d.set(F,M),this.count++,g=X0.bind(this),M.addEventListener("load",g),M.addEventListener("error",g),C?C.parentNode.insertBefore(M,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(M,a.firstChild)),l.state.loading|=4}}var Um={$$typeof:B,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function gL(a,l,d,g,M,C,F,Y){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=De(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=De(0),this.hiddenUpdates=De(null),this.identifierPrefix=g,this.onUncaughtError=M,this.onCaughtError=C,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function q1(a,l,d,g,M,C,F,Y,ie,Re,Je,nt){return a=new gL(a,l,d,F,Y,ie,Re,nt),l=1,C===!0&&(l|=24),C=Js(3,null,null,l),a.current=C,C.stateNode=a,l=Fh(),l.refCount++,a.pooledCache=l,l.refCount++,C.memoizedState={element:g,isDehydrated:d,cache:l},nm(C),a}function J1(a){return a?(a=Po,a):Po}function K1(a,l,d,g,M,C){M=J1(M),g.context===null?g.context=M:g.pendingContext=M,g=gr(l),g.payload={element:d},C=C===void 0?null:C,C!==null&&(g.callback=C),d=to(a,g,l),d!==null&&(Ps(d,a,l),Rl(d,a,l))}function W1(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function FA(a,l){W1(a,l),(a=a.alternate)&&W1(a,l)}function Z1(a){if(a.tag===13){var l=Wr(a,67108864);l!==null&&Ps(l,a,67108864),FA(a,67108864)}}var Y0=!0;function vL(a,l,d,g){var M=H.T;H.T=null;var C=W.p;try{W.p=2,HA(a,l,d,g)}finally{W.p=C,H.T=M}}function yL(a,l,d,g){var M=H.T;H.T=null;var C=W.p;try{W.p=8,HA(a,l,d,g)}finally{W.p=C,H.T=M}}function HA(a,l,d,g){if(Y0){var M=zA(g);if(M===null)TA(a,l,g,q0,d),$1(a,g);else if(xL(M,a,l,d,g))g.stopPropagation();else if($1(a,g),l&4&&-1<_L.indexOf(a)){for(;M!==null;){var C=J(M);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var F=mt(C.pendingLanes);if(F!==0){var Y=C;for(Y.pendingLanes|=2,Y.entangledLanes|=2;F;){var ie=1<<31-xt(F);Y.entanglements[1]|=ie,F&=~ie}ol(C),(kn&6)===0&&(xs=je()+500,Em(0))}}break;case 13:Y=Wr(C,2),Y!==null&&Ps(Y,C,2),Cr(),FA(C,2)}if(C=zA(g),C===null&&TA(a,l,g,q0,d),C===M)break;M=C}M!==null&&g.stopPropagation()}else TA(a,l,g,null,d)}}function zA(a){return a=_h(a),GA(a)}var q0=null;function GA(a){if(q0=null,a=G(a),a!==null){var l=r(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=o(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return q0=a,null}function Q1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case _t:return 2;case We:return 8;case Z:case k:return 32;case xe:return 268435456;default:return 32}default:return 32}}var VA=!1,eu=null,tu=null,nu=null,Lm=new Map,Nm=new Map,iu=[],_L="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $1(a,l){switch(a){case"focusin":case"focusout":eu=null;break;case"dragenter":case"dragleave":tu=null;break;case"mouseover":case"mouseout":nu=null;break;case"pointerover":case"pointerout":Lm.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nm.delete(l.pointerId)}}function Om(a,l,d,g,M,C){return a===null||a.nativeEvent!==C?(a={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:C,targetContainers:[M]},l!==null&&(l=J(l),l!==null&&Z1(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,M!==null&&l.indexOf(M)===-1&&l.push(M),a)}function xL(a,l,d,g,M){switch(l){case"focusin":return eu=Om(eu,a,l,d,g,M),!0;case"dragenter":return tu=Om(tu,a,l,d,g,M),!0;case"mouseover":return nu=Om(nu,a,l,d,g,M),!0;case"pointerover":var C=M.pointerId;return Lm.set(C,Om(Lm.get(C)||null,a,l,d,g,M)),!0;case"gotpointercapture":return C=M.pointerId,Nm.set(C,Om(Nm.get(C)||null,a,l,d,g,M)),!0}return!1}function eT(a){var l=G(a.target);if(l!==null){var d=r(l);if(d!==null){if(l=d.tag,l===13){if(l=o(d),l!==null){a.blockedOn=l,yi(a.priority,function(){if(d.tag===13){var g=Mi();g=rn(g);var M=Wr(d,g);M!==null&&Ps(M,d,g),FA(d,g)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function J0(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=zA(a.nativeEvent);if(d===null){d=a.nativeEvent;var g=new d.constructor(d.type,d);yh=g,d.target.dispatchEvent(g),yh=null}else return l=J(d),l!==null&&Z1(l),a.blockedOn=d,!1;l.shift()}return!0}function tT(a,l,d){J0(a)&&d.delete(l)}function AL(){VA=!1,eu!==null&&J0(eu)&&(eu=null),tu!==null&&J0(tu)&&(tu=null),nu!==null&&J0(nu)&&(nu=null),Lm.forEach(tT),Nm.forEach(tT)}function K0(a,l){a.blockedOn===l&&(a.blockedOn=null,VA||(VA=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,AL)))}var W0=null;function nT(a){W0!==a&&(W0=a,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){W0===a&&(W0=null);for(var l=0;l<a.length;l+=3){var d=a[l],g=a[l+1],M=a[l+2];if(typeof g!="function"){if(GA(g||d)===null)continue;break}var C=J(d);C!==null&&(a.splice(l,3),l-=3,ym(C,{pending:!0,data:M,method:d.method,action:g},g,M))}}))}function Im(a){function l(ie){return K0(ie,a)}eu!==null&&K0(eu,a),tu!==null&&K0(tu,a),nu!==null&&K0(nu,a),Lm.forEach(l),Nm.forEach(l);for(var d=0;d<iu.length;d++){var g=iu[d];g.blockedOn===a&&(g.blockedOn=null)}for(;0<iu.length&&(d=iu[0],d.blockedOn===null);)eT(d),d.blockedOn===null&&iu.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var M=d[g],C=d[g+1],F=M[Ti]||null;if(typeof C=="function")F||nT(d);else if(F){var Y=null;if(C&&C.hasAttribute("formAction")){if(M=C,F=C[Ti]||null)Y=F.formAction;else if(GA(M)!==null)continue}else Y=F.action;typeof Y=="function"?d[g+1]=Y:(d.splice(g,3),g-=3),nT(d)}}}function kA(a){this._internalRoot=a}Z0.prototype.render=kA.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));var d=l.current,g=Mi();K1(d,g,a,l,null,null)},Z0.prototype.unmount=kA.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;K1(a.current,2,null,a,null,null),Cr(),l[Ci]=null}};function Z0(a){this._internalRoot=a}Z0.prototype.unstable_scheduleHydration=function(a){if(a){var l=on();a={blockedOn:null,target:a,priority:l};for(var d=0;d<iu.length&&l!==0&&l<iu[d].priority;d++);iu.splice(d,0,a),d===0&&eT(a)}};var iT=e.version;if(iT!=="19.1.0")throw Error(n(527,iT,"19.1.0"));W.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=f(l),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var SL={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Q0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Q0.isDisabled&&Q0.supportsFiber)try{He=Q0.inject(SL),pt=Q0}catch{}}return Fm.createRoot=function(a,l){if(!s(a))throw Error(n(299));var d=!1,g="",M=pf,C=td,F=U0,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(M=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(F=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Y=l.unstable_transitionCallbacks)),l=q1(a,1,!1,null,null,d,g,M,C,F,Y,null),a[Ci]=l.current,EA(a),new kA(l)},Fm.hydrateRoot=function(a,l,d){if(!s(a))throw Error(n(299));var g=!1,M="",C=pf,F=td,Y=U0,ie=null,Re=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(M=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(F=d.onCaughtError),d.onRecoverableError!==void 0&&(Y=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(ie=d.unstable_transitionCallbacks),d.formState!==void 0&&(Re=d.formState)),l=q1(a,1,!0,l,d??null,g,M,C,F,Y,ie,Re),l.context=J1(null),d=l.current,g=Mi(),g=rn(g),M=gr(g),M.callback=null,to(d,M,g),d=g,l.current.lanes=d,ke(l,d),ol(l),a[Ci]=l.current,EA(a),new Z0(l)},Fm.version="19.1.0",Fm}var dT;function LL(){if(dT)return YA.exports;dT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),YA.exports=UL(),YA.exports}var NL=LL(),Hm={},pT;function OL(){if(pT)return Hm;pT=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.parse=o,Hm.serialize=p;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,r=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function o(y,x){const S=new r,T=y.length;if(T<2)return S;const E=(x==null?void 0:x.decode)||m;let A=0;do{const w=y.indexOf("=",A);if(w===-1)break;const B=y.indexOf(";",A),D=B===-1?T:B;if(w>D){A=y.lastIndexOf(";",w-1)+1;continue}const O=c(y,A,w),I=f(y,w,O),z=y.slice(O,I);if(S[z]===void 0){let P=c(y,w+1,D),L=f(y,D,P);const N=E(y.slice(P,L));S[z]=N}A=D+1}while(A<T);return S}function c(y,x,S){do{const T=y.charCodeAt(x);if(T!==32&&T!==9)return x}while(++x<S);return S}function f(y,x,S){for(;x>S;){const T=y.charCodeAt(--x);if(T!==32&&T!==9)return x+1}return S}function p(y,x,S){const T=(S==null?void 0:S.encode)||encodeURIComponent;if(!i.test(y))throw new TypeError(`argument name is invalid: ${y}`);const E=T(x);if(!e.test(E))throw new TypeError(`argument val is invalid: ${x}`);let A=y+"="+E;if(!S)return A;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);A+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);A+="; Domain="+S.domain}if(S.path){if(!n.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);A+="; Path="+S.path}if(S.expires){if(!v(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);A+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(A+="; HttpOnly"),S.secure&&(A+="; Secure"),S.partitioned&&(A+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":A+="; Priority=Low";break;case"medium":A+="; Priority=Medium";break;case"high":A+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"none":A+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return A}function m(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function v(y){return s.call(y)==="[object Date]"}return Hm}OL();var mT="popstate";function IL(i={}){function e(s,r){let{pathname:o="/",search:c="",hash:f=""}=fh(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),MM("",{pathname:o,search:c,hash:f},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){let o=s.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let f=s.location.href,p=f.indexOf("#");c=p===-1?f:f.slice(0,p)}return c+"#"+(typeof r=="string"?r:Dg(r))}function n(s,r){Fr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(r)})`)}return FL(e,t,n,i)}function Pi(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Fr(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PL(){return Math.random().toString(36).substring(2,10)}function gT(i,e){return{usr:i.state,key:i.key,idx:e}}function MM(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?fh(e):e,state:t,key:e&&e.key||n||PL()}}function Dg({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function fh(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function FL(i,e,t,n={}){let{window:s=document.defaultView,v5Compat:r=!1}=n,o=s.history,c="POP",f=null,p=m();p==null&&(p=0,o.replaceState({...o.state,idx:p},""));function m(){return(o.state||{idx:null}).idx}function v(){c="POP";let E=m(),A=E==null?null:E-p;p=E,f&&f({action:c,location:T.location,delta:A})}function y(E,A){c="PUSH";let w=MM(T.location,E,A);t&&t(w,E),p=m()+1;let B=gT(w,p),D=T.createHref(w);try{o.pushState(B,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(D)}r&&f&&f({action:c,location:T.location,delta:1})}function x(E,A){c="REPLACE";let w=MM(T.location,E,A);t&&t(w,E),p=m();let B=gT(w,p),D=T.createHref(w);o.replaceState(B,"",D),r&&f&&f({action:c,location:T.location,delta:0})}function S(E){return HL(E)}let T={get action(){return c},get location(){return i(s,o)},listen(E){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(mT,v),f=E,()=>{s.removeEventListener(mT,v),f=null}},createHref(E){return e(s,E)},createURL:S,encodeLocation(E){let A=S(E);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:x,go(E){return o.go(E)}};return T}function HL(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Pi(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Dg(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function iB(i,e,t="/"){return zL(i,e,t,!1)}function zL(i,e,t,n){let s=typeof e=="string"?fh(e):e,r=cc(s.pathname||"/",t);if(r==null)return null;let o=sB(i);GL(o);let c=null;for(let f=0;c==null&&f<o.length;++f){let p=QL(r);c=WL(o[f],p,n)}return c}function sB(i,e=[],t=[],n=""){let s=(r,o,c)=>{let f={relativePath:c===void 0?r.path||"":c,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};f.relativePath.startsWith("/")&&(Pi(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length));let p=rc([n,f.relativePath]),m=t.concat(f);r.children&&r.children.length>0&&(Pi(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),sB(r.children,e,m,p)),!(r.path==null&&!r.index)&&e.push({path:p,score:JL(p,r.index),routesMeta:m})};return i.forEach((r,o)=>{var c;if(r.path===""||!((c=r.path)!=null&&c.includes("?")))s(r,o);else for(let f of aB(r.path))s(r,o,f)}),e}function aB(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(n.length===0)return s?[r,""]:[r];let o=aB(n.join("/")),c=[];return c.push(...o.map(f=>f===""?r:[r,f].join("/"))),s&&c.push(...o),c.map(f=>i.startsWith("/")&&f===""?"/":f)}function GL(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:KL(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var VL=/^:[\w-]+$/,kL=3,XL=2,jL=1,YL=10,qL=-2,vT=i=>i==="*";function JL(i,e){let t=i.split("/"),n=t.length;return t.some(vT)&&(n+=qL),e&&(n+=XL),t.filter(s=>!vT(s)).reduce((s,r)=>s+(VL.test(r)?kL:r===""?jL:YL),n)}function KL(i,e){return i.length===e.length&&i.slice(0,-1).every((n,s)=>n===e[s])?i[i.length-1]-e[e.length-1]:0}function WL(i,e,t=!1){let{routesMeta:n}=i,s={},r="/",o=[];for(let c=0;c<n.length;++c){let f=n[c],p=c===n.length-1,m=r==="/"?e:e.slice(r.length)||"/",v=y_({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},m),y=f.route;if(!v&&p&&t&&!n[n.length-1].route.index&&(v=y_({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!v)return null;Object.assign(s,v.params),o.push({params:s,pathname:rc([r,v.pathname]),pathnameBase:nN(rc([r,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(r=rc([r,v.pathnameBase]))}return o}function y_(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=ZL(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((p,{paramName:m,isOptional:v},y)=>{if(m==="*"){let S=c[y]||"";o=r.slice(0,r.length-S.length).replace(/(.)\/+$/,"$1")}const x=c[y];return v&&!x?p[m]=void 0:p[m]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:r,pathnameBase:o,pattern:i}}function ZL(i,e=!1,t=!0){Fr(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,f)=>(n.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function QL(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fr(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function cc(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function $L(i,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof i=="string"?fh(i):i;return{pathname:t?t.startsWith("/")?t:eN(t,e):e,search:iN(n),hash:sN(s)}}function eN(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function WA(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tN(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rB(i){let e=tN(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function oB(i,e,t,n=!1){let s;typeof i=="string"?s=fh(i):(s={...i},Pi(!s.pathname||!s.pathname.includes("?"),WA("?","pathname","search",s)),Pi(!s.pathname||!s.pathname.includes("#"),WA("#","pathname","hash",s)),Pi(!s.search||!s.search.includes("#"),WA("#","search","hash",s)));let r=i===""||s.pathname==="",o=r?"/":s.pathname,c;if(o==null)c=t;else{let v=e.length-1;if(!n&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}c=v>=0?e[v]:"/"}let f=$L(s,c),p=o&&o!=="/"&&o.endsWith("/"),m=(r||o===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||m)&&(f.pathname+="/"),f}var rc=i=>i.join("/").replace(/\/\/+/g,"/"),nN=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),iN=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,sN=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function aN(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var lB=["POST","PUT","PATCH","DELETE"];new Set(lB);var rN=["GET",...lB];new Set(rN);var pp=ee.createContext(null);pp.displayName="DataRouter";var yx=ee.createContext(null);yx.displayName="DataRouterState";var cB=ee.createContext({isTransitioning:!1});cB.displayName="ViewTransition";var oN=ee.createContext(new Map);oN.displayName="Fetchers";var lN=ee.createContext(null);lN.displayName="Await";var Al=ee.createContext(null);Al.displayName="Navigation";var $g=ee.createContext(null);$g.displayName="Location";var Sl=ee.createContext({outlet:null,matches:[],isDataRoute:!1});Sl.displayName="Route";var Sb=ee.createContext(null);Sb.displayName="RouteError";function cN(i,{relative:e}={}){Pi(ev(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=ee.useContext(Al),{hash:s,pathname:r,search:o}=tv(i,{relative:e}),c=r;return t!=="/"&&(c=r==="/"?t:rc([t,r])),n.createHref({pathname:c,search:o,hash:s})}function ev(){return ee.useContext($g)!=null}function dc(){return Pi(ev(),"useLocation() may be used only in the context of a <Router> component."),ee.useContext($g).location}var uB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fB(i){ee.useContext(Al).static||ee.useLayoutEffect(i)}function hh(){let{isDataRoute:i}=ee.useContext(Sl);return i?MN():uN()}function uN(){Pi(ev(),"useNavigate() may be used only in the context of a <Router> component.");let i=ee.useContext(pp),{basename:e,navigator:t}=ee.useContext(Al),{matches:n}=ee.useContext(Sl),{pathname:s}=dc(),r=JSON.stringify(rB(n)),o=ee.useRef(!1);return fB(()=>{o.current=!0}),ee.useCallback((f,p={})=>{if(Fr(o.current,uB),!o.current)return;if(typeof f=="number"){t.go(f);return}let m=oB(f,JSON.parse(r),s,p.relative==="path");i==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:rc([e,m.pathname])),(p.replace?t.replace:t.push)(m,p.state,p)},[e,t,r,s,i])}ee.createContext(null);function fN(){let{matches:i}=ee.useContext(Sl),e=i[i.length-1];return e?e.params:{}}function tv(i,{relative:e}={}){let{matches:t}=ee.useContext(Sl),{pathname:n}=dc(),s=JSON.stringify(rB(t));return ee.useMemo(()=>oB(i,JSON.parse(s),n,e==="path"),[i,s,n,e])}function hN(i,e){return hB(i,e)}function hB(i,e,t,n){var w;Pi(ev(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:r}=ee.useContext(Al),{matches:o}=ee.useContext(Sl),c=o[o.length-1],f=c?c.params:{},p=c?c.pathname:"/",m=c?c.pathnameBase:"/",v=c&&c.route;{let B=v&&v.path||"";dB(p,!v||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let y=dc(),x;if(e){let B=typeof e=="string"?fh(e):e;Pi(m==="/"||((w=B.pathname)==null?void 0:w.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${B.pathname}" was given in the \`location\` prop.`),x=B}else x=y;let S=x.pathname||"/",T=S;if(m!=="/"){let B=m.replace(/^\//,"").split("/");T="/"+S.replace(/^\//,"").split("/").slice(B.length).join("/")}let E=!r&&t&&t.matches&&t.matches.length>0?t.matches:iB(i,{pathname:T});Fr(v||E!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Fr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=vN(E&&E.map(B=>Object.assign({},B,{params:Object.assign({},f,B.params),pathname:rc([m,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?m:rc([m,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),o,t,n);return e&&A?ee.createElement($g.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},A):A}function dN(){let i=SN(),e=aN(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=ee.createElement(ee.Fragment,null,ee.createElement("p",null,"💿 Hey developer 👋"),ee.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ee.createElement("code",{style:r},"ErrorBoundary")," or"," ",ee.createElement("code",{style:r},"errorElement")," prop on your route.")),ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},e),t?ee.createElement("pre",{style:s},t):null,o)}var pN=ee.createElement(dN,null),mN=class extends ee.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?ee.createElement(Sl.Provider,{value:this.props.routeContext},ee.createElement(Sb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gN({routeContext:i,match:e,children:t}){let n=ee.useContext(pp);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),ee.createElement(Sl.Provider,{value:i},t)}function vN(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let s=i,r=t==null?void 0:t.errors;if(r!=null){let f=s.findIndex(p=>p.route.id&&(r==null?void 0:r[p.route.id])!==void 0);Pi(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let o=!1,c=-1;if(t)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:m,errors:v}=t,y=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||y){o=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((f,p,m)=>{let v,y=!1,x=null,S=null;t&&(v=r&&p.route.id?r[p.route.id]:void 0,x=p.route.errorElement||pN,o&&(c<0&&m===0?(dB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):c===m&&(y=!0,S=p.route.hydrateFallbackElement||null)));let T=e.concat(s.slice(0,m+1)),E=()=>{let A;return v?A=x:y?A=S:p.route.Component?A=ee.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=f,ee.createElement(gN,{match:p,routeContext:{outlet:f,matches:T,isDataRoute:t!=null},children:A})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?ee.createElement(mN,{location:t.location,revalidation:t.revalidation,component:x,error:v,children:E(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):E()},null)}function Mb(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yN(i){let e=ee.useContext(pp);return Pi(e,Mb(i)),e}function _N(i){let e=ee.useContext(yx);return Pi(e,Mb(i)),e}function xN(i){let e=ee.useContext(Sl);return Pi(e,Mb(i)),e}function bb(i){let e=xN(i),t=e.matches[e.matches.length-1];return Pi(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function AN(){return bb("useRouteId")}function SN(){var n;let i=ee.useContext(Sb),e=_N("useRouteError"),t=bb("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function MN(){let{router:i}=yN("useNavigate"),e=bb("useNavigate"),t=ee.useRef(!1);return fB(()=>{t.current=!0}),ee.useCallback(async(s,r={})=>{Fr(t.current,uB),t.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:e,...r}))},[i,e])}var yT={};function dB(i,e,t){!e&&!yT[i]&&(yT[i]=!0,Fr(!1,t))}ee.memo(bN);function bN({routes:i,future:e,state:t}){return hB(i,void 0,t,e)}function ag(i){Pi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function EN({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:r=!1}){Pi(!ev(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=i.replace(/^\/*/,"/"),c=ee.useMemo(()=>({basename:o,navigator:s,static:r,future:{}}),[o,s,r]);typeof t=="string"&&(t=fh(t));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:y="default"}=t,x=ee.useMemo(()=>{let S=cc(f,o);return S==null?null:{location:{pathname:S,search:p,hash:m,state:v,key:y},navigationType:n}},[o,f,p,m,v,y,n]);return Fr(x!=null,`<Router basename="${o}"> is not able to match the URL "${f}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:ee.createElement(Al.Provider,{value:c},ee.createElement($g.Provider,{children:e,value:x}))}function TN({children:i,location:e}){return hN(bM(i),e)}function bM(i,e=[]){let t=[];return ee.Children.forEach(i,(n,s)=>{if(!ee.isValidElement(n))return;let r=[...e,s];if(n.type===ee.Fragment){t.push.apply(t,bM(n.props.children,r));return}Pi(n.type===ag,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=bM(n.props.children,r)),t.push(o)}),t}var i_="get",s_="application/x-www-form-urlencoded";function _x(i){return i!=null&&typeof i.tagName=="string"}function CN(i){return _x(i)&&i.tagName.toLowerCase()==="button"}function RN(i){return _x(i)&&i.tagName.toLowerCase()==="form"}function wN(i){return _x(i)&&i.tagName.toLowerCase()==="input"}function BN(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function DN(i,e){return i.button===0&&(!e||e==="_self")&&!BN(i)}function EM(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let n=i[t];return e.concat(Array.isArray(n)?n.map(s=>[t,s]):[[t,n]])},[]))}function UN(i,e){let t=EM(i);return e&&e.forEach((n,s)=>{t.has(s)||e.getAll(s).forEach(r=>{t.append(s,r)})}),t}var $0=null;function LN(){if($0===null)try{new FormData(document.createElement("form"),0),$0=!1}catch{$0=!0}return $0}var NN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ZA(i){return i!=null&&!NN.has(i)?(Fr(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${s_}"`),null):i}function ON(i,e){let t,n,s,r,o;if(RN(i)){let c=i.getAttribute("action");n=c?cc(c,e):null,t=i.getAttribute("method")||i_,s=ZA(i.getAttribute("enctype"))||s_,r=new FormData(i)}else if(CN(i)||wN(i)&&(i.type==="submit"||i.type==="image")){let c=i.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=i.getAttribute("formaction")||c.getAttribute("action");if(n=f?cc(f,e):null,t=i.getAttribute("formmethod")||c.getAttribute("method")||i_,s=ZA(i.getAttribute("formenctype"))||ZA(c.getAttribute("enctype"))||s_,r=new FormData(c,i),!LN()){let{name:p,type:m,value:v}=i;if(m==="image"){let y=p?`${p}.`:"";r.append(`${y}x`,"0"),r.append(`${y}y`,"0")}else p&&r.append(p,v)}}else{if(_x(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=i_,n=null,s=s_,o=i}return r&&s==="text/plain"&&(o=r,r=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:r,body:o}}function Eb(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function IN(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PN(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function FN(i,e,t){let n=await Promise.all(i.map(async s=>{let r=e.routes[s.route.id];if(r){let o=await IN(r,t);return o.links?o.links():[]}return[]}));return VN(n.flat(1).filter(PN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function _T(i,e,t,n,s,r){let o=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,c=(f,p)=>{var m;return t[p].pathname!==f.pathname||((m=t[p].route.path)==null?void 0:m.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return r==="assets"?e.filter((f,p)=>o(f,p)||c(f,p)):r==="data"?e.filter((f,p)=>{var v;let m=n.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(o(f,p)||c(f,p))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(i,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function HN(i,e,{includeHydrateFallback:t}={}){return zN(i.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function zN(i){return[...new Set(i)]}function GN(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function VN(i,e){let t=new Set;return new Set(e),i.reduce((n,s)=>{let r=JSON.stringify(GN(s));return t.has(r)||(t.add(r),n.push({key:r,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kN=new Set([100,101,204,205]);function XN(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&cc(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function pB(){let i=ee.useContext(pp);return Eb(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function jN(){let i=ee.useContext(yx);return Eb(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Tb=ee.createContext(void 0);Tb.displayName="FrameworkContext";function mB(){let i=ee.useContext(Tb);return Eb(i,"You must render this element inside a <HydratedRouter> element"),i}function YN(i,e){let t=ee.useContext(Tb),[n,s]=ee.useState(!1),[r,o]=ee.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:p,onMouseLeave:m,onTouchStart:v}=e,y=ee.useRef(null);ee.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let T=A=>{A.forEach(w=>{o(w.isIntersecting)})},E=new IntersectionObserver(T,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[i]),ee.useEffect(()=>{if(n){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[n]);let x=()=>{s(!0)},S=()=>{s(!1),o(!1)};return t?i!=="intent"?[r,y,{}]:[r,y,{onFocus:zm(c,x),onBlur:zm(f,S),onMouseEnter:zm(p,x),onMouseLeave:zm(m,S),onTouchStart:zm(v,x)}]:[!1,y,{}]}function zm(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function qN({page:i,...e}){let{router:t}=pB(),n=ee.useMemo(()=>iB(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?ee.createElement(KN,{page:i,matches:n,...e}):null}function JN(i){let{manifest:e,routeModules:t}=mB(),[n,s]=ee.useState([]);return ee.useEffect(()=>{let r=!1;return FN(i,e,t).then(o=>{r||s(o)}),()=>{r=!0}},[i,e,t]),n}function KN({page:i,matches:e,...t}){let n=dc(),{manifest:s,routeModules:r}=mB(),{basename:o}=pB(),{loaderData:c,matches:f}=jN(),p=ee.useMemo(()=>_T(i,e,f,s,n,"data"),[i,e,f,s,n]),m=ee.useMemo(()=>_T(i,e,f,s,n,"assets"),[i,e,f,s,n]),v=ee.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let S=new Set,T=!1;if(e.forEach(A=>{var B;let w=s.routes[A.route.id];!w||!w.hasLoader||(!p.some(D=>D.route.id===A.route.id)&&A.route.id in c&&((B=r[A.route.id])!=null&&B.shouldRevalidate)||w.hasClientLoader?T=!0:S.add(A.route.id))}),S.size===0)return[];let E=XN(i,o);return T&&S.size>0&&E.searchParams.set("_routes",e.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[E.pathname+E.search]},[o,c,n,s,p,e,i,r]),y=ee.useMemo(()=>HN(m,s),[m,s]),x=JN(m);return ee.createElement(ee.Fragment,null,v.map(S=>ee.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),y.map(S=>ee.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),x.map(({key:S,link:T})=>ee.createElement("link",{key:S,...T})))}function WN(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var gB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gB&&(window.__reactRouterVersion="7.6.0")}catch{}function ZN({basename:i,children:e,window:t}){let n=ee.useRef();n.current==null&&(n.current=IL({window:t,v5Compat:!0}));let s=n.current,[r,o]=ee.useState({action:s.action,location:s.location}),c=ee.useCallback(f=>{ee.startTransition(()=>o(f))},[o]);return ee.useLayoutEffect(()=>s.listen(c),[s,c]),ee.createElement(EN,{basename:i,children:e,location:r.location,navigationType:r.action,navigator:s})}var vB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yB=ee.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:r,replace:o,state:c,target:f,to:p,preventScrollReset:m,viewTransition:v,...y},x){let{basename:S}=ee.useContext(Al),T=typeof p=="string"&&vB.test(p),E,A=!1;if(typeof p=="string"&&T&&(E=p,gB))try{let L=new URL(window.location.href),N=p.startsWith("//")?new URL(L.protocol+p):new URL(p),j=cc(N.pathname,S);N.origin===L.origin&&j!=null?p=j+N.search+N.hash:A=!0}catch{Fr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=cN(p,{relative:s}),[B,D,O]=YN(n,y),I=tO(p,{replace:o,state:c,target:f,preventScrollReset:m,relative:s,viewTransition:v});function z(L){e&&e(L),L.defaultPrevented||I(L)}let P=ee.createElement("a",{...y,...O,href:E||w,onClick:A||r?e:z,ref:WN(x,D),target:f,"data-discover":!T&&t==="render"?"true":void 0});return B&&!T?ee.createElement(ee.Fragment,null,P,ee.createElement(qN,{page:w})):P});yB.displayName="Link";var QN=ee.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:r,to:o,viewTransition:c,children:f,...p},m){let v=tv(o,{relative:p.relative}),y=dc(),x=ee.useContext(yx),{navigator:S,basename:T}=ee.useContext(Al),E=x!=null&&rO(v)&&c===!0,A=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,w=y.pathname,B=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(w=w.toLowerCase(),B=B?B.toLowerCase():null,A=A.toLowerCase()),B&&T&&(B=cc(B,T)||B);const D=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let O=w===A||!s&&w.startsWith(A)&&w.charAt(D)==="/",I=B!=null&&(B===A||!s&&B.startsWith(A)&&B.charAt(A.length)==="/"),z={isActive:O,isPending:I,isTransitioning:E},P=O?e:void 0,L;typeof n=="function"?L=n(z):L=[n,O?"active":null,I?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let N=typeof r=="function"?r(z):r;return ee.createElement(yB,{...p,"aria-current":P,className:L,ref:m,style:N,to:o,viewTransition:c},typeof f=="function"?f(z):f)});QN.displayName="NavLink";var $N=ee.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:r,method:o=i_,action:c,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:v,...y},x)=>{let S=sO(),T=aO(c,{relative:p}),E=o.toLowerCase()==="get"?"get":"post",A=typeof c=="string"&&vB.test(c),w=B=>{if(f&&f(B),B.defaultPrevented)return;B.preventDefault();let D=B.nativeEvent.submitter,O=(D==null?void 0:D.getAttribute("formmethod"))||o;S(D||B.currentTarget,{fetcherKey:e,method:O,navigate:t,replace:s,state:r,relative:p,preventScrollReset:m,viewTransition:v})};return ee.createElement("form",{ref:x,method:E,action:T,onSubmit:n?f:w,...y,"data-discover":!A&&i==="render"?"true":void 0})});$N.displayName="Form";function eO(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _B(i){let e=ee.useContext(pp);return Pi(e,eO(i)),e}function tO(i,{target:e,replace:t,state:n,preventScrollReset:s,relative:r,viewTransition:o}={}){let c=hh(),f=dc(),p=tv(i,{relative:r});return ee.useCallback(m=>{if(DN(m,e)){m.preventDefault();let v=t!==void 0?t:Dg(f)===Dg(p);c(i,{replace:v,state:n,preventScrollReset:s,relative:r,viewTransition:o})}},[f,c,p,t,n,e,i,s,r,o])}function xB(i){Fr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=ee.useRef(EM(i)),t=ee.useRef(!1),n=dc(),s=ee.useMemo(()=>UN(n.search,t.current?null:e.current),[n.search]),r=hh(),o=ee.useCallback((c,f)=>{const p=EM(typeof c=="function"?c(s):c);t.current=!0,r("?"+p,f)},[r,s]);return[s,o]}var nO=0,iO=()=>`__${String(++nO)}__`;function sO(){let{router:i}=_B("useSubmit"),{basename:e}=ee.useContext(Al),t=AN();return ee.useCallback(async(n,s={})=>{let{action:r,method:o,encType:c,formData:f,body:p}=ON(n,e);if(s.navigate===!1){let m=s.fetcherKey||iO();await i.fetch(m,t,s.action||r,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||o,formEncType:s.encType||c,flushSync:s.flushSync})}else await i.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||o,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,e,t])}function aO(i,{relative:e}={}){let{basename:t}=ee.useContext(Al),n=ee.useContext(Sl);Pi(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),r={...tv(i||".",{relative:e})},o=dc();if(i==null){r.search=o.search;let c=new URLSearchParams(r.search),f=c.getAll("index");if(f.some(m=>m==="")){c.delete("index"),f.filter(v=>v).forEach(v=>c.append("index",v));let m=c.toString();r.search=m?`?${m}`:""}}return(!i||i===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:rc([t,r.pathname])),Dg(r)}function rO(i,e={}){let t=ee.useContext(cB);Pi(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=_B("useViewTransitionState"),s=tv(i,{relative:e.relative});if(!t.isTransitioning)return!1;let r=cc(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=cc(t.nextLocation.pathname,n)||t.nextLocation.pathname;return y_(s.pathname,o)!=null||y_(s.pathname,r)!=null}[...kN];const oO="/cp-frontend-JordiDeLeeuw/",lO=()=>{const i=hh();return pe.jsxs("div",{className:"info_div1",children:[pe.jsxs("div",{className:"students_div2",children:[pe.jsx("h1",{children:"EHB STUDENTS"}),pe.jsxs("p",{children:["EHB-studenten Front-End Development werken dit semester met React aan een parallax website rond het thema sprookjes. ",pe.jsx("br",{}),"Ze combineren techniek en creativiteit om een interactieve webervaring te creëren met diepte-effecten en animaties. ",pe.jsx("br",{}),"Zo leren ze React-componenten, state management en visuele effecten toepassen om hun sprookjeswereld tot leven te brengen."]}),pe.jsx("button",{onClick:()=>i("/"),children:pe.jsx("p",{children:"Bekijk alle sprookjes"})})]}),pe.jsx("img",{src:`${oO}collage.png`,alt:"collage",className:"students_collage"})]})};function cO(i){return Object.prototype.toString.call(i)==="[object Object]"}function xT(i){return cO(i)||Array.isArray(i)}function uO(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Cb(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;const s=JSON.stringify(Object.keys(i.breakpoints||{})),r=JSON.stringify(Object.keys(e.breakpoints||{}));return s!==r?!1:t.every(o=>{const c=i[o],f=e[o];return typeof c=="function"?`${c}`==`${f}`:!xT(c)||!xT(f)?c===f:Cb(c,f)})}function AT(i){return i.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function fO(i,e){if(i.length!==e.length)return!1;const t=AT(i),n=AT(e);return t.every((s,r)=>{const o=n[r];return Cb(s,o)})}function Rb(i){return typeof i=="number"}function TM(i){return typeof i=="string"}function xx(i){return typeof i=="boolean"}function ST(i){return Object.prototype.toString.call(i)==="[object Object]"}function Li(i){return Math.abs(i)}function wb(i){return Math.sign(i)}function fg(i,e){return Li(i-e)}function hO(i,e){if(i===0||e===0||Li(i)<=Li(e))return 0;const t=fg(Li(i),Li(e));return Li(t/i)}function dO(i){return Math.round(i*100)/100}function Ug(i){return Lg(i).map(Number)}function So(i){return i[nv(i)]}function nv(i){return Math.max(0,i.length-1)}function Bb(i,e){return e===nv(i)}function MT(i,e=0){return Array.from(Array(i),(t,n)=>e+n)}function Lg(i){return Object.keys(i)}function AB(i,e){return[i,e].reduce((t,n)=>(Lg(n).forEach(s=>{const r=t[s],o=n[s],c=ST(r)&&ST(o);t[s]=c?AB(r,o):o}),t),{})}function CM(i,e){return typeof e.MouseEvent<"u"&&i instanceof e.MouseEvent}function pO(i,e){const t={start:n,center:s,end:r};function n(){return 0}function s(f){return r(f)/2}function r(f){return e-f}function o(f,p){return TM(i)?t[i](f):i(e,f,p)}return{measure:o}}function Ng(){let i=[];function e(s,r,o,c={passive:!0}){let f;if("addEventListener"in s)s.addEventListener(r,o,c),f=()=>s.removeEventListener(r,o,c);else{const p=s;p.addListener(o),f=()=>p.removeListener(o)}return i.push(f),n}function t(){i=i.filter(s=>s())}const n={add:e,clear:t};return n}function mO(i,e,t,n){const s=Ng(),r=1e3/60;let o=null,c=0,f=0;function p(){s.add(i,"visibilitychange",()=>{i.hidden&&S()})}function m(){x(),s.clear()}function v(E){if(!f)return;o||(o=E,t(),t());const A=E-o;for(o=E,c+=A;c>=r;)t(),c-=r;const w=c/r;n(w),f&&(f=e.requestAnimationFrame(v))}function y(){f||(f=e.requestAnimationFrame(v))}function x(){e.cancelAnimationFrame(f),o=null,c=0,f=0}function S(){o=null,c=0}return{init:p,destroy:m,start:y,stop:x,update:t,render:n}}function gO(i,e){const t=e==="rtl",n=i==="y",s=n?"y":"x",r=n?"x":"y",o=!n&&t?-1:1,c=m(),f=v();function p(S){const{height:T,width:E}=S;return n?T:E}function m(){return n?"top":t?"right":"left"}function v(){return n?"bottom":t?"left":"right"}function y(S){return S*o}return{scroll:s,cross:r,startEdge:c,endEdge:f,measureSize:p,direction:y}}function ih(i=0,e=0){const t=Li(i-e);function n(p){return p<i}function s(p){return p>e}function r(p){return n(p)||s(p)}function o(p){return r(p)?n(p)?i:e:p}function c(p){return t?p-t*Math.ceil((p-e)/t):p}return{length:t,max:e,min:i,constrain:o,reachedAny:r,reachedMax:s,reachedMin:n,removeOffset:c}}function SB(i,e,t){const{constrain:n}=ih(0,i),s=i+1;let r=o(e);function o(y){return t?Li((s+y)%s):n(y)}function c(){return r}function f(y){return r=o(y),v}function p(y){return m().set(c()+y)}function m(){return SB(i,c(),t)}const v={get:c,set:f,add:p,clone:m};return v}function vO(i,e,t,n,s,r,o,c,f,p,m,v,y,x,S,T,E,A,w){const{cross:B,direction:D}=i,O=["INPUT","SELECT","TEXTAREA"],I={passive:!1},z=Ng(),P=Ng(),L=ih(50,225).constrain(x.measure(20)),N={mouse:300,touch:400},j={mouse:500,touch:600},ce=S?43:25;let ne=!1,fe=0,_e=0,H=!1,W=!1,Q=!1,ve=!1;function X(ot){if(!w)return;function dt(rt){(xx(w)||w(ot,rt))&&Oe(rt)}const K=e;z.add(K,"dragstart",rt=>rt.preventDefault(),I).add(K,"touchmove",()=>{},I).add(K,"touchend",()=>{}).add(K,"touchstart",dt).add(K,"mousedown",dt).add(K,"touchcancel",tt).add(K,"contextmenu",tt).add(K,"click",Dt,!0)}function re(){z.clear(),P.clear()}function Ae(){const ot=ve?t:e;P.add(ot,"touchmove",$e,I).add(ot,"touchend",tt).add(ot,"mousemove",$e,I).add(ot,"mouseup",tt)}function Ce(ot){const dt=ot.nodeName||"";return O.includes(dt)}function oe(){return(S?j:N)[ve?"mouse":"touch"]}function Ne(ot,dt){const K=v.add(wb(ot)*-1),rt=m.byDistance(ot,!S).distance;return S||Li(ot)<L?rt:E&&dt?rt*.5:m.byIndex(K.get(),0).distance}function Oe(ot){const dt=CM(ot,n);ve=dt,Q=S&&dt&&!ot.buttons&&ne,ne=fg(s.get(),o.get())>=2,!(dt&&ot.button!==0)&&(Ce(ot.target)||(H=!0,r.pointerDown(ot),p.useFriction(0).useDuration(0),s.set(o),Ae(),fe=r.readPoint(ot),_e=r.readPoint(ot,B),y.emit("pointerDown")))}function $e(ot){if(!CM(ot,n)&&ot.touches.length>=2)return tt(ot);const K=r.readPoint(ot),rt=r.readPoint(ot,B),Ze=fg(K,fe),je=fg(rt,_e);if(!W&&!ve&&(!ot.cancelable||(W=Ze>je,!W)))return tt(ot);const Xe=r.pointerMove(ot);Ze>T&&(Q=!0),p.useFriction(.3).useDuration(.75),c.start(),s.add(D(Xe)),ot.preventDefault()}function tt(ot){const K=m.byDistance(0,!1).index!==v.get(),rt=r.pointerUp(ot)*oe(),Ze=Ne(D(rt),K),je=hO(rt,Ze),Xe=ce-10*je,_t=A+je/50;W=!1,H=!1,P.clear(),p.useDuration(Xe).useFriction(_t),f.distance(Ze,!S),ve=!1,y.emit("pointerUp")}function Dt(ot){Q&&(ot.stopPropagation(),ot.preventDefault(),Q=!1)}function wt(){return H}return{init:X,destroy:re,pointerDown:wt}}function yO(i,e){let n,s;function r(v){return v.timeStamp}function o(v,y){const S=`client${(y||i.scroll)==="x"?"X":"Y"}`;return(CM(v,e)?v:v.touches[0])[S]}function c(v){return n=v,s=v,o(v)}function f(v){const y=o(v)-o(s),x=r(v)-r(n)>170;return s=v,x&&(n=v),y}function p(v){if(!n||!s)return 0;const y=o(s)-o(n),x=r(v)-r(n),S=r(v)-r(s)>170,T=y/x;return x&&!S&&Li(T)>.1?T:0}return{pointerDown:c,pointerMove:f,pointerUp:p,readPoint:o}}function _O(){function i(t){const{offsetTop:n,offsetLeft:s,offsetWidth:r,offsetHeight:o}=t;return{top:n,right:s+r,bottom:n+o,left:s,width:r,height:o}}return{measure:i}}function xO(i){function e(n){return i*(n/100)}return{measure:e}}function AO(i,e,t,n,s,r,o){const c=[i].concat(n);let f,p,m=[],v=!1;function y(E){return s.measureSize(o.measure(E))}function x(E){if(!r)return;p=y(i),m=n.map(y);function A(w){for(const B of w){if(v)return;const D=B.target===i,O=n.indexOf(B.target),I=D?p:m[O],z=y(D?i:n[O]);if(Li(z-I)>=.5){E.reInit(),e.emit("resize");break}}}f=new ResizeObserver(w=>{(xx(r)||r(E,w))&&A(w)}),t.requestAnimationFrame(()=>{c.forEach(w=>f.observe(w))})}function S(){v=!0,f&&f.disconnect()}return{init:x,destroy:S}}function SO(i,e,t,n,s,r){let o=0,c=0,f=s,p=r,m=i.get(),v=0;function y(){const I=n.get()-i.get(),z=!f;let P=0;return z?(o=0,t.set(n),i.set(n),P=I):(t.set(i),o+=I/f,o*=p,m+=o,i.add(o),P=m-v),c=wb(P),v=m,O}function x(){const I=n.get()-e.get();return Li(I)<.001}function S(){return f}function T(){return c}function E(){return o}function A(){return B(s)}function w(){return D(r)}function B(I){return f=I,O}function D(I){return p=I,O}const O={direction:T,duration:S,velocity:E,seek:y,settled:x,useBaseFriction:w,useBaseDuration:A,useFriction:D,useDuration:B};return O}function MO(i,e,t,n,s){const r=s.measure(10),o=s.measure(50),c=ih(.1,.99);let f=!1;function p(){return!(f||!i.reachedAny(t.get())||!i.reachedAny(e.get()))}function m(x){if(!p())return;const S=i.reachedMin(e.get())?"min":"max",T=Li(i[S]-e.get()),E=t.get()-e.get(),A=c.constrain(T/o);t.subtract(E*A),!x&&Li(E)<r&&(t.set(i.constrain(t.get())),n.useDuration(25).useBaseFriction())}function v(x){f=!x}return{shouldConstrain:p,constrain:m,toggleActive:v}}function bO(i,e,t,n,s){const r=ih(-e+i,0),o=v(),c=m(),f=y();function p(S,T){return fg(S,T)<=1}function m(){const S=o[0],T=So(o),E=o.lastIndexOf(S),A=o.indexOf(T)+1;return ih(E,A)}function v(){return t.map((S,T)=>{const{min:E,max:A}=r,w=r.constrain(S),B=!T,D=Bb(t,T);return B?A:D||p(E,w)?E:p(A,w)?A:w}).map(S=>parseFloat(S.toFixed(3)))}function y(){if(e<=i+s)return[r.max];if(n==="keepSnaps")return o;const{min:S,max:T}=c;return o.slice(S,T)}return{snapsContained:f,scrollContainLimit:c}}function EO(i,e,t){const n=e[0],s=t?n-i:So(e);return{limit:ih(s,n)}}function TO(i,e,t,n){const r=e.min+.1,o=e.max+.1,{reachedMin:c,reachedMax:f}=ih(r,o);function p(y){return y===1?f(t.get()):y===-1?c(t.get()):!1}function m(y){if(!p(y))return;const x=i*(y*-1);n.forEach(S=>S.add(x))}return{loop:m}}function CO(i){const{max:e,length:t}=i;function n(r){const o=r-e;return t?o/-t:0}return{get:n}}function RO(i,e,t,n,s){const{startEdge:r,endEdge:o}=i,{groupSlides:c}=s,f=v().map(e.measure),p=y(),m=x();function v(){return c(n).map(T=>So(T)[o]-T[0][r]).map(Li)}function y(){return n.map(T=>t[r]-T[r]).map(T=>-Li(T))}function x(){return c(p).map(T=>T[0]).map((T,E)=>T+f[E])}return{snaps:p,snapsAligned:m}}function wO(i,e,t,n,s,r){const{groupSlides:o}=s,{min:c,max:f}=n,p=m();function m(){const y=o(r),x=!i||e==="keepSnaps";return t.length===1?[r]:x?y:y.slice(c,f).map((S,T,E)=>{const A=!T,w=Bb(E,T);if(A){const B=So(E[0])+1;return MT(B)}if(w){const B=nv(r)-So(E)[0]+1;return MT(B,So(E)[0])}return S})}return{slideRegistry:p}}function BO(i,e,t,n,s){const{reachedAny:r,removeOffset:o,constrain:c}=n;function f(S){return S.concat().sort((T,E)=>Li(T)-Li(E))[0]}function p(S){const T=i?o(S):c(S),E=e.map((w,B)=>({diff:m(w-T,0),index:B})).sort((w,B)=>Li(w.diff)-Li(B.diff)),{index:A}=E[0];return{index:A,distance:T}}function m(S,T){const E=[S,S+t,S-t];if(!i)return S;if(!T)return f(E);const A=E.filter(w=>wb(w)===T);return A.length?f(A):So(E)-t}function v(S,T){const E=e[S]-s.get(),A=m(E,T);return{index:S,distance:A}}function y(S,T){const E=s.get()+S,{index:A,distance:w}=p(E),B=!i&&r(E);if(!T||B)return{index:A,distance:S};const D=e[A]-w,O=S+m(D,0);return{index:A,distance:O}}return{byDistance:y,byIndex:v,shortcut:m}}function DO(i,e,t,n,s,r,o){function c(v){const y=v.distance,x=v.index!==e.get();r.add(y),y&&(n.duration()?i.start():(i.update(),i.render(1),i.update())),x&&(t.set(e.get()),e.set(v.index),o.emit("select"))}function f(v,y){const x=s.byDistance(v,y);c(x)}function p(v,y){const x=e.clone().set(v),S=s.byIndex(x.get(),y);c(S)}return{distance:f,index:p}}function UO(i,e,t,n,s,r,o,c){const f={passive:!0,capture:!0};let p=0;function m(x){if(!c)return;function S(T){if(new Date().getTime()-p>10)return;o.emit("slideFocusStart"),i.scrollLeft=0;const w=t.findIndex(B=>B.includes(T));Rb(w)&&(s.useDuration(0),n.index(w,0),o.emit("slideFocus"))}r.add(document,"keydown",v,!1),e.forEach((T,E)=>{r.add(T,"focus",A=>{(xx(c)||c(x,A))&&S(E)},f)})}function v(x){x.code==="Tab"&&(p=new Date().getTime())}return{init:m}}function rg(i){let e=i;function t(){return e}function n(f){e=o(f)}function s(f){e+=o(f)}function r(f){e-=o(f)}function o(f){return Rb(f)?f:f.get()}return{get:t,set:n,add:s,subtract:r}}function MB(i,e){const t=i.scroll==="x"?o:c,n=e.style;let s=null,r=!1;function o(y){return`translate3d(${y}px,0px,0px)`}function c(y){return`translate3d(0px,${y}px,0px)`}function f(y){if(r)return;const x=dO(i.direction(y));x!==s&&(n.transform=t(x),s=x)}function p(y){r=!y}function m(){r||(n.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:m,to:f,toggleActive:p}}function LO(i,e,t,n,s,r,o,c,f){const m=Ug(s),v=Ug(s).reverse(),y=A().concat(w());function x(z,P){return z.reduce((L,N)=>L-s[N],P)}function S(z,P){return z.reduce((L,N)=>x(L,P)>0?L.concat([N]):L,[])}function T(z){return r.map((P,L)=>({start:P-n[L]+.5+z,end:P+e-.5+z}))}function E(z,P,L){const N=T(P);return z.map(j=>{const ce=L?0:-t,ne=L?t:0,fe=L?"end":"start",_e=N[j][fe];return{index:j,loopPoint:_e,slideLocation:rg(-1),translate:MB(i,f[j]),target:()=>c.get()>_e?ce:ne}})}function A(){const z=o[0],P=S(v,z);return E(P,t,!1)}function w(){const z=e-o[0]-1,P=S(m,z);return E(P,-t,!0)}function B(){return y.every(({index:z})=>{const P=m.filter(L=>L!==z);return x(P,e)<=.1})}function D(){y.forEach(z=>{const{target:P,translate:L,slideLocation:N}=z,j=P();j!==N.get()&&(L.to(j),N.set(j))})}function O(){y.forEach(z=>z.translate.clear())}return{canLoop:B,clear:O,loop:D,loopPoints:y}}function NO(i,e,t){let n,s=!1;function r(f){if(!t)return;function p(m){for(const v of m)if(v.type==="childList"){f.reInit(),e.emit("slidesChanged");break}}n=new MutationObserver(m=>{s||(xx(t)||t(f,m))&&p(m)}),n.observe(i,{childList:!0})}function o(){n&&n.disconnect(),s=!0}return{init:r,destroy:o}}function OO(i,e,t,n){const s={};let r=null,o=null,c,f=!1;function p(){c=new IntersectionObserver(S=>{f||(S.forEach(T=>{const E=e.indexOf(T.target);s[E]=T}),r=null,o=null,t.emit("slidesInView"))},{root:i.parentElement,threshold:n}),e.forEach(S=>c.observe(S))}function m(){c&&c.disconnect(),f=!0}function v(S){return Lg(s).reduce((T,E)=>{const A=parseInt(E),{isIntersecting:w}=s[A];return(S&&w||!S&&!w)&&T.push(A),T},[])}function y(S=!0){if(S&&r)return r;if(!S&&o)return o;const T=v(S);return S&&(r=T),S||(o=T),T}return{init:p,destroy:m,get:y}}function IO(i,e,t,n,s,r){const{measureSize:o,startEdge:c,endEdge:f}=i,p=t[0]&&s,m=S(),v=T(),y=t.map(o),x=E();function S(){if(!p)return 0;const w=t[0];return Li(e[c]-w[c])}function T(){if(!p)return 0;const w=r.getComputedStyle(So(n));return parseFloat(w.getPropertyValue(`margin-${f}`))}function E(){return t.map((w,B,D)=>{const O=!B,I=Bb(D,B);return O?y[B]+m:I?y[B]+v:D[B+1][c]-w[c]}).map(Li)}return{slideSizes:y,slideSizesWithGaps:x,startGap:m,endGap:v}}function PO(i,e,t,n,s,r,o,c,f){const{startEdge:p,endEdge:m,direction:v}=i,y=Rb(t);function x(A,w){return Ug(A).filter(B=>B%w===0).map(B=>A.slice(B,B+w))}function S(A){return A.length?Ug(A).reduce((w,B,D)=>{const O=So(w)||0,I=O===0,z=B===nv(A),P=s[p]-r[O][p],L=s[p]-r[B][m],N=!n&&I?v(o):0,j=!n&&z?v(c):0,ce=Li(L-j-(P+N));return D&&ce>e+f&&w.push(B),z&&w.push(A.length),w},[]).map((w,B,D)=>{const O=Math.max(D[B-1]||0);return A.slice(O,w)}):[]}function T(A){return y?x(A,t):S(A)}return{groupSlides:T}}function FO(i,e,t,n,s,r,o){const{align:c,axis:f,direction:p,startIndex:m,loop:v,duration:y,dragFree:x,dragThreshold:S,inViewThreshold:T,slidesToScroll:E,skipSnaps:A,containScroll:w,watchResize:B,watchSlides:D,watchDrag:O,watchFocus:I}=r,z=2,P=_O(),L=P.measure(e),N=t.map(P.measure),j=gO(f,p),ce=j.measureSize(L),ne=xO(ce),fe=pO(c,ce),_e=!v&&!!w,H=v||!!w,{slideSizes:W,slideSizesWithGaps:Q,startGap:ve,endGap:X}=IO(j,L,N,t,H,s),re=PO(j,ce,E,v,L,N,ve,X,z),{snaps:Ae,snapsAligned:Ce}=RO(j,fe,L,N,re),oe=-So(Ae)+So(Q),{snapsContained:Ne,scrollContainLimit:Oe}=bO(ce,oe,Ce,w,z),$e=_e?Ne:Ce,{limit:tt}=EO(oe,$e,v),Dt=SB(nv($e),m,v),wt=Dt.clone(),Pt=Ug(t),ot=({dragHandler:Nt,scrollBody:at,scrollBounds:At,options:{loop:Et}})=>{Et||At.constrain(Nt.pointerDown()),at.seek()},dt=({scrollBody:Nt,translate:at,location:At,offsetLocation:Et,previousLocation:St,scrollLooper:mt,slideLooper:he,dragHandler:Fe,animation:lt,eventHandler:ue,scrollBounds:be,options:{loop:De}},ke)=>{const yt=Nt.settled(),gt=!be.shouldConstrain(),Ft=De?yt:yt&&gt,rn=Ft&&!Fe.pointerDown();rn&&lt.stop();const wn=At.get()*ke+St.get()*(1-ke);Et.set(wn),De&&(mt.loop(Nt.direction()),he.loop()),at.to(Et.get()),rn&&ue.emit("settle"),Ft||ue.emit("scroll")},K=mO(n,s,()=>ot(xt),Nt=>dt(xt,Nt)),rt=.68,Ze=$e[Dt.get()],je=rg(Ze),Xe=rg(Ze),_t=rg(Ze),We=rg(Ze),Z=SO(je,_t,Xe,We,y,rt),k=BO(v,$e,oe,tt,We),xe=DO(K,Dt,wt,Z,k,We,o),ze=CO(tt),Qe=Ng(),He=OO(e,t,o,T),{slideRegistry:pt}=wO(_e,w,$e,Oe,re,Pt),ut=UO(i,t,pt,xe,Z,Qe,o,I),xt={ownerDocument:n,ownerWindow:s,eventHandler:o,containerRect:L,slideRects:N,animation:K,axis:j,dragHandler:vO(j,i,n,s,We,yO(j,s),je,K,xe,Z,k,Dt,o,ne,x,S,A,rt,O),eventStore:Qe,percentOfView:ne,index:Dt,indexPrevious:wt,limit:tt,location:je,offsetLocation:_t,previousLocation:Xe,options:r,resizeHandler:AO(e,o,s,t,j,B,P),scrollBody:Z,scrollBounds:MO(tt,_t,We,Z,ne),scrollLooper:TO(oe,tt,_t,[je,_t,Xe,We]),scrollProgress:ze,scrollSnapList:$e.map(ze.get),scrollSnaps:$e,scrollTarget:k,scrollTo:xe,slideLooper:LO(j,ce,oe,W,Q,Ae,$e,_t,t),slideFocus:ut,slidesHandler:NO(e,o,D),slidesInView:He,slideIndexes:Pt,slideRegistry:pt,slidesToScroll:re,target:We,translate:MB(j,e)};return xt}function HO(){let i={},e;function t(p){e=p}function n(p){return i[p]||[]}function s(p){return n(p).forEach(m=>m(e,p)),f}function r(p,m){return i[p]=n(p).concat([m]),f}function o(p,m){return i[p]=n(p).filter(v=>v!==m),f}function c(){i={}}const f={init:t,emit:s,off:o,on:r,clear:c};return f}const zO={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function GO(i){function e(r,o){return AB(r,o||{})}function t(r){const o=r.breakpoints||{},c=Lg(o).filter(f=>i.matchMedia(f).matches).map(f=>o[f]).reduce((f,p)=>e(f,p),{});return e(r,c)}function n(r){return r.map(o=>Lg(o.breakpoints||{})).reduce((o,c)=>o.concat(c),[]).map(i.matchMedia)}return{mergeOptions:e,optionsAtMedia:t,optionsMediaQueries:n}}function VO(i){let e=[];function t(r,o){return e=o.filter(({options:c})=>i.optionsAtMedia(c).active!==!1),e.forEach(c=>c.init(r,i)),o.reduce((c,f)=>Object.assign(c,{[f.name]:f}),{})}function n(){e=e.filter(r=>r.destroy())}return{init:t,destroy:n}}function __(i,e,t){const n=i.ownerDocument,s=n.defaultView,r=GO(s),o=VO(r),c=Ng(),f=HO(),{mergeOptions:p,optionsAtMedia:m,optionsMediaQueries:v}=r,{on:y,off:x,emit:S}=f,T=j;let E=!1,A,w=p(zO,__.globalOptions),B=p(w),D=[],O,I,z;function P(){const{container:Pt,slides:ot}=B;I=(TM(Pt)?i.querySelector(Pt):Pt)||i.children[0];const K=TM(ot)?I.querySelectorAll(ot):ot;z=[].slice.call(K||I.children)}function L(Pt){const ot=FO(i,I,z,n,s,Pt,f);if(Pt.loop&&!ot.slideLooper.canLoop()){const dt=Object.assign({},Pt,{loop:!1});return L(dt)}return ot}function N(Pt,ot){E||(w=p(w,Pt),B=m(w),D=ot||D,P(),A=L(B),v([w,...D.map(({options:dt})=>dt)]).forEach(dt=>c.add(dt,"change",j)),B.active&&(A.translate.to(A.location.get()),A.animation.init(),A.slidesInView.init(),A.slideFocus.init(wt),A.eventHandler.init(wt),A.resizeHandler.init(wt),A.slidesHandler.init(wt),A.options.loop&&A.slideLooper.loop(),I.offsetParent&&z.length&&A.dragHandler.init(wt),O=o.init(wt,D)))}function j(Pt,ot){const dt=re();ce(),N(p({startIndex:dt},Pt),ot),f.emit("reInit")}function ce(){A.dragHandler.destroy(),A.eventStore.clear(),A.translate.clear(),A.slideLooper.clear(),A.resizeHandler.destroy(),A.slidesHandler.destroy(),A.slidesInView.destroy(),A.animation.destroy(),o.destroy(),c.clear()}function ne(){E||(E=!0,c.clear(),ce(),f.emit("destroy"),f.clear())}function fe(Pt,ot,dt){!B.active||E||(A.scrollBody.useBaseFriction().useDuration(ot===!0?0:B.duration),A.scrollTo.index(Pt,dt||0))}function _e(Pt){const ot=A.index.add(1).get();fe(ot,Pt,-1)}function H(Pt){const ot=A.index.add(-1).get();fe(ot,Pt,1)}function W(){return A.index.add(1).get()!==re()}function Q(){return A.index.add(-1).get()!==re()}function ve(){return A.scrollSnapList}function X(){return A.scrollProgress.get(A.offsetLocation.get())}function re(){return A.index.get()}function Ae(){return A.indexPrevious.get()}function Ce(){return A.slidesInView.get()}function oe(){return A.slidesInView.get(!1)}function Ne(){return O}function Oe(){return A}function $e(){return i}function tt(){return I}function Dt(){return z}const wt={canScrollNext:W,canScrollPrev:Q,containerNode:tt,internalEngine:Oe,destroy:ne,off:x,on:y,emit:S,plugins:Ne,previousScrollSnap:Ae,reInit:T,rootNode:$e,scrollNext:_e,scrollPrev:H,scrollProgress:X,scrollSnapList:ve,scrollTo:fe,selectedScrollSnap:re,slideNodes:Dt,slidesInView:Ce,slidesNotInView:oe};return N(e,t),setTimeout(()=>f.emit("init"),0),wt}__.globalOptions=void 0;function Db(i={},e=[]){const t=ee.useRef(i),n=ee.useRef(e),[s,r]=ee.useState(),[o,c]=ee.useState(),f=ee.useCallback(()=>{s&&s.reInit(t.current,n.current)},[s]);return ee.useEffect(()=>{Cb(t.current,i)||(t.current=i,f())},[i,f]),ee.useEffect(()=>{fO(n.current,e)||(n.current=e,f())},[e,f]),ee.useEffect(()=>{if(uO()&&o){__.globalOptions=Db.globalOptions;const p=__(o,t.current,n.current);return r(p),()=>p.destroy()}else r(void 0)},[o,r]),[c,s]}Db.globalOptions=void 0;const kO="/cp-frontend-JordiDeLeeuw/",bB=({image:i,name:e,theme:t,fairytale:n,variant:s,id:r})=>{const o=hh();return pe.jsxs("div",{className:`item_div1 ${s==="list"?"list":""}`,children:[pe.jsx("img",{src:i,alt:e}),pe.jsxs("div",{className:"item_div2",children:[pe.jsx("h1",{children:e}),pe.jsx("h2",{children:n}),pe.jsxs("div",{className:"header_div3",children:[pe.jsx("h3",{children:t}),pe.jsx("button",{onClick:()=>o(`/makingof/${r}`),children:pe.jsx("img",{src:`${kO}smallarrow.png`,alt:"arrow"})})]})]})]})},Ub=()=>{const[i,e]=ee.useState([]),[t,n]=ee.useState(!0),s={avontuur:"AVONTUUR",mythologie:"AVONTUUR",magie:"FANTASIE",fantasie:"FANTASIE",romantiek:"ROMANTIEK",dierenverhaal:"ROMANTIEK",horror:"HORROR"};return ee.useEffect(()=>{(async()=>{n(!0);try{const o=await fetch("https://raw.githubusercontent.com/EHB-MCT/cp-frontend-MaximWesterbeek/refs/heads/main/course-project/public/api/fairytaleList.json");if(!o.ok)throw new Error("Failed to fetch data");const f=(await o.json()).map(p=>({...p,theme:s[p.genre.toLowerCase()]||"ONBEKEND"}));e(f)}catch(o){console.error("Error fetching fairytales:",o)}finally{n(!1)}})()},[]),{fairytales:i,isLoading:t}};function XO(i){let e=i.length,t,n;for(;--e>0;)t=Math.floor(Math.random()*(e+1)),n=i[t],i[t]=i[e],i[e]=n;return i}const jO=()=>{const{fairytales:i,isLoading:e}=Ub();if(e)return{fairytales:[],isLoading:e};const n=`popularFairytales-${new Date().toDateString()}`;let s=[];const r=localStorage.getItem(n);return r?s=JSON.parse(r):(s=XO([...i]),localStorage.setItem(n,JSON.stringify(s))),{fairytales:s,isLoading:!1}},bT="/cp-frontend-JordiDeLeeuw/",EB=()=>{const{fairytales:i,isLoading:e}=jO(),[t,n]=Db({loop:!0,align:"start",slidesToScroll:2,containScroll:"trimSnaps"}),s=ee.useCallback(()=>{n&&n.scrollPrev()},[n]),r=ee.useCallback(()=>{n&&n.scrollNext()},[n]);return e?pe.jsx("p",{children:"Loading..."}):pe.jsxs("div",{className:"carousel_div1",children:[pe.jsx("h1",{children:"HOT TODAY"}),pe.jsxs("div",{className:"carousel_div2",children:[pe.jsx("button",{onClick:s,className:"carousel-arrow",children:pe.jsx("img",{src:`${bT}circlearrow.png`,alt:"left arrow",style:{transform:"scaleX(-1)"}})}),pe.jsx("div",{className:"carousel_div3 embla",ref:t,children:pe.jsx("div",{className:"embla__container",children:i.map(o=>pe.jsx("div",{className:"embla__slide",children:pe.jsx(bB,{image:o.imgThumbnail,name:o.nameStudent,theme:o.genre,fairytale:o.fairytale,id:o.id,variant:"carousel"})},o.id))})}),pe.jsx("button",{onClick:r,className:"carousel-arrow",children:pe.jsx("img",{src:`${bT}circlearrow.png`,alt:"right arrow"})})]})]})},YO=()=>pe.jsxs(pe.Fragment,{children:[pe.jsx(lO,{}),pe.jsx(EB,{}),pe.jsx("div",{className:"spacer",children:" "})]}),qO=()=>{var o;const{fairytales:i,isLoading:e}=Ub(),[t]=xB(),n=t.get("theme"),s=((o=t.get("search"))==null?void 0:o.toLowerCase())||"",r=i.filter(c=>{const f=n?c.theme===n:!0;let p=!1;return(s===""||c.fairytale.toLowerCase().includes(s)||c.nameStudent.toLowerCase().includes(s))&&(p=!0),f&&p});return e?pe.jsx("p",{children:"Loading..."}):pe.jsxs("div",{className:"list_div1",children:[pe.jsx("h1",{children:"STORYS"}),pe.jsx("div",{className:"list_grid",children:r.map(c=>pe.jsx(bB,{image:c.imgThumbnail,name:c.nameStudent,theme:c.genre,fairytale:c.fairytale,id:c.id,variant:"list"}))})]})},JO=()=>pe.jsxs("div",{className:"home_container",children:[pe.jsx(EB,{}),pe.jsx(qO,{})]}),TB=ee.createContext({});function Ax(i){const e=ee.useRef(null);return e.current===null&&(e.current=i()),e.current}const Lb=typeof window<"u",Nb=Lb?ee.useLayoutEffect:ee.useEffect,Ob=ee.createContext(null);function Ib(i,e){i.indexOf(e)===-1&&i.push(e)}function Pb(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}const vl=(i,e,t)=>t>e?e:t<i?i:t;let KO=()=>{},Fb=()=>{};const uc={},CB=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function RB(i){return typeof i=="object"&&i!==null}const wB=i=>/^0[^.\s]+$/u.test(i);function Hb(i){let e;return()=>(e===void 0&&(e=i()),e)}const ja=i=>i,WO=(i,e)=>t=>e(i(t)),iv=(...i)=>i.reduce(WO),Wd=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n};class zb{constructor(){this.subscriptions=[]}add(e){return Ib(this.subscriptions,e),()=>Pb(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,n);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fl=i=>i*1e3,hl=i=>i/1e3;function Gb(i,e){return e?i*(1e3/e):0}const BB=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,ZO=1e-7,QO=12;function $O(i,e,t,n,s){let r,o,c=0;do o=e+(t-e)/2,r=BB(o,n,s)-i,r>0?t=o:e=o;while(Math.abs(r)>ZO&&++c<QO);return o}function sv(i,e,t,n){if(i===e&&t===n)return ja;const s=r=>$O(r,0,1,i,t);return r=>r===0||r===1?r:BB(s(r),e,n)}const DB=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,UB=i=>e=>1-i(1-e),LB=sv(.33,1.53,.69,.99),Vb=UB(LB),NB=DB(Vb),OB=i=>(i*=2)<1?.5*Vb(i):.5*(2-Math.pow(2,-10*(i-1))),kb=i=>1-Math.sin(Math.acos(i)),IB=UB(kb),PB=DB(kb),eI=sv(.42,0,1,1),tI=sv(0,0,.58,1),FB=sv(.42,0,.58,1),nI=i=>Array.isArray(i)&&typeof i[0]!="number",HB=i=>Array.isArray(i)&&typeof i[0]=="number",iI={linear:ja,easeIn:eI,easeInOut:FB,easeOut:tI,circIn:kb,circInOut:PB,circOut:IB,backIn:Vb,backInOut:NB,backOut:LB,anticipate:OB},sI=i=>typeof i=="string",ET=i=>{if(HB(i)){Fb(i.length===4);const[e,t,n,s]=i;return sv(e,t,n,s)}else if(sI(i))return iI[i];return i},ey=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function aI(i,e){let t=new Set,n=new Set,s=!1,r=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(m){o.has(m)&&(p.schedule(m),i()),m(c)}const p={schedule:(m,v=!1,y=!1)=>{const S=y&&s?t:n;return v&&o.add(m),S.has(m)||S.add(m),m},cancel:m=>{n.delete(m),o.delete(m)},process:m=>{if(c=m,s){r=!0;return}s=!0,[t,n]=[n,t],t.forEach(f),t.clear(),s=!1,r&&(r=!1,p.process(m))}};return p}const rI=40;function zB(i,e){let t=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,o=ey.reduce((B,D)=>(B[D]=aI(r),B),{}),{setup:c,read:f,resolveKeyframes:p,preUpdate:m,update:v,preRender:y,render:x,postRender:S}=o,T=()=>{const B=uc.useManualTiming?s.timestamp:performance.now();t=!1,uc.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(B-s.timestamp,rI),1)),s.timestamp=B,s.isProcessing=!0,c.process(s),f.process(s),p.process(s),m.process(s),v.process(s),y.process(s),x.process(s),S.process(s),s.isProcessing=!1,t&&e&&(n=!1,i(T))},E=()=>{t=!0,n=!0,s.isProcessing||i(T)};return{schedule:ey.reduce((B,D)=>{const O=o[D];return B[D]=(I,z=!1,P=!1)=>(t||E(),O.schedule(I,z,P)),B},{}),cancel:B=>{for(let D=0;D<ey.length;D++)o[ey[D]].cancel(B)},state:s,steps:o}}const{schedule:si,cancel:bo,state:bs,steps:QA}=zB(typeof requestAnimationFrame<"u"?requestAnimationFrame:ja,!0);let a_;function oI(){a_=void 0}const ka={now:()=>(a_===void 0&&ka.set(bs.isProcessing||uc.useManualTiming?bs.timestamp:performance.now()),a_),set:i=>{a_=i,queueMicrotask(oI)}},GB=i=>e=>typeof e=="string"&&e.startsWith(i),Xb=GB("--"),lI=GB("var(--"),jb=i=>lI(i)?cI.test(i.split("/*")[0].trim()):!1,cI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,mp={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Og={...mp,transform:i=>vl(0,1,i)},ty={...mp,default:1},hg=i=>Math.round(i*1e5)/1e5,Yb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uI(i){return i==null}const fI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qb=(i,e)=>t=>!!(typeof t=="string"&&fI.test(t)&&t.startsWith(i)||e&&!uI(t)&&Object.prototype.hasOwnProperty.call(t,e)),VB=(i,e,t)=>n=>{if(typeof n!="string")return n;const[s,r,o,c]=n.match(Yb);return{[i]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},hI=i=>vl(0,255,i),$A={...mp,transform:i=>Math.round(hI(i))},kf={test:qb("rgb","red"),parse:VB("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+$A.transform(i)+", "+$A.transform(e)+", "+$A.transform(t)+", "+hg(Og.transform(n))+")"};function dI(i){let e="",t="",n="",s="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),e+=e,t+=t,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const RM={test:qb("#"),parse:dI,transform:kf.transform},av=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),pu=av("deg"),dl=av("%"),sn=av("px"),pI=av("vh"),mI=av("vw"),TT={...dl,parse:i=>dl.parse(i)/100,transform:i=>dl.transform(i*100)},Hd={test:qb("hsl","hue"),parse:VB("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+dl.transform(hg(e))+", "+dl.transform(hg(t))+", "+hg(Og.transform(n))+")"},na={test:i=>kf.test(i)||RM.test(i)||Hd.test(i),parse:i=>kf.test(i)?kf.parse(i):Hd.test(i)?Hd.parse(i):RM.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?kf.transform(i):Hd.transform(i)},gI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vI(i){var e,t;return isNaN(i)&&typeof i=="string"&&(((e=i.match(Yb))==null?void 0:e.length)||0)+(((t=i.match(gI))==null?void 0:t.length)||0)>0}const kB="number",XB="color",yI="var",_I="var(",CT="${}",xI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ig(i){const e=i.toString(),t=[],n={color:[],number:[],var:[]},s=[];let r=0;const c=e.replace(xI,f=>(na.test(f)?(n.color.push(r),s.push(XB),t.push(na.parse(f))):f.startsWith(_I)?(n.var.push(r),s.push(yI),t.push(f)):(n.number.push(r),s.push(kB),t.push(parseFloat(f))),++r,CT)).split(CT);return{values:t,split:c,indexes:n,types:s}}function jB(i){return Ig(i).values}function YB(i){const{split:e,types:t}=Ig(i),n=e.length;return s=>{let r="";for(let o=0;o<n;o++)if(r+=e[o],s[o]!==void 0){const c=t[o];c===kB?r+=hg(s[o]):c===XB?r+=na.transform(s[o]):r+=s[o]}return r}}const AI=i=>typeof i=="number"?0:i;function SI(i){const e=jB(i);return YB(i)(e.map(AI))}const xu={test:vI,parse:jB,createTransformer:YB,getAnimatableNone:SI};function eS(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function MI({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let s=0,r=0,o=0;if(!e)s=r=o=t;else{const c=t<.5?t*(1+e):t+e-t*e,f=2*t-c;s=eS(f,c,i+1/3),r=eS(f,c,i),o=eS(f,c,i-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:n}}function x_(i,e){return t=>t>0?e:i}const Ni=(i,e,t)=>i+(e-i)*t,tS=(i,e,t)=>{const n=i*i,s=t*(e*e-n)+n;return s<0?0:Math.sqrt(s)},bI=[RM,kf,Hd],EI=i=>bI.find(e=>e.test(i));function RT(i){const e=EI(i);if(!e)return!1;let t=e.parse(i);return e===Hd&&(t=MI(t)),t}const wT=(i,e)=>{const t=RT(i),n=RT(e);if(!t||!n)return x_(i,e);const s={...t};return r=>(s.red=tS(t.red,n.red,r),s.green=tS(t.green,n.green,r),s.blue=tS(t.blue,n.blue,r),s.alpha=Ni(t.alpha,n.alpha,r),kf.transform(s))},wM=new Set(["none","hidden"]);function TI(i,e){return wM.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}function CI(i,e){return t=>Ni(i,e,t)}function Jb(i){return typeof i=="number"?CI:typeof i=="string"?jb(i)?x_:na.test(i)?wT:BI:Array.isArray(i)?qB:typeof i=="object"?na.test(i)?wT:RI:x_}function qB(i,e){const t=[...i],n=t.length,s=i.map((r,o)=>Jb(r)(r,e[o]));return r=>{for(let o=0;o<n;o++)t[o]=s[o](r);return t}}function RI(i,e){const t={...i,...e},n={};for(const s in t)i[s]!==void 0&&e[s]!==void 0&&(n[s]=Jb(i[s])(i[s],e[s]));return s=>{for(const r in n)t[r]=n[r](s);return t}}function wI(i,e){const t=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],o=i.indexes[r][n[r]],c=i.values[o]??0;t[s]=c,n[r]++}return t}const BI=(i,e)=>{const t=xu.createTransformer(e),n=Ig(i),s=Ig(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?wM.has(i)&&!s.values.length||wM.has(e)&&!n.values.length?TI(i,e):iv(qB(wI(n,s),s.values),t):x_(i,e)};function JB(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?Ni(i,e,t):Jb(i)(i,e)}const DI=i=>{const e=({timestamp:t})=>i(t);return{start:(t=!0)=>si.update(e,t),stop:()=>bo(e),now:()=>bs.isProcessing?bs.timestamp:ka.now()}},KB=(i,e,t=10)=>{let n="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)n+=i(r/(s-1))+", ";return`linear(${n.substring(0,n.length-2)})`},A_=2e4;function Kb(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<A_;)e+=t,n=i.next(e);return e>=A_?1/0:e}function UI(i,e=100,t){const n=t({...i,keyframes:[0,e]}),s=Math.min(Kb(n),A_);return{type:"keyframes",ease:r=>n.next(s*r).value/e,duration:hl(s)}}const LI=5;function WB(i,e,t){const n=Math.max(e-LI,0);return Gb(t-i(n),e-n)}const Vi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},BT=.001;function NI({duration:i=Vi.duration,bounce:e=Vi.bounce,velocity:t=Vi.velocity,mass:n=Vi.mass}){let s,r,o=1-e;o=vl(Vi.minDamping,Vi.maxDamping,o),i=vl(Vi.minDuration,Vi.maxDuration,hl(i)),o<1?(s=p=>{const m=p*o,v=m*i,y=m-t,x=BM(p,o),S=Math.exp(-v);return BT-y/x*S},r=p=>{const v=p*o*i,y=v*t+t,x=Math.pow(o,2)*Math.pow(p,2)*i,S=Math.exp(-v),T=BM(Math.pow(p,2),o);return(-s(p)+BT>0?-1:1)*((y-x)*S)/T}):(s=p=>{const m=Math.exp(-p*i),v=(p-t)*i+1;return-.001+m*v},r=p=>{const m=Math.exp(-p*i),v=(t-p)*(i*i);return m*v});const c=5/i,f=II(s,r,c);if(i=fl(i),isNaN(f))return{stiffness:Vi.stiffness,damping:Vi.damping,duration:i};{const p=Math.pow(f,2)*n;return{stiffness:p,damping:o*2*Math.sqrt(n*p),duration:i}}}const OI=12;function II(i,e,t){let n=t;for(let s=1;s<OI;s++)n=n-i(n)/e(n);return n}function BM(i,e){return i*Math.sqrt(1-e*e)}const PI=["duration","bounce"],FI=["stiffness","damping","mass"];function DT(i,e){return e.some(t=>i[t]!==void 0)}function HI(i){let e={velocity:Vi.velocity,stiffness:Vi.stiffness,damping:Vi.damping,mass:Vi.mass,isResolvedFromDuration:!1,...i};if(!DT(i,FI)&&DT(i,PI))if(i.visualDuration){const t=i.visualDuration,n=2*Math.PI/(t*1.2),s=n*n,r=2*vl(.05,1,1-(i.bounce||0))*Math.sqrt(s);e={...e,mass:Vi.mass,stiffness:s,damping:r}}else{const t=NI(i);e={...e,...t,mass:Vi.mass},e.isResolvedFromDuration=!0}return e}function S_(i=Vi.visualDuration,e=Vi.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:n,restDelta:s}=t;const r=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],c={done:!1,value:r},{stiffness:f,damping:p,mass:m,duration:v,velocity:y,isResolvedFromDuration:x}=HI({...t,velocity:-hl(t.velocity||0)}),S=y||0,T=p/(2*Math.sqrt(f*m)),E=o-r,A=hl(Math.sqrt(f/m)),w=Math.abs(E)<5;n||(n=w?Vi.restSpeed.granular:Vi.restSpeed.default),s||(s=w?Vi.restDelta.granular:Vi.restDelta.default);let B;if(T<1){const O=BM(A,T);B=I=>{const z=Math.exp(-T*A*I);return o-z*((S+T*A*E)/O*Math.sin(O*I)+E*Math.cos(O*I))}}else if(T===1)B=O=>o-Math.exp(-A*O)*(E+(S+A*E)*O);else{const O=A*Math.sqrt(T*T-1);B=I=>{const z=Math.exp(-T*A*I),P=Math.min(O*I,300);return o-z*((S+T*A*E)*Math.sinh(P)+O*E*Math.cosh(P))/O}}const D={calculatedDuration:x&&v||null,next:O=>{const I=B(O);if(x)c.done=O>=v;else{let z=O===0?S:0;T<1&&(z=O===0?fl(S):WB(B,O,I));const P=Math.abs(z)<=n,L=Math.abs(o-I)<=s;c.done=P&&L}return c.value=c.done?o:I,c},toString:()=>{const O=Math.min(Kb(D),A_),I=KB(z=>D.next(O*z).value,O,30);return O+"ms "+I},toTransition:()=>{}};return D}S_.applyToOptions=i=>{const e=UI(i,100,S_);return i.ease=e.ease,i.duration=fl(e.duration),i.type="keyframes",i};function DM({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:c,max:f,restDelta:p=.5,restSpeed:m}){const v=i[0],y={done:!1,value:v},x=P=>c!==void 0&&P<c||f!==void 0&&P>f,S=P=>c===void 0?f:f===void 0||Math.abs(c-P)<Math.abs(f-P)?c:f;let T=t*e;const E=v+T,A=o===void 0?E:o(E);A!==E&&(T=A-v);const w=P=>-T*Math.exp(-P/n),B=P=>A+w(P),D=P=>{const L=w(P),N=B(P);y.done=Math.abs(L)<=p,y.value=y.done?A:N};let O,I;const z=P=>{x(y.value)&&(O=P,I=S_({keyframes:[y.value,S(y.value)],velocity:WB(B,P,y.value),damping:s,stiffness:r,restDelta:p,restSpeed:m}))};return z(0),{calculatedDuration:null,next:P=>{let L=!1;return!I&&O===void 0&&(L=!0,D(P),z(P)),O!==void 0&&P>=O?I.next(P-O):(!L&&D(P),y)}}}function zI(i,e,t){const n=[],s=t||uc.mix||JB,r=i.length-1;for(let o=0;o<r;o++){let c=s(i[o],i[o+1]);if(e){const f=Array.isArray(e)?e[o]||ja:e;c=iv(f,c)}n.push(c)}return n}function Wb(i,e,{clamp:t=!0,ease:n,mixer:s}={}){const r=i.length;if(Fb(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const o=i[0]===i[1];i[0]>i[r-1]&&(i=[...i].reverse(),e=[...e].reverse());const c=zI(e,n,s),f=c.length,p=m=>{if(o&&m<i[0])return e[0];let v=0;if(f>1)for(;v<i.length-2&&!(m<i[v+1]);v++);const y=Wd(i[v],i[v+1],m);return c[v](y)};return t?m=>p(vl(i[0],i[r-1],m)):p}function GI(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const s=Wd(0,e,n);i.push(Ni(t,1,s))}}function ZB(i){const e=[0];return GI(e,i.length-1),e}function VI(i,e){return i.map(t=>t*e)}function kI(i,e){return i.map(()=>e||FB).splice(0,i.length-1)}function dg({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const s=nI(n)?n.map(ET):ET(n),r={done:!1,value:e[0]},o=VI(t&&t.length===e.length?t:ZB(e),i),c=Wb(o,e,{ease:Array.isArray(s)?s:kI(e,s)});return{calculatedDuration:i,next:f=>(r.value=c(f),r.done=f>=i,r)}}const XI=i=>i!==null;function Zb(i,{repeat:e,repeatType:t="loop"},n,s=1){const r=i.filter(XI),c=s<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!c||n===void 0?r[c]:n}const jI={decay:DM,inertia:DM,tween:dg,keyframes:dg,spring:S_};function QB(i){typeof i.type=="string"&&(i.type=jI[i.type])}class Qb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const YI=i=>i/100;class $b extends Qb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(t=!0)=>{var n,s;if(t){const{motionValue:r}=this.options;r&&r.updatedAt!==ka.now()&&this.tick(ka.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;QB(e);const{type:t=dg,repeat:n=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=e;let{keyframes:c}=e;const f=t||dg;f!==dg&&typeof c[0]!="number"&&(this.mixKeyframes=iv(YI,JB(c[0],c[1])),c=[0,100]);const p=f({...e,keyframes:c});r==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-o})),p.calculatedDuration===null&&(p.calculatedDuration=Kb(p));const{calculatedDuration:m}=p;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=p}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:s,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return n.next(0);const{delay:p=0,keyframes:m,repeat:v,repeatType:y,repeatDelay:x,type:S,onUpdate:T,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const A=this.currentTime-p*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?A<0:A>s;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let B=this.currentTime,D=n;if(v){const P=Math.min(this.currentTime,s)/c;let L=Math.floor(P),N=P%1;!N&&P>=1&&(N=1),N===1&&L--,L=Math.min(L,v+1),!!(L%2)&&(y==="reverse"?(N=1-N,x&&(N-=x/c)):y==="mirror"&&(D=o)),B=vl(0,1,N)*c}const O=w?{done:!1,value:m[0]}:D.next(B);r&&(O.value=r(O.value));let{done:I}=O;!w&&f!==null&&(I=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return z&&S!==DM&&(O.value=Zb(m,this.options,E,this.speed)),T&&T(O.value),z&&this.finish(),O}then(e,t){return this.finished.then(e,t)}get duration(){return hl(this.calculatedDuration)}get time(){return hl(this.currentTime)}set time(e){var t;e=fl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ka.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=hl(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:e=DI,startTime:t}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(r=(s=this.options).onPlay)==null||r.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ka.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function qI(i){for(let e=1;e<i.length;e++)i[e]??(i[e]=i[e-1])}const Xf=i=>i*180/Math.PI,UM=i=>{const e=Xf(Math.atan2(i[1],i[0]));return LM(e)},JI={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:UM,rotateZ:UM,skewX:i=>Xf(Math.atan(i[1])),skewY:i=>Xf(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},LM=i=>(i=i%360,i<0&&(i+=360),i),UT=UM,LT=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),NT=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),KI={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:LT,scaleY:NT,scale:i=>(LT(i)+NT(i))/2,rotateX:i=>LM(Xf(Math.atan2(i[6],i[5]))),rotateY:i=>LM(Xf(Math.atan2(-i[2],i[0]))),rotateZ:UT,rotate:UT,skewX:i=>Xf(Math.atan(i[4])),skewY:i=>Xf(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function NM(i){return i.includes("scale")?1:0}function OM(i,e){if(!i||i==="none")return NM(e);const t=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(t)n=KI,s=t;else{const c=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=JI,s=c}if(!s)return NM(e);const r=n[e],o=s[1].split(",").map(ZI);return typeof r=="function"?r(o):o[r]}const WI=(i,e)=>{const{transform:t="none"}=getComputedStyle(i);return OM(t,e)};function ZI(i){return parseFloat(i.trim())}const gp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vp=new Set(gp),OT=i=>i===mp||i===sn,QI=new Set(["x","y","z"]),$I=gp.filter(i=>!QI.has(i));function eP(i){const e=[];return $I.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const Qf={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:(i,{transform:e})=>OM(e,"x"),y:(i,{transform:e})=>OM(e,"y")};Qf.translateX=Qf.x;Qf.translateY=Qf.y;const $f=new Set;let IM=!1,PM=!1,FM=!1;function $B(){if(PM){const i=Array.from($f).filter(n=>n.needsMeasurement),e=new Set(i.map(n=>n.element)),t=new Map;e.forEach(n=>{const s=eP(n);s.length&&(t.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=t.get(n);s&&s.forEach(([r,o])=>{var c;(c=n.getValue(r))==null||c.set(o)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}PM=!1,IM=!1,$f.forEach(i=>i.complete(FM)),$f.clear()}function e2(){$f.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(PM=!0)})}function tP(){FM=!0,e2(),$B(),FM=!1}class eE{constructor(e,t,n,s,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?($f.add(this),IM||(IM=!0,si.read(e2),si.resolveKeyframes($B))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:s}=this;if(e[0]===null){const r=s==null?void 0:s.get(),o=e[e.length-1];if(r!==void 0)e[0]=r;else if(n&&t){const c=n.readValue(t,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),s&&r===void 0&&s.set(e[0])}qI(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),$f.delete(this)}cancel(){this.state==="scheduled"&&($f.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nP=i=>i.startsWith("--");function iP(i,e,t){nP(e)?i.style.setProperty(e,t):i.style[e]=t}const t2=Hb(()=>window.ScrollTimeline!==void 0),sP={};function aP(i,e){const t=Hb(i);return()=>sP[e]??t()}const n2=aP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),og=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,IT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:og([0,.65,.55,1]),circOut:og([.55,0,1,.45]),backIn:og([.31,.01,.66,-.59]),backOut:og([.33,1.53,.69,.99])};function i2(i,e){if(i)return typeof i=="function"?n2()?KB(i,e):"ease-out":HB(i)?og(i):Array.isArray(i)?i.map(t=>i2(t,e)||IT.easeOut):IT[i]}function rP(i,e,t,{delay:n=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:c="easeOut",times:f}={},p=void 0){const m={[e]:t};f&&(m.offset=f);const v=i2(c,s);Array.isArray(v)&&(m.easing=v);const y={delay:n,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return p&&(y.pseudoElement=p),i.animate(m,y)}function s2(i){return typeof i=="function"&&"applyToOptions"in i}function oP({type:i,...e}){return s2(i)&&n2()?i.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class lP extends Qb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:s,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=e,Fb(typeof e.type!="string");const p=oP(e);this.animation=rP(t,n,s,p,r),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const m=Zb(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):iP(t,n,m),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,n;const e=((n=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:n.call(t).duration)||0;return hl(Number(e))}get time(){return hl(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=fl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&t2()?(this.animation.timeline=e,ja):t(this)}}const a2={anticipate:OB,backInOut:NB,circInOut:PB};function cP(i){return i in a2}function uP(i){typeof i.ease=="string"&&cP(i.ease)&&(i.ease=a2[i.ease])}const PT=10;class fP extends lP{constructor(e){uP(e),QB(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:s,element:r,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new $b({...o,autoplay:!1}),f=fl(this.finishedTime??this.time);t.setWithVelocity(c.sample(f-PT).value,c.sample(f).value,PT),c.stop()}}const FT=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(xu.test(i)||i==="0")&&!i.startsWith("url("));function hP(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function dP(i,e,t,n){const s=i[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=i[i.length-1],o=FT(s,e),c=FT(r,e);return!o||!c?!1:hP(i)||(t==="spring"||s2(t))&&n}function tE(i){return RB(i)&&"offsetHeight"in i}const pP=new Set(["opacity","clipPath","filter","transform"]),mP=Hb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gP(i){var p;const{motionValue:e,name:t,repeatDelay:n,repeatType:s,damping:r,type:o}=i;if(!tE((p=e==null?void 0:e.owner)==null?void 0:p.current))return!1;const{onUpdate:c,transformTemplate:f}=e.owner.getProps();return mP()&&t&&pP.has(t)&&(t!=="transform"||!f)&&!c&&!n&&s!=="mirror"&&r!==0&&o!=="inertia"}const vP=40;class yP extends Qb{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",keyframes:c,name:f,motionValue:p,element:m,...v}){var S;super(),this.stop=()=>{var T,E;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=ka.now();const y={autoplay:e,delay:t,type:n,repeat:s,repeatDelay:r,repeatType:o,name:f,motionValue:p,element:m,...v},x=(m==null?void 0:m.KeyframeResolver)||eE;this.keyframeResolver=new x(c,(T,E,A)=>this.onKeyframesResolved(T,E,y,!A),f,p,m),(S=this.keyframeResolver)==null||S.scheduleResolve()}onKeyframesResolved(e,t,n,s){this.keyframeResolver=void 0;const{name:r,type:o,velocity:c,delay:f,isHandoff:p,onUpdate:m}=n;this.resolvedAt=ka.now(),dP(e,r,o,c)||((uc.instantAnimations||!f)&&(m==null||m(Zb(e,n,t))),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const y={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>vP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},x=!p&&gP(y)?new fP({...y,element:y.motionValue.owner.current}):new $b(y);x.finished.then(()=>this.notifyFinished()).catch(ja),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),tP()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const _P=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xP(i){const e=_P.exec(i);if(!e)return[,];const[,t,n,s]=e;return[`--${t??n}`,s]}function r2(i,e,t=1){const[n,s]=xP(i);if(!n)return;const r=window.getComputedStyle(e).getPropertyValue(n);if(r){const o=r.trim();return CB(o)?parseFloat(o):o}return jb(s)?r2(s,e,t+1):s}function nE(i,e){return(i==null?void 0:i[e])??(i==null?void 0:i.default)??i}const o2=new Set(["width","height","top","left","right","bottom",...gp]),AP={test:i=>i==="auto",parse:i=>i},l2=i=>e=>e.test(i),c2=[mp,sn,dl,pu,mI,pI,AP],HT=i=>c2.find(l2(i));function SP(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||wB(i):!0}const MP=new Set(["brightness","contrast","saturate","opacity"]);function bP(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(Yb)||[];if(!n)return i;const s=t.replace(n,"");let r=MP.has(e)?1:0;return n!==t&&(r*=100),e+"("+r+s+")"}const EP=/\b([a-z-]*)\(.*?\)/gu,HM={...xu,getAnimatableNone:i=>{const e=i.match(EP);return e?e.map(bP).join(" "):i}},zT={...mp,transform:Math.round},TP={rotate:pu,rotateX:pu,rotateY:pu,rotateZ:pu,scale:ty,scaleX:ty,scaleY:ty,scaleZ:ty,skew:pu,skewX:pu,skewY:pu,distance:sn,translateX:sn,translateY:sn,translateZ:sn,x:sn,y:sn,z:sn,perspective:sn,transformPerspective:sn,opacity:Og,originX:TT,originY:TT,originZ:sn},iE={borderWidth:sn,borderTopWidth:sn,borderRightWidth:sn,borderBottomWidth:sn,borderLeftWidth:sn,borderRadius:sn,radius:sn,borderTopLeftRadius:sn,borderTopRightRadius:sn,borderBottomRightRadius:sn,borderBottomLeftRadius:sn,width:sn,maxWidth:sn,height:sn,maxHeight:sn,top:sn,right:sn,bottom:sn,left:sn,padding:sn,paddingTop:sn,paddingRight:sn,paddingBottom:sn,paddingLeft:sn,margin:sn,marginTop:sn,marginRight:sn,marginBottom:sn,marginLeft:sn,backgroundPositionX:sn,backgroundPositionY:sn,...TP,zIndex:zT,fillOpacity:Og,strokeOpacity:Og,numOctaves:zT},CP={...iE,color:na,backgroundColor:na,outlineColor:na,fill:na,stroke:na,borderColor:na,borderTopColor:na,borderRightColor:na,borderBottomColor:na,borderLeftColor:na,filter:HM,WebkitFilter:HM},u2=i=>CP[i];function f2(i,e){let t=u2(i);return t!==HM&&(t=xu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const RP=new Set(["auto","none","0"]);function wP(i,e,t){let n=0,s;for(;n<i.length&&!s;){const r=i[n];typeof r=="string"&&!RP.has(r)&&Ig(r).values.length&&(s=i[n]),n++}if(s&&t)for(const r of e)i[r]=f2(t,s)}class BP extends eE{constructor(e,t,n,s,r){super(e,t,n,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),jb(p))){const m=r2(p,t.current);m!==void 0&&(e[f]=m),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!o2.has(n)||e.length!==2)return;const[s,r]=e,o=HT(s),c=HT(r);if(o!==c)if(OT(o)&&OT(c))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else Qf[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||SP(e[s]))&&n.push(s);n.length&&wP(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qf[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const r=n.length-1,o=n[r];n[r]=Qf[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([f,p])=>{e.getValue(f).set(p)}),this.resolveNoneKeyframes()}}function h2(i,e,t){if(i instanceof EventTarget)return[i];if(typeof i=="string"){const s=document.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i)}const GT=30,DP=i=>!isNaN(parseFloat(i)),pg={current:void 0};class UP{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{var o,c;const r=ka.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const f of this.dependents)f.dirty();s&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ka.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=DP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new zb);const n=this.events[e].add(t);return e==="change"?()=>{n(),si.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return pg.current&&pg.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ka.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>GT)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,GT);return Gb(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xo(i,e){return new UP(i,e)}const d2=(i,e)=>e&&typeof i=="number"?e.transform(i):i,{schedule:sE}=zB(queueMicrotask,!1),vo={x:!1,y:!1};function p2(){return vo.x||vo.y}function LP(i){return i==="x"||i==="y"?vo[i]?null:(vo[i]=!0,()=>{vo[i]=!1}):vo.x||vo.y?null:(vo.x=vo.y=!0,()=>{vo.x=vo.y=!1})}function m2(i,e){const t=h2(i),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[t,s,()=>n.abort()]}function VT(i){return!(i.pointerType==="touch"||p2())}function NP(i,e,t={}){const[n,s,r]=m2(i,t),o=c=>{if(!VT(c))return;const{target:f}=c,p=e(f,c);if(typeof p!="function"||!f)return;const m=v=>{VT(v)&&(p(v),f.removeEventListener("pointerleave",m))};f.addEventListener("pointerleave",m,s)};return n.forEach(c=>{c.addEventListener("pointerenter",o,s)}),r}const g2=(i,e)=>e?i===e?!0:g2(i,e.parentElement):!1,aE=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,OP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function IP(i){return OP.has(i.tagName)||i.tabIndex!==-1}const r_=new WeakSet;function kT(i){return e=>{e.key==="Enter"&&i(e)}}function nS(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const PP=(i,e)=>{const t=i.currentTarget;if(!t)return;const n=kT(()=>{if(r_.has(t))return;nS(t,"down");const s=kT(()=>{nS(t,"up")}),r=()=>nS(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function XT(i){return aE(i)&&!p2()}function FP(i,e,t={}){const[n,s,r]=m2(i,t),o=c=>{const f=c.currentTarget;if(!XT(c))return;r_.add(f);const p=e(f,c),m=(x,S)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",y),r_.has(f)&&r_.delete(f),XT(x)&&typeof p=="function"&&p(x,{success:S})},v=x=>{m(x,f===window||f===document||t.useGlobalTarget||g2(f,x.target))},y=x=>{m(x,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",y,s)};return n.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",o,s),tE(c)&&(c.addEventListener("focus",p=>PP(p,s)),!IP(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}function v2(i,e){let t;const n=()=>{const{currentTime:s}=e,o=(s===null?0:s.value)/100;t!==o&&i(o),t=o};return si.preUpdate(n,!0),()=>bo(n)}function rE(i){return RB(i)&&"ownerSVGElement"in i}function HP(i){return rE(i)&&i.tagName==="svg"}function zP(...i){const e=!Array.isArray(i[0]),t=e?0:-1,n=i[0+t],s=i[1+t],r=i[2+t],o=i[3+t],c=Wb(s,r,o);return e?c(n):c}const ia=i=>!!(i&&i.getVelocity),GP=[...c2,na,xu],VP=i=>GP.find(l2(i)),oE=ee.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function kP(i=!0){const e=ee.useContext(Ob);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,r=ee.useId();ee.useEffect(()=>{if(i)return s(r)},[i]);const o=ee.useCallback(()=>i&&n&&n(r),[r,n,i]);return!t&&n?[!1,o]:[!0]}const y2=ee.createContext({strict:!1}),jT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zd={};for(const i in jT)Zd[i]={isEnabled:e=>jT[i].some(t=>!!e[t])};function XP(i){for(const e in i)Zd[e]={...Zd[e],...i[e]}}const jP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function M_(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||jP.has(i)}let _2=i=>!M_(i);function YP(i){i&&(_2=e=>e.startsWith("on")?!M_(e):i(e))}try{YP(require("@emotion/is-prop-valid").default)}catch{}function qP(i,e,t){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(_2(s)||t===!0&&M_(s)||!e&&!M_(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}function JP(i){if(typeof Proxy>"u")return i;const e=new Map,t=(...n)=>i(...n);return new Proxy(t,{get:(n,s)=>s==="create"?i:(e.has(s)||e.set(s,i(s)),e.get(s))})}const Sx=ee.createContext({});function Mx(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function Pg(i){return typeof i=="string"||Array.isArray(i)}const lE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cE=["initial",...lE];function bx(i){return Mx(i.animate)||cE.some(e=>Pg(i[e]))}function x2(i){return!!(bx(i)||i.variants)}function KP(i,e){if(bx(i)){const{initial:t,animate:n}=i;return{initial:t===!1||Pg(t)?t:void 0,animate:Pg(n)?n:void 0}}return i.inherit!==!1?e:{}}function WP(i){const{initial:e,animate:t}=KP(i,ee.useContext(Sx));return ee.useMemo(()=>({initial:e,animate:t}),[YT(e),YT(t)])}function YT(i){return Array.isArray(i)?i.join(" "):i}const ZP=Symbol.for("motionComponentSymbol");function zd(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function QP(i,e,t){return ee.useCallback(n=>{n&&i.onMount&&i.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):zd(t)&&(t.current=n))},[e])}const uE=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$P="framerAppearId",A2="data-"+uE($P),S2=ee.createContext({});function eF(i,e,t,n,s){var T,E;const{visualElement:r}=ee.useContext(Sx),o=ee.useContext(y2),c=ee.useContext(Ob),f=ee.useContext(oE).reducedMotion,p=ee.useRef(null);n=n||o.renderer,!p.current&&n&&(p.current=n(i,{visualState:e,parent:r,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const m=p.current,v=ee.useContext(S2);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&tF(p.current,t,s,v);const y=ee.useRef(!1);ee.useInsertionEffect(()=>{m&&y.current&&m.update(t,c)});const x=t[A2],S=ee.useRef(!!x&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,x))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,x)));return Nb(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),sE.render(m.render),S.current&&m.animationState&&m.animationState.animateChanges())}),ee.useEffect(()=>{m&&(!S.current&&m.animationState&&m.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)==null||A.call(window,x)}),S.current=!1))}),m}function tF(i,e,t,n){const{layoutId:s,layout:r,drag:o,dragConstraints:c,layoutScroll:f,layoutRoot:p,layoutCrossfade:m}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:M2(i.parent)),i.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||c&&zd(c),visualElement:i,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:m,layoutScroll:f,layoutRoot:p})}function M2(i){if(i)return i.options.allowProjection!==!1?i.projection:M2(i.parent)}function nF({preloadedFeatures:i,createVisualElement:e,useRender:t,useVisualState:n,Component:s}){i&&XP(i);function r(c,f){let p;const m={...ee.useContext(oE),...c,layoutId:iF(c)},{isStatic:v}=m,y=WP(c),x=n(c,v);if(!v&&Lb){sF();const S=aF(m);p=S.MeasureLayout,y.visualElement=eF(s,x,m,e,S.ProjectionNode)}return pe.jsxs(Sx.Provider,{value:y,children:[p&&y.visualElement?pe.jsx(p,{visualElement:y.visualElement,...m}):null,t(s,c,QP(x,y.visualElement,f),x,v,y.visualElement)]})}r.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=ee.forwardRef(r);return o[ZP]=s,o}function iF({layoutId:i}){const e=ee.useContext(TB).id;return e&&i!==void 0?e+"-"+i:i}function sF(i,e){ee.useContext(y2).strict}function aF(i){const{drag:e,layout:t}=Zd;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(i)||t!=null&&t.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Fg={};function rF(i){for(const e in i)Fg[e]=i[e],Xb(e)&&(Fg[e].isCSSVariable=!0)}function b2(i,{layout:e,layoutId:t}){return vp.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!Fg[i]||i==="opacity")}const oF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lF=gp.length;function cF(i,e,t){let n="",s=!0;for(let r=0;r<lF;r++){const o=gp[r],c=i[o];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(o.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||t){const p=d2(c,iE[o]);if(!f){s=!1;const m=oF[o]||o;n+=`${m}(${p}) `}t&&(e[o]=p)}}return n=n.trim(),t?n=t(e,s?"":n):s&&(n="none"),n}function fE(i,e,t){const{style:n,vars:s,transformOrigin:r}=i;let o=!1,c=!1;for(const f in e){const p=e[f];if(vp.has(f)){o=!0;continue}else if(Xb(f)){s[f]=p;continue}else{const m=d2(p,iE[f]);f.startsWith("origin")?(c=!0,r[f]=m):n[f]=m}}if(e.transform||(o||t?n.transform=cF(e,i.transform,t):n.transform&&(n.transform="none")),c){const{originX:f="50%",originY:p="50%",originZ:m=0}=r;n.transformOrigin=`${f} ${p} ${m}`}}const hE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function E2(i,e,t){for(const n in e)!ia(e[n])&&!b2(n,t)&&(i[n]=e[n])}function uF({transformTemplate:i},e){return ee.useMemo(()=>{const t=hE();return fE(t,e,i),Object.assign({},t.vars,t.style)},[e])}function fF(i,e){const t=i.style||{},n={};return E2(n,t,i),Object.assign(n,uF(i,e)),n}function hF(i,e){const t={},n=fF(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=n,t}const dF={offset:"stroke-dashoffset",array:"stroke-dasharray"},pF={offset:"strokeDashoffset",array:"strokeDasharray"};function mF(i,e,t=1,n=0,s=!0){i.pathLength=1;const r=s?dF:pF;i[r.offset]=sn.transform(-n);const o=sn.transform(e),c=sn.transform(t);i[r.array]=`${o} ${c}`}function T2(i,{attrX:e,attrY:t,attrScale:n,pathLength:s,pathSpacing:r=1,pathOffset:o=0,...c},f,p,m){if(fE(i,c,p),f){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:v,style:y}=i;v.transform&&(y.transform=v.transform,delete v.transform),(y.transform||v.transformOrigin)&&(y.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),y.transform&&(y.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),n!==void 0&&(v.scale=n),s!==void 0&&mF(v,s,r,o,!1)}const C2=()=>({...hE(),attrs:{}}),R2=i=>typeof i=="string"&&i.toLowerCase()==="svg";function gF(i,e,t,n){const s=ee.useMemo(()=>{const r=C2();return T2(r,e,R2(n),i.transformTemplate,i.style),{...r.attrs,style:{...r.style}}},[e]);if(i.style){const r={};E2(r,i.style,i),s.style={...r,...s.style}}return s}const vF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dE(i){return typeof i!="string"||i.includes("-")?!1:!!(vF.indexOf(i)>-1||/[A-Z]/u.test(i))}function yF(i=!1){return(t,n,s,{latestValues:r},o)=>{const f=(dE(t)?gF:hF)(n,r,o,t),p=qP(n,typeof t=="string",i),m=t!==ee.Fragment?{...p,...f,ref:s}:{},{children:v}=n,y=ee.useMemo(()=>ia(v)?v.get():v,[v]);return ee.createElement(t,{...m,children:y})}}function qT(i){const e=[{},{}];return i==null||i.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function pE(i,e,t,n){if(typeof e=="function"){const[s,r]=qT(n);e=e(t!==void 0?t:i.custom,s,r)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[s,r]=qT(n);e=e(t!==void 0?t:i.custom,s,r)}return e}function o_(i){return ia(i)?i.get():i}function _F({scrapeMotionValuesFromProps:i,createRenderState:e},t,n,s){return{latestValues:xF(t,n,s,i),renderState:e()}}const w2=i=>(e,t)=>{const n=ee.useContext(Sx),s=ee.useContext(Ob),r=()=>_F(i,e,n,s);return t?r():Ax(r)};function xF(i,e,t,n){const s={},r=n(i,{});for(const y in r)s[y]=o_(r[y]);let{initial:o,animate:c}=i;const f=bx(i),p=x2(i);e&&p&&!f&&i.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let m=t?t.initial===!1:!1;m=m||o===!1;const v=m?c:o;if(v&&typeof v!="boolean"&&!Mx(v)){const y=Array.isArray(v)?v:[v];for(let x=0;x<y.length;x++){const S=pE(i,y[x]);if(S){const{transitionEnd:T,transition:E,...A}=S;for(const w in A){let B=A[w];if(Array.isArray(B)){const D=m?B.length-1:0;B=B[D]}B!==null&&(s[w]=B)}for(const w in T)s[w]=T[w]}}}return s}function mE(i,e,t){var r;const{style:n}=i,s={};for(const o in n)(ia(n[o])||e.style&&ia(e.style[o])||b2(o,i)||((r=t==null?void 0:t.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(s[o]=n[o]);return s}const AF={useVisualState:w2({scrapeMotionValuesFromProps:mE,createRenderState:hE})};function B2(i,e,t){const n=mE(i,e,t);for(const s in i)if(ia(i[s])||ia(e[s])){const r=gp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=i[s]}return n}const SF={useVisualState:w2({scrapeMotionValuesFromProps:B2,createRenderState:C2})};function MF(i,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...dE(n)?SF:AF,preloadedFeatures:i,useRender:yF(s),createVisualElement:e,Component:n};return nF(o)}}function Hg(i,e,t){const n=i.getProps();return pE(n,e,t!==void 0?t:n.custom,i)}const zM=i=>Array.isArray(i);function bF(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,xo(t))}function EF(i){return zM(i)?i[i.length-1]||0:i}function TF(i,e){const t=Hg(i,e);let{transitionEnd:n={},transition:s={},...r}=t||{};r={...r,...n};for(const o in r){const c=EF(r[o]);bF(i,o,c)}}function CF(i){return!!(ia(i)&&i.add)}function GM(i,e){const t=i.getValue("willChange");if(CF(t))return t.add(e);if(!t&&uc.WillChange){const n=new uc.WillChange("auto");i.addValue("willChange",n),n.add(e)}}function D2(i){return i.props[A2]}const RF=i=>i!==null;function wF(i,{repeat:e,repeatType:t="loop"},n){const s=i.filter(RF),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[r]}const BF={type:"spring",stiffness:500,damping:25,restSpeed:10},DF=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),UF={type:"keyframes",duration:.8},LF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},NF=(i,{keyframes:e})=>e.length>2?UF:vp.has(i)?i.startsWith("scale")?DF(e[1]):BF:LF;function OF({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:c,from:f,elapsed:p,...m}){return!!Object.keys(m).length}const gE=(i,e,t,n={},s,r)=>o=>{const c=nE(n,i)||{},f=c.delay||n.delay||0;let{elapsed:p=0}=n;p=p-fl(f);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-p,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:i,motionValue:e,element:r?void 0:s};OF(c)||Object.assign(m,NF(i,m)),m.duration&&(m.duration=fl(m.duration)),m.repeatDelay&&(m.repeatDelay=fl(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let v=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(v=!0)),(uc.instantAnimations||uc.skipAnimations)&&(v=!0,m.duration=0,m.delay=0),m.allowFlatten=!c.type&&!c.ease,v&&!r&&e.get()!==void 0){const y=wF(m.keyframes,c);if(y!==void 0){si.update(()=>{m.onUpdate(y),m.onComplete()});return}}return c.isSync?new $b(m):new yP(m)};function IF({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function U2(i,e,{delay:t=0,transitionOverride:n,type:s}={}){let{transition:r=i.getDefaultTransition(),transitionEnd:o,...c}=e;n&&(r=n);const f=[],p=s&&i.animationState&&i.animationState.getState()[s];for(const m in c){const v=i.getValue(m,i.latestValues[m]??null),y=c[m];if(y===void 0||p&&IF(p,m))continue;const x={delay:t,...nE(r||{},m)},S=v.get();if(S!==void 0&&!v.isAnimating&&!Array.isArray(y)&&y===S&&!x.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const A=D2(i);if(A){const w=window.MotionHandoffAnimation(A,m,si);w!==null&&(x.startTime=w,T=!0)}}GM(i,m),v.start(gE(m,v,y,i.shouldReduceMotion&&o2.has(m)?{type:!1}:x,i,T));const E=v.animation;E&&f.push(E)}return o&&Promise.all(f).then(()=>{si.update(()=>{o&&TF(i,o)})}),f}function VM(i,e,t={}){var f;const n=Hg(i,e,t.type==="exit"?(f=i.presenceContext)==null?void 0:f.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(s=t.transitionOverride);const r=n?()=>Promise.all(U2(i,n,t)):()=>Promise.resolve(),o=i.variantChildren&&i.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:v,staggerDirection:y}=s;return PF(i,e,m+p,v,y,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[p,m]=c==="beforeChildren"?[r,o]:[o,r];return p().then(()=>m())}else return Promise.all([r(),o(t.delay)])}function PF(i,e,t=0,n=0,s=1,r){const o=[],c=(i.variantChildren.size-1)*n,f=s===1?(p=0)=>p*n:(p=0)=>c-p*n;return Array.from(i.variantChildren).sort(FF).forEach((p,m)=>{p.notify("AnimationStart",e),o.push(VM(p,e,{...r,delay:t+f(m)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(o)}function FF(i,e){return i.sortNodePosition(e)}function HF(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(r=>VM(i,r,t));n=Promise.all(s)}else if(typeof e=="string")n=VM(i,e,t);else{const s=typeof e=="function"?Hg(i,e,t.custom):e;n=Promise.all(U2(i,s,t))}return n.then(()=>{i.notify("AnimationComplete",e)})}function L2(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}const zF=cE.length;function N2(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?N2(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<zF;t++){const n=cE[t],s=i.props[n];(Pg(s)||s===!1)&&(e[n]=s)}return e}const GF=[...lE].reverse(),VF=lE.length;function kF(i){return e=>Promise.all(e.map(({animation:t,options:n})=>HF(i,t,n)))}function XF(i){let e=kF(i),t=JT(),n=!0;const s=f=>(p,m)=>{var y;const v=Hg(i,m,f==="exit"?(y=i.presenceContext)==null?void 0:y.custom:void 0);if(v){const{transition:x,transitionEnd:S,...T}=v;p={...p,...T,...S}}return p};function r(f){e=f(i)}function o(f){const{props:p}=i,m=N2(i.parent)||{},v=[],y=new Set;let x={},S=1/0;for(let E=0;E<VF;E++){const A=GF[E],w=t[A],B=p[A]!==void 0?p[A]:m[A],D=Pg(B),O=A===f?w.isActive:null;O===!1&&(S=E);let I=B===m[A]&&B!==p[A]&&D;if(I&&n&&i.manuallyAnimateOnMount&&(I=!1),w.protectedKeys={...x},!w.isActive&&O===null||!B&&!w.prevProp||Mx(B)||typeof B=="boolean")continue;const z=jF(w.prevProp,B);let P=z||A===f&&w.isActive&&!I&&D||E>S&&D,L=!1;const N=Array.isArray(B)?B:[B];let j=N.reduce(s(A),{});O===!1&&(j={});const{prevResolvedValues:ce={}}=w,ne={...ce,...j},fe=W=>{P=!0,y.has(W)&&(L=!0,y.delete(W)),w.needsAnimating[W]=!0;const Q=i.getValue(W);Q&&(Q.liveStyle=!1)};for(const W in ne){const Q=j[W],ve=ce[W];if(x.hasOwnProperty(W))continue;let X=!1;zM(Q)&&zM(ve)?X=!L2(Q,ve):X=Q!==ve,X?Q!=null?fe(W):y.add(W):Q!==void 0&&y.has(W)?fe(W):w.protectedKeys[W]=!0}w.prevProp=B,w.prevResolvedValues=j,w.isActive&&(x={...x,...j}),n&&i.blockInitialAnimation&&(P=!1),P&&(!(I&&z)||L)&&v.push(...N.map(W=>({animation:W,options:{type:A}})))}if(y.size){const E={};if(typeof p.initial!="boolean"){const A=Hg(i,Array.isArray(p.initial)?p.initial[0]:p.initial);A&&A.transition&&(E.transition=A.transition)}y.forEach(A=>{const w=i.getBaseTarget(A),B=i.getValue(A);B&&(B.liveStyle=!0),E[A]=w??null}),v.push({animation:E})}let T=!!v.length;return n&&(p.initial===!1||p.initial===p.animate)&&!i.manuallyAnimateOnMount&&(T=!1),n=!1,T?e(v):Promise.resolve()}function c(f,p){var v;if(t[f].isActive===p)return Promise.resolve();(v=i.variantChildren)==null||v.forEach(y=>{var x;return(x=y.animationState)==null?void 0:x.setActive(f,p)}),t[f].isActive=p;const m=o(f);for(const y in t)t[y].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:r,getState:()=>t,reset:()=>{t=JT(),n=!0}}}function jF(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!L2(e,i):!1}function Sf(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function JT(){return{animate:Sf(!0),whileInView:Sf(),whileHover:Sf(),whileTap:Sf(),whileDrag:Sf(),whileFocus:Sf(),exit:Sf()}}class Eu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class YF extends Eu{constructor(e){super(e),e.animationState||(e.animationState=XF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let qF=0;class JF extends Eu{constructor(){super(...arguments),this.id=qF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const KF={animation:{Feature:YF},exit:{Feature:JF}};function zg(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}function rv(i){return{point:{x:i.pageX,y:i.pageY}}}const WF=i=>e=>aE(e)&&i(e,rv(e));function mg(i,e,t,n){return zg(i,e,WF(t),n)}function O2({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function ZF({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function QF(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}const I2=1e-4,$F=1-I2,eH=1+I2,P2=.01,tH=0-P2,nH=0+P2;function ba(i){return i.max-i.min}function iH(i,e,t){return Math.abs(i-e)<=t}function KT(i,e,t,n=.5){i.origin=n,i.originPoint=Ni(e.min,e.max,i.origin),i.scale=ba(t)/ba(e),i.translate=Ni(t.min,t.max,i.origin)-i.originPoint,(i.scale>=$F&&i.scale<=eH||isNaN(i.scale))&&(i.scale=1),(i.translate>=tH&&i.translate<=nH||isNaN(i.translate))&&(i.translate=0)}function gg(i,e,t,n){KT(i.x,e.x,t.x,n?n.originX:void 0),KT(i.y,e.y,t.y,n?n.originY:void 0)}function WT(i,e,t){i.min=t.min+e.min,i.max=i.min+ba(e)}function sH(i,e,t){WT(i.x,e.x,t.x),WT(i.y,e.y,t.y)}function ZT(i,e,t){i.min=e.min-t.min,i.max=i.min+ba(e)}function vg(i,e,t){ZT(i.x,e.x,t.x),ZT(i.y,e.y,t.y)}const QT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gd=()=>({x:QT(),y:QT()}),$T=()=>({min:0,max:0}),Ki=()=>({x:$T(),y:$T()});function Ur(i){return[i("x"),i("y")]}function iS(i){return i===void 0||i===1}function kM({scale:i,scaleX:e,scaleY:t}){return!iS(i)||!iS(e)||!iS(t)}function Pf(i){return kM(i)||F2(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function F2(i){return eC(i.x)||eC(i.y)}function eC(i){return i&&i!=="0%"}function b_(i,e,t){const n=i-t,s=e*n;return t+s}function tC(i,e,t,n,s){return s!==void 0&&(i=b_(i,s,n)),b_(i,t,n)+e}function XM(i,e=0,t=1,n,s){i.min=tC(i.min,e,t,n,s),i.max=tC(i.max,e,t,n,s)}function H2(i,{x:e,y:t}){XM(i.x,e.translate,e.scale,e.originPoint),XM(i.y,t.translate,t.scale,t.originPoint)}const nC=.999999999999,iC=1.0000000000001;function aH(i,e,t,n=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,o;for(let c=0;c<s;c++){r=t[c],o=r.projectionDelta;const{visualElement:f}=r.options;f&&f.props.style&&f.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&kd(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,H2(i,o)),n&&Pf(r.latestValues)&&kd(i,r.latestValues))}e.x<iC&&e.x>nC&&(e.x=1),e.y<iC&&e.y>nC&&(e.y=1)}function Vd(i,e){i.min=i.min+e,i.max=i.max+e}function sC(i,e,t,n,s=.5){const r=Ni(i.min,i.max,s);XM(i,e,t,r,n)}function kd(i,e){sC(i.x,e.x,e.scaleX,e.scale,e.originX),sC(i.y,e.y,e.scaleY,e.scale,e.originY)}function z2(i,e){return O2(QF(i.getBoundingClientRect(),e))}function rH(i,e,t){const n=z2(i,t),{scroll:s}=e;return s&&(Vd(n.x,s.offset.x),Vd(n.y,s.offset.y)),n}const G2=({current:i})=>i?i.ownerDocument.defaultView:null,aC=(i,e)=>Math.abs(i-e);function oH(i,e){const t=aC(i.x,e.x),n=aC(i.y,e.y);return Math.sqrt(t**2+n**2)}class V2{constructor(e,t,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=aS(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=oH(v.offset,{x:0,y:0})>=3;if(!y&&!x)return;const{point:S}=v,{timestamp:T}=bs;this.history.push({...S,timestamp:T});const{onStart:E,onMove:A}=this.handlers;y||(E&&E(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=sS(y,this.transformPagePoint),si.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=aS(v.type==="pointercancel"?this.lastMoveEventInfo:sS(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,E),S&&S(v,E)},!aE(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=s||window;const o=rv(e),c=sS(o,this.transformPagePoint),{point:f}=c,{timestamp:p}=bs;this.history=[{...f,timestamp:p}];const{onSessionStart:m}=t;m&&m(e,aS(c,this.history)),this.removeListeners=iv(mg(this.contextWindow,"pointermove",this.handlePointerMove),mg(this.contextWindow,"pointerup",this.handlePointerUp),mg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),bo(this.updatePoint)}}function sS(i,e){return e?{point:e(i.point)}:i}function rC(i,e){return{x:i.x-e.x,y:i.y-e.y}}function aS({point:i},e){return{point:i,delta:rC(i,k2(e)),offset:rC(i,lH(e)),velocity:cH(e,.1)}}function lH(i){return i[0]}function k2(i){return i[i.length-1]}function cH(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const s=k2(i);for(;t>=0&&(n=i[t],!(s.timestamp-n.timestamp>fl(e)));)t--;if(!n)return{x:0,y:0};const r=hl(s.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-n.x)/r,y:(s.y-n.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function uH(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?Ni(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?Ni(t,i,n.max):Math.min(i,t)),i}function oC(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function fH(i,{top:e,left:t,bottom:n,right:s}){return{x:oC(i.x,t,s),y:oC(i.y,e,n)}}function lC(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function hH(i,e){return{x:lC(i.x,e.x),y:lC(i.y,e.y)}}function dH(i,e){let t=.5;const n=ba(i),s=ba(e);return s>n?t=Wd(e.min,e.max-n,i.min):n>s&&(t=Wd(i.min,i.max-s,e.min)),vl(0,1,t)}function pH(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const jM=.35;function mH(i=jM){return i===!1?i=0:i===!0&&(i=jM),{x:cC(i,"left","right"),y:cC(i,"top","bottom")}}function cC(i,e,t){return{min:uC(i,e),max:uC(i,t)}}function uC(i,e){return typeof i=="number"?i:i[e]||0}const gH=new WeakMap;class vH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ki(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=m=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(rv(m).point)},r=(m,v)=>{const{drag:y,dragPropagation:x,onDragStart:S}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LP(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ur(E=>{let A=this.getAxisMotionValue(E).get()||0;if(dl.test(A)){const{projection:w}=this.visualElement;if(w&&w.layout){const B=w.layout.layoutBox[E];B&&(A=ba(B)*(parseFloat(A)/100))}}this.originPoint[E]=A}),S&&si.postRender(()=>S(m,v)),GM(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},o=(m,v)=>{const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:S,onDrag:T}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:E}=v;if(x&&this.currentDirection===null){this.currentDirection=yH(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,E),this.updateAxis("y",v.point,E),this.visualElement.render(),T&&T(m,v)},c=(m,v)=>this.stop(m,v),f=()=>Ur(m=>{var v;return this.getAnimationState(m)==="paused"&&((v=this.getAxisMotionValue(m).animation)==null?void 0:v.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new V2(e,{onSessionStart:s,onStart:r,onMove:o,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:G2(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&si.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!ny(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=uH(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;e&&zd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=fH(n.layoutBox,e):this.constraints=!1,this.elastic=mH(t),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ur(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=pH(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!zd(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=rH(n,s.root,this.visualElement.getTransformPagePoint());let o=hH(s.layout.layoutBox,r);if(t){const c=t(ZF(o));this.hasMutatedConstraints=!!c,c&&(o=O2(c))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},p=Ur(m=>{if(!ny(m,t,this.currentDirection))return;let v=f&&f[m]||{};o&&(v={min:0,max:0});const y=s?200:1e6,x=s?40:1e7,S={type:"inertia",velocity:n?e[m]:0,bounceStiffness:y,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...r,...v};return this.startAxisValueAnimation(m,S)});return Promise.all(p).then(c)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return GM(this.visualElement,e),n.start(gE(e,n,0,t,this.visualElement,!1))}stopAnimation(){Ur(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ur(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ur(t=>{const{drag:n}=this.getProps();if(!ny(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:o,max:c}=s.layout.layoutBox[t];r.set(e[t]-Ni(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!zd(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ur(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const f=c.get();s[o]=dH({min:f,max:f},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ur(o=>{if(!ny(o,e,null))return;const c=this.getAxisMotionValue(o),{min:f,max:p}=this.constraints[o];c.set(Ni(f,p,s[o]))})}addListeners(){if(!this.visualElement.current)return;gH.set(this.visualElement,this);const e=this.visualElement.current,t=mg(e,"pointerdown",f=>{const{drag:p,dragListener:m=!0}=this.getProps();p&&m&&this.start(f)}),n=()=>{const{dragConstraints:f}=this.getProps();zd(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),si.read(n);const o=zg(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ur(m=>{const v=this.getAxisMotionValue(m);v&&(this.originPoint[m]+=f[m].translate,v.set(v.get()+f[m].translate))}),this.visualElement.render())});return()=>{o(),t(),r(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=jM,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:c}}}function ny(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function yH(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class _H extends Eu{constructor(e){super(e),this.removeGroupControls=ja,this.removeListeners=ja,this.controls=new vH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ja}unmount(){this.removeGroupControls(),this.removeListeners()}}const fC=i=>(e,t)=>{i&&si.postRender(()=>i(e,t))};class xH extends Eu{constructor(){super(...arguments),this.removePointerDownListener=ja}onPointerDown(e){this.session=new V2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:G2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:fC(e),onStart:fC(t),onMove:n,onEnd:(r,o)=>{delete this.session,s&&si.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=mg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const l_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hC(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const Gm={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(sn.test(i))i=parseFloat(i);else return i;const t=hC(i,e.target.x),n=hC(i,e.target.y);return`${t}% ${n}%`}},AH={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,s=xu.parse(i);if(s.length>5)return n;const r=xu.createTransformer(i),o=typeof s[0]!="number"?1:0,c=t.x.scale*e.x,f=t.y.scale*e.y;s[0+o]/=c,s[1+o]/=f;const p=Ni(c,f,.5);return typeof s[2+o]=="number"&&(s[2+o]/=p),typeof s[3+o]=="number"&&(s[3+o]/=p),r(s)}};class SH extends ee.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=e;rF(MH),r&&(t.group&&t.group.add(r),n&&n.register&&s&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),l_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:r}=this.props,{projection:o}=n;return o&&(o.isPresent=r,s||e.layoutDependency!==t||t===void 0||e.isPresent!==r?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||si.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),sE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function X2(i){const[e,t]=kP(),n=ee.useContext(TB);return pe.jsx(SH,{...i,layoutGroup:n,switchLayoutGroup:ee.useContext(S2),isPresent:e,safeToRemove:t})}const MH={borderRadius:{...Gm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gm,borderTopRightRadius:Gm,borderBottomLeftRadius:Gm,borderBottomRightRadius:Gm,boxShadow:AH};function bH(i,e,t){const n=ia(i)?i:xo(i);return n.start(gE("",n,e,t)),n.animation}const EH=(i,e)=>i.depth-e.depth;class TH{constructor(){this.children=[],this.isDirty=!1}add(e){Ib(this.children,e),this.isDirty=!0}remove(e){Pb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(EH),this.isDirty=!1,this.children.forEach(e)}}function CH(i,e){const t=ka.now(),n=({timestamp:s})=>{const r=s-t;r>=e&&(bo(n),i(r-e))};return si.setup(n,!0),()=>bo(n)}const j2=["TopLeft","TopRight","BottomLeft","BottomRight"],RH=j2.length,dC=i=>typeof i=="string"?parseFloat(i):i,pC=i=>typeof i=="number"||sn.test(i);function wH(i,e,t,n,s,r){s?(i.opacity=Ni(0,t.opacity??1,BH(n)),i.opacityExit=Ni(e.opacity??1,0,DH(n))):r&&(i.opacity=Ni(e.opacity??1,t.opacity??1,n));for(let o=0;o<RH;o++){const c=`border${j2[o]}Radius`;let f=mC(e,c),p=mC(t,c);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||pC(f)===pC(p)?(i[c]=Math.max(Ni(dC(f),dC(p),n),0),(dl.test(p)||dl.test(f))&&(i[c]+="%")):i[c]=p}(e.rotate||t.rotate)&&(i.rotate=Ni(e.rotate||0,t.rotate||0,n))}function mC(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const BH=Y2(0,.5,IB),DH=Y2(.5,.95,ja);function Y2(i,e,t){return n=>n<i?0:n>e?1:t(Wd(i,e,n))}function gC(i,e){i.min=e.min,i.max=e.max}function Br(i,e){gC(i.x,e.x),gC(i.y,e.y)}function vC(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function yC(i,e,t,n,s){return i-=e,i=b_(i,1/t,n),s!==void 0&&(i=b_(i,1/s,n)),i}function UH(i,e=0,t=1,n=.5,s,r=i,o=i){if(dl.test(e)&&(e=parseFloat(e),e=Ni(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=Ni(r.min,r.max,n);i===r&&(c-=e),i.min=yC(i.min,e,t,c,s),i.max=yC(i.max,e,t,c,s)}function _C(i,e,[t,n,s],r,o){UH(i,e[t],e[n],e[s],e.scale,r,o)}const LH=["x","scaleX","originX"],NH=["y","scaleY","originY"];function xC(i,e,t,n){_C(i.x,e,LH,t?t.x:void 0,n?n.x:void 0),_C(i.y,e,NH,t?t.y:void 0,n?n.y:void 0)}function AC(i){return i.translate===0&&i.scale===1}function q2(i){return AC(i.x)&&AC(i.y)}function SC(i,e){return i.min===e.min&&i.max===e.max}function OH(i,e){return SC(i.x,e.x)&&SC(i.y,e.y)}function MC(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function J2(i,e){return MC(i.x,e.x)&&MC(i.y,e.y)}function bC(i){return ba(i.x)/ba(i.y)}function EC(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class IH{constructor(){this.members=[]}add(e){Ib(this.members,e),e.scheduleRender()}remove(e){if(Pb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let n;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function PH(i,e,t){let n="";const s=i.x.translate/e.x,r=i.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((s||r||o)&&(n=`translate3d(${s}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:m,rotateX:v,rotateY:y,skewX:x,skewY:S}=t;p&&(n=`perspective(${p}px) ${n}`),m&&(n+=`rotate(${m}deg) `),v&&(n+=`rotateX(${v}deg) `),y&&(n+=`rotateY(${y}deg) `),x&&(n+=`skewX(${x}deg) `),S&&(n+=`skewY(${S}deg) `)}const c=i.x.scale*e.x,f=i.y.scale*e.y;return(c!==1||f!==1)&&(n+=`scale(${c}, ${f})`),n||"none"}const rS=["","X","Y","Z"],FH={visibility:"hidden"},HH=1e3;let zH=0;function oS(i,e,t,n){const{latestValues:s}=e;s[i]&&(t[i]=s[i],e.setStaticValue(i,0),n&&(n[i]=0))}function K2(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=D2(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",si,!(s||r))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&K2(n)}function W2({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},c=e==null?void 0:e()){this.id=zH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(kH),this.nodes.forEach(JH),this.nodes.forEach(KH),this.nodes.forEach(XH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new TH)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zb),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const f=this.eventHandlers.get(o);f&&f.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=rE(o)&&!HP(o),this.instance=o;const{layoutId:c,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),i){let m;const v=()=>this.root.updateBlockedByResize=!1;i(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=CH(v,250),l_.hasAnimatedSinceResize&&(l_.hasAnimatedSinceResize=!1,this.nodes.forEach(CC))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v,hasRelativeLayoutChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||p.getDefaultTransition()||ez,{onLayoutAnimationStart:T,onLayoutAnimationComplete:E}=p.getProps(),A=!this.targetLayout||!J2(this.targetLayout,x),w=!v&&y;if(this.options.layoutRoot||this.resumeFrom||w||v&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,w);const B={...nE(S,"layout"),onPlay:T,onComplete:E};(p.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||CC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&K2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const v=this.path[m];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TC);return}this.isUpdating||this.nodes.forEach(YH),this.isUpdating=!1,this.nodes.forEach(qH),this.nodes.forEach(GH),this.nodes.forEach(VH),this.clearAllSnapshots();const c=ka.now();bs.delta=vl(0,1e3/60,c-bs.timestamp),bs.timestamp=c,bs.isProcessing=!0,QA.update.process(bs),QA.preRender.process(bs),QA.render.process(bs),bs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jH),this.sharedNodes.forEach(ZH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,si.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){si.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ba(this.snapshot.measuredBox.x)&&!ba(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ki(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const f=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!q2(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,m=p!==this.prevTransformTemplateValue;o&&this.instance&&(c||Pf(this.latestValues)||m)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return o&&(f=this.removeTransform(f)),tz(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:o}=this.options;if(!o)return Ki();const c=o.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(nz))){const{scroll:m}=this.root;m&&(Vd(c.x,m.offset.x),Vd(c.y,m.offset.y))}return c}removeElementScroll(o){var f;const c=Ki();if(Br(c,o),(f=this.scroll)!=null&&f.wasRoot)return c;for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:v,options:y}=m;m!==this.root&&v&&y.layoutScroll&&(v.wasRoot&&Br(c,o),Vd(c.x,v.offset.x),Vd(c.y,v.offset.y))}return c}applyTransform(o,c=!1){const f=Ki();Br(f,o);for(let p=0;p<this.path.length;p++){const m=this.path[p];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&kd(f,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Pf(m.latestValues)&&kd(f,m.latestValues)}return Pf(this.latestValues)&&kd(f,this.latestValues),f}removeTransform(o){const c=Ki();Br(c,o);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!Pf(p.latestValues))continue;kM(p.latestValues)&&p.updateSnapshot();const m=Ki(),v=p.measurePageBox();Br(m,v),xC(c,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,m)}return Pf(this.latestValues)&&xC(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var y;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(o||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:v}=this.options;if(!(!this.layout||!(m||v))){if(this.resolvedRelativeTargetAt=bs.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ki(),this.relativeTargetOrigin=Ki(),vg(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ki(),this.targetWithTransforms=Ki()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Br(this.target,this.layout.layoutBox),H2(this.target,this.targetDelta)):Br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ki(),this.relativeTargetOrigin=Ki(),vg(this.relativeTargetOrigin,this.target,x.target),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||kM(this.parent.latestValues)||F2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var S;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let f=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===bs.timestamp&&(f=!1),f)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;Br(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,y=this.treeScale.y;aH(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ki());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vC(this.prevProjectionDelta.x,this.projectionDelta.x),vC(this.prevProjectionDelta.y,this.projectionDelta.y)),gg(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==y||!EC(this.projectionDelta.x,this.prevProjectionDelta.x)||!EC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gd(),this.projectionDelta=Gd(),this.projectionDeltaWithTransform=Gd()}setAnimationOrigin(o,c=!1){const f=this.snapshot,p=f?f.latestValues:{},m={...this.latestValues},v=Gd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=Ki(),x=f?f.source:void 0,S=this.layout?this.layout.source:void 0,T=x!==S,E=this.getStack(),A=!E||E.members.length<=1,w=!!(T&&!A&&this.options.crossfade===!0&&!this.path.some($H));this.animationProgress=0;let B;this.mixTargetDelta=D=>{const O=D/1e3;RC(v.x,o.x,O),RC(v.y,o.y,O),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vg(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QH(this.relativeTarget,this.relativeTargetOrigin,y,O),B&&OH(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=Ki()),Br(B,this.relativeTarget)),T&&(this.animationValues=m,wH(m,p,this.latestValues,O,w,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,f,p;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(!1),(p=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||p.stop(!1),this.pendingAnimation&&(bo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=si.update(()=>{l_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xo(0)),this.currentAnimation=bH(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),o.onUpdate&&o.onUpdate(m)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HH),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:f,layout:p,latestValues:m}=o;if(!(!c||!f||!p)){if(this!==o&&this.layout&&p&&Z2(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||Ki();const v=ba(this.layout.layoutBox.x);f.x.min=o.target.x.min,f.x.max=f.x.min+v;const y=ba(this.layout.layoutBox.y);f.y.min=o.target.y.min,f.y.max=f.y.min+y}Br(c,f),kd(c,m),gg(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new IH),this.sharedNodes.get(o).add(c);const p=c.options.initialPromotionConfig;c.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:f}=o;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const p={};f.z&&oS("z",o,p,this.animationValues);for(let m=0;m<rS.length;m++)oS(`rotate${rS[m]}`,o,p,this.animationValues),oS(`skew${rS[m]}`,o,p,this.animationValues);o.render();for(const m in p)o.setStaticValue(m,p[m]),this.animationValues&&(this.animationValues[m]=p[m]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return FH;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=o_(o==null?void 0:o.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=o_(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Pf(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=PH(this.projectionDeltaWithTransform,this.treeScale,m),f&&(c.transform=f(m,c.transform));const{x:v,y}=this.projectionDelta;c.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,p.animationValues?c.opacity=p===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in Fg){if(m[x]===void 0)continue;const{correct:S,applyTo:T,isCSSVariable:E}=Fg[x],A=c.transform==="none"?m[x]:S(m[x],p);if(T){const w=T.length;for(let B=0;B<w;B++)c[T[B]]=A}else E?this.options.visualElement.renderState.vars[x]=A:c[x]=A}return this.options.layoutId&&(c.pointerEvents=p===this?o_(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop(!1)}),this.root.nodes.forEach(TC),this.root.sharedNodes.clear()}}}function GH(i){i.updateLayout()}function VH(i){var t;const e=((t=i.resumeFrom)==null?void 0:t.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&e&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=i.layout,{animationType:r}=i.options,o=e.source!==i.layout.source;r==="size"?Ur(v=>{const y=o?e.measuredBox[v]:e.layoutBox[v],x=ba(y);y.min=n[v].min,y.max=y.min+x}):Z2(r,e.layoutBox,n)&&Ur(v=>{const y=o?e.measuredBox[v]:e.layoutBox[v],x=ba(n[v]);y.max=y.min+x,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[v].max=i.relativeTarget[v].min+x)});const c=Gd();gg(c,n,e.layoutBox);const f=Gd();o?gg(f,i.applyTransform(s,!0),e.measuredBox):gg(f,n,e.layoutBox);const p=!q2(c);let m=!1;if(!i.resumeFrom){const v=i.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:y,layout:x}=v;if(y&&x){const S=Ki();vg(S,e.layoutBox,y.layoutBox);const T=Ki();vg(T,n,x.layoutBox),J2(S,T)||(m=!0),v.options.layoutRoot&&(i.relativeTarget=T,i.relativeTargetOrigin=S,i.relativeParent=v)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:f,layoutDelta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:m})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function kH(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function XH(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function jH(i){i.clearSnapshot()}function TC(i){i.clearMeasurements()}function YH(i){i.isLayoutDirty=!1}function qH(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function CC(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function JH(i){i.resolveTargetDelta()}function KH(i){i.calcProjection()}function WH(i){i.resetSkewAndRotation()}function ZH(i){i.removeLeadSnapshot()}function RC(i,e,t){i.translate=Ni(e.translate,0,t),i.scale=Ni(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function wC(i,e,t,n){i.min=Ni(e.min,t.min,n),i.max=Ni(e.max,t.max,n)}function QH(i,e,t,n){wC(i.x,e.x,t.x,n),wC(i.y,e.y,t.y,n)}function $H(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const ez={duration:.45,ease:[.4,0,.1,1]},BC=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),DC=BC("applewebkit/")&&!BC("chrome/")?Math.round:ja;function UC(i){i.min=DC(i.min),i.max=DC(i.max)}function tz(i){UC(i.x),UC(i.y)}function Z2(i,e,t){return i==="position"||i==="preserve-aspect"&&!iH(bC(e),bC(t),.2)}function nz(i){var e;return i!==i.root&&((e=i.scroll)==null?void 0:e.wasRoot)}const iz=W2({attachResizeListener:(i,e)=>zg(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lS={current:void 0},Q2=W2({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!lS.current){const i=new iz({});i.mount(window),i.setOptions({layoutScroll:!0}),lS.current=i}return lS.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),sz={pan:{Feature:xH},drag:{Feature:_H,ProjectionNode:Q2,MeasureLayout:X2}};function LC(i,e,t){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=n[s];r&&si.postRender(()=>r(e,rv(e)))}class az extends Eu{mount(){const{current:e}=this.node;e&&(this.unmount=NP(e,(t,n)=>(LC(this.node,n,"Start"),s=>LC(this.node,s,"End"))))}unmount(){}}class rz extends Eu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=iv(zg(this.node.current,"focus",()=>this.onFocus()),zg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NC(i,e,t){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=n[s];r&&si.postRender(()=>r(e,rv(e)))}class oz extends Eu{mount(){const{current:e}=this.node;e&&(this.unmount=FP(e,(t,n)=>(NC(this.node,n,"Start"),(s,{success:r})=>NC(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const YM=new WeakMap,cS=new WeakMap,lz=i=>{const e=YM.get(i.target);e&&e(i)},cz=i=>{i.forEach(lz)};function uz({root:i,...e}){const t=i||document;cS.has(t)||cS.set(t,{});const n=cS.get(t),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(cz,{root:i,...e})),n[s]}function fz(i,e,t){const n=uz(e);return YM.set(i,t),n.observe(i),()=>{YM.delete(i),n.unobserve(i)}}const hz={some:0,all:1};class dz extends Eu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:hz[s]},c=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,r&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:m,onViewportLeave:v}=this.node.getProps(),y=p?m:v;y&&y(f)};return fz(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(pz(e,t))&&this.startObserver()}unmount(){}}function pz({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const mz={inView:{Feature:dz},tap:{Feature:oz},focus:{Feature:rz},hover:{Feature:az}},gz={layout:{ProjectionNode:Q2,MeasureLayout:X2}},qM={current:null},$2={current:!1};function vz(){if($2.current=!0,!!Lb)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>qM.current=i.matches;i.addListener(e),e()}else qM.current=!1}const yz=new WeakMap;function _z(i,e,t){for(const n in e){const s=e[n],r=t[n];if(ia(s))i.addValue(n,s);else if(ia(r))i.addValue(n,xo(s,{owner:i}));else if(r!==s)if(i.hasValue(n)){const o=i.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=i.getStaticValue(n);i.addValue(n,xo(o!==void 0?o:s,{owner:i}))}}for(const n in t)e[n]===void 0&&i.removeValue(n);return e}const OC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xz{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=ka.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,si.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=o;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=bx(t),this.isVariantNode=x2(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in v){const x=v[y];f[y]!==void 0&&ia(x)&&x.set(f[y],!1)}}mount(e){this.current=e,yz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),$2.current||vz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),bo(this.notifyUpdate),bo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=vp.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&si.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zd){const t=Zd[e];if(!t)continue;const{isEnabled:n,Feature:s}=t;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ki()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<OC.length;n++){const s=OC[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=e[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=_z(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=xo(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(CB(n)||wB(n))?n=parseFloat(n):!VP(n)&&xu.test(t)&&(n=f2(e,t)),this.setBaseTarget(e,ia(n)?n.get():n)),ia(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var r;const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const o=pE(this.props,t,(r=this.presenceContext)==null?void 0:r.custom);o&&(n=o[e])}if(t&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ia(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new zb),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class eD extends xz{constructor(){super(...arguments),this.KeyframeResolver=BP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ia(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function tD(i,{style:e,vars:t},n,s){Object.assign(i.style,e,s&&s.getProjectionStyles(n));for(const r in t)i.style.setProperty(r,t[r])}function Az(i){return window.getComputedStyle(i)}class Sz extends eD{constructor(){super(...arguments),this.type="html",this.renderInstance=tD}readValueFromInstance(e,t){var n;if(vp.has(t))return(n=this.projection)!=null&&n.isProjecting?NM(t):WI(e,t);{const s=Az(e),r=(Xb(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return z2(e,t)}build(e,t,n){fE(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return mE(e,t,n)}}const nD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Mz(i,e,t,n){tD(i,e,void 0,n);for(const s in e.attrs)i.setAttribute(nD.has(s)?s:uE(s),e.attrs[s])}class bz extends eD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ki}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(vp.has(t)){const n=u2(t);return n&&n.default||0}return t=nD.has(t)?t:uE(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return B2(e,t,n)}build(e,t,n){T2(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,s){Mz(e,t,n,s)}mount(e){this.isSVGTag=R2(e.tagName),super.mount(e)}}const Ez=(i,e)=>dE(i)?new bz(e):new Sz(e,{allowProjection:i!==ee.Fragment}),Tz=MF({...KF,...mz,...sz,...gz},Ez),Qd=JP(Tz);function Ex(i,e,t){ee.useInsertionEffect(()=>i.on(e,t),[i,e,t])}const c_=new WeakMap;let mu;function Cz(i,e){if(e){const{inlineSize:t,blockSize:n}=e[0];return{width:t,height:n}}else return rE(i)&&"getBBox"in i?i.getBBox():{width:i.offsetWidth,height:i.offsetHeight}}function Rz({target:i,contentRect:e,borderBoxSize:t}){var n;(n=c_.get(i))==null||n.forEach(s=>{s({target:i,contentSize:e,get size(){return Cz(i,t)}})})}function wz(i){i.forEach(Rz)}function Bz(){typeof ResizeObserver>"u"||(mu=new ResizeObserver(wz))}function Dz(i,e){mu||Bz();const t=h2(i);return t.forEach(n=>{let s=c_.get(n);s||(s=new Set,c_.set(n,s)),s.add(e),mu==null||mu.observe(n)}),()=>{t.forEach(n=>{const s=c_.get(n);s==null||s.delete(e),s!=null&&s.size||mu==null||mu.unobserve(n)})}}const u_=new Set;let yg;function Uz(){yg=()=>{const i={width:window.innerWidth,height:window.innerHeight},e={target:window,size:i,contentSize:i};u_.forEach(t=>t(e))},window.addEventListener("resize",yg)}function Lz(i){return u_.add(i),yg||Uz(),()=>{u_.delete(i),!u_.size&&yg&&(yg=void 0)}}function Nz(i,e){return typeof i=="function"?Lz(i):Dz(i,e)}const Oz=50,IC=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Iz=()=>({time:0,x:IC(),y:IC()}),Pz={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function PC(i,e,t,n){const s=t[e],{length:r,position:o}=Pz[e],c=s.current,f=t.time;s.current=i[`scroll${o}`],s.scrollLength=i[`scroll${r}`]-i[`client${r}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=Wd(0,s.scrollLength,s.current);const p=n-f;s.velocity=p>Oz?0:Gb(s.current-c,p)}function Fz(i,e,t){PC(i,"x",e,t),PC(i,"y",e,t),e.time=t}function Hz(i,e){const t={x:0,y:0};let n=i;for(;n&&n!==e;)if(tE(n))t.x+=n.offsetLeft,t.y+=n.offsetTop,n=n.offsetParent;else if(n.tagName==="svg"){const s=n.getBoundingClientRect();n=n.parentElement;const r=n.getBoundingClientRect();t.x+=s.left-r.left,t.y+=s.top-r.top}else if(n instanceof SVGGraphicsElement){const{x:s,y:r}=n.getBBox();t.x+=s,t.y+=r;let o=null,c=n.parentNode;for(;!o;)c.tagName==="svg"&&(o=c),c=n.parentNode;n=o}else break;return t}const JM={start:0,center:.5,end:1};function FC(i,e,t=0){let n=0;if(i in JM&&(i=JM[i]),typeof i=="string"){const s=parseFloat(i);i.endsWith("px")?n=s:i.endsWith("%")?i=s/100:i.endsWith("vw")?n=s/100*document.documentElement.clientWidth:i.endsWith("vh")?n=s/100*document.documentElement.clientHeight:i=s}return typeof i=="number"&&(n=e*i),t+n}const zz=[0,0];function Gz(i,e,t,n){let s=Array.isArray(i)?i:zz,r=0,o=0;return typeof i=="number"?s=[i,i]:typeof i=="string"&&(i=i.trim(),i.includes(" ")?s=i.split(" "):s=[i,JM[i]?i:"0"]),r=FC(s[0],t,n),o=FC(s[1],e),r-o}const Vz={All:[[0,0],[1,1]]},kz={x:0,y:0};function Xz(i){return"getBBox"in i&&i.tagName!=="svg"?i.getBBox():{width:i.clientWidth,height:i.clientHeight}}function jz(i,e,t){const{offset:n=Vz.All}=t,{target:s=i,axis:r="y"}=t,o=r==="y"?"height":"width",c=s!==i?Hz(s,i):kz,f=s===i?{width:i.scrollWidth,height:i.scrollHeight}:Xz(s),p={width:i.clientWidth,height:i.clientHeight};e[r].offset.length=0;let m=!e[r].interpolate;const v=n.length;for(let y=0;y<v;y++){const x=Gz(n[y],p[o],f[o],c[r]);!m&&x!==e[r].interpolatorOffsets[y]&&(m=!0),e[r].offset[y]=x}m&&(e[r].interpolate=Wb(e[r].offset,ZB(n),{clamp:!1}),e[r].interpolatorOffsets=[...e[r].offset]),e[r].progress=vl(0,1,e[r].interpolate(e[r].current))}function Yz(i,e=i,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==i){let n=e;for(;n&&n!==i;)t.x.targetOffset+=n.offsetLeft,t.y.targetOffset+=n.offsetTop,n=n.offsetParent}t.x.targetLength=e===i?e.scrollWidth:e.clientWidth,t.y.targetLength=e===i?e.scrollHeight:e.clientHeight,t.x.containerLength=i.clientWidth,t.y.containerLength=i.clientHeight}function qz(i,e,t,n={}){return{measure:()=>Yz(i,n.target,t),update:s=>{Fz(i,t,s),(n.offset||n.target)&&jz(i,t,n)},notify:()=>e(t)}}const Vm=new WeakMap,HC=new WeakMap,uS=new WeakMap,zC=i=>i===document.scrollingElement?window:i;function iD(i,{container:e=document.scrollingElement,...t}={}){if(!e)return ja;let n=uS.get(e);n||(n=new Set,uS.set(e,n));const s=Iz(),r=qz(e,i,s,t);if(n.add(r),!Vm.has(e)){const c=()=>{for(const y of n)y.measure()},f=()=>{for(const y of n)y.update(bs.timestamp)},p=()=>{for(const y of n)y.notify()},m=()=>{si.read(c),si.read(f),si.preUpdate(p)};Vm.set(e,m);const v=zC(e);window.addEventListener("resize",m,{passive:!0}),e!==document.documentElement&&HC.set(e,Nz(e,m)),v.addEventListener("scroll",m,{passive:!0}),m()}const o=Vm.get(e);return si.read(o,!1,!0),()=>{var p;bo(o);const c=uS.get(e);if(!c||(c.delete(r),c.size))return;const f=Vm.get(e);Vm.delete(e),f&&(zC(e).removeEventListener("scroll",f),(p=HC.get(e))==null||p(),window.removeEventListener("resize",f))}}const GC=new Map;function Jz(i){const e={value:0},t=iD(n=>{e.value=n[i.axis].progress*100},i);return{currentTime:e,cancel:t}}function sD({source:i,container:e,...t}){const{axis:n}=t;i&&(e=i);const s=GC.get(e)??new Map;GC.set(e,s);const r=t.target??"self",o=s.get(r)??{},c=n+(t.offset??[]).join(",");return o[c]||(o[c]=!t.target&&t2()?new ScrollTimeline({source:e,axis:n}):Jz({container:e,...t})),o[c]}function Kz(i,e){const t=sD(e);return i.attachTimeline({timeline:e.target?void 0:t,observe:n=>(n.pause(),v2(s=>{n.time=n.duration*s},t))})}function Wz(i){return i.length===2}function Zz(i,e){return Wz(i)?iD(t=>{i(t[e.axis].progress,t)},e):v2(i,sD(e))}function Qz(i,{axis:e="y",container:t=document.scrollingElement,...n}={}){if(!t)return ja;const s={axis:e,container:t,...n};return typeof i=="function"?Zz(i,s):Kz(i,s)}function VC(i,e){KO(!!(!e||e.current))}const $z=()=>({scrollX:xo(0),scrollY:xo(0),scrollXProgress:xo(0),scrollYProgress:xo(0)});function yp({container:i,target:e,layoutEffect:t=!0,...n}={}){const s=Ax($z);return(t?Nb:ee.useEffect)(()=>(VC("target",e),VC("container",i),Qz((o,{x:c,y:f})=>{s.scrollX.set(c.current),s.scrollXProgress.set(c.progress),s.scrollY.set(f.current),s.scrollYProgress.set(f.progress)},{...n,container:(i==null?void 0:i.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[i,e,JSON.stringify(n.offset)]),s}function eG(i){const e=Ax(()=>xo(i)),{isStatic:t}=ee.useContext(oE);if(t){const[,n]=ee.useState(i);ee.useEffect(()=>e.on("change",n),[])}return e}function aD(i,e){const t=eG(e()),n=()=>t.set(e());return n(),Nb(()=>{const s=()=>si.preRender(n,!1,!0),r=i.map(o=>o.on("change",s));return()=>{r.forEach(o=>o()),bo(n)}}),t}function tG(i){pg.current=[],i();const e=aD(pg.current,i);return pg.current=void 0,e}function f_(i,e,t,n){if(typeof i=="function")return tG(i);const s=typeof e=="function"?e:zP(e,t,n);return Array.isArray(i)?kC(i,s):kC([i],([r])=>s(r))}function kC(i,e){const t=Ax(()=>[]);return aD(i,()=>{t.length=0;const n=i.length;for(let s=0;s<n;s++)t[s]=i[s].get();return e(t)})}const XC="/cp-frontend-JordiDeLeeuw/",nG=()=>{const i=ee.useRef(null),e=ee.useRef(null),{scrollYProgress:t}=yp({target:i,offset:["start end","end start"]}),n=f_(t,[0,1],["-20vw","78vw"]),s=f_(t,[0,1],["10vw","83vw"]),r=f_(t,[.75,.83],[1,0]);return ee.useEffect(()=>t.on("change",c=>{const f=e.current;f&&(c>=.25&&c<=.76?f.play().catch(()=>{}):f.pause())}),[t]),Ex(t,"change",o=>{console.log("Scene 1 scrollYProgress",o)}),pe.jsxs("section",{className:"scene scene1",ref:i,children:[pe.jsxs("div",{className:"scene-sticky",children:[pe.jsx("div",{className:"background-image"}),pe.jsx(Qd.img,{src:`${XC}alicerunning.png`,className:"moving-image image1",style:{x:n,opacity:r}}),pe.jsx(Qd.img,{src:`${XC}runningbunny.png`,className:"moving-image image2",style:{x:s,opacity:r}})]}),pe.jsx("audio",{ref:e,loop:!0,preload:"auto",children:pe.jsx("source",{src:"/cp-frontend-JordiDeLeeuw/soundscene1.mp3",type:"audio/mpeg"})})]})},iy="/cp-frontend-JordiDeLeeuw/",iG=()=>{const i=ee.useRef(null),e=ee.useRef(null),{scrollYProgress:t}=yp({target:i,offset:["start end","end start"]}),n=f_(t,[0,1],["-90deg","90deg"]);return ee.useEffect(()=>t.on("change",r=>{const o=e.current;o&&(r>=.25&&r<=.76?o.play().catch(()=>{}):o.pause())}),[t]),Ex(t,"change",s=>{console.log("Scene 2 scrollYProgress",s)}),pe.jsxs("section",{className:"scene scene2",ref:i,children:[pe.jsxs("div",{className:"scene-sticky",children:[pe.jsx("div",{className:"background-image"}),pe.jsx("img",{src:`${iy}fallingalice.png`,className:"centerpiece",alt:"falling alice"}),pe.jsx(Qd.div,{className:"floating-item item1",style:{rotate:n},children:pe.jsx("img",{src:`${iy}items1.png`,alt:"Floating Item 1"})}),pe.jsx(Qd.div,{className:"floating-item item2",style:{rotate:n},children:pe.jsx("img",{src:`${iy}items2.png`,alt:"Floating Item 2"})})]}),pe.jsxs("audio",{ref:e,loop:!0,preload:"auto",children:[pe.jsx("source",{src:`${iy}soundscene2.mp3`,type:"audio/mpeg"})," "]})]})},sy="/cp-frontend-JordiDeLeeuw/",sG=()=>{const i=ee.useRef(null),e=ee.useRef(null),[t,n]=ee.useState(.3),[s,r]=ee.useState("normal"),{scrollYProgress:o}=yp({target:i,offset:["start end","end start"]});ee.useEffect(()=>o.on("change",m=>{const v=e.current;v&&(m>=.25&&m<=.75?v.play().catch(()=>{}):v.pause())}),[o]),Ex(o,"change",p=>{console.log("Scene 3 scrollYProgress",p)});const c=()=>{s==="normal"?(n(.1),r("shrunk")):s==="grown"&&(n(.3),r("normal"))},f=()=>{s==="shrunk"?(n(.3),r("normal")):s==="normal"&&(n(.5),r("grown"))};return pe.jsxs("section",{className:"scene scene3",ref:i,children:[pe.jsxs("div",{className:"scene-sticky",children:[pe.jsx("div",{className:"background-image"}),pe.jsxs("div",{className:"content",children:[pe.jsx("img",{src:`${sy}alicestanding.png`,alt:"Alice",className:"big-image",style:{transform:`scale(${t})`}}),pe.jsxs("div",{className:"buttons",children:[pe.jsx("img",{src:`${sy}bottle.png`,alt:"Shrink",className:"button button-shrink",onClick:c}),pe.jsx("img",{src:`${sy}cake.png`,alt:"Grow",className:"button button-grow",onClick:f})]})]})]}),pe.jsx("audio",{ref:e,loop:!0,preload:"auto",children:pe.jsx("source",{src:`${sy}soundscene3.mp3`,type:"audio/mpeg"})})]})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ov="176",Ff={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},rD=0,KM=1,oD=2,aG=3,lD=0,Tx=1,_g=2,yo=3,yl=0,Ea=1,Nr=2,pl=0,eh=1,WM=2,ZM=3,QM=4,cD=5,gu=100,uD=101,fD=102,hD=103,dD=104,pD=200,mD=201,gD=202,vD=203,E_=204,T_=205,yD=206,_D=207,xD=208,AD=209,SD=210,MD=211,bD=212,ED=213,TD=214,C_=0,R_=1,w_=2,sh=3,B_=4,D_=5,U_=6,L_=7,lv=0,CD=1,RD=2,ml=0,wD=1,BD=2,DD=3,vE=4,UD=5,LD=6,ND=7,$M="attached",OD="detached",Au=300,_l=301,Su=302,$d=303,Gg=304,_p=306,Mu=1e3,Wi=1001,ep=1002,Ts=1003,Cx=1004,rG=1004,jf=1005,oG=1005,Jn=1006,Yd=1007,lG=1007,Ir=1008,eb=1008,Ta=1009,Rx=1010,wx=1011,tp=1012,cv=1013,xl=1014,Ii=1015,Es=1016,Bx=1017,Dx=1018,np=1020,yE=35902,_E=1021,xE=1022,Zi=1023,ip=1026,sp=1027,uv=1028,fv=1029,AE=1030,Ux=1031,cG=1032,Lx=1033,xg=33776,Ag=33777,Sg=33778,Mg=33779,N_=35840,O_=35841,I_=35842,P_=35843,F_=36196,H_=37492,z_=37496,G_=37808,V_=37809,k_=37810,X_=37811,j_=37812,Y_=37813,q_=37814,J_=37815,K_=37816,W_=37817,Z_=37818,Q_=37819,$_=37820,ex=37821,bg=36492,tx=36494,nx=36495,SE=36283,ix=36284,sx=36285,ax=36286,ID=2200,PD=2201,FD=2202,ap=2300,rp=2301,h_=2302,Yf=2400,qf=2401,Vg=2402,Nx=2500,ME=2501,HD=0,bE=1,rx=2,zD=3200,GD=3201,uG=3202,fG=3203,Tu=0,VD=1,nc="",Hs="srgb",Eo="srgb-linear",kg="linear",ii="srgb",hG=0,zf=7680,dG=7681,pG=7682,mG=7683,gG=34055,vG=34056,yG=5386,_G=512,xG=513,AG=514,SG=515,MG=516,bG=517,EG=518,tb=519,kD=512,XD=513,jD=514,EE=515,YD=516,qD=517,JD=518,KD=519,Xg=35044,TG=35048,CG=35040,RG=35045,wG=35049,BG=35041,DG=35046,UG=35050,LG=35042,NG="100",nb="300 es",Pr=2e3,jg=2001,OG={COMPUTE:"compute",RENDER:"render"},IG={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},PG={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};let Ml=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}};const $s=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let jC=1234567;const th=Math.PI/180,op=180/Math.PI;function cr(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return($s[i&255]+$s[i>>8&255]+$s[i>>16&255]+$s[i>>24&255]+"-"+$s[e&255]+$s[e>>8&255]+"-"+$s[e>>16&15|64]+$s[e>>24&255]+"-"+$s[t&63|128]+$s[t>>8&255]+"-"+$s[t>>16&255]+$s[t>>24&255]+$s[n&255]+$s[n>>8&255]+$s[n>>16&255]+$s[n>>24&255]).toLowerCase()}function hn(i,e,t){return Math.max(e,Math.min(t,i))}function TE(i,e){return(i%e+e)%e}function FG(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function HG(i,e,t){return i!==e?(t-i)/(e-i):0}function Eg(i,e,t){return(1-t)*i+t*e}function zG(i,e,t,n){return Eg(i,e,1-Math.exp(-t*n))}function GG(i,e=1){return e-Math.abs(TE(i,e*2)-e)}function VG(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function kG(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function XG(i,e){return i+Math.floor(Math.random()*(e-i+1))}function jG(i,e){return i+Math.random()*(e-i)}function YG(i){return i*(.5-Math.random())}function qG(i){i!==void 0&&(jC=i);let e=jC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function JG(i){return i*th}function KG(i){return i*op}function WG(i){return(i&i-1)===0&&i!==0}function ZG(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function QG(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function $G(i,e,t,n,s){const r=Math.cos,o=Math.sin,c=r(t/2),f=o(t/2),p=r((e+n)/2),m=o((e+n)/2),v=r((e-n)/2),y=o((e-n)/2),x=r((n-e)/2),S=o((n-e)/2);switch(s){case"XYX":i.set(c*m,f*v,f*y,c*p);break;case"YZY":i.set(f*y,c*m,f*v,c*p);break;case"ZXZ":i.set(f*v,f*y,c*m,c*p);break;case"XZX":i.set(c*m,f*S,f*x,c*p);break;case"YXY":i.set(f*x,c*m,f*S,c*p);break;case"ZYZ":i.set(f*S,f*x,c*m,c*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ma(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function _n(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const WD={DEG2RAD:th,RAD2DEG:op,generateUUID:cr,clamp:hn,euclideanModulo:TE,mapLinear:FG,inverseLerp:HG,lerp:Eg,damp:zG,pingpong:GG,smoothstep:VG,smootherstep:kG,randInt:XG,randFloat:jG,randFloatSpread:YG,seededRandom:qG,degToRad:JG,radToDeg:KG,isPowerOfTwo:WG,ceilPowerOfTwo:ZG,floorPowerOfTwo:QG,setQuaternionFromProperEuler:$G,normalize:_n,denormalize:Ma};class Ke{constructor(e=0,t=0){Ke.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=hn(this.x,e.x,t.x),this.y=hn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=hn(this.x,e,t),this.y=hn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*s+e.x,this.y=r*s+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gn{constructor(e,t,n,s,r,o,c,f,p){gn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,c,f,p)}set(e,t,n,s,r,o,c,f,p){const m=this.elements;return m[0]=e,m[1]=s,m[2]=c,m[3]=t,m[4]=r,m[5]=f,m[6]=n,m[7]=o,m[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],c=n[3],f=n[6],p=n[1],m=n[4],v=n[7],y=n[2],x=n[5],S=n[8],T=s[0],E=s[3],A=s[6],w=s[1],B=s[4],D=s[7],O=s[2],I=s[5],z=s[8];return r[0]=o*T+c*w+f*O,r[3]=o*E+c*B+f*I,r[6]=o*A+c*D+f*z,r[1]=p*T+m*w+v*O,r[4]=p*E+m*B+v*I,r[7]=p*A+m*D+v*z,r[2]=y*T+x*w+S*O,r[5]=y*E+x*B+S*I,r[8]=y*A+x*D+S*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],c=e[5],f=e[6],p=e[7],m=e[8];return t*o*m-t*c*p-n*r*m+n*c*f+s*r*p-s*o*f}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],c=e[5],f=e[6],p=e[7],m=e[8],v=m*o-c*p,y=c*f-m*r,x=p*r-o*f,S=t*v+n*y+s*x;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/S;return e[0]=v*T,e[1]=(s*p-m*n)*T,e[2]=(c*n-s*o)*T,e[3]=y*T,e[4]=(m*t-s*f)*T,e[5]=(s*r-c*t)*T,e[6]=x*T,e[7]=(n*f-p*t)*T,e[8]=(o*t-n*r)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,o,c){const f=Math.cos(r),p=Math.sin(r);return this.set(n*f,n*p,-n*(f*o+p*c)+o+e,-s*p,s*f,-s*(-p*o+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(fS.makeScale(e,t)),this}rotate(e){return this.premultiply(fS.makeRotation(-e)),this}translate(e,t){return this.premultiply(fS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const fS=new gn;function ZD(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const e4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Xd(i,e){return new e4[i](e)}function Yg(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function QD(){const i=Yg("canvas");return i.style.display="block",i}const YC={};function d_(i){i in YC||(YC[i]=!0,console.warn(i))}function t4(i,e,t){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}function n4(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function i4(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const qC=new gn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),JC=new gn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function s4(){const i={enabled:!0,workingColorSpace:Eo,spaces:{},convert:function(s,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===ii&&(s.r=oc(s.r),s.g=oc(s.g),s.b=oc(s.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ii&&(s.r=qd(s.r),s.g=qd(s.g),s.b=qd(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===nc?kg:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,o){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Eo]:{primaries:e,whitePoint:n,transfer:kg,toXYZ:qC,fromXYZ:JC,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Hs},outputColorSpaceConfig:{drawingBufferColorSpace:Hs}},[Hs]:{primaries:e,whitePoint:n,transfer:ii,toXYZ:qC,fromXYZ:JC,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Hs}}}),i}const Nn=s4();function oc(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function qd(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let yd;class $D{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{yd===void 0&&(yd=Yg("canvas")),yd.width=e.width,yd.height=e.height;const s=yd.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=yd}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Yg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=oc(r[o]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(oc(t[n]/255)*255):t[n]=oc(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let a4=0;class vu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:a4++}),this.uuid=cr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,c=s.length;o<c;o++)s[o].isDataTexture?r.push(hS(s[o].image)):r.push(hS(s[o]))}else r=hS(s);n.url=r}return t||(e.images[this.uuid]=n),n}}function hS(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?$D.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let r4=0;class Wn extends Ml{constructor(e=Wn.DEFAULT_IMAGE,t=Wn.DEFAULT_MAPPING,n=Wi,s=Wi,r=Jn,o=Ir,c=Zi,f=Ta,p=Wn.DEFAULT_ANISOTROPY,m=nc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:r4++}),this.uuid=cr(),this.name="",this.source=new vu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=p,this.format=c,this.internalFormat=null,this.type=f,this.offset=new Ke(0,0),this.repeat=new Ke(1,1),this.center=new Ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Au)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Mu:e.x=e.x-Math.floor(e.x);break;case Wi:e.x=e.x<0?0:1;break;case ep:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Mu:e.y=e.y-Math.floor(e.y);break;case Wi:e.y=e.y<0?0:1;break;case ep:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Wn.DEFAULT_IMAGE=null;Wn.DEFAULT_MAPPING=Au;Wn.DEFAULT_ANISOTROPY=1;class Hn{constructor(e=0,t=0,n=0,s=1){Hn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*s+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const f=e.elements,p=f[0],m=f[4],v=f[8],y=f[1],x=f[5],S=f[9],T=f[2],E=f[6],A=f[10];if(Math.abs(m-y)<.01&&Math.abs(v-T)<.01&&Math.abs(S-E)<.01){if(Math.abs(m+y)<.1&&Math.abs(v+T)<.1&&Math.abs(S+E)<.1&&Math.abs(p+x+A-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const B=(p+1)/2,D=(x+1)/2,O=(A+1)/2,I=(m+y)/4,z=(v+T)/4,P=(S+E)/4;return B>D&&B>O?B<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(B),s=I/n,r=z/n):D>O?D<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(D),n=I/s,r=P/s):O<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(O),n=z/r,s=P/r),this.set(n,s,r,t),this}let w=Math.sqrt((E-S)*(E-S)+(v-T)*(v-T)+(y-m)*(y-m));return Math.abs(w)<.001&&(w=1),this.x=(E-S)/w,this.y=(v-T)/w,this.z=(y-m)/w,this.w=Math.acos((p+x+A-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=hn(this.x,e.x,t.x),this.y=hn(this.y,e.y,t.y),this.z=hn(this.z,e.z,t.z),this.w=hn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=hn(this.x,e,t),this.y=hn(this.y,e,t),this.z=hn(this.z,e,t),this.w=hn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ox extends Ml{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth?n.depth:1,this.scissor=new Hn(0,0,e,t),this.scissorTest=!1,this.viewport=new Hn(0,0,e,t);const s={width:e,height:t,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const r=new Wn(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let c=0;c<o;c++)this.textures[c]=r.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new vu(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hr extends Ox{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class hv extends Wn{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Ts,this.minFilter=Ts,this.wrapR=Wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class o4 extends Hr{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new hv(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Ix extends Wn{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Ts,this.minFilter=Ts,this.wrapR=Wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class l4 extends Hr{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Ix(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Cs{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,o,c){let f=n[s+0],p=n[s+1],m=n[s+2],v=n[s+3];const y=r[o+0],x=r[o+1],S=r[o+2],T=r[o+3];if(c===0){e[t+0]=f,e[t+1]=p,e[t+2]=m,e[t+3]=v;return}if(c===1){e[t+0]=y,e[t+1]=x,e[t+2]=S,e[t+3]=T;return}if(v!==T||f!==y||p!==x||m!==S){let E=1-c;const A=f*y+p*x+m*S+v*T,w=A>=0?1:-1,B=1-A*A;if(B>Number.EPSILON){const O=Math.sqrt(B),I=Math.atan2(O,A*w);E=Math.sin(E*I)/O,c=Math.sin(c*I)/O}const D=c*w;if(f=f*E+y*D,p=p*E+x*D,m=m*E+S*D,v=v*E+T*D,E===1-c){const O=1/Math.sqrt(f*f+p*p+m*m+v*v);f*=O,p*=O,m*=O,v*=O}}e[t]=f,e[t+1]=p,e[t+2]=m,e[t+3]=v}static multiplyQuaternionsFlat(e,t,n,s,r,o){const c=n[s],f=n[s+1],p=n[s+2],m=n[s+3],v=r[o],y=r[o+1],x=r[o+2],S=r[o+3];return e[t]=c*S+m*v+f*x-p*y,e[t+1]=f*S+m*y+p*v-c*x,e[t+2]=p*S+m*x+c*y-f*v,e[t+3]=m*S-c*v-f*y-p*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,o=e._order,c=Math.cos,f=Math.sin,p=c(n/2),m=c(s/2),v=c(r/2),y=f(n/2),x=f(s/2),S=f(r/2);switch(o){case"XYZ":this._x=y*m*v+p*x*S,this._y=p*x*v-y*m*S,this._z=p*m*S+y*x*v,this._w=p*m*v-y*x*S;break;case"YXZ":this._x=y*m*v+p*x*S,this._y=p*x*v-y*m*S,this._z=p*m*S-y*x*v,this._w=p*m*v+y*x*S;break;case"ZXY":this._x=y*m*v-p*x*S,this._y=p*x*v+y*m*S,this._z=p*m*S+y*x*v,this._w=p*m*v-y*x*S;break;case"ZYX":this._x=y*m*v-p*x*S,this._y=p*x*v+y*m*S,this._z=p*m*S-y*x*v,this._w=p*m*v+y*x*S;break;case"YZX":this._x=y*m*v+p*x*S,this._y=p*x*v+y*m*S,this._z=p*m*S-y*x*v,this._w=p*m*v-y*x*S;break;case"XZY":this._x=y*m*v-p*x*S,this._y=p*x*v-y*m*S,this._z=p*m*S+y*x*v,this._w=p*m*v+y*x*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],o=t[1],c=t[5],f=t[9],p=t[2],m=t[6],v=t[10],y=n+c+v;if(y>0){const x=.5/Math.sqrt(y+1);this._w=.25/x,this._x=(m-f)*x,this._y=(r-p)*x,this._z=(o-s)*x}else if(n>c&&n>v){const x=2*Math.sqrt(1+n-c-v);this._w=(m-f)/x,this._x=.25*x,this._y=(s+o)/x,this._z=(r+p)/x}else if(c>v){const x=2*Math.sqrt(1+c-n-v);this._w=(r-p)/x,this._x=(s+o)/x,this._y=.25*x,this._z=(f+m)/x}else{const x=2*Math.sqrt(1+v-n-c);this._w=(o-s)/x,this._x=(r+p)/x,this._y=(f+m)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,o=e._w,c=t._x,f=t._y,p=t._z,m=t._w;return this._x=n*m+o*c+s*p-r*f,this._y=s*m+o*f+r*c-n*p,this._z=r*m+o*p+n*f-s*c,this._w=o*m-n*c-s*f-r*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,o=this._w;let c=o*e._w+n*e._x+s*e._y+r*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=o,this._x=n,this._y=s,this._z=r,this;const f=1-c*c;if(f<=Number.EPSILON){const x=1-t;return this._w=x*o+t*this._w,this._x=x*n+t*this._x,this._y=x*s+t*this._y,this._z=x*r+t*this._z,this.normalize(),this}const p=Math.sqrt(f),m=Math.atan2(p,c),v=Math.sin((1-t)*m)/p,y=Math.sin(t*m)/p;return this._w=o*v+this._w*y,this._x=n*v+this._x*y,this._y=s*v+this._y*y,this._z=r*v+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ${constructor(e=0,t=0,n=0){$.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(KC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(KC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,o=e.y,c=e.z,f=e.w,p=2*(o*s-c*n),m=2*(c*t-r*s),v=2*(r*n-o*t);return this.x=t+f*p+o*v-c*m,this.y=n+f*m+c*p-r*v,this.z=s+f*v+r*m-o*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=hn(this.x,e.x,t.x),this.y=hn(this.y,e.y,t.y),this.z=hn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=hn(this.x,e,t),this.y=hn(this.y,e,t),this.z=hn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,o=t.x,c=t.y,f=t.z;return this.x=s*f-r*c,this.y=r*o-n*f,this.z=n*c-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return dS.copy(this).projectOnVector(e),this.sub(dS)}reflect(e){return this.sub(dS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dS=new $,KC=new Cs;class zs{constructor(e=new $(1/0,1/0,1/0),t=new $(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ho.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ho.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ho.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,c=r.count;o<c;o++)e.isMesh===!0?e.getVertexPosition(o,ho):ho.fromBufferAttribute(r,o),ho.applyMatrix4(e.matrixWorld),this.expandByPoint(ho);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ay.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),ay.copy(n.boundingBox)),ay.applyMatrix4(e.matrixWorld),this.union(ay)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ho),ho.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(km),ry.subVectors(this.max,km),_d.subVectors(e.a,km),xd.subVectors(e.b,km),Ad.subVectors(e.c,km),au.subVectors(xd,_d),ru.subVectors(Ad,xd),Mf.subVectors(_d,Ad);let t=[0,-au.z,au.y,0,-ru.z,ru.y,0,-Mf.z,Mf.y,au.z,0,-au.x,ru.z,0,-ru.x,Mf.z,0,-Mf.x,-au.y,au.x,0,-ru.y,ru.x,0,-Mf.y,Mf.x,0];return!pS(t,_d,xd,Ad,ry)||(t=[1,0,0,0,1,0,0,0,1],!pS(t,_d,xd,Ad,ry))?!1:(oy.crossVectors(au,ru),t=[oy.x,oy.y,oy.z],pS(t,_d,xd,Ad,ry))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ho).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ho).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ql[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ql[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ql[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ql[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ql[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ql[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ql[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ql[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ql),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ql=[new $,new $,new $,new $,new $,new $,new $,new $],ho=new $,ay=new zs,_d=new $,xd=new $,Ad=new $,au=new $,ru=new $,Mf=new $,km=new $,ry=new $,oy=new $,bf=new $;function pS(i,e,t,n,s){for(let r=0,o=i.length-3;r<=o;r+=3){bf.fromArray(i,r);const c=s.x*Math.abs(bf.x)+s.y*Math.abs(bf.y)+s.z*Math.abs(bf.z),f=e.dot(bf),p=t.dot(bf),m=n.dot(bf);if(Math.max(-Math.max(f,p,m),Math.min(f,p,m))>c)return!1}return!0}const c4=new zs,Xm=new $,mS=new $;class Rs{constructor(e=new $,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):c4.setFromPoints(e).getCenter(n);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Xm.subVectors(e,this.center);const t=Xm.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(Xm,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(mS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Xm.copy(e.center).add(mS)),this.expandByPoint(Xm.copy(e.center).sub(mS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Jl=new $,gS=new $,ly=new $,ou=new $,vS=new $,cy=new $,yS=new $;class dh{constructor(e=new $,t=new $(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Jl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Jl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Jl.copy(this.origin).addScaledVector(this.direction,t),Jl.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){gS.copy(e).add(t).multiplyScalar(.5),ly.copy(t).sub(e).normalize(),ou.copy(this.origin).sub(gS);const r=e.distanceTo(t)*.5,o=-this.direction.dot(ly),c=ou.dot(this.direction),f=-ou.dot(ly),p=ou.lengthSq(),m=Math.abs(1-o*o);let v,y,x,S;if(m>0)if(v=o*f-c,y=o*c-f,S=r*m,v>=0)if(y>=-S)if(y<=S){const T=1/m;v*=T,y*=T,x=v*(v+o*y+2*c)+y*(o*v+y+2*f)+p}else y=r,v=Math.max(0,-(o*y+c)),x=-v*v+y*(y+2*f)+p;else y=-r,v=Math.max(0,-(o*y+c)),x=-v*v+y*(y+2*f)+p;else y<=-S?(v=Math.max(0,-(-o*r+c)),y=v>0?-r:Math.min(Math.max(-r,-f),r),x=-v*v+y*(y+2*f)+p):y<=S?(v=0,y=Math.min(Math.max(-r,-f),r),x=y*(y+2*f)+p):(v=Math.max(0,-(o*r+c)),y=v>0?r:Math.min(Math.max(-r,-f),r),x=-v*v+y*(y+2*f)+p);else y=o>0?-r:r,v=Math.max(0,-(o*y+c)),x=-v*v+y*(y+2*f)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,v),s&&s.copy(gS).addScaledVector(ly,y),x}intersectSphere(e,t){Jl.subVectors(e.center,this.origin);const n=Jl.dot(this.direction),s=Jl.dot(Jl)-n*n,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),c=n-o,f=n+o;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,r,o,c,f;const p=1/this.direction.x,m=1/this.direction.y,v=1/this.direction.z,y=this.origin;return p>=0?(n=(e.min.x-y.x)*p,s=(e.max.x-y.x)*p):(n=(e.max.x-y.x)*p,s=(e.min.x-y.x)*p),m>=0?(r=(e.min.y-y.y)*m,o=(e.max.y-y.y)*m):(r=(e.max.y-y.y)*m,o=(e.min.y-y.y)*m),n>o||r>s||((r>n||isNaN(n))&&(n=r),(o<s||isNaN(s))&&(s=o),v>=0?(c=(e.min.z-y.z)*v,f=(e.max.z-y.z)*v):(c=(e.max.z-y.z)*v,f=(e.min.z-y.z)*v),n>f||c>s)||((c>n||n!==n)&&(n=c),(f<s||s!==s)&&(s=f),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,Jl)!==null}intersectTriangle(e,t,n,s,r){vS.subVectors(t,e),cy.subVectors(n,e),yS.crossVectors(vS,cy);let o=this.direction.dot(yS),c;if(o>0){if(s)return null;c=1}else if(o<0)c=-1,o=-o;else return null;ou.subVectors(this.origin,e);const f=c*this.direction.dot(cy.crossVectors(ou,cy));if(f<0)return null;const p=c*this.direction.dot(vS.cross(ou));if(p<0||f+p>o)return null;const m=-c*ou.dot(yS);return m<0?null:this.at(m/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jt{constructor(e,t,n,s,r,o,c,f,p,m,v,y,x,S,T,E){Jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,c,f,p,m,v,y,x,S,T,E)}set(e,t,n,s,r,o,c,f,p,m,v,y,x,S,T,E){const A=this.elements;return A[0]=e,A[4]=t,A[8]=n,A[12]=s,A[1]=r,A[5]=o,A[9]=c,A[13]=f,A[2]=p,A[6]=m,A[10]=v,A[14]=y,A[3]=x,A[7]=S,A[11]=T,A[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/Sd.setFromMatrixColumn(e,0).length(),r=1/Sd.setFromMatrixColumn(e,1).length(),o=1/Sd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,o=Math.cos(n),c=Math.sin(n),f=Math.cos(s),p=Math.sin(s),m=Math.cos(r),v=Math.sin(r);if(e.order==="XYZ"){const y=o*m,x=o*v,S=c*m,T=c*v;t[0]=f*m,t[4]=-f*v,t[8]=p,t[1]=x+S*p,t[5]=y-T*p,t[9]=-c*f,t[2]=T-y*p,t[6]=S+x*p,t[10]=o*f}else if(e.order==="YXZ"){const y=f*m,x=f*v,S=p*m,T=p*v;t[0]=y+T*c,t[4]=S*c-x,t[8]=o*p,t[1]=o*v,t[5]=o*m,t[9]=-c,t[2]=x*c-S,t[6]=T+y*c,t[10]=o*f}else if(e.order==="ZXY"){const y=f*m,x=f*v,S=p*m,T=p*v;t[0]=y-T*c,t[4]=-o*v,t[8]=S+x*c,t[1]=x+S*c,t[5]=o*m,t[9]=T-y*c,t[2]=-o*p,t[6]=c,t[10]=o*f}else if(e.order==="ZYX"){const y=o*m,x=o*v,S=c*m,T=c*v;t[0]=f*m,t[4]=S*p-x,t[8]=y*p+T,t[1]=f*v,t[5]=T*p+y,t[9]=x*p-S,t[2]=-p,t[6]=c*f,t[10]=o*f}else if(e.order==="YZX"){const y=o*f,x=o*p,S=c*f,T=c*p;t[0]=f*m,t[4]=T-y*v,t[8]=S*v+x,t[1]=v,t[5]=o*m,t[9]=-c*m,t[2]=-p*m,t[6]=x*v+S,t[10]=y-T*v}else if(e.order==="XZY"){const y=o*f,x=o*p,S=c*f,T=c*p;t[0]=f*m,t[4]=-v,t[8]=p*m,t[1]=y*v+T,t[5]=o*m,t[9]=x*v-S,t[2]=S*v-x,t[6]=c*m,t[10]=T*v+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(u4,e,f4)}lookAt(e,t,n){const s=this.elements;return rr.subVectors(e,t),rr.lengthSq()===0&&(rr.z=1),rr.normalize(),lu.crossVectors(n,rr),lu.lengthSq()===0&&(Math.abs(n.z)===1?rr.x+=1e-4:rr.z+=1e-4,rr.normalize(),lu.crossVectors(n,rr)),lu.normalize(),uy.crossVectors(rr,lu),s[0]=lu.x,s[4]=uy.x,s[8]=rr.x,s[1]=lu.y,s[5]=uy.y,s[9]=rr.y,s[2]=lu.z,s[6]=uy.z,s[10]=rr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],c=n[4],f=n[8],p=n[12],m=n[1],v=n[5],y=n[9],x=n[13],S=n[2],T=n[6],E=n[10],A=n[14],w=n[3],B=n[7],D=n[11],O=n[15],I=s[0],z=s[4],P=s[8],L=s[12],N=s[1],j=s[5],ce=s[9],ne=s[13],fe=s[2],_e=s[6],H=s[10],W=s[14],Q=s[3],ve=s[7],X=s[11],re=s[15];return r[0]=o*I+c*N+f*fe+p*Q,r[4]=o*z+c*j+f*_e+p*ve,r[8]=o*P+c*ce+f*H+p*X,r[12]=o*L+c*ne+f*W+p*re,r[1]=m*I+v*N+y*fe+x*Q,r[5]=m*z+v*j+y*_e+x*ve,r[9]=m*P+v*ce+y*H+x*X,r[13]=m*L+v*ne+y*W+x*re,r[2]=S*I+T*N+E*fe+A*Q,r[6]=S*z+T*j+E*_e+A*ve,r[10]=S*P+T*ce+E*H+A*X,r[14]=S*L+T*ne+E*W+A*re,r[3]=w*I+B*N+D*fe+O*Q,r[7]=w*z+B*j+D*_e+O*ve,r[11]=w*P+B*ce+D*H+O*X,r[15]=w*L+B*ne+D*W+O*re,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],o=e[1],c=e[5],f=e[9],p=e[13],m=e[2],v=e[6],y=e[10],x=e[14],S=e[3],T=e[7],E=e[11],A=e[15];return S*(+r*f*v-s*p*v-r*c*y+n*p*y+s*c*x-n*f*x)+T*(+t*f*x-t*p*y+r*o*y-s*o*x+s*p*m-r*f*m)+E*(+t*p*v-t*c*x-r*o*v+n*o*x+r*c*m-n*p*m)+A*(-s*c*m-t*f*v+t*c*y+s*o*v-n*o*y+n*f*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],c=e[5],f=e[6],p=e[7],m=e[8],v=e[9],y=e[10],x=e[11],S=e[12],T=e[13],E=e[14],A=e[15],w=v*E*p-T*y*p+T*f*x-c*E*x-v*f*A+c*y*A,B=S*y*p-m*E*p-S*f*x+o*E*x+m*f*A-o*y*A,D=m*T*p-S*v*p+S*c*x-o*T*x-m*c*A+o*v*A,O=S*v*f-m*T*f-S*c*y+o*T*y+m*c*E-o*v*E,I=t*w+n*B+s*D+r*O;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/I;return e[0]=w*z,e[1]=(T*y*r-v*E*r-T*s*x+n*E*x+v*s*A-n*y*A)*z,e[2]=(c*E*r-T*f*r+T*s*p-n*E*p-c*s*A+n*f*A)*z,e[3]=(v*f*r-c*y*r-v*s*p+n*y*p+c*s*x-n*f*x)*z,e[4]=B*z,e[5]=(m*E*r-S*y*r+S*s*x-t*E*x-m*s*A+t*y*A)*z,e[6]=(S*f*r-o*E*r-S*s*p+t*E*p+o*s*A-t*f*A)*z,e[7]=(o*y*r-m*f*r+m*s*p-t*y*p-o*s*x+t*f*x)*z,e[8]=D*z,e[9]=(S*v*r-m*T*r-S*n*x+t*T*x+m*n*A-t*v*A)*z,e[10]=(o*T*r-S*c*r+S*n*p-t*T*p-o*n*A+t*c*A)*z,e[11]=(m*c*r-o*v*r-m*n*p+t*v*p+o*n*x-t*c*x)*z,e[12]=O*z,e[13]=(m*T*s-S*v*s+S*n*y-t*T*y-m*n*E+t*v*E)*z,e[14]=(S*c*s-o*T*s-S*n*f+t*T*f+o*n*E-t*c*E)*z,e[15]=(o*v*s-m*c*s+m*n*f-t*v*f-o*n*y+t*c*y)*z,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,o=e.x,c=e.y,f=e.z,p=r*o,m=r*c;return this.set(p*o+n,p*c-s*f,p*f+s*c,0,p*c+s*f,m*c+n,m*f-s*o,0,p*f-s*c,m*f+s*o,r*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,o){return this.set(1,n,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,o=t._y,c=t._z,f=t._w,p=r+r,m=o+o,v=c+c,y=r*p,x=r*m,S=r*v,T=o*m,E=o*v,A=c*v,w=f*p,B=f*m,D=f*v,O=n.x,I=n.y,z=n.z;return s[0]=(1-(T+A))*O,s[1]=(x+D)*O,s[2]=(S-B)*O,s[3]=0,s[4]=(x-D)*I,s[5]=(1-(y+A))*I,s[6]=(E+w)*I,s[7]=0,s[8]=(S+B)*z,s[9]=(E-w)*z,s[10]=(1-(y+T))*z,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=Sd.set(s[0],s[1],s[2]).length();const o=Sd.set(s[4],s[5],s[6]).length(),c=Sd.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],po.copy(this);const p=1/r,m=1/o,v=1/c;return po.elements[0]*=p,po.elements[1]*=p,po.elements[2]*=p,po.elements[4]*=m,po.elements[5]*=m,po.elements[6]*=m,po.elements[8]*=v,po.elements[9]*=v,po.elements[10]*=v,t.setFromRotationMatrix(po),n.x=r,n.y=o,n.z=c,this}makePerspective(e,t,n,s,r,o,c=Pr){const f=this.elements,p=2*r/(t-e),m=2*r/(n-s),v=(t+e)/(t-e),y=(n+s)/(n-s);let x,S;if(c===Pr)x=-(o+r)/(o-r),S=-2*o*r/(o-r);else if(c===jg)x=-o/(o-r),S=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return f[0]=p,f[4]=0,f[8]=v,f[12]=0,f[1]=0,f[5]=m,f[9]=y,f[13]=0,f[2]=0,f[6]=0,f[10]=x,f[14]=S,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,n,s,r,o,c=Pr){const f=this.elements,p=1/(t-e),m=1/(n-s),v=1/(o-r),y=(t+e)*p,x=(n+s)*m;let S,T;if(c===Pr)S=(o+r)*v,T=-2*v;else if(c===jg)S=r*v,T=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return f[0]=2*p,f[4]=0,f[8]=0,f[12]=-y,f[1]=0,f[5]=2*m,f[9]=0,f[13]=-x,f[2]=0,f[6]=0,f[10]=T,f[14]=-S,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Sd=new $,po=new Jt,u4=new $(0,0,0),f4=new $(1,1,1),lu=new $,uy=new $,rr=new $,WC=new Jt,ZC=new Cs;class ur{constructor(e=0,t=0,n=0,s=ur.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],o=s[4],c=s[8],f=s[1],p=s[5],m=s[9],v=s[2],y=s[6],x=s[10];switch(t){case"XYZ":this._y=Math.asin(hn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,x),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(y,p),this._z=0);break;case"YXZ":this._x=Math.asin(-hn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,x),this._z=Math.atan2(f,p)):(this._y=Math.atan2(-v,r),this._z=0);break;case"ZXY":this._x=Math.asin(hn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-v,x),this._z=Math.atan2(-o,p)):(this._y=0,this._z=Math.atan2(f,r));break;case"ZYX":this._y=Math.asin(-hn(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(y,x),this._z=Math.atan2(f,r)):(this._x=0,this._z=Math.atan2(-o,p));break;case"YZX":this._z=Math.asin(hn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-m,p),this._y=Math.atan2(-v,r)):(this._x=0,this._y=Math.atan2(c,x));break;case"XZY":this._z=Math.asin(-hn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,p),this._y=Math.atan2(c,r)):(this._x=Math.atan2(-m,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return WC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(WC,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ZC.setFromEuler(this),this.setFromQuaternion(ZC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ur.DEFAULT_ORDER="XYZ";class lp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let h4=0;const QC=new $,Md=new Cs,Kl=new Jt,fy=new $,jm=new $,d4=new $,p4=new Cs,$C=new $(1,0,0),eR=new $(0,1,0),tR=new $(0,0,1),nR={type:"added"},m4={type:"removed"},bd={type:"childadded",child:null},_S={type:"childremoved",child:null};class On extends Ml{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:h4++}),this.uuid=cr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=On.DEFAULT_UP.clone();const e=new $,t=new ur,n=new Cs,s=new $(1,1,1);function r(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Jt},normalMatrix:{value:new gn}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=On.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new lp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Md.setFromAxisAngle(e,t),this.quaternion.multiply(Md),this}rotateOnWorldAxis(e,t){return Md.setFromAxisAngle(e,t),this.quaternion.premultiply(Md),this}rotateX(e){return this.rotateOnAxis($C,e)}rotateY(e){return this.rotateOnAxis(eR,e)}rotateZ(e){return this.rotateOnAxis(tR,e)}translateOnAxis(e,t){return QC.copy(e).applyQuaternion(this.quaternion),this.position.add(QC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis($C,e)}translateY(e){return this.translateOnAxis(eR,e)}translateZ(e){return this.translateOnAxis(tR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Kl.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?fy.copy(e):fy.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),jm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Kl.lookAt(jm,fy,this.up):Kl.lookAt(fy,jm,this.up),this.quaternion.setFromRotationMatrix(Kl),s&&(Kl.extractRotation(s.matrixWorld),Md.setFromRotationMatrix(Kl),this.quaternion.premultiply(Md.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(nR),bd.child=e,this.dispatchEvent(bd),bd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(m4),_S.child=e,this.dispatchEvent(_S),_S.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Kl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Kl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Kl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(nR),bd.child=e,this.dispatchEvent(bd),bd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jm,e,d4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jm,p4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?{min:c.boundingBox.min.toArray(),max:c.boundingBox.max.toArray()}:void 0,boundingSphere:c.boundingSphere?{radius:c.boundingSphere.radius,center:c.boundingSphere.center.toArray()}:void 0})),s.instanceInfo=this._instanceInfo.map(c=>({...c})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function r(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let p=0,m=f.length;p<m;p++){const v=f[p];r(e.shapes,v)}else r(e.shapes,f)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,p=this.material.length;f<p;f++)c.push(r(e.materials,this.material[f]));s.material=c}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];s.animations.push(r(e.animations,f))}}if(t){const c=o(e.geometries),f=o(e.materials),p=o(e.textures),m=o(e.images),v=o(e.shapes),y=o(e.skeletons),x=o(e.animations),S=o(e.nodes);c.length>0&&(n.geometries=c),f.length>0&&(n.materials=f),p.length>0&&(n.textures=p),m.length>0&&(n.images=m),v.length>0&&(n.shapes=v),y.length>0&&(n.skeletons=y),x.length>0&&(n.animations=x),S.length>0&&(n.nodes=S)}return n.object=s,n;function o(c){const f=[];for(const p in c){const m=c[p];delete m.metadata,f.push(m)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}On.DEFAULT_UP=new $(0,1,0);On.DEFAULT_MATRIX_AUTO_UPDATE=!0;On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const mo=new $,Wl=new $,xS=new $,Zl=new $,Ed=new $,Td=new $,iR=new $,AS=new $,SS=new $,MS=new $,bS=new Hn,ES=new Hn,TS=new Hn;class Va{constructor(e=new $,t=new $,n=new $){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),mo.subVectors(e,t),s.cross(mo);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,n,s,r){mo.subVectors(s,t),Wl.subVectors(n,t),xS.subVectors(e,t);const o=mo.dot(mo),c=mo.dot(Wl),f=mo.dot(xS),p=Wl.dot(Wl),m=Wl.dot(xS),v=o*p-c*c;if(v===0)return r.set(0,0,0),null;const y=1/v,x=(p*f-c*m)*y,S=(o*m-c*f)*y;return r.set(1-x-S,S,x)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,Zl)===null?!1:Zl.x>=0&&Zl.y>=0&&Zl.x+Zl.y<=1}static getInterpolation(e,t,n,s,r,o,c,f){return this.getBarycoord(e,t,n,s,Zl)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(r,Zl.x),f.addScaledVector(o,Zl.y),f.addScaledVector(c,Zl.z),f)}static getInterpolatedAttribute(e,t,n,s,r,o){return bS.setScalar(0),ES.setScalar(0),TS.setScalar(0),bS.fromBufferAttribute(e,t),ES.fromBufferAttribute(e,n),TS.fromBufferAttribute(e,s),o.setScalar(0),o.addScaledVector(bS,r.x),o.addScaledVector(ES,r.y),o.addScaledVector(TS,r.z),o}static isFrontFacing(e,t,n,s){return mo.subVectors(n,t),Wl.subVectors(e,t),mo.cross(Wl).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return mo.subVectors(this.c,this.b),Wl.subVectors(this.a,this.b),mo.cross(Wl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Va.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Va.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,r){return Va.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}containsPoint(e){return Va.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Va.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,r=this.c;let o,c;Ed.subVectors(s,n),Td.subVectors(r,n),AS.subVectors(e,n);const f=Ed.dot(AS),p=Td.dot(AS);if(f<=0&&p<=0)return t.copy(n);SS.subVectors(e,s);const m=Ed.dot(SS),v=Td.dot(SS);if(m>=0&&v<=m)return t.copy(s);const y=f*v-m*p;if(y<=0&&f>=0&&m<=0)return o=f/(f-m),t.copy(n).addScaledVector(Ed,o);MS.subVectors(e,r);const x=Ed.dot(MS),S=Td.dot(MS);if(S>=0&&x<=S)return t.copy(r);const T=x*p-f*S;if(T<=0&&p>=0&&S<=0)return c=p/(p-S),t.copy(n).addScaledVector(Td,c);const E=m*S-x*v;if(E<=0&&v-m>=0&&x-S>=0)return iR.subVectors(r,s),c=(v-m)/(v-m+(x-S)),t.copy(s).addScaledVector(iR,c);const A=1/(E+T+y);return o=T*A,c=y*A,t.copy(n).addScaledVector(Ed,o).addScaledVector(Td,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const e3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cu={h:0,s:0,l:0},hy={h:0,s:0,l:0};function CS(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Tt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Hs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Nn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,s=Nn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Nn.toWorkingColorSpace(this,s),this}setHSL(e,t,n,s=Nn.workingColorSpace){if(e=TE(e,1),t=hn(t,0,1),n=hn(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,o=2*n-r;this.r=CS(o,r,e+1/3),this.g=CS(o,r,e),this.b=CS(o,r,e-1/3)}return Nn.toWorkingColorSpace(this,s),this}setStyle(e,t=Hs){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],c=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Hs){const n=e3[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=oc(e.r),this.g=oc(e.g),this.b=oc(e.b),this}copyLinearToSRGB(e){return this.r=qd(e.r),this.g=qd(e.g),this.b=qd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Hs){return Nn.fromWorkingColorSpace(ea.copy(this),e),Math.round(hn(ea.r*255,0,255))*65536+Math.round(hn(ea.g*255,0,255))*256+Math.round(hn(ea.b*255,0,255))}getHexString(e=Hs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Nn.workingColorSpace){Nn.fromWorkingColorSpace(ea.copy(this),t);const n=ea.r,s=ea.g,r=ea.b,o=Math.max(n,s,r),c=Math.min(n,s,r);let f,p;const m=(c+o)/2;if(c===o)f=0,p=0;else{const v=o-c;switch(p=m<=.5?v/(o+c):v/(2-o-c),o){case n:f=(s-r)/v+(s<r?6:0);break;case s:f=(r-n)/v+2;break;case r:f=(n-s)/v+4;break}f/=6}return e.h=f,e.s=p,e.l=m,e}getRGB(e,t=Nn.workingColorSpace){return Nn.fromWorkingColorSpace(ea.copy(this),t),e.r=ea.r,e.g=ea.g,e.b=ea.b,e}getStyle(e=Hs){Nn.fromWorkingColorSpace(ea.copy(this),e);const t=ea.r,n=ea.g,s=ea.b;return e!==Hs?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(cu),this.setHSL(cu.h+e,cu.s+t,cu.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(cu),e.getHSL(hy);const n=Eg(cu.h,hy.h,t),s=Eg(cu.s,hy.s,t),r=Eg(cu.l,hy.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ea=new Tt;Tt.NAMES=e3;let g4=0;class ps extends Ml{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:g4++}),this.uuid=cr(),this.name="",this.type="Material",this.blending=eh,this.side=yl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=E_,this.blendDst=T_,this.blendEquation=gu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Tt(0,0,0),this.blendAlpha=0,this.depthFunc=sh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=tb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=zf,this.stencilZFail=zf,this.stencilZPass=zf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==eh&&(n.blending=this.blending),this.side!==yl&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==E_&&(n.blendSrc=this.blendSrc),this.blendDst!==T_&&(n.blendDst=this.blendDst),this.blendEquation!==gu&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==sh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==tb&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==zf&&(n.stencilFail=this.stencilFail),this.stencilZFail!==zf&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==zf&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const o=[];for(const c in r){const f=r[c];delete f.metadata,o.push(f)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Xa extends ps{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=lv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ic=v4();function v4(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let f=0;f<256;++f){const p=f-127;p<-27?(n[f]=0,n[f|256]=32768,s[f]=24,s[f|256]=24):p<-14?(n[f]=1024>>-p-14,n[f|256]=1024>>-p-14|32768,s[f]=-p-1,s[f|256]=-p-1):p<=15?(n[f]=p+15<<10,n[f|256]=p+15<<10|32768,s[f]=13,s[f|256]=13):p<128?(n[f]=31744,n[f|256]=64512,s[f]=24,s[f|256]=24):(n[f]=31744,n[f|256]=64512,s[f]=13,s[f|256]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let p=f<<13,m=0;for(;(p&8388608)===0;)p<<=1,m-=8388608;p&=-8388609,m+=947912704,r[f]=p|m}for(let f=1024;f<2048;++f)r[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)o[f]=f<<23;o[31]=1199570944,o[32]=2147483648;for(let f=33;f<63;++f)o[f]=2147483648+(f-32<<23);o[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:o,offsetTable:c}}function Ga(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=hn(i,-65504,65504),ic.floatView[0]=i;const e=ic.uint32View[0],t=e>>23&511;return ic.baseTable[t]+((e&8388607)>>ic.shiftTable[t])}function lg(i){const e=i>>10;return ic.uint32View[0]=ic.mantissaTable[ic.offsetTable[e]+(i&1023)]+ic.exponentTable[e],ic.floatView[0]}class Jf{static toHalfFloat(e){return Ga(e)}static fromHalfFloat(e){return lg(e)}}const ss=new $,dy=new Ke;let y4=0;class zn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:y4++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Xg,this.updateRanges=[],this.gpuType=Ii,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)dy.fromBufferAttribute(this,t),dy.applyMatrix3(e),this.setXY(t,dy.x,dy.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyMatrix3(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyMatrix4(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyNormalMatrix(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.transformDirection(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ma(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ma(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ma(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ma(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ma(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array),s=_n(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array),s=_n(s,this.array),r=_n(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Xg&&(e.usage=this.usage),e}}class _4 extends zn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class x4 extends zn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class A4 extends zn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class S4 extends zn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class CE extends zn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class M4 extends zn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class RE extends zn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class b4 extends zn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=lg(this.array[e*this.itemSize]);return this.normalized&&(t=Ma(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=Ga(t),this}getY(e){let t=lg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ma(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=Ga(t),this}getZ(e){let t=lg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ma(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=Ga(t),this}getW(e){let t=lg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ma(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=Ga(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array)),this.array[e+0]=Ga(t),this.array[e+1]=Ga(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array),s=_n(s,this.array)),this.array[e+0]=Ga(t),this.array[e+1]=Ga(n),this.array[e+2]=Ga(s),this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array),s=_n(s,this.array),r=_n(r,this.array)),this.array[e+0]=Ga(t),this.array[e+1]=Ga(n),this.array[e+2]=Ga(s),this.array[e+3]=Ga(r),this}}class It extends zn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let E4=0;const Dr=new Jt,RS=new On,Cd=new $,or=new zs,Ym=new zs,Ms=new $;class dn extends Ml{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:E4++}),this.uuid=cr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ZD(e)?RE:CE)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new gn().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Dr.makeRotationFromQuaternion(e),this.applyMatrix4(Dr),this}rotateX(e){return Dr.makeRotationX(e),this.applyMatrix4(Dr),this}rotateY(e){return Dr.makeRotationY(e),this.applyMatrix4(Dr),this}rotateZ(e){return Dr.makeRotationZ(e),this.applyMatrix4(Dr),this}translate(e,t,n){return Dr.makeTranslation(e,t,n),this.applyMatrix4(Dr),this}scale(e,t,n){return Dr.makeScale(e,t,n),this.applyMatrix4(Dr),this}lookAt(e){return RS.lookAt(e),RS.updateMatrix(),this.applyMatrix4(RS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cd).negate(),this.translate(Cd.x,Cd.y,Cd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new It(n,3))}else{const n=Math.min(e.length,t.count);for(let s=0;s<n;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new $(-1/0,-1/0,-1/0),new $(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const r=t[n];or.setFromBufferAttribute(r),this.morphTargetsRelative?(Ms.addVectors(this.boundingBox.min,or.min),this.boundingBox.expandByPoint(Ms),Ms.addVectors(this.boundingBox.max,or.max),this.boundingBox.expandByPoint(Ms)):(this.boundingBox.expandByPoint(or.min),this.boundingBox.expandByPoint(or.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Rs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new $,1/0);return}if(e){const n=this.boundingSphere.center;if(or.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const c=t[r];Ym.setFromBufferAttribute(c),this.morphTargetsRelative?(Ms.addVectors(or.min,Ym.min),or.expandByPoint(Ms),Ms.addVectors(or.max,Ym.max),or.expandByPoint(Ms)):(or.expandByPoint(Ym.min),or.expandByPoint(Ym.max))}or.getCenter(n);let s=0;for(let r=0,o=e.count;r<o;r++)Ms.fromBufferAttribute(e,r),s=Math.max(s,n.distanceToSquared(Ms));if(t)for(let r=0,o=t.length;r<o;r++){const c=t[r],f=this.morphTargetsRelative;for(let p=0,m=c.count;p<m;p++)Ms.fromBufferAttribute(c,p),f&&(Cd.fromBufferAttribute(e,p),Ms.add(Cd)),s=Math.max(s,n.distanceToSquared(Ms))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zn(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),c=[],f=[];for(let P=0;P<n.count;P++)c[P]=new $,f[P]=new $;const p=new $,m=new $,v=new $,y=new Ke,x=new Ke,S=new Ke,T=new $,E=new $;function A(P,L,N){p.fromBufferAttribute(n,P),m.fromBufferAttribute(n,L),v.fromBufferAttribute(n,N),y.fromBufferAttribute(r,P),x.fromBufferAttribute(r,L),S.fromBufferAttribute(r,N),m.sub(p),v.sub(p),x.sub(y),S.sub(y);const j=1/(x.x*S.y-S.x*x.y);isFinite(j)&&(T.copy(m).multiplyScalar(S.y).addScaledVector(v,-x.y).multiplyScalar(j),E.copy(v).multiplyScalar(x.x).addScaledVector(m,-S.x).multiplyScalar(j),c[P].add(T),c[L].add(T),c[N].add(T),f[P].add(E),f[L].add(E),f[N].add(E))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let P=0,L=w.length;P<L;++P){const N=w[P],j=N.start,ce=N.count;for(let ne=j,fe=j+ce;ne<fe;ne+=3)A(e.getX(ne+0),e.getX(ne+1),e.getX(ne+2))}const B=new $,D=new $,O=new $,I=new $;function z(P){O.fromBufferAttribute(s,P),I.copy(O);const L=c[P];B.copy(L),B.sub(O.multiplyScalar(O.dot(L))).normalize(),D.crossVectors(I,L);const j=D.dot(f[P])<0?-1:1;o.setXYZW(P,B.x,B.y,B.z,j)}for(let P=0,L=w.length;P<L;++P){const N=w[P],j=N.start,ce=N.count;for(let ne=j,fe=j+ce;ne<fe;ne+=3)z(e.getX(ne+0)),z(e.getX(ne+1)),z(e.getX(ne+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new zn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,x=n.count;y<x;y++)n.setXYZ(y,0,0,0);const s=new $,r=new $,o=new $,c=new $,f=new $,p=new $,m=new $,v=new $;if(e)for(let y=0,x=e.count;y<x;y+=3){const S=e.getX(y+0),T=e.getX(y+1),E=e.getX(y+2);s.fromBufferAttribute(t,S),r.fromBufferAttribute(t,T),o.fromBufferAttribute(t,E),m.subVectors(o,r),v.subVectors(s,r),m.cross(v),c.fromBufferAttribute(n,S),f.fromBufferAttribute(n,T),p.fromBufferAttribute(n,E),c.add(m),f.add(m),p.add(m),n.setXYZ(S,c.x,c.y,c.z),n.setXYZ(T,f.x,f.y,f.z),n.setXYZ(E,p.x,p.y,p.z)}else for(let y=0,x=t.count;y<x;y+=3)s.fromBufferAttribute(t,y+0),r.fromBufferAttribute(t,y+1),o.fromBufferAttribute(t,y+2),m.subVectors(o,r),v.subVectors(s,r),m.cross(v),n.setXYZ(y+0,m.x,m.y,m.z),n.setXYZ(y+1,m.x,m.y,m.z),n.setXYZ(y+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ms.fromBufferAttribute(e,t),Ms.normalize(),e.setXYZ(t,Ms.x,Ms.y,Ms.z)}toNonIndexed(){function e(c,f){const p=c.array,m=c.itemSize,v=c.normalized,y=new p.constructor(f.length*m);let x=0,S=0;for(let T=0,E=f.length;T<E;T++){c.isInterleavedBufferAttribute?x=f[T]*c.data.stride+c.offset:x=f[T]*m;for(let A=0;A<m;A++)y[S++]=p[x++]}return new zn(y,m,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new dn,n=this.index.array,s=this.attributes;for(const c in s){const f=s[c],p=e(f,n);t.setAttribute(c,p)}const r=this.morphAttributes;for(const c in r){const f=[],p=r[c];for(let m=0,v=p.length;m<v;m++){const y=p[m],x=e(y,n);f.push(x)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let c=0,f=o.length;c<f;c++){const p=o[c];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const p in f)f[p]!==void 0&&(e[p]=f[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n){const p=n[f];e.data.attributes[f]=p.toJSON(e.data)}const s={};let r=!1;for(const f in this.morphAttributes){const p=this.morphAttributes[f],m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v];m.push(x.toJSON(e.data))}m.length>0&&(s[f]=m,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const s=e.attributes;for(const p in s){const m=s[p];this.setAttribute(p,m.clone(t))}const r=e.morphAttributes;for(const p in r){const m=[],v=r[p];for(let y=0,x=v.length;y<x;y++)m.push(v[y].clone(t));this.morphAttributes[p]=m}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let p=0,m=o.length;p<m;p++){const v=o[p];this.addGroup(v.start,v.count,v.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const sR=new Jt,Ef=new dh,py=new Rs,aR=new $,my=new $,gy=new $,vy=new $,wS=new $,yy=new $,rR=new $,_y=new $;class Ei extends On{constructor(e=new dn,t=new Xa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const c=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const c=this.morphTargetInfluences;if(r&&c){yy.set(0,0,0);for(let f=0,p=r.length;f<p;f++){const m=c[f],v=r[f];m!==0&&(wS.fromBufferAttribute(v,e),o?yy.addScaledVector(wS,m):yy.addScaledVector(wS.sub(t),m))}t.add(yy)}return t}raycast(e,t){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),py.copy(n.boundingSphere),py.applyMatrix4(r),Ef.copy(e.ray).recast(e.near),!(py.containsPoint(Ef.origin)===!1&&(Ef.intersectSphere(py,aR)===null||Ef.origin.distanceToSquared(aR)>(e.far-e.near)**2))&&(sR.copy(r).invert(),Ef.copy(e.ray).applyMatrix4(sR),!(n.boundingBox!==null&&Ef.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Ef)))}_computeIntersections(e,t,n){let s;const r=this.geometry,o=this.material,c=r.index,f=r.attributes.position,p=r.attributes.uv,m=r.attributes.uv1,v=r.attributes.normal,y=r.groups,x=r.drawRange;if(c!==null)if(Array.isArray(o))for(let S=0,T=y.length;S<T;S++){const E=y[S],A=o[E.materialIndex],w=Math.max(E.start,x.start),B=Math.min(c.count,Math.min(E.start+E.count,x.start+x.count));for(let D=w,O=B;D<O;D+=3){const I=c.getX(D),z=c.getX(D+1),P=c.getX(D+2);s=xy(this,A,e,n,p,m,v,I,z,P),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=E.materialIndex,t.push(s))}}else{const S=Math.max(0,x.start),T=Math.min(c.count,x.start+x.count);for(let E=S,A=T;E<A;E+=3){const w=c.getX(E),B=c.getX(E+1),D=c.getX(E+2);s=xy(this,o,e,n,p,m,v,w,B,D),s&&(s.faceIndex=Math.floor(E/3),t.push(s))}}else if(f!==void 0)if(Array.isArray(o))for(let S=0,T=y.length;S<T;S++){const E=y[S],A=o[E.materialIndex],w=Math.max(E.start,x.start),B=Math.min(f.count,Math.min(E.start+E.count,x.start+x.count));for(let D=w,O=B;D<O;D+=3){const I=D,z=D+1,P=D+2;s=xy(this,A,e,n,p,m,v,I,z,P),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=E.materialIndex,t.push(s))}}else{const S=Math.max(0,x.start),T=Math.min(f.count,x.start+x.count);for(let E=S,A=T;E<A;E+=3){const w=E,B=E+1,D=E+2;s=xy(this,o,e,n,p,m,v,w,B,D),s&&(s.faceIndex=Math.floor(E/3),t.push(s))}}}}function T4(i,e,t,n,s,r,o,c){let f;if(e.side===Ea?f=n.intersectTriangle(o,r,s,!0,c):f=n.intersectTriangle(s,r,o,e.side===yl,c),f===null)return null;_y.copy(c),_y.applyMatrix4(i.matrixWorld);const p=t.ray.origin.distanceTo(_y);return p<t.near||p>t.far?null:{distance:p,point:_y.clone(),object:i}}function xy(i,e,t,n,s,r,o,c,f,p){i.getVertexPosition(c,my),i.getVertexPosition(f,gy),i.getVertexPosition(p,vy);const m=T4(i,e,t,n,my,gy,vy,rR);if(m){const v=new $;Va.getBarycoord(rR,my,gy,vy,v),s&&(m.uv=Va.getInterpolatedAttribute(s,c,f,p,v,new Ke)),r&&(m.uv1=Va.getInterpolatedAttribute(r,c,f,p,v,new Ke)),o&&(m.normal=Va.getInterpolatedAttribute(o,c,f,p,v,new $),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const y={a:c,b:f,c:p,normal:new $,materialIndex:0};Va.getNormal(my,gy,vy,y.normal),m.face=y,m.barycoord=v}return m}class ph extends dn{constructor(e=1,t=1,n=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:r,depthSegments:o};const c=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const f=[],p=[],m=[],v=[];let y=0,x=0;S("z","y","x",-1,-1,n,t,e,o,r,0),S("z","y","x",1,-1,n,t,-e,o,r,1),S("x","z","y",1,1,e,n,t,s,o,2),S("x","z","y",1,-1,e,n,-t,s,o,3),S("x","y","z",1,-1,e,t,n,s,r,4),S("x","y","z",-1,-1,e,t,-n,s,r,5),this.setIndex(f),this.setAttribute("position",new It(p,3)),this.setAttribute("normal",new It(m,3)),this.setAttribute("uv",new It(v,2));function S(T,E,A,w,B,D,O,I,z,P,L){const N=D/z,j=O/P,ce=D/2,ne=O/2,fe=I/2,_e=z+1,H=P+1;let W=0,Q=0;const ve=new $;for(let X=0;X<H;X++){const re=X*j-ne;for(let Ae=0;Ae<_e;Ae++){const Ce=Ae*N-ce;ve[T]=Ce*w,ve[E]=re*B,ve[A]=fe,p.push(ve.x,ve.y,ve.z),ve[T]=0,ve[E]=0,ve[A]=I>0?1:-1,m.push(ve.x,ve.y,ve.z),v.push(Ae/z),v.push(1-X/P),W+=1}}for(let X=0;X<P;X++)for(let re=0;re<z;re++){const Ae=y+re+_e*X,Ce=y+re+_e*(X+1),oe=y+(re+1)+_e*(X+1),Ne=y+(re+1)+_e*X;f.push(Ae,Ce,Ne),f.push(Ce,oe,Ne),Q+=6}c.addGroup(x,Q,L),x+=Q,y+=W}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ph(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cp(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function Aa(i){const e={};for(let t=0;t<i.length;t++){const n=cp(i[t]);for(const s in n)e[s]=n[s]}return e}function C4(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function t3(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Nn.workingColorSpace}const n3={clone:cp,merge:Aa};var R4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,w4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ya extends ps{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=R4,this.fragmentShader=w4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cp(e.uniforms),this.uniformsGroups=C4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Px extends On{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt,this.coordinateSystem=Pr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const uu=new $,oR=new Ke,lR=new Ke;class ki extends Px{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=op*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(th*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return op*2*Math.atan(Math.tan(th*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){uu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(uu.x,uu.y).multiplyScalar(-e/uu.z),uu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(uu.x,uu.y).multiplyScalar(-e/uu.z)}getViewSize(e,t){return this.getViewBounds(e,oR,lR),t.subVectors(lR,oR)}setViewOffset(e,t,n,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(th*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const f=o.fullWidth,p=o.fullHeight;r+=o.offsetX*s/f,t-=o.offsetY*n/p,s*=o.width/f,n*=o.height/p}const c=this.filmOffset;c!==0&&(r+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Rd=-90,wd=1;class i3 extends On{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new ki(Rd,wd,e,t);s.layers=this.layers,this.add(s);const r=new ki(Rd,wd,e,t);r.layers=this.layers,this.add(r);const o=new ki(Rd,wd,e,t);o.layers=this.layers,this.add(o);const c=new ki(Rd,wd,e,t);c.layers=this.layers,this.add(c);const f=new ki(Rd,wd,e,t);f.layers=this.layers,this.add(f);const p=new ki(Rd,wd,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,r,o,c,f]=t;for(const p of t)this.remove(p);if(e===Pr)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===jg)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,c,f,p,m]=this.children,v=e.getRenderTarget(),y=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,r),e.setRenderTarget(n,1,s),e.render(t,o),e.setRenderTarget(n,2,s),e.render(t,c),e.setRenderTarget(n,3,s),e.render(t,f),e.setRenderTarget(n,4,s),e.render(t,p),n.texture.generateMipmaps=T,e.setRenderTarget(n,5,s),e.render(t,m),e.setRenderTarget(v,y,x),e.xr.enabled=S,n.texture.needsPMREMUpdate=!0}}class dv extends Wn{constructor(e=[],t=_l,n,s,r,o,c,f,p,m){super(e,t,n,s,r,o,c,f,p,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wE extends Hr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new dv(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Jn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new ph(5,5,5),r=new Ya({name:"CubemapFromEquirect",uniforms:cp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ea,blending:pl});r.uniforms.tEquirect.value=t;const o=new Ei(s,r),c=t.minFilter;return t.minFilter===Ir&&(t.minFilter=Jn),new i3(1,10,this).update(e,o),t.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,s=!0){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,s);e.setRenderTarget(r)}}class sc extends On{constructor(){super(),this.isGroup=!0,this.type="Group"}}const B4={type:"move"};class p_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new sc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new sc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new sc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,r=null,o=null;const c=this._targetRay,f=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){o=!0;for(const T of e.hand.values()){const E=t.getJointPose(T,n),A=this._getHandJoint(p,T);E!==null&&(A.matrix.fromArray(E.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,A.jointRadius=E.radius),A.visible=E!==null}const m=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],y=m.position.distanceTo(v.position),x=.02,S=.005;p.inputState.pinching&&y>x+S?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&y<=x-S&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(f.matrix.fromArray(r.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,r.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(r.linearVelocity)):f.hasLinearVelocity=!1,r.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(r.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(B4)))}return c!==null&&(c.visible=s!==null),f!==null&&(f.visible=r!==null),p!==null&&(p.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new sc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Fx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Tt(e),this.density=t}clone(){return new Fx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Hx{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Tt(e),this.near=t,this.far=n}clone(){return new Hx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class pv extends On{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ur,this.environmentIntensity=1,this.environmentRotation=new ur,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class mv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Xg,this.updateRanges=[],this.version=0,this.uuid=cr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const xa=new $;class bu{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)xa.fromBufferAttribute(this,t),xa.applyMatrix4(e),this.setXYZ(t,xa.x,xa.y,xa.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)xa.fromBufferAttribute(this,t),xa.applyNormalMatrix(e),this.setXYZ(t,xa.x,xa.y,xa.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)xa.fromBufferAttribute(this,t),xa.transformDirection(e),this.setXYZ(t,xa.x,xa.y,xa.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Ma(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ma(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ma(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ma(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ma(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array),s=_n(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array),s=_n(s,this.array),r=_n(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new zn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new bu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class BE extends ps{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Tt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Bd;const qm=new $,Dd=new $,Ud=new $,Ld=new Ke,Jm=new Ke,s3=new Jt,Ay=new $,Km=new $,Sy=new $,cR=new Ke,BS=new Ke,uR=new Ke;class a3 extends On{constructor(e=new BE){if(super(),this.isSprite=!0,this.type="Sprite",Bd===void 0){Bd=new dn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new mv(t,5);Bd.setIndex([0,1,2,0,2,3]),Bd.setAttribute("position",new bu(n,3,0,!1)),Bd.setAttribute("uv",new bu(n,2,3,!1))}this.geometry=Bd,this.material=e,this.center=new Ke(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Dd.setFromMatrixScale(this.matrixWorld),s3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ud.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Dd.multiplyScalar(-Ud.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const o=this.center;My(Ay.set(-.5,-.5,0),Ud,o,Dd,s,r),My(Km.set(.5,-.5,0),Ud,o,Dd,s,r),My(Sy.set(.5,.5,0),Ud,o,Dd,s,r),cR.set(0,0),BS.set(1,0),uR.set(1,1);let c=e.ray.intersectTriangle(Ay,Km,Sy,!1,qm);if(c===null&&(My(Km.set(-.5,.5,0),Ud,o,Dd,s,r),BS.set(0,1),c=e.ray.intersectTriangle(Ay,Sy,Km,!1,qm),c===null))return;const f=e.ray.origin.distanceTo(qm);f<e.near||f>e.far||t.push({distance:f,point:qm.clone(),uv:Va.getInterpolation(qm,Ay,Km,Sy,cR,BS,uR,new Ke),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function My(i,e,t,n,s,r){Ld.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(Jm.x=r*Ld.x-s*Ld.y,Jm.y=s*Ld.x+r*Ld.y):Jm.copy(Ld),i.copy(e),i.x+=Jm.x,i.y+=Jm.y,i.applyMatrix4(s3)}const by=new $,fR=new $;class r3 extends On{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const s=t.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){by.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(by);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){by.setFromMatrixPosition(e.matrixWorld),fR.setFromMatrixPosition(this.matrixWorld);const n=by.distanceTo(fR)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let o=t[s].distance;if(t[s].object.visible&&(o-=o*t[s].hysteresis),n>=o)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const o=n[s];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const hR=new $,dR=new Hn,pR=new Hn,D4=new $,mR=new Jt,Ey=new $,DS=new Rs,gR=new Jt,US=new dh;class DE extends Ei{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=$M,this.bindMatrix=new Jt,this.bindMatrixInverse=new Jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new zs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ey),this.boundingBox.expandByPoint(Ey)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Rs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ey),this.boundingSphere.expandByPoint(Ey)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),DS.copy(this.boundingSphere),DS.applyMatrix4(s),e.ray.intersectsSphere(DS)!==!1&&(gR.copy(s).invert(),US.copy(e.ray).applyMatrix4(gR),!(this.boundingBox!==null&&US.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,US)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Hn,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===$M?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===OD?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;dR.fromBufferAttribute(s.attributes.skinIndex,e),pR.fromBufferAttribute(s.attributes.skinWeight,e),hR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=pR.getComponent(r);if(o!==0){const c=dR.getComponent(r);mR.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(D4.copy(hR).applyMatrix4(mR),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class zx extends On{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Mo extends Wn{constructor(e=null,t=1,n=1,s,r,o,c,f,p=Ts,m=Ts,v,y){super(null,o,c,f,p,m,s,r,v,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vR=new Jt,U4=new Jt;class gv{constructor(e=[],t=[]){this.uuid=cr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new Jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Jt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const c=e[r]?e[r].matrixWorld:U4;vR.multiplyMatrices(c,t[r]),vR.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new gv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Mo(t,e,e,Zi,Ii);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const r=e.bones[n];let o=t[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new zx),this.bones.push(o),this.boneInverses.push(new Jt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const o=t[s];e.bones.push(o.uuid);const c=n[s];e.boneInverses.push(c.toArray())}return e}}class ah extends zn{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Nd=new Jt,yR=new Jt,Ty=[],_R=new zs,L4=new Jt,Wm=new Ei,Zm=new Rs;class UE extends Ei{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ah(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,L4)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new zs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Nd),_R.copy(e.boundingBox).applyMatrix4(Nd),this.boundingBox.union(_R)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Rs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Nd),Zm.copy(e.boundingSphere).applyMatrix4(Nd),this.boundingSphere.union(Zm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,o=e*r+1;for(let c=0;c<n.length;c++)n[c]=s[o+c]}raycast(e,t){const n=this.matrixWorld,s=this.count;if(Wm.geometry=this.geometry,Wm.material=this.material,Wm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Zm.copy(this.boundingSphere),Zm.applyMatrix4(n),e.ray.intersectsSphere(Zm)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Nd),yR.multiplyMatrices(n,Nd),Wm.matrixWorld=yR,Wm.raycast(e,Ty);for(let o=0,c=Ty.length;o<c;o++){const f=Ty[o];f.instanceId=r,f.object=this,t.push(f)}Ty.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ah(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Mo(new Float32Array(s*this.count),s,this.count,uv,Ii));const r=this.morphTexture.source.data.data;let o=0;for(let p=0;p<n.length;p++)o+=n[p];const c=this.geometry.morphTargetsRelative?1:1-o,f=s*e;r[f]=c,r.set(n,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const LS=new $,N4=new $,O4=new gn;class tc{constructor(e=new $(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=LS.subVectors(n,t).cross(N4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(LS),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||O4.getNormalMatrix(e),s=this.coplanarPoint(LS).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Tf=new Rs,Cy=new $;class xp{constructor(e=new tc,t=new tc,n=new tc,s=new tc,r=new tc,o=new tc){this.planes=[e,t,n,s,r,o]}set(e,t,n,s,r,o){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(s),c[4].copy(r),c[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Pr){const n=this.planes,s=e.elements,r=s[0],o=s[1],c=s[2],f=s[3],p=s[4],m=s[5],v=s[6],y=s[7],x=s[8],S=s[9],T=s[10],E=s[11],A=s[12],w=s[13],B=s[14],D=s[15];if(n[0].setComponents(f-r,y-p,E-x,D-A).normalize(),n[1].setComponents(f+r,y+p,E+x,D+A).normalize(),n[2].setComponents(f+o,y+m,E+S,D+w).normalize(),n[3].setComponents(f-o,y-m,E-S,D-w).normalize(),n[4].setComponents(f-c,y-v,E-T,D-B).normalize(),t===Pr)n[5].setComponents(f+c,y+v,E+T,D+B).normalize();else if(t===jg)n[5].setComponents(c,v,T,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Tf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Tf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Tf)}intersectsSprite(e){return Tf.center.set(0,0,0),Tf.radius=.7071067811865476,Tf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Tf)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(Cy.x=s.normal.x>0?e.max.x:e.min.x,Cy.y=s.normal.y>0?e.max.y:e.min.y,Cy.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Cy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ll=new Jt,cl=new xp;class Gx{constructor(){this.coordinateSystem=Pr}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,this.coordinateSystem),cl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,this.coordinateSystem),cl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,this.coordinateSystem),cl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,this.coordinateSystem),cl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,this.coordinateSystem),cl.containsPoint(e))return!0}return!1}clone(){return new Gx}}function NS(i,e){return i-e}function I4(i,e){return i.z-e.z}function P4(i,e){return e.z-i.z}class F4{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,s){const r=this.pool,o=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const c=r[this.index];o.push(c),this.index++,c.start=e,c.count=t,c.z=n,c.index=s}reset(){this.list.length=0,this.index=0}}const za=new Jt,H4=new Tt(1,1,1),xR=new xp,z4=new Gx,Ry=new zs,Cf=new Rs,Qm=new $,AR=new $,G4=new $,OS=new F4,ta=new Ei,wy=[];function V4(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let o=0;o<n;o++)e.setComponent(r+t,o,i.getComponent(r,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Rf(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class o3 extends Ei{constructor(e,t,n=t*2,s){super(new dn,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Mo(t,e,e,Zi,Ii);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Mo(t,e,e,fv,xl);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Mo(t,e,e,Zi,Ii);n.colorSpace=Nn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const o=e.getAttribute(r),{array:c,itemSize:f,normalized:p}=o,m=new c.constructor(n*f),v=new zn(m,f,p);t.setAttribute(r,v)}if(e.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new zn(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),r=t.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zs);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,za),this.getBoundingBoxAt(r,Ry).applyMatrix4(za),e.union(Ry)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Rs);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,za),this.getBoundingSphereAt(r,Cf).applyMatrix4(za),e.union(Cf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(NS),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;za.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const o=this._colorsTexture;return o&&(H4.toArray(o.image.data,s*4),o.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?o.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(NS),f=this._availableGeometryIds.shift(),r[f]=s):(f=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(f,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),o=t.getIndex(),c=this._geometryInfo[e];if(s&&o.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=c.vertexStart,p=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const m in n.attributes){const v=t.getAttribute(m),y=n.getAttribute(m);V4(v,y,f);const x=v.itemSize;for(let S=v.count,T=p;S<T;S++){const E=f+S;for(let A=0;A<x;A++)y.setComponent(E,A,0)}y.needsUpdate=!0,y.addUpdateRange(f*x,p*x)}if(s){const m=c.indexStart,v=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let y=0;y<o.count;y++)r.setX(m+y,f+o.getX(y));for(let y=o.count,x=v;y<x;y++)r.setX(m+y,f);r.needsUpdate=!0,r.addUpdateRange(m,c.reservedIndexCount)}return c.start=s?c.indexStart:c.vertexStart,c.count=s?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,s=n.map((o,c)=>c).sort((o,c)=>n[o].vertexStart-n[c].vertexStart),r=this.geometry;for(let o=0,c=n.length;o<c;o++){const f=s[o],p=n[f];if(p.active!==!1){if(r.index!==null){if(p.indexStart!==t){const{indexStart:m,vertexStart:v,reservedIndexCount:y}=p,x=r.index,S=x.array,T=e-v;for(let E=m;E<m+y;E++)S[E]=S[E]+T;x.array.copyWithin(t,m,m+y),x.addUpdateRange(t,y),p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:m,reservedVertexCount:v}=p,y=r.attributes;for(const x in y){const S=y[x],{array:T,itemSize:E}=S;T.copyWithin(e*E,m*E,(m+v)*E),S.addUpdateRange(e*E,v*E)}p.vertexStart=e}e+=p.reservedVertexCount,p.start=r.index?p.indexStart:p.vertexStart,this._nextIndexStart=r.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const r=new zs,o=n.index,c=n.attributes.position;for(let f=s.start,p=s.start+s.count;f<p;f++){let m=f;o&&(m=o.getX(m)),r.expandByPoint(Qm.fromBufferAttribute(c,m))}s.boundingBox=r}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const r=new Rs;this.getBoundingBoxAt(e,Ry),Ry.getCenter(r.center);const o=n.index,c=n.attributes.position;let f=0;for(let p=s.start,m=s.start+s.count;p<m;p++){let v=p;o&&(v=o.getX(v)),Qm.fromBufferAttribute(c,v),f=Math.max(f,r.center.distanceToSquared(Qm))}r.radius=Math.sqrt(f),s.boundingSphere=r}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(NS);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),r=new Int32Array(e);Rf(this._multiDrawCounts,s),Rf(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=e;const o=this._indirectTexture,c=this._matricesTexture,f=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Rf(o.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),Rf(c.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),Rf(f.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(f=>f.indexStart+f.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new dn,this._initializeGeometry(r));const o=this.geometry;r.index&&Rf(r.index.array,o.index.array);for(const c in r.attributes)Rf(r.attributes[c].array,o.attributes[c].array)}raycast(e,t){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,o=this.geometry;ta.material=this.material,ta.geometry.index=o.index,ta.geometry.attributes=o.attributes,ta.geometry.boundingBox===null&&(ta.geometry.boundingBox=new zs),ta.geometry.boundingSphere===null&&(ta.geometry.boundingSphere=new Rs);for(let c=0,f=n.length;c<f;c++){if(!n[c].visible||!n[c].active)continue;const p=n[c].geometryIndex,m=s[p];ta.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(c,ta.matrixWorld).premultiply(r),this.getBoundingBoxAt(p,ta.geometry.boundingBox),this.getBoundingSphereAt(p,ta.geometry.boundingSphere),ta.raycast(e,wy);for(let v=0,y=wy.length;v<y;v++){const x=wy[v];x.object=this,x.batchId=c,t.push(x)}wy.length=0}ta.material=null,ta.geometry.index=null,ta.geometry.attributes={},ta.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=s.getIndex(),c=o===null?1:o.array.BYTES_PER_ELEMENT,f=this._instanceInfo,p=this._multiDrawStarts,m=this._multiDrawCounts,v=this._geometryInfo,y=this.perObjectFrustumCulled,x=this._indirectTexture,S=x.image.data,T=n.isArrayCamera?z4:xR;y&&!n.isArrayCamera&&(za.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),xR.setFromProjectionMatrix(za,e.coordinateSystem));let E=0;if(this.sortObjects){za.copy(this.matrixWorld).invert(),Qm.setFromMatrixPosition(n.matrixWorld).applyMatrix4(za),AR.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(za);for(let B=0,D=f.length;B<D;B++)if(f[B].visible&&f[B].active){const O=f[B].geometryIndex;this.getMatrixAt(B,za),this.getBoundingSphereAt(O,Cf).applyMatrix4(za);let I=!1;if(y&&(I=!T.intersectsSphere(Cf,n)),!I){const z=v[O],P=G4.subVectors(Cf.center,Qm).dot(AR);OS.push(z.start,z.count,P,B)}}const A=OS.list,w=this.customSort;w===null?A.sort(r.transparent?P4:I4):w.call(this,A,n);for(let B=0,D=A.length;B<D;B++){const O=A[B];p[E]=O.start*c,m[E]=O.count,S[E]=O.index,E++}OS.reset()}else for(let A=0,w=f.length;A<w;A++)if(f[A].visible&&f[A].active){const B=f[A].geometryIndex;let D=!1;if(y&&(this.getMatrixAt(A,za),this.getBoundingSphereAt(B,Cf).applyMatrix4(za),D=!T.intersectsSphere(Cf,n)),!D){const O=v[B];p[E]=O.start*c,m[E]=O.count,S[E]=A,E++}}x.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(e,t,n,s,r,o){this.onBeforeRender(e,null,s,r,o)}}class sa extends ps{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Tt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ox=new $,lx=new $,SR=new Jt,$m=new dh,By=new Rs,IS=new $,MR=new $;class fc extends On{constructor(e=new dn,t=new sa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,r=t.count;s<r;s++)ox.fromBufferAttribute(t,s-1),lx.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=ox.distanceTo(lx);e.setAttribute("lineDistance",new It(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),By.copy(n.boundingSphere),By.applyMatrix4(s),By.radius+=r,e.ray.intersectsSphere(By)===!1)return;SR.copy(s).invert(),$m.copy(e.ray).applyMatrix4(SR);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,p=this.isLineSegments?2:1,m=n.index,y=n.attributes.position;if(m!==null){const x=Math.max(0,o.start),S=Math.min(m.count,o.start+o.count);for(let T=x,E=S-1;T<E;T+=p){const A=m.getX(T),w=m.getX(T+1),B=Dy(this,e,$m,f,A,w,T);B&&t.push(B)}if(this.isLineLoop){const T=m.getX(S-1),E=m.getX(x),A=Dy(this,e,$m,f,T,E,S-1);A&&t.push(A)}}else{const x=Math.max(0,o.start),S=Math.min(y.count,o.start+o.count);for(let T=x,E=S-1;T<E;T+=p){const A=Dy(this,e,$m,f,T,T+1,T);A&&t.push(A)}if(this.isLineLoop){const T=Dy(this,e,$m,f,S-1,x,S-1);T&&t.push(T)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const c=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function Dy(i,e,t,n,s,r,o){const c=i.geometry.attributes.position;if(ox.fromBufferAttribute(c,s),lx.fromBufferAttribute(c,r),t.distanceSqToSegment(ox,lx,IS,MR)>n)return;IS.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(IS);if(!(p<e.near||p>e.far))return{distance:p,point:MR.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const bR=new $,ER=new $;class To extends fc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,r=t.count;s<r;s+=2)bR.fromBufferAttribute(t,s),ER.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+bR.distanceTo(ER);e.setAttribute("lineDistance",new It(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LE extends fc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Vx extends ps{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Tt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const TR=new Jt,ib=new dh,Uy=new Rs,Ly=new $;class NE extends On{constructor(e=new dn,t=new Vx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Uy.copy(n.boundingSphere),Uy.applyMatrix4(s),Uy.radius+=r,e.ray.intersectsSphere(Uy)===!1)return;TR.copy(s).invert(),ib.copy(e.ray).applyMatrix4(TR);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,p=n.index,v=n.attributes.position;if(p!==null){const y=Math.max(0,o.start),x=Math.min(p.count,o.start+o.count);for(let S=y,T=x;S<T;S++){const E=p.getX(S);Ly.fromBufferAttribute(v,E),CR(Ly,E,f,s,e,t,this)}}else{const y=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let S=y,T=x;S<T;S++)Ly.fromBufferAttribute(v,S),CR(Ly,S,f,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const c=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function CR(i,e,t,n,s,r,o){const c=ib.distanceSqToPoint(i);if(c<t){const f=new $;ib.closestPointToPoint(i,f),f.applyMatrix4(n);const p=s.ray.origin.distanceTo(f);if(p<s.near||p>s.far)return;r.push({distance:p,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class l3 extends Wn{constructor(e,t,n,s,r=Jn,o=Jn,c,f,p){super(e,t,n,s,r,o,c,f,p),this.isVideoTexture=!0,this.generateMipmaps=!1;const m=this;function v(){m.needsUpdate=!0,e.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(v)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class k4 extends l3{constructor(e,t,n,s,r,o,c,f){super({},e,t,n,s,r,o,c,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class X4 extends Wn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ts,this.minFilter=Ts,this.generateMipmaps=!1,this.needsUpdate=!0}}class kx extends Wn{constructor(e,t,n,s,r,o,c,f,p,m,v,y){super(null,o,c,f,p,m,s,r,v,y),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class j4 extends kx{constructor(e,t,n,s,r,o){super(e,t,n,r,o),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Wi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Y4 extends kx{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,_l),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class q4 extends Wn{constructor(e,t,n,s,r,o,c,f,p){super(e,t,n,s,r,o,c,f,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xx extends Wn{constructor(e,t,n=xl,s,r,o,c=Ts,f=Ts,p,m=ip){if(m!==ip&&m!==sp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,o,c,f,m,n,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new vu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class J4 extends Xx{constructor(e=1,t=1,n=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class jx extends dn{constructor(e=1,t=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:s,heightSegments:r},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const o=[],c=[],f=[],p=[],m=t/2,v=Math.PI/2*e,y=t,x=2*v+y,S=n*2+r,T=s+1,E=new $,A=new $;for(let w=0;w<=S;w++){let B=0,D=0,O=0,I=0;if(w<=n){const L=w/n,N=L*Math.PI/2;D=-m-e*Math.cos(N),O=e*Math.sin(N),I=-e*Math.cos(N),B=L*v}else if(w<=n+r){const L=(w-n)/r;D=-m+L*t,O=e,I=0,B=v+L*y}else{const L=(w-n-r)/n,N=L*Math.PI/2;D=m+e*Math.sin(N),O=e*Math.cos(N),I=e*Math.sin(N),B=v+y+L*v}const z=Math.max(0,Math.min(1,B/x));let P=0;w===0?P=.5/s:w===S&&(P=-.5/s);for(let L=0;L<=s;L++){const N=L/s,j=N*Math.PI*2,ce=Math.sin(j),ne=Math.cos(j);A.x=-O*ne,A.y=D,A.z=O*ce,c.push(A.x,A.y,A.z),E.set(-O*ne,I,O*ce),E.normalize(),f.push(E.x,E.y,E.z),p.push(N+P,z)}if(w>0){const L=(w-1)*T;for(let N=0;N<s;N++){const j=L+N,ce=L+N+1,ne=w*T+N,fe=w*T+N+1;o.push(j,ce,ne),o.push(ce,fe,ne)}}}this.setIndex(o),this.setAttribute("position",new It(c,3)),this.setAttribute("normal",new It(f,3)),this.setAttribute("uv",new It(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jx(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Yx extends dn{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const r=[],o=[],c=[],f=[],p=new $,m=new Ke;o.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let v=0,y=3;v<=t;v++,y+=3){const x=n+v/t*s;p.x=e*Math.cos(x),p.y=e*Math.sin(x),o.push(p.x,p.y,p.z),c.push(0,0,1),m.x=(o[y]/e+1)/2,m.y=(o[y+1]/e+1)/2,f.push(m.x,m.y)}for(let v=1;v<=t;v++)r.push(v,v+1,0);this.setIndex(r),this.setAttribute("position",new It(o,3)),this.setAttribute("normal",new It(c,3)),this.setAttribute("uv",new It(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class vv extends dn{constructor(e=1,t=1,n=1,s=32,r=1,o=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:c,thetaLength:f};const p=this;s=Math.floor(s),r=Math.floor(r);const m=[],v=[],y=[],x=[];let S=0;const T=[],E=n/2;let A=0;w(),o===!1&&(e>0&&B(!0),t>0&&B(!1)),this.setIndex(m),this.setAttribute("position",new It(v,3)),this.setAttribute("normal",new It(y,3)),this.setAttribute("uv",new It(x,2));function w(){const D=new $,O=new $;let I=0;const z=(t-e)/n;for(let P=0;P<=r;P++){const L=[],N=P/r,j=N*(t-e)+e;for(let ce=0;ce<=s;ce++){const ne=ce/s,fe=ne*f+c,_e=Math.sin(fe),H=Math.cos(fe);O.x=j*_e,O.y=-N*n+E,O.z=j*H,v.push(O.x,O.y,O.z),D.set(_e,z,H).normalize(),y.push(D.x,D.y,D.z),x.push(ne,1-N),L.push(S++)}T.push(L)}for(let P=0;P<s;P++)for(let L=0;L<r;L++){const N=T[L][P],j=T[L+1][P],ce=T[L+1][P+1],ne=T[L][P+1];(e>0||L!==0)&&(m.push(N,j,ne),I+=3),(t>0||L!==r-1)&&(m.push(j,ce,ne),I+=3)}p.addGroup(A,I,0),A+=I}function B(D){const O=S,I=new Ke,z=new $;let P=0;const L=D===!0?e:t,N=D===!0?1:-1;for(let ce=1;ce<=s;ce++)v.push(0,E*N,0),y.push(0,N,0),x.push(.5,.5),S++;const j=S;for(let ce=0;ce<=s;ce++){const fe=ce/s*f+c,_e=Math.cos(fe),H=Math.sin(fe);z.x=L*H,z.y=E*N,z.z=L*_e,v.push(z.x,z.y,z.z),y.push(0,N,0),I.x=_e*.5+.5,I.y=H*.5*N+.5,x.push(I.x,I.y),S++}for(let ce=0;ce<s;ce++){const ne=O+ce,fe=j+ce;D===!0?m.push(fe,fe+1,ne):m.push(fe+1,fe,ne),P+=3}p.addGroup(A,P,D===!0?1:2),A+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yv extends vv{constructor(e=1,t=1,n=32,s=1,r=!1,o=0,c=Math.PI*2){super(0,e,t,n,s,r,o,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:c}}static fromJSON(e){return new yv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Cu extends dn{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const r=[],o=[];c(s),p(n),m(),this.setAttribute("position",new It(r,3)),this.setAttribute("normal",new It(r.slice(),3)),this.setAttribute("uv",new It(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function c(w){const B=new $,D=new $,O=new $;for(let I=0;I<t.length;I+=3)x(t[I+0],B),x(t[I+1],D),x(t[I+2],O),f(B,D,O,w)}function f(w,B,D,O){const I=O+1,z=[];for(let P=0;P<=I;P++){z[P]=[];const L=w.clone().lerp(D,P/I),N=B.clone().lerp(D,P/I),j=I-P;for(let ce=0;ce<=j;ce++)ce===0&&P===I?z[P][ce]=L:z[P][ce]=L.clone().lerp(N,ce/j)}for(let P=0;P<I;P++)for(let L=0;L<2*(I-P)-1;L++){const N=Math.floor(L/2);L%2===0?(y(z[P][N+1]),y(z[P+1][N]),y(z[P][N])):(y(z[P][N+1]),y(z[P+1][N+1]),y(z[P+1][N]))}}function p(w){const B=new $;for(let D=0;D<r.length;D+=3)B.x=r[D+0],B.y=r[D+1],B.z=r[D+2],B.normalize().multiplyScalar(w),r[D+0]=B.x,r[D+1]=B.y,r[D+2]=B.z}function m(){const w=new $;for(let B=0;B<r.length;B+=3){w.x=r[B+0],w.y=r[B+1],w.z=r[B+2];const D=E(w)/2/Math.PI+.5,O=A(w)/Math.PI+.5;o.push(D,1-O)}S(),v()}function v(){for(let w=0;w<o.length;w+=6){const B=o[w+0],D=o[w+2],O=o[w+4],I=Math.max(B,D,O),z=Math.min(B,D,O);I>.9&&z<.1&&(B<.2&&(o[w+0]+=1),D<.2&&(o[w+2]+=1),O<.2&&(o[w+4]+=1))}}function y(w){r.push(w.x,w.y,w.z)}function x(w,B){const D=w*3;B.x=e[D+0],B.y=e[D+1],B.z=e[D+2]}function S(){const w=new $,B=new $,D=new $,O=new $,I=new Ke,z=new Ke,P=new Ke;for(let L=0,N=0;L<r.length;L+=9,N+=6){w.set(r[L+0],r[L+1],r[L+2]),B.set(r[L+3],r[L+4],r[L+5]),D.set(r[L+6],r[L+7],r[L+8]),I.set(o[N+0],o[N+1]),z.set(o[N+2],o[N+3]),P.set(o[N+4],o[N+5]),O.copy(w).add(B).add(D).divideScalar(3);const j=E(O);T(I,N+0,w,j),T(z,N+2,B,j),T(P,N+4,D,j)}}function T(w,B,D,O){O<0&&w.x===1&&(o[B]=w.x-1),D.x===0&&D.z===0&&(o[B]=O/2/Math.PI+.5)}function E(w){return Math.atan2(w.z,-w.x)}function A(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cu(e.vertices,e.indices,e.radius,e.details)}}class qx extends Cu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qx(e.radius,e.detail)}}const Ny=new $,Oy=new $,PS=new $,Iy=new Va;class c3 extends dn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(th*t),o=e.getIndex(),c=e.getAttribute("position"),f=o?o.count:c.count,p=[0,0,0],m=["a","b","c"],v=new Array(3),y={},x=[];for(let S=0;S<f;S+=3){o?(p[0]=o.getX(S),p[1]=o.getX(S+1),p[2]=o.getX(S+2)):(p[0]=S,p[1]=S+1,p[2]=S+2);const{a:T,b:E,c:A}=Iy;if(T.fromBufferAttribute(c,p[0]),E.fromBufferAttribute(c,p[1]),A.fromBufferAttribute(c,p[2]),Iy.getNormal(PS),v[0]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,v[1]=`${Math.round(E.x*s)},${Math.round(E.y*s)},${Math.round(E.z*s)}`,v[2]=`${Math.round(A.x*s)},${Math.round(A.y*s)},${Math.round(A.z*s)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let w=0;w<3;w++){const B=(w+1)%3,D=v[w],O=v[B],I=Iy[m[w]],z=Iy[m[B]],P=`${D}_${O}`,L=`${O}_${D}`;L in y&&y[L]?(PS.dot(y[L].normal)<=r&&(x.push(I.x,I.y,I.z),x.push(z.x,z.y,z.z)),y[L]=null):P in y||(y[P]={index0:p[w],index1:p[B],normal:PS.clone()})}}for(const S in y)if(y[S]){const{index0:T,index1:E}=y[S];Ny.fromBufferAttribute(c,T),Oy.fromBufferAttribute(c,E),x.push(Ny.x,Ny.y,Ny.z),x.push(Oy.x,Oy.y,Oy.z)}this.setAttribute("position",new It(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Co{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let s=0;const r=n.length;let o;t?o=t:o=e*n[r-1];let c=0,f=r-1,p;for(;c<=f;)if(s=Math.floor(c+(f-c)/2),p=n[s]-o,p<0)c=s+1;else if(p>0)f=s-1;else{f=s;break}if(s=f,n[s]===o)return s/(r-1);const m=n[s],y=n[s+1]-m,x=(o-m)/y;return(s+x)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),c=this.getPoint(r),f=t||(o.isVector2?new Ke:new $);return f.copy(c).sub(o).normalize(),f}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new $,s=[],r=[],o=[],c=new $,f=new Jt;for(let x=0;x<=e;x++){const S=x/e;s[x]=this.getTangentAt(S,new $)}r[0]=new $,o[0]=new $;let p=Number.MAX_VALUE;const m=Math.abs(s[0].x),v=Math.abs(s[0].y),y=Math.abs(s[0].z);m<=p&&(p=m,n.set(1,0,0)),v<=p&&(p=v,n.set(0,1,0)),y<=p&&n.set(0,0,1),c.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],c),o[0].crossVectors(s[0],r[0]);for(let x=1;x<=e;x++){if(r[x]=r[x-1].clone(),o[x]=o[x-1].clone(),c.crossVectors(s[x-1],s[x]),c.length()>Number.EPSILON){c.normalize();const S=Math.acos(hn(s[x-1].dot(s[x]),-1,1));r[x].applyMatrix4(f.makeRotationAxis(c,S))}o[x].crossVectors(s[x],r[x])}if(t===!0){let x=Math.acos(hn(r[0].dot(r[e]),-1,1));x/=e,s[0].dot(c.crossVectors(r[0],r[e]))>0&&(x=-x);for(let S=1;S<=e;S++)r[S].applyMatrix4(f.makeRotationAxis(s[S],x*S)),o[S].crossVectors(s[S],r[S])}return{tangents:s,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Jx extends Co{constructor(e=0,t=0,n=1,s=1,r=0,o=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=c,this.aRotation=f}getPoint(e,t=new Ke){const n=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(o?r=0:r=s),this.aClockwise===!0&&!o&&(r===s?r=-s:r=r-s);const c=this.aStartAngle+e*r;let f=this.aX+this.xRadius*Math.cos(c),p=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const m=Math.cos(this.aRotation),v=Math.sin(this.aRotation),y=f-this.aX,x=p-this.aY;f=y*m-x*v+this.aX,p=y*v+x*m+this.aY}return n.set(f,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class u3 extends Jx{constructor(e,t,n,s,r,o){super(e,t,n,n,s,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function OE(){let i=0,e=0,t=0,n=0;function s(r,o,c,f){i=r,e=c,t=-3*r+3*o-2*c-f,n=2*r-2*o+c+f}return{initCatmullRom:function(r,o,c,f,p){s(o,c,p*(c-r),p*(f-o))},initNonuniformCatmullRom:function(r,o,c,f,p,m,v){let y=(o-r)/p-(c-r)/(p+m)+(c-o)/m,x=(c-o)/m-(f-o)/(m+v)+(f-c)/v;y*=m,x*=m,s(o,c,y,x)},calc:function(r){const o=r*r,c=o*r;return i+e*r+t*o+n*c}}}const Py=new $,FS=new OE,HS=new OE,zS=new OE;class f3 extends Co{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new $){const n=t,s=this.points,r=s.length,o=(r-(this.closed?0:1))*e;let c=Math.floor(o),f=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/r)+1)*r:f===0&&c===r-1&&(c=r-2,f=1);let p,m;this.closed||c>0?p=s[(c-1)%r]:(Py.subVectors(s[0],s[1]).add(s[0]),p=Py);const v=s[c%r],y=s[(c+1)%r];if(this.closed||c+2<r?m=s[(c+2)%r]:(Py.subVectors(s[r-1],s[r-2]).add(s[r-1]),m=Py),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let S=Math.pow(p.distanceToSquared(v),x),T=Math.pow(v.distanceToSquared(y),x),E=Math.pow(y.distanceToSquared(m),x);T<1e-4&&(T=1),S<1e-4&&(S=T),E<1e-4&&(E=T),FS.initNonuniformCatmullRom(p.x,v.x,y.x,m.x,S,T,E),HS.initNonuniformCatmullRom(p.y,v.y,y.y,m.y,S,T,E),zS.initNonuniformCatmullRom(p.z,v.z,y.z,m.z,S,T,E)}else this.curveType==="catmullrom"&&(FS.initCatmullRom(p.x,v.x,y.x,m.x,this.tension),HS.initCatmullRom(p.y,v.y,y.y,m.y,this.tension),zS.initCatmullRom(p.z,v.z,y.z,m.z,this.tension));return n.set(FS.calc(f),HS.calc(f),zS.calc(f)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new $().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function RR(i,e,t,n,s){const r=(n-e)*.5,o=(s-t)*.5,c=i*i,f=i*c;return(2*t-2*n+r+o)*f+(-3*t+3*n-2*r-o)*c+r*i+t}function K4(i,e){const t=1-i;return t*t*e}function W4(i,e){return 2*(1-i)*i*e}function Z4(i,e){return i*i*e}function Tg(i,e,t,n){return K4(i,e)+W4(i,t)+Z4(i,n)}function Q4(i,e){const t=1-i;return t*t*t*e}function $4(i,e){const t=1-i;return 3*t*t*i*e}function eV(i,e){return 3*(1-i)*i*i*e}function tV(i,e){return i*i*i*e}function Cg(i,e,t,n,s){return Q4(i,e)+$4(i,t)+eV(i,n)+tV(i,s)}class IE extends Co{constructor(e=new Ke,t=new Ke,n=new Ke,s=new Ke){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new Ke){const n=t,s=this.v0,r=this.v1,o=this.v2,c=this.v3;return n.set(Cg(e,s.x,r.x,o.x,c.x),Cg(e,s.y,r.y,o.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class h3 extends Co{constructor(e=new $,t=new $,n=new $,s=new $){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new $){const n=t,s=this.v0,r=this.v1,o=this.v2,c=this.v3;return n.set(Cg(e,s.x,r.x,o.x,c.x),Cg(e,s.y,r.y,o.y,c.y),Cg(e,s.z,r.z,o.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class PE extends Co{constructor(e=new Ke,t=new Ke){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ke){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ke){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class d3 extends Co{constructor(e=new $,t=new $){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new $){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FE extends Co{constructor(e=new Ke,t=new Ke,n=new Ke){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ke){const n=t,s=this.v0,r=this.v1,o=this.v2;return n.set(Tg(e,s.x,r.x,o.x),Tg(e,s.y,r.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class HE extends Co{constructor(e=new $,t=new $,n=new $){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new $){const n=t,s=this.v0,r=this.v1,o=this.v2;return n.set(Tg(e,s.x,r.x,o.x),Tg(e,s.y,r.y,o.y),Tg(e,s.z,r.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zE extends Co{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ke){const n=t,s=this.points,r=(s.length-1)*e,o=Math.floor(r),c=r-o,f=s[o===0?o:o-1],p=s[o],m=s[o>s.length-2?s.length-1:o+1],v=s[o>s.length-3?s.length-1:o+2];return n.set(RR(c,f.x,p.x,m.x,v.x),RR(c,f.y,p.y,m.y,v.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new Ke().fromArray(s))}return this}}var cx=Object.freeze({__proto__:null,ArcCurve:u3,CatmullRomCurve3:f3,CubicBezierCurve:IE,CubicBezierCurve3:h3,EllipseCurve:Jx,LineCurve:PE,LineCurve3:d3,QuadraticBezierCurve:FE,QuadraticBezierCurve3:HE,SplineCurve:zE});class p3 extends Co{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new cx[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const o=s[r]-n,c=this.curves[r],f=c.getLength(),p=f===0?0:1-o/f;return c.getPointAt(p,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const o=r[s],c=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,f=o.getPoints(c);for(let p=0;p<f.length;p++){const m=f[p];n&&n.equals(m)||(t.push(m),n=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new cx[s.type]().fromJSON(s))}return this}}class ux extends p3{constructor(e){super(),this.type="Path",this.currentPoint=new Ke,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new PE(this.currentPoint.clone(),new Ke(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const r=new FE(this.currentPoint.clone(),new Ke(e,t),new Ke(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,r,o){const c=new IE(this.currentPoint.clone(),new Ke(e,t),new Ke(n,s),new Ke(r,o));return this.curves.push(c),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new zE(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,r,o){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+c,t+f,n,s,r,o),this}absarc(e,t,n,s,r,o){return this.absellipse(e,t,n,n,s,r,o),this}ellipse(e,t,n,s,r,o,c,f){const p=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+p,t+m,n,s,r,o,c,f),this}absellipse(e,t,n,s,r,o,c,f){const p=new Jx(e,t,n,s,r,o,c,f);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const m=p.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class nh extends ux{constructor(e){super(e),this.uuid=cr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new ux().fromJSON(s))}return this}}function nV(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let r=m3(i,0,s,t,!0);const o=[];if(!r||r.next===r.prev)return o;let c,f,p;if(n&&(r=oV(i,e,r,t)),i.length>80*t){c=1/0,f=1/0;let m=-1/0,v=-1/0;for(let y=t;y<s;y+=t){const x=i[y],S=i[y+1];x<c&&(c=x),S<f&&(f=S),x>m&&(m=x),S>v&&(v=S)}p=Math.max(m-c,v-f),p=p!==0?32767/p:0}return qg(r,o,t,c,f,p,0),o}function m3(i,e,t,n,s){let r;if(s===yV(i,e,t,n)>0)for(let o=e;o<t;o+=n)r=wR(o/n|0,i[o],i[o+1],r);else for(let o=t-n;o>=e;o-=n)r=wR(o/n|0,i[o],i[o+1],r);return r&&up(r,r.next)&&(Kg(r),r=r.next),r}function rh(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(up(t,t.next)||Oi(t.prev,t,t.next)===0)){if(Kg(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function qg(i,e,t,n,s,r,o){if(!i)return;!o&&r&&hV(i,n,s,r);let c=i;for(;i.prev!==i.next;){const f=i.prev,p=i.next;if(r?sV(i,n,s,r):iV(i)){e.push(f.i,i.i,p.i),Kg(i),i=p.next,c=p.next;continue}if(i=p,i===c){o?o===1?(i=aV(rh(i),e),qg(i,e,t,n,s,r,2)):o===2&&rV(i,e,t,n,s,r):qg(rh(i),e,t,n,s,r,1);break}}}function iV(i){const e=i.prev,t=i,n=i.next;if(Oi(e,t,n)>=0)return!1;const s=e.x,r=t.x,o=n.x,c=e.y,f=t.y,p=n.y,m=Math.min(s,r,o),v=Math.min(c,f,p),y=Math.max(s,r,o),x=Math.max(c,f,p);let S=n.next;for(;S!==e;){if(S.x>=m&&S.x<=y&&S.y>=v&&S.y<=x&&cg(s,c,r,f,o,p,S.x,S.y)&&Oi(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function sV(i,e,t,n){const s=i.prev,r=i,o=i.next;if(Oi(s,r,o)>=0)return!1;const c=s.x,f=r.x,p=o.x,m=s.y,v=r.y,y=o.y,x=Math.min(c,f,p),S=Math.min(m,v,y),T=Math.max(c,f,p),E=Math.max(m,v,y),A=sb(x,S,e,t,n),w=sb(T,E,e,t,n);let B=i.prevZ,D=i.nextZ;for(;B&&B.z>=A&&D&&D.z<=w;){if(B.x>=x&&B.x<=T&&B.y>=S&&B.y<=E&&B!==s&&B!==o&&cg(c,m,f,v,p,y,B.x,B.y)&&Oi(B.prev,B,B.next)>=0||(B=B.prevZ,D.x>=x&&D.x<=T&&D.y>=S&&D.y<=E&&D!==s&&D!==o&&cg(c,m,f,v,p,y,D.x,D.y)&&Oi(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;B&&B.z>=A;){if(B.x>=x&&B.x<=T&&B.y>=S&&B.y<=E&&B!==s&&B!==o&&cg(c,m,f,v,p,y,B.x,B.y)&&Oi(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;D&&D.z<=w;){if(D.x>=x&&D.x<=T&&D.y>=S&&D.y<=E&&D!==s&&D!==o&&cg(c,m,f,v,p,y,D.x,D.y)&&Oi(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function aV(i,e){let t=i;do{const n=t.prev,s=t.next.next;!up(n,s)&&v3(n,t,t.next,s)&&Jg(n,s)&&Jg(s,n)&&(e.push(n.i,t.i,s.i),Kg(t),Kg(t.next),t=i=s),t=t.next}while(t!==i);return rh(t)}function rV(i,e,t,n,s,r){let o=i;do{let c=o.next.next;for(;c!==o.prev;){if(o.i!==c.i&&mV(o,c)){let f=y3(o,c);o=rh(o,o.next),f=rh(f,f.next),qg(o,e,t,n,s,r,0),qg(f,e,t,n,s,r,0);return}c=c.next}o=o.next}while(o!==i)}function oV(i,e,t,n){const s=[];for(let r=0,o=e.length;r<o;r++){const c=e[r]*n,f=r<o-1?e[r+1]*n:i.length,p=m3(i,c,f,n,!1);p===p.next&&(p.steiner=!0),s.push(pV(p))}s.sort(lV);for(let r=0;r<s.length;r++)t=cV(s[r],t);return t}function lV(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=n-s}return t}function cV(i,e){const t=uV(i,e);if(!t)return e;const n=y3(t,i);return rh(n,n.next),rh(t,t.next)}function uV(i,e){let t=e;const n=i.x,s=i.y;let r=-1/0,o;if(up(i,t))return t;do{if(up(i,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const v=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=n&&v>r&&(r=v,o=t.x<t.next.x?t:t.next,v===n))return o}t=t.next}while(t!==e);if(!o)return null;const c=o,f=o.x,p=o.y;let m=1/0;t=o;do{if(n>=t.x&&t.x>=f&&n!==t.x&&g3(s<p?n:r,s,f,p,s<p?r:n,s,t.x,t.y)){const v=Math.abs(s-t.y)/(n-t.x);Jg(t,i)&&(v<m||v===m&&(t.x>o.x||t.x===o.x&&fV(o,t)))&&(o=t,m=v)}t=t.next}while(t!==c);return o}function fV(i,e){return Oi(i.prev,i,e.prev)<0&&Oi(e.next,i,i.next)<0}function hV(i,e,t,n){let s=i;do s.z===0&&(s.z=sb(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,dV(s)}function dV(i){let e,t=1;do{let n=i,s;i=null;let r=null;for(e=0;n;){e++;let o=n,c=0;for(let p=0;p<t&&(c++,o=o.nextZ,!!o);p++);let f=t;for(;c>0||f>0&&o;)c!==0&&(f===0||!o||n.z<=o.z)?(s=n,n=n.nextZ,c--):(s=o,o=o.nextZ,f--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=o}r.nextZ=null,t*=2}while(e>1);return i}function sb(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function pV(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function g3(i,e,t,n,s,r,o,c){return(s-o)*(e-c)>=(i-o)*(r-c)&&(i-o)*(n-c)>=(t-o)*(e-c)&&(t-o)*(r-c)>=(s-o)*(n-c)}function cg(i,e,t,n,s,r,o,c){return!(i===o&&e===c)&&g3(i,e,t,n,s,r,o,c)}function mV(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!gV(i,e)&&(Jg(i,e)&&Jg(e,i)&&vV(i,e)&&(Oi(i.prev,i,e.prev)||Oi(i,e.prev,e))||up(i,e)&&Oi(i.prev,i,i.next)>0&&Oi(e.prev,e,e.next)>0)}function Oi(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function up(i,e){return i.x===e.x&&i.y===e.y}function v3(i,e,t,n){const s=Hy(Oi(i,e,t)),r=Hy(Oi(i,e,n)),o=Hy(Oi(t,n,i)),c=Hy(Oi(t,n,e));return!!(s!==r&&o!==c||s===0&&Fy(i,t,e)||r===0&&Fy(i,n,e)||o===0&&Fy(t,i,n)||c===0&&Fy(t,e,n))}function Fy(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Hy(i){return i>0?1:i<0?-1:0}function gV(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&v3(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Jg(i,e){return Oi(i.prev,i,i.next)<0?Oi(i,e,i.next)>=0&&Oi(i,i.prev,e)>=0:Oi(i,e,i.prev)<0||Oi(i,i.next,e)<0}function vV(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function y3(i,e){const t=ab(i.i,i.x,i.y),n=ab(e.i,e.x,e.y),s=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function wR(i,e,t,n){const s=ab(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Kg(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function ab(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function yV(i,e,t,n){let s=0;for(let r=e,o=t-n;r<t;r+=n)s+=(i[o]-i[r])*(i[r+1]+i[o+1]),o=r;return s}class _V{static triangulate(e,t,n=2){return nV(e,t,n)}}class Ao{static area(e){const t=e.length;let n=0;for(let s=t-1,r=0;r<t;s=r++)n+=e[s].x*e[r].y-e[r].x*e[s].y;return n*.5}static isClockWise(e){return Ao.area(e)<0}static triangulateShape(e,t){const n=[],s=[],r=[];BR(e),DR(n,e);let o=e.length;t.forEach(BR);for(let f=0;f<t.length;f++)s.push(o),o+=t[f].length,DR(n,t[f]);const c=_V.triangulate(n,s);for(let f=0;f<c.length;f+=3)r.push(c.slice(f,f+3));return r}}function BR(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function DR(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Kx extends dn{constructor(e=new nh([new Ke(.5,.5),new Ke(-.5,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],r=[];for(let c=0,f=e.length;c<f;c++){const p=e[c];o(p)}this.setAttribute("position",new It(s,3)),this.setAttribute("uv",new It(r,2)),this.computeVertexNormals();function o(c){const f=[],p=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,v=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:x-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const A=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:xV;let B,D=!1,O,I,z,P;A&&(B=A.getSpacedPoints(m),D=!0,y=!1,O=A.computeFrenetFrames(m,!1),I=new $,z=new $,P=new $),y||(E=0,x=0,S=0,T=0);const L=c.extractPoints(p);let N=L.shape;const j=L.holes;if(!Ao.isClockWise(N)){N=N.reverse();for(let K=0,rt=j.length;K<rt;K++){const Ze=j[K];Ao.isClockWise(Ze)&&(j[K]=Ze.reverse())}}function ne(K){const Ze=10000000000000001e-36;let je=K[0];for(let Xe=1;Xe<=K.length;Xe++){const _t=Xe%K.length,We=K[_t],Z=We.x-je.x,k=We.y-je.y,xe=Z*Z+k*k,ze=Math.max(Math.abs(We.x),Math.abs(We.y),Math.abs(je.x),Math.abs(je.y)),Qe=Ze*ze*ze;if(xe<=Qe){K.splice(_t,1),Xe--;continue}je=We}}ne(N),j.forEach(ne);const fe=j.length,_e=N;for(let K=0;K<fe;K++){const rt=j[K];N=N.concat(rt)}function H(K,rt,Ze){return rt||console.error("THREE.ExtrudeGeometry: vec does not exist"),K.clone().addScaledVector(rt,Ze)}const W=N.length;function Q(K,rt,Ze){let je,Xe,_t;const We=K.x-rt.x,Z=K.y-rt.y,k=Ze.x-K.x,xe=Ze.y-K.y,ze=We*We+Z*Z,Qe=We*xe-Z*k;if(Math.abs(Qe)>Number.EPSILON){const He=Math.sqrt(ze),pt=Math.sqrt(k*k+xe*xe),ut=rt.x-Z/He,xt=rt.y+We/He,Nt=Ze.x-xe/pt,at=Ze.y+k/pt,At=((Nt-ut)*xe-(at-xt)*k)/(We*xe-Z*k);je=ut+We*At-K.x,Xe=xt+Z*At-K.y;const Et=je*je+Xe*Xe;if(Et<=2)return new Ke(je,Xe);_t=Math.sqrt(Et/2)}else{let He=!1;We>Number.EPSILON?k>Number.EPSILON&&(He=!0):We<-Number.EPSILON?k<-Number.EPSILON&&(He=!0):Math.sign(Z)===Math.sign(xe)&&(He=!0),He?(je=-Z,Xe=We,_t=Math.sqrt(ze)):(je=We,Xe=Z,_t=Math.sqrt(ze/2))}return new Ke(je/_t,Xe/_t)}const ve=[];for(let K=0,rt=_e.length,Ze=rt-1,je=K+1;K<rt;K++,Ze++,je++)Ze===rt&&(Ze=0),je===rt&&(je=0),ve[K]=Q(_e[K],_e[Ze],_e[je]);const X=[];let re,Ae=ve.concat();for(let K=0,rt=fe;K<rt;K++){const Ze=j[K];re=[];for(let je=0,Xe=Ze.length,_t=Xe-1,We=je+1;je<Xe;je++,_t++,We++)_t===Xe&&(_t=0),We===Xe&&(We=0),re[je]=Q(Ze[je],Ze[_t],Ze[We]);X.push(re),Ae=Ae.concat(re)}let Ce;if(E===0)Ce=Ao.triangulateShape(_e,j);else{const K=[],rt=[];for(let Ze=0;Ze<E;Ze++){const je=Ze/E,Xe=x*Math.cos(je*Math.PI/2),_t=S*Math.sin(je*Math.PI/2)+T;for(let We=0,Z=_e.length;We<Z;We++){const k=H(_e[We],ve[We],_t);Dt(k.x,k.y,-Xe),je===0&&K.push(k)}for(let We=0,Z=fe;We<Z;We++){const k=j[We];re=X[We];const xe=[];for(let ze=0,Qe=k.length;ze<Qe;ze++){const He=H(k[ze],re[ze],_t);Dt(He.x,He.y,-Xe),je===0&&xe.push(He)}je===0&&rt.push(xe)}}Ce=Ao.triangulateShape(K,rt)}const oe=Ce.length,Ne=S+T;for(let K=0;K<W;K++){const rt=y?H(N[K],Ae[K],Ne):N[K];D?(z.copy(O.normals[0]).multiplyScalar(rt.x),I.copy(O.binormals[0]).multiplyScalar(rt.y),P.copy(B[0]).add(z).add(I),Dt(P.x,P.y,P.z)):Dt(rt.x,rt.y,0)}for(let K=1;K<=m;K++)for(let rt=0;rt<W;rt++){const Ze=y?H(N[rt],Ae[rt],Ne):N[rt];D?(z.copy(O.normals[K]).multiplyScalar(Ze.x),I.copy(O.binormals[K]).multiplyScalar(Ze.y),P.copy(B[K]).add(z).add(I),Dt(P.x,P.y,P.z)):Dt(Ze.x,Ze.y,v/m*K)}for(let K=E-1;K>=0;K--){const rt=K/E,Ze=x*Math.cos(rt*Math.PI/2),je=S*Math.sin(rt*Math.PI/2)+T;for(let Xe=0,_t=_e.length;Xe<_t;Xe++){const We=H(_e[Xe],ve[Xe],je);Dt(We.x,We.y,v+Ze)}for(let Xe=0,_t=j.length;Xe<_t;Xe++){const We=j[Xe];re=X[Xe];for(let Z=0,k=We.length;Z<k;Z++){const xe=H(We[Z],re[Z],je);D?Dt(xe.x,xe.y+B[m-1].y,B[m-1].x+Ze):Dt(xe.x,xe.y,v+Ze)}}}Oe(),$e();function Oe(){const K=s.length/3;if(y){let rt=0,Ze=W*rt;for(let je=0;je<oe;je++){const Xe=Ce[je];wt(Xe[2]+Ze,Xe[1]+Ze,Xe[0]+Ze)}rt=m+E*2,Ze=W*rt;for(let je=0;je<oe;je++){const Xe=Ce[je];wt(Xe[0]+Ze,Xe[1]+Ze,Xe[2]+Ze)}}else{for(let rt=0;rt<oe;rt++){const Ze=Ce[rt];wt(Ze[2],Ze[1],Ze[0])}for(let rt=0;rt<oe;rt++){const Ze=Ce[rt];wt(Ze[0]+W*m,Ze[1]+W*m,Ze[2]+W*m)}}n.addGroup(K,s.length/3-K,0)}function $e(){const K=s.length/3;let rt=0;tt(_e,rt),rt+=_e.length;for(let Ze=0,je=j.length;Ze<je;Ze++){const Xe=j[Ze];tt(Xe,rt),rt+=Xe.length}n.addGroup(K,s.length/3-K,1)}function tt(K,rt){let Ze=K.length;for(;--Ze>=0;){const je=Ze;let Xe=Ze-1;Xe<0&&(Xe=K.length-1);for(let _t=0,We=m+E*2;_t<We;_t++){const Z=W*_t,k=W*(_t+1),xe=rt+je+Z,ze=rt+Xe+Z,Qe=rt+Xe+k,He=rt+je+k;Pt(xe,ze,Qe,He)}}}function Dt(K,rt,Ze){f.push(K),f.push(rt),f.push(Ze)}function wt(K,rt,Ze){ot(K),ot(rt),ot(Ze);const je=s.length/3,Xe=w.generateTopUV(n,s,je-3,je-2,je-1);dt(Xe[0]),dt(Xe[1]),dt(Xe[2])}function Pt(K,rt,Ze,je){ot(K),ot(rt),ot(je),ot(rt),ot(Ze),ot(je);const Xe=s.length/3,_t=w.generateSideWallUV(n,s,Xe-6,Xe-3,Xe-2,Xe-1);dt(_t[0]),dt(_t[1]),dt(_t[3]),dt(_t[1]),dt(_t[2]),dt(_t[3])}function ot(K){s.push(f[K*3+0]),s.push(f[K*3+1]),s.push(f[K*3+2])}function dt(K){r.push(K.x),r.push(K.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return AV(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const c=t[e.shapes[r]];n.push(c)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new cx[s.type]().fromJSON(s)),new Kx(n,e.options)}}const xV={generateTopUV:function(i,e,t,n,s){const r=e[t*3],o=e[t*3+1],c=e[n*3],f=e[n*3+1],p=e[s*3],m=e[s*3+1];return[new Ke(r,o),new Ke(c,f),new Ke(p,m)]},generateSideWallUV:function(i,e,t,n,s,r){const o=e[t*3],c=e[t*3+1],f=e[t*3+2],p=e[n*3],m=e[n*3+1],v=e[n*3+2],y=e[s*3],x=e[s*3+1],S=e[s*3+2],T=e[r*3],E=e[r*3+1],A=e[r*3+2];return Math.abs(c-m)<Math.abs(o-p)?[new Ke(o,1-f),new Ke(p,1-v),new Ke(y,1-S),new Ke(T,1-A)]:[new Ke(c,1-f),new Ke(m,1-v),new Ke(x,1-S),new Ke(E,1-A)]}};function AV(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];t.shapes.push(r.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class _v extends Cu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _v(e.radius,e.detail)}}class Wx extends dn{constructor(e=[new Ke(0,-.5),new Ke(.5,0),new Ke(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=hn(s,0,Math.PI*2);const r=[],o=[],c=[],f=[],p=[],m=1/t,v=new $,y=new Ke,x=new $,S=new $,T=new $;let E=0,A=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:E=e[w+1].x-e[w].x,A=e[w+1].y-e[w].y,x.x=A*1,x.y=-E,x.z=A*0,T.copy(x),x.normalize(),f.push(x.x,x.y,x.z);break;case e.length-1:f.push(T.x,T.y,T.z);break;default:E=e[w+1].x-e[w].x,A=e[w+1].y-e[w].y,x.x=A*1,x.y=-E,x.z=A*0,S.copy(x),x.x+=T.x,x.y+=T.y,x.z+=T.z,x.normalize(),f.push(x.x,x.y,x.z),T.copy(S)}for(let w=0;w<=t;w++){const B=n+w*m*s,D=Math.sin(B),O=Math.cos(B);for(let I=0;I<=e.length-1;I++){v.x=e[I].x*D,v.y=e[I].y,v.z=e[I].x*O,o.push(v.x,v.y,v.z),y.x=w/t,y.y=I/(e.length-1),c.push(y.x,y.y);const z=f[3*I+0]*D,P=f[3*I+1],L=f[3*I+0]*O;p.push(z,P,L)}}for(let w=0;w<t;w++)for(let B=0;B<e.length-1;B++){const D=B+w*e.length,O=D,I=D+e.length,z=D+e.length+1,P=D+1;r.push(O,I,P),r.push(z,P,I)}this.setIndex(r),this.setAttribute("position",new It(o,3)),this.setAttribute("uv",new It(c,2)),this.setAttribute("normal",new It(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wx(e.points,e.segments,e.phiStart,e.phiLength)}}class xv extends Cu{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xv(e.radius,e.detail)}}class Ru extends dn{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const r=e/2,o=t/2,c=Math.floor(n),f=Math.floor(s),p=c+1,m=f+1,v=e/c,y=t/f,x=[],S=[],T=[],E=[];for(let A=0;A<m;A++){const w=A*y-o;for(let B=0;B<p;B++){const D=B*v-r;S.push(D,-w,0),T.push(0,0,1),E.push(B/c),E.push(1-A/f)}}for(let A=0;A<f;A++)for(let w=0;w<c;w++){const B=w+p*A,D=w+p*(A+1),O=w+1+p*(A+1),I=w+1+p*A;x.push(B,D,I),x.push(D,O,I)}this.setIndex(x),this.setAttribute("position",new It(S,3)),this.setAttribute("normal",new It(T,3)),this.setAttribute("uv",new It(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ru(e.width,e.height,e.widthSegments,e.heightSegments)}}class Zx extends dn{constructor(e=.5,t=1,n=32,s=1,r=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:o},n=Math.max(3,n),s=Math.max(1,s);const c=[],f=[],p=[],m=[];let v=e;const y=(t-e)/s,x=new $,S=new Ke;for(let T=0;T<=s;T++){for(let E=0;E<=n;E++){const A=r+E/n*o;x.x=v*Math.cos(A),x.y=v*Math.sin(A),f.push(x.x,x.y,x.z),p.push(0,0,1),S.x=(x.x/t+1)/2,S.y=(x.y/t+1)/2,m.push(S.x,S.y)}v+=y}for(let T=0;T<s;T++){const E=T*(n+1);for(let A=0;A<n;A++){const w=A+E,B=w,D=w+n+1,O=w+n+2,I=w+1;c.push(B,D,I),c.push(D,O,I)}}this.setIndex(c),this.setAttribute("position",new It(f,3)),this.setAttribute("normal",new It(p,3)),this.setAttribute("uv",new It(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Qx extends dn{constructor(e=new nh([new Ke(0,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],r=[],o=[];let c=0,f=0;if(Array.isArray(e)===!1)p(e);else for(let m=0;m<e.length;m++)p(e[m]),this.addGroup(c,f,m),c+=f,f=0;this.setIndex(n),this.setAttribute("position",new It(s,3)),this.setAttribute("normal",new It(r,3)),this.setAttribute("uv",new It(o,2));function p(m){const v=s.length/3,y=m.extractPoints(t);let x=y.shape;const S=y.holes;Ao.isClockWise(x)===!1&&(x=x.reverse());for(let E=0,A=S.length;E<A;E++){const w=S[E];Ao.isClockWise(w)===!0&&(S[E]=w.reverse())}const T=Ao.triangulateShape(x,S);for(let E=0,A=S.length;E<A;E++){const w=S[E];x=x.concat(w)}for(let E=0,A=x.length;E<A;E++){const w=x[E];s.push(w.x,w.y,0),r.push(0,0,1),o.push(w.x,w.y)}for(let E=0,A=T.length;E<A;E++){const w=T[E],B=w[0]+v,D=w[1]+v,O=w[2]+v;n.push(B,D,O),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return SV(t,e)}static fromJSON(e,t){const n=[];for(let s=0,r=e.shapes.length;s<r;s++){const o=t[e.shapes[s]];n.push(o)}return new Qx(n,e.curveSegments)}}function SV(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class Av extends dn{constructor(e=1,t=32,n=16,s=0,r=Math.PI*2,o=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:r,thetaStart:o,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const f=Math.min(o+c,Math.PI);let p=0;const m=[],v=new $,y=new $,x=[],S=[],T=[],E=[];for(let A=0;A<=n;A++){const w=[],B=A/n;let D=0;A===0&&o===0?D=.5/t:A===n&&f===Math.PI&&(D=-.5/t);for(let O=0;O<=t;O++){const I=O/t;v.x=-e*Math.cos(s+I*r)*Math.sin(o+B*c),v.y=e*Math.cos(o+B*c),v.z=e*Math.sin(s+I*r)*Math.sin(o+B*c),S.push(v.x,v.y,v.z),y.copy(v).normalize(),T.push(y.x,y.y,y.z),E.push(I+D,1-B),w.push(p++)}m.push(w)}for(let A=0;A<n;A++)for(let w=0;w<t;w++){const B=m[A][w+1],D=m[A][w],O=m[A+1][w],I=m[A+1][w+1];(A!==0||o>0)&&x.push(B,D,I),(A!==n-1||f<Math.PI)&&x.push(D,O,I)}this.setIndex(x),this.setAttribute("position",new It(S,3)),this.setAttribute("normal",new It(T,3)),this.setAttribute("uv",new It(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Av(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class $x extends Cu{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $x(e.radius,e.detail)}}class eA extends dn{constructor(e=1,t=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const o=[],c=[],f=[],p=[],m=new $,v=new $,y=new $;for(let x=0;x<=n;x++)for(let S=0;S<=s;S++){const T=S/s*r,E=x/n*Math.PI*2;v.x=(e+t*Math.cos(E))*Math.cos(T),v.y=(e+t*Math.cos(E))*Math.sin(T),v.z=t*Math.sin(E),c.push(v.x,v.y,v.z),m.x=e*Math.cos(T),m.y=e*Math.sin(T),y.subVectors(v,m).normalize(),f.push(y.x,y.y,y.z),p.push(S/s),p.push(x/n)}for(let x=1;x<=n;x++)for(let S=1;S<=s;S++){const T=(s+1)*x+S-1,E=(s+1)*(x-1)+S-1,A=(s+1)*(x-1)+S,w=(s+1)*x+S;o.push(T,E,w),o.push(E,A,w)}this.setIndex(o),this.setAttribute("position",new It(c,3)),this.setAttribute("normal",new It(f,3)),this.setAttribute("uv",new It(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class tA extends dn{constructor(e=1,t=.4,n=64,s=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:r,q:o},n=Math.floor(n),s=Math.floor(s);const c=[],f=[],p=[],m=[],v=new $,y=new $,x=new $,S=new $,T=new $,E=new $,A=new $;for(let B=0;B<=n;++B){const D=B/n*r*Math.PI*2;w(D,r,o,e,x),w(D+.01,r,o,e,S),E.subVectors(S,x),A.addVectors(S,x),T.crossVectors(E,A),A.crossVectors(T,E),T.normalize(),A.normalize();for(let O=0;O<=s;++O){const I=O/s*Math.PI*2,z=-t*Math.cos(I),P=t*Math.sin(I);v.x=x.x+(z*A.x+P*T.x),v.y=x.y+(z*A.y+P*T.y),v.z=x.z+(z*A.z+P*T.z),f.push(v.x,v.y,v.z),y.subVectors(v,x).normalize(),p.push(y.x,y.y,y.z),m.push(B/n),m.push(O/s)}}for(let B=1;B<=n;B++)for(let D=1;D<=s;D++){const O=(s+1)*(B-1)+(D-1),I=(s+1)*B+(D-1),z=(s+1)*B+D,P=(s+1)*(B-1)+D;c.push(O,I,P),c.push(I,z,P)}this.setIndex(c),this.setAttribute("position",new It(f,3)),this.setAttribute("normal",new It(p,3)),this.setAttribute("uv",new It(m,2));function w(B,D,O,I,z){const P=Math.cos(B),L=Math.sin(B),N=O/D*B,j=Math.cos(N);z.x=I*(2+j)*.5*P,z.y=I*(2+j)*L*.5,z.z=I*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class nA extends dn{constructor(e=new HE(new $(-1,-1,0),new $(-1,1,0),new $(1,1,0)),t=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new $,f=new $,p=new Ke;let m=new $;const v=[],y=[],x=[],S=[];T(),this.setIndex(S),this.setAttribute("position",new It(v,3)),this.setAttribute("normal",new It(y,3)),this.setAttribute("uv",new It(x,2));function T(){for(let B=0;B<t;B++)E(B);E(r===!1?t:0),w(),A()}function E(B){m=e.getPointAt(B/t,m);const D=o.normals[B],O=o.binormals[B];for(let I=0;I<=s;I++){const z=I/s*Math.PI*2,P=Math.sin(z),L=-Math.cos(z);f.x=L*D.x+P*O.x,f.y=L*D.y+P*O.y,f.z=L*D.z+P*O.z,f.normalize(),y.push(f.x,f.y,f.z),c.x=m.x+n*f.x,c.y=m.y+n*f.y,c.z=m.z+n*f.z,v.push(c.x,c.y,c.z)}}function A(){for(let B=1;B<=t;B++)for(let D=1;D<=s;D++){const O=(s+1)*(B-1)+(D-1),I=(s+1)*B+(D-1),z=(s+1)*B+D,P=(s+1)*(B-1)+D;S.push(O,I,P),S.push(I,z,P)}}function w(){for(let B=0;B<=t;B++)for(let D=0;D<=s;D++)p.x=B/t,p.y=D/s,x.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new nA(new cx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class _3 extends dn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new $,r=new $;if(e.index!==null){const o=e.attributes.position,c=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let p=0,m=f.length;p<m;++p){const v=f[p],y=v.start,x=v.count;for(let S=y,T=y+x;S<T;S+=3)for(let E=0;E<3;E++){const A=c.getX(S+E),w=c.getX(S+(E+1)%3);s.fromBufferAttribute(o,A),r.fromBufferAttribute(o,w),UR(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let c=0,f=o.count/3;c<f;c++)for(let p=0;p<3;p++){const m=3*c+p,v=3*c+(p+1)%3;s.fromBufferAttribute(o,m),r.fromBufferAttribute(o,v),UR(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new It(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function UR(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var LR=Object.freeze({__proto__:null,BoxGeometry:ph,CapsuleGeometry:jx,CircleGeometry:Yx,ConeGeometry:yv,CylinderGeometry:vv,DodecahedronGeometry:qx,EdgesGeometry:c3,ExtrudeGeometry:Kx,IcosahedronGeometry:_v,LatheGeometry:Wx,OctahedronGeometry:xv,PlaneGeometry:Ru,PolyhedronGeometry:Cu,RingGeometry:Zx,ShapeGeometry:Qx,SphereGeometry:Av,TetrahedronGeometry:$x,TorusGeometry:eA,TorusKnotGeometry:tA,TubeGeometry:nA,WireframeGeometry:_3});class x3 extends ps{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Tt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class A3 extends Ya{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Sv extends ps{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Tt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zr extends Sv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return hn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Tt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Tt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Tt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class S3 extends ps{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Tt(16777215),this.specular=new Tt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=lv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class M3 extends ps{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Tt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class b3 extends ps{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class E3 extends ps{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=lv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GE extends ps{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=zD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class VE extends ps{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class T3 extends ps{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Tt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tu,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class C3 extends sa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Kf(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function R3(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function w3(i){function e(s,r){return i[s]-i[r]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function rb(i,e,t){const n=i.length,s=new i.constructor(n);for(let r=0,o=0;o!==n;++r){const c=t[r]*e;for(let f=0;f!==e;++f)s[o++]=i[c+f]}return s}function kE(i,e,t,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let o=r[n];if(o!==void 0)if(Array.isArray(o))do o=r[n],o!==void 0&&(e.push(r.time),t.push(...o)),r=i[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[n],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=i[s++];while(r!==void 0);else do o=r[n],o!==void 0&&(e.push(r.time),t.push(o)),r=i[s++];while(r!==void 0)}function MV(i,e,t,n,s=30){const r=i.clone();r.name=e;const o=[];for(let f=0;f<r.tracks.length;++f){const p=r.tracks[f],m=p.getValueSize(),v=[],y=[];for(let x=0;x<p.times.length;++x){const S=p.times[x]*s;if(!(S<t||S>=n)){v.push(p.times[x]);for(let T=0;T<m;++T)y.push(p.values[x*m+T])}}v.length!==0&&(p.times=Kf(v,p.times.constructor),p.values=Kf(y,p.values.constructor),o.push(p))}r.tracks=o;let c=1/0;for(let f=0;f<r.tracks.length;++f)c>r.tracks[f].times[0]&&(c=r.tracks[f].times[0]);for(let f=0;f<r.tracks.length;++f)r.tracks[f].shift(-1*c);return r.resetDuration(),r}function bV(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,r=e/n;for(let o=0;o<s;++o){const c=t.tracks[o],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const p=i.tracks.find(function(A){return A.name===c.name&&A.ValueTypeName===f});if(p===void 0)continue;let m=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);let y=0;const x=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=x/3);const S=c.times.length-1;let T;if(r<=c.times[0]){const A=m,w=v-m;T=c.values.slice(A,w)}else if(r>=c.times[S]){const A=S*v+m,w=A+v-m;T=c.values.slice(A,w)}else{const A=c.createInterpolant(),w=m,B=v-m;A.evaluate(r),T=A.resultBuffer.slice(w,B)}f==="quaternion"&&new Cs().fromArray(T).normalize().conjugate().toArray(T);const E=p.times.length;for(let A=0;A<E;++A){const w=A*x+y;if(f==="quaternion")Cs.multiplyQuaternionsFlat(p.values,w,T,0,p.values,w);else{const B=x-y*2;for(let D=0;D<B;++D)p.values[w+D]-=T[D]}}}return i.blendMode=ME,i}class EV{static convertArray(e,t){return Kf(e,t)}static isTypedArray(e){return R3(e)}static getKeyframeOrder(e){return w3(e)}static sortedArray(e,t,n){return rb(e,t,n)}static flattenJSON(e,t,n,s){kE(e,t,n,s)}static subclip(e,t,n,s,r=30){return MV(e,t,n,s,r)}static makeClipAdditive(e,t=0,n=e,s=30){return bV(e,t,n,s)}}class Ap{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<s)){for(let c=n+2;;){if(s===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(r=s,s=t[++n],e<s)break t}o=t.length;break n}if(!(e>=r)){const c=t[1];e<c&&(n=2,r=c);for(let f=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(s=r,r=t[--n-1],e>=r)break t}o=n,n=0;break n}break e}for(;n<o;){const c=n+o>>>1;e<t[c]?o=c:n=c+1}if(s=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=n[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class B3 extends Ap{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Yf,endingEnd:Yf}}intervalChanged_(e,t,n){const s=this.parameterPositions;let r=e-2,o=e+1,c=s[r],f=s[o];if(c===void 0)switch(this.getSettings_().endingStart){case qf:r=e,c=2*t-n;break;case Vg:r=s.length-2,c=t+s[r]-s[r+1];break;default:r=e,c=n}if(f===void 0)switch(this.getSettings_().endingEnd){case qf:o=e,f=2*n-t;break;case Vg:o=1,f=n+s[1]-s[0];break;default:o=e-1,f=t}const p=(n-t)*.5,m=this.valueSize;this._weightPrev=p/(t-c),this._weightNext=p/(f-n),this._offsetPrev=r*m,this._offsetNext=o*m}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,p=f-c,m=this._offsetPrev,v=this._offsetNext,y=this._weightPrev,x=this._weightNext,S=(n-t)/(s-t),T=S*S,E=T*S,A=-y*E+2*y*T-y*S,w=(1+y)*E+(-1.5-2*y)*T+(-.5+y)*S+1,B=(-1-x)*E+(1.5+x)*T+.5*S,D=x*E-x*T;for(let O=0;O!==c;++O)r[O]=A*o[m+O]+w*o[p+O]+B*o[f+O]+D*o[v+O];return r}}class XE extends Ap{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,p=f-c,m=(n-t)/(s-t),v=1-m;for(let y=0;y!==c;++y)r[y]=o[p+y]*v+o[f+y]*m;return r}}class D3 extends Ap{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Gr{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Kf(t,this.TimeBufferType),this.values=Kf(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Kf(e.times,Array),values:Kf(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new D3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new XE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new B3(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ap:t=this.InterpolantFactoryMethodDiscrete;break;case rp:t=this.InterpolantFactoryMethodLinear;break;case h_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ap;case this.InterpolantFactoryMethodLinear:return rp;case this.InterpolantFactoryMethodSmooth:return h_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let r=0,o=s-1;for(;r!==s&&n[r]<e;)++r;for(;o!==-1&&n[o]>t;)--o;if(++o,r!==0||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const c=this.getValueSize();this.times=n.slice(r,o),this.values=this.values.slice(r*c,o*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let c=0;c!==r;c++){const f=n[c];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(o!==null&&o>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,f,o),e=!1;break}o=f}if(s!==void 0&&R3(s))for(let c=0,f=s.length;c!==f;++c){const p=s[c];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===h_,r=e.length-1;let o=1;for(let c=1;c<r;++c){let f=!1;const p=e[c],m=e[c+1];if(p!==m&&(c!==1||p!==e[0]))if(s)f=!0;else{const v=c*n,y=v-n,x=v+n;for(let S=0;S!==n;++S){const T=t[v+S];if(T!==t[y+S]||T!==t[x+S]){f=!0;break}}}if(f){if(c!==o){e[o]=e[c];const v=c*n,y=o*n;for(let x=0;x!==n;++x)t[y+x]=t[v+x]}++o}}if(r>0){e[o]=e[r];for(let c=r*n,f=o*n,p=0;p!==n;++p)t[f+p]=t[c+p];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Gr.prototype.ValueTypeName="";Gr.prototype.TimeBufferType=Float32Array;Gr.prototype.ValueBufferType=Float32Array;Gr.prototype.DefaultInterpolation=rp;class mh extends Gr{constructor(e,t,n){super(e,t,n)}}mh.prototype.ValueTypeName="bool";mh.prototype.ValueBufferType=Array;mh.prototype.DefaultInterpolation=ap;mh.prototype.InterpolantFactoryMethodLinear=void 0;mh.prototype.InterpolantFactoryMethodSmooth=void 0;class jE extends Gr{constructor(e,t,n,s){super(e,t,n,s)}}jE.prototype.ValueTypeName="color";class oh extends Gr{constructor(e,t,n,s){super(e,t,n,s)}}oh.prototype.ValueTypeName="number";class U3 extends Ap{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=(n-t)/(s-t);let p=e*c;for(let m=p+c;p!==m;p+=4)Cs.slerpFlat(r,0,o,p-c,o,p,f);return r}}class lh extends Gr{constructor(e,t,n,s){super(e,t,n,s)}InterpolantFactoryMethodLinear(e){return new U3(this.times,this.values,this.getValueSize(),e)}}lh.prototype.ValueTypeName="quaternion";lh.prototype.InterpolantFactoryMethodSmooth=void 0;class gh extends Gr{constructor(e,t,n){super(e,t,n)}}gh.prototype.ValueTypeName="string";gh.prototype.ValueBufferType=Array;gh.prototype.DefaultInterpolation=ap;gh.prototype.InterpolantFactoryMethodLinear=void 0;gh.prototype.InterpolantFactoryMethodSmooth=void 0;class ch extends Gr{constructor(e,t,n,s){super(e,t,n,s)}}ch.prototype.ValueTypeName="vector";class fp{constructor(e="",t=-1,n=[],s=Nx){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=cr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let o=0,c=n.length;o!==c;++o)t.push(CV(n[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=n.length;r!==o;++r)t.push(Gr.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const r=t.length,o=[];for(let c=0;c<r;c++){let f=[],p=[];f.push((c+r-1)%r,c,(c+1)%r),p.push(0,1,0);const m=w3(f);f=rb(f,1,m),p=rb(p,1,m),!s&&f[0]===0&&(f.push(r),p.push(p[0])),o.push(new oh(".morphTargetInfluences["+t[c].name+"]",f,p).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const p=e[c],m=p.name.match(r);if(m&&m.length>1){const v=m[1];let y=s[v];y||(s[v]=y=[]),y.push(p)}}const o=[];for(const c in s)o.push(this.CreateFromMorphTargetSequence(c,s[c],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(v,y,x,S,T){if(x.length!==0){const E=[],A=[];kE(x,E,A,S),E.length!==0&&T.push(new v(y,E,A))}},s=[],r=e.name||"default",o=e.fps||30,c=e.blendMode;let f=e.length||-1;const p=e.hierarchy||[];for(let v=0;v<p.length;v++){const y=p[v].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const x={};let S;for(S=0;S<y.length;S++)if(y[S].morphTargets)for(let T=0;T<y[S].morphTargets.length;T++)x[y[S].morphTargets[T]]=-1;for(const T in x){const E=[],A=[];for(let w=0;w!==y[S].morphTargets.length;++w){const B=y[S];E.push(B.time),A.push(B.morphTarget===T?1:0)}s.push(new oh(".morphTargetInfluence["+T+"]",E,A))}f=x.length*o}else{const x=".bones["+t[v].name+"]";n(ch,x+".position",y,"pos",s),n(lh,x+".quaternion",y,"rot",s),n(ch,x+".scale",y,"scl",s)}}return s.length===0?null:new this(r,f,s,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function TV(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return oh;case"vector":case"vector2":case"vector3":case"vector4":return ch;case"color":return jE;case"quaternion":return lh;case"bool":case"boolean":return mh;case"string":return gh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function CV(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=TV(i.type);if(i.times===void 0){const t=[],n=[];kE(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const ac={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class iA{constructor(e,t,n){const s=this;let r=!1,o=0,c=0,f;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(m){c++,r===!1&&s.onStart!==void 0&&s.onStart(m,o,c),r=!0},this.itemEnd=function(m){o++,s.onProgress!==void 0&&s.onProgress(m,o,c),o===c&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return f?f(m):m},this.setURLModifier=function(m){return f=m,this},this.addHandler=function(m,v){return p.push(m,v),this},this.removeHandler=function(m){const v=p.indexOf(m);return v!==-1&&p.splice(v,2),this},this.getHandler=function(m){for(let v=0,y=p.length;v<y;v+=2){const x=p[v],S=p[v+1];if(x.global&&(x.lastIndex=0),x.test(m))return S}return null}}}const L3=new iA;class Vs{constructor(e){this.manager=e!==void 0?e:L3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,r){n.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Vs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ql={};class RV extends Error{constructor(e,t){super(e),this.response=t}}class Gs extends Vs{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=ac.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Ql[e]!==void 0){Ql[e].push({onLoad:t,onProgress:n,onError:s});return}Ql[e]=[],Ql[e].push({onLoad:t,onProgress:n,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,f=this.responseType;fetch(o).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const m=Ql[e],v=p.body.getReader(),y=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),x=y?parseInt(y):0,S=x!==0;let T=0;const E=new ReadableStream({start(A){w();function w(){v.read().then(({done:B,value:D})=>{if(B)A.close();else{T+=D.byteLength;const O=new ProgressEvent("progress",{lengthComputable:S,loaded:T,total:x});for(let I=0,z=m.length;I<z;I++){const P=m[I];P.onProgress&&P.onProgress(O)}A.enqueue(D),w()}},B=>{A.error(B)})}}});return new Response(E)}else throw new RV(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(f){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(m=>new DOMParser().parseFromString(m,c));case"json":return p.json();default:if(c==="")return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(c),y=v&&v[1]?v[1].toLowerCase():void 0,x=new TextDecoder(y);return p.arrayBuffer().then(S=>x.decode(S))}}}).then(p=>{ac.add(e,p);const m=Ql[e];delete Ql[e];for(let v=0,y=m.length;v<y;v++){const x=m[v];x.onLoad&&x.onLoad(p)}}).catch(p=>{const m=Ql[e];if(m===void 0)throw this.manager.itemError(e),p;delete Ql[e];for(let v=0,y=m.length;v<y;v++){const x=m[v];x.onError&&x.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class wV extends Vs{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Gs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(f){s?s(f):console.error(f),r.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=fp.parse(e[n]);t.push(s)}return t}}class BV extends Vs{constructor(e){super(e)}load(e,t,n,s){const r=this,o=[],c=new kx,f=new Gs(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(r.withCredentials);let p=0;function m(v){f.load(e[v],function(y){const x=r.parse(y,!0);o[v]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},p+=1,p===6&&(x.mipmapCount===1&&(c.minFilter=Jn),c.image=o,c.format=x.format,c.needsUpdate=!0,t&&t(c))},n,s)}if(Array.isArray(e))for(let v=0,y=e.length;v<y;++v)m(v);else f.load(e,function(v){const y=r.parse(v,!0);if(y.isCubemap){const x=y.mipmaps.length/y.mipmapCount;for(let S=0;S<x;S++){o[S]={mipmaps:[]};for(let T=0;T<y.mipmapCount;T++)o[S].mipmaps.push(y.mipmaps[S*y.mipmapCount+T]),o[S].format=y.format,o[S].width=y.width,o[S].height=y.height}c.image=o}else c.image.width=y.width,c.image.height=y.height,c.mipmaps=y.mipmaps;y.mipmapCount===1&&(c.minFilter=Jn),c.format=y.format,c.needsUpdate=!0,t&&t(c)},n,s);return c}}class Wg extends Vs{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=ac.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const c=Yg("img");function f(){m(),ac.add(e,this),t&&t(this),r.manager.itemEnd(e)}function p(v){m(),s&&s(v),r.manager.itemError(e),r.manager.itemEnd(e)}function m(){c.removeEventListener("load",f,!1),c.removeEventListener("error",p,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),r.manager.itemStart(e),c.src=e,c}}class N3 extends Vs{constructor(e){super(e)}load(e,t,n,s){const r=new dv;r.colorSpace=Hs;const o=new Wg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let c=0;function f(p){o.load(e[p],function(m){r.images[p]=m,c++,c===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let p=0;p<e.length;++p)f(p);return r}}class YE extends Vs{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Mo,c=new Gs(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(r.withCredentials),c.load(e,function(f){let p;try{p=r.parse(f)}catch(m){if(s!==void 0)s(m);else{console.error(m);return}}p.image!==void 0?o.image=p.image:p.data!==void 0&&(o.image.width=p.width,o.image.height=p.height,o.image.data=p.data),o.wrapS=p.wrapS!==void 0?p.wrapS:Wi,o.wrapT=p.wrapT!==void 0?p.wrapT:Wi,o.magFilter=p.magFilter!==void 0?p.magFilter:Jn,o.minFilter=p.minFilter!==void 0?p.minFilter:Jn,o.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(o.colorSpace=p.colorSpace),p.flipY!==void 0&&(o.flipY=p.flipY),p.format!==void 0&&(o.format=p.format),p.type!==void 0&&(o.type=p.type),p.mipmaps!==void 0&&(o.mipmaps=p.mipmaps,o.minFilter=Ir),p.mipmapCount===1&&(o.minFilter=Jn),p.generateMipmaps!==void 0&&(o.generateMipmaps=p.generateMipmaps),o.needsUpdate=!0,t&&t(o,p)},n,s),o}}class O3 extends Vs{constructor(e){super(e)}load(e,t,n,s){const r=new Wn,o=new Wg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(c){r.image=c,r.needsUpdate=!0,t!==void 0&&t(r)},n,s),r}}class wu extends On{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Tt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class I3 extends wu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Tt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const GS=new Jt,NR=new $,OR=new $;class qE{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ke(512,512),this.mapType=Ta,this.map=null,this.mapPass=null,this.matrix=new Jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xp,this._frameExtents=new Ke(1,1),this._viewportCount=1,this._viewports=[new Hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;NR.setFromMatrixPosition(e.matrixWorld),t.position.copy(NR),OR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(OR),t.updateMatrixWorld(),GS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GS),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(GS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class DV extends qE{constructor(){super(new ki(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=op*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class JE extends wu{constructor(e,t,n=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.distance=n,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new DV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const IR=new Jt,eg=new $,VS=new $;class UV extends qE{constructor(){super(new ki(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ke(4,2),this._viewportCount=6,this._viewports=[new Hn(2,1,1,1),new Hn(0,1,1,1),new Hn(3,1,1,1),new Hn(1,1,1,1),new Hn(3,0,1,1),new Hn(1,0,1,1)],this._cubeDirections=[new $(1,0,0),new $(-1,0,0),new $(0,0,1),new $(0,0,-1),new $(0,1,0),new $(0,-1,0)],this._cubeUps=[new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,0,1),new $(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),eg.setFromMatrixPosition(e.matrixWorld),n.position.copy(eg),VS.copy(n.position),VS.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(VS),n.updateMatrixWorld(),s.makeTranslation(-eg.x,-eg.y,-eg.z),IR.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IR)}}class KE extends wu{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new UV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class gl extends Px{constructor(e=-1,t=1,n=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-e,o=n+e,c=s+t,f=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=p*this.view.offsetX,o=r+p*this.view.width,c-=m*this.view.offsetY,f=c-m*this.view.height}this.projectionMatrix.makeOrthographic(r,o,c,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class LV extends qE{constructor(){super(new gl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class WE extends wu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.shadow=new LV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class P3 extends wu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class F3 extends wu{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class H3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*s),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*s)),t.addScaledVector(o[5],1.092548*(s*r)),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],1.092548*(n*r)),t.addScaledVector(o[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*s),t.addScaledVector(o[2],2*.511664*r),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*s),t.addScaledVector(o[5],2*.429043*s*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],2*.429043*n*r),t.addScaledVector(o[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-s*s)}}class z3 extends wu{constructor(e=new H3,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class sA extends Vs{constructor(e){super(e),this.textures={}}load(e,t,n,s){const r=this,o=new Gs(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(f){s?s(f):console.error(f),r.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Tt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const o=e.uniforms[r];switch(s.uniforms[r]={},o.type){case"t":s.uniforms[r].value=n(o.value);break;case"c":s.uniforms[r].value=new Tt().setHex(o.value);break;case"v2":s.uniforms[r].value=new Ke().fromArray(o.value);break;case"v3":s.uniforms[r].value=new $().fromArray(o.value);break;case"v4":s.uniforms[r].value=new Hn().fromArray(o.value);break;case"m3":s.uniforms[r].value=new gn().fromArray(o.value);break;case"m4":s.uniforms[r].value=new Jt().fromArray(o.value);break;default:s.uniforms[r].value=o.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Ke().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Ke().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return sA.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:x3,SpriteMaterial:BE,RawShaderMaterial:A3,ShaderMaterial:Ya,PointsMaterial:Vx,MeshPhysicalMaterial:zr,MeshStandardMaterial:Sv,MeshPhongMaterial:S3,MeshToonMaterial:M3,MeshNormalMaterial:b3,MeshLambertMaterial:E3,MeshDepthMaterial:GE,MeshDistanceMaterial:VE,MeshBasicMaterial:Xa,MeshMatcapMaterial:T3,LineDashedMaterial:C3,LineBasicMaterial:sa,Material:ps};return new t[e]}}class _u{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class G3 extends dn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class V3 extends Vs{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Gs(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(f){s?s(f):console.error(f),r.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(x,S){if(t[S]!==void 0)return t[S];const E=x.interleavedBuffers[S],A=r(x,E.buffer),w=Xd(E.type,A),B=new mv(w,E.stride);return B.uuid=E.uuid,t[S]=B,B}function r(x,S){if(n[S]!==void 0)return n[S];const E=x.arrayBuffers[S],A=new Uint32Array(E).buffer;return n[S]=A,A}const o=e.isInstancedBufferGeometry?new G3:new dn,c=e.data.index;if(c!==void 0){const x=Xd(c.type,c.array);o.setIndex(new zn(x,1))}const f=e.data.attributes;for(const x in f){const S=f[x];let T;if(S.isInterleavedBufferAttribute){const E=s(e.data,S.data);T=new bu(E,S.itemSize,S.offset,S.normalized)}else{const E=Xd(S.type,S.array),A=S.isInstancedBufferAttribute?ah:zn;T=new A(E,S.itemSize,S.normalized)}S.name!==void 0&&(T.name=S.name),S.usage!==void 0&&T.setUsage(S.usage),o.setAttribute(x,T)}const p=e.data.morphAttributes;if(p)for(const x in p){const S=p[x],T=[];for(let E=0,A=S.length;E<A;E++){const w=S[E];let B;if(w.isInterleavedBufferAttribute){const D=s(e.data,w.data);B=new bu(D,w.itemSize,w.offset,w.normalized)}else{const D=Xd(w.type,w.array);B=new zn(D,w.itemSize,w.normalized)}w.name!==void 0&&(B.name=w.name),T.push(B)}o.morphAttributes[x]=T}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const v=e.data.groups||e.data.drawcalls||e.data.offsets;if(v!==void 0)for(let x=0,S=v.length;x!==S;++x){const T=v[x];o.addGroup(T.start,T.count,T.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const x=new $;y.center!==void 0&&x.fromArray(y.center),o.boundingSphere=new Rs(x,y.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class NV extends Vs{constructor(e){super(e)}load(e,t,n,s){const r=this,o=this.path===""?_u.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const c=new Gs(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){let p=null;try{p=JSON.parse(f)}catch(v){s!==void 0&&s(v),console.error("THREE:ObjectLoader: Can't parse "+e+".",v.message);return}const m=p.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(p,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?_u.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new Gs(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const o=await r.loadAsync(e,t),c=JSON.parse(o),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),o=this.parseImages(e.images,function(){t!==void 0&&t(p)}),c=this.parseTextures(e.textures,o),f=this.parseMaterials(e.materials,c),p=this.parseObject(e.object,r,f,c,n),m=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,m),this.bindLightTargets(p),t!==void 0){let v=!1;for(const y in o)if(o[y].data instanceof HTMLImageElement){v=!0;break}v===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),c=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,s,c,o,t),p=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,p),this.bindLightTargets(f),f}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const r=new nh().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,o=e.length;r<o;r++){const c=new gv().fromJSON(e[r],s);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new V3;for(let r=0,o=e.length;r<o;r++){let c;const f=e[r];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=s.parse(f);break;default:f.type in LR?c=LR[f.type].fromJSON(f,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),n[f.uuid]=c}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const r=new sA;r.setTextures(t);for(let o=0,c=e.length;o<c;o++){const f=e[o];n[f.uuid]===void 0&&(n[f.uuid]=r.parse(f)),s[f.uuid]=n[f.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],r=fp.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const n=this,s={};let r;function o(f){return n.manager.itemStart(f),r.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemError(f),n.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const p=f,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return o(m)}else return f.data?{data:Xd(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new iA(t);r=new Wg(f),r.setCrossOrigin(this.crossOrigin);for(let p=0,m=e.length;p<m;p++){const v=e[p],y=v.url;if(Array.isArray(y)){const x=[];for(let S=0,T=y.length;S<T;S++){const E=y[S],A=c(E);A!==null&&(A instanceof HTMLImageElement?x.push(A):x.push(new Mo(A.data,A.width,A.height)))}s[v.uuid]=new vu(x)}else{const x=c(v.url);s[v.uuid]=new vu(x)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function r(o){if(typeof o=="string"){const c=o,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await s.loadAsync(f)}else return o.data?{data:Xd(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){s=new Wg(this.manager),s.setCrossOrigin(this.crossOrigin);for(let o=0,c=e.length;o<c;o++){const f=e[o],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v],S=await r(x);S!==null&&(S instanceof HTMLImageElement?m.push(S):m.push(new Mo(S.data,S.width,S.height)))}n[f.uuid]=new vu(m)}else{const m=await r(f.url);n[f.uuid]=new vu(m)}}}return n}parseTextures(e,t){function n(r,o){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),o[r])}const s={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const c=e[r];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const f=t[c.image],p=f.data;let m;Array.isArray(p)?(m=new dv,p.length===6&&(m.needsUpdate=!0)):(p&&p.data?m=new Mo:m=new Wn,p&&(m.needsUpdate=!0)),m.source=f,m.uuid=c.uuid,c.name!==void 0&&(m.name=c.name),c.mapping!==void 0&&(m.mapping=n(c.mapping,OV)),c.channel!==void 0&&(m.channel=c.channel),c.offset!==void 0&&m.offset.fromArray(c.offset),c.repeat!==void 0&&m.repeat.fromArray(c.repeat),c.center!==void 0&&m.center.fromArray(c.center),c.rotation!==void 0&&(m.rotation=c.rotation),c.wrap!==void 0&&(m.wrapS=n(c.wrap[0],PR),m.wrapT=n(c.wrap[1],PR)),c.format!==void 0&&(m.format=c.format),c.internalFormat!==void 0&&(m.internalFormat=c.internalFormat),c.type!==void 0&&(m.type=c.type),c.colorSpace!==void 0&&(m.colorSpace=c.colorSpace),c.minFilter!==void 0&&(m.minFilter=n(c.minFilter,FR)),c.magFilter!==void 0&&(m.magFilter=n(c.magFilter,FR)),c.anisotropy!==void 0&&(m.anisotropy=c.anisotropy),c.flipY!==void 0&&(m.flipY=c.flipY),c.generateMipmaps!==void 0&&(m.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(m.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(m.compareFunction=c.compareFunction),c.userData!==void 0&&(m.userData=c.userData),s[c.uuid]=m}return s}parseObject(e,t,n,s,r){let o;function c(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function f(y){if(y!==void 0){if(Array.isArray(y)){const x=[];for(let S=0,T=y.length;S<T;S++){const E=y[S];n[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),x.push(n[E])}return x}return n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),n[y]}}function p(y){return s[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),s[y]}let m,v;switch(e.type){case"Scene":o=new pv,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Tt(e.background):o.background=p(e.background)),e.environment!==void 0&&(o.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Hx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Fx(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ki(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new gl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new P3(e.color,e.intensity);break;case"DirectionalLight":o=new WE(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new KE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new F3(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new JE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new I3(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new z3().fromJSON(e);break;case"SkinnedMesh":m=c(e.geometry),v=f(e.material),o=new DE(m,v),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":m=c(e.geometry),v=f(e.material),o=new Ei(m,v);break;case"InstancedMesh":m=c(e.geometry),v=f(e.material);const y=e.count,x=e.instanceMatrix,S=e.instanceColor;o=new UE(m,v,y),o.instanceMatrix=new ah(new Float32Array(x.array),16),S!==void 0&&(o.instanceColor=new ah(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":m=c(e.geometry),v=f(e.material),o=new o3(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,v),o.geometry=m,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(T=>{let E=null,A=null;return T.boundingBox!==void 0&&(E=new zs,E.min.fromArray(T.boundingBox.min),E.max.fromArray(T.boundingBox.max)),T.boundingSphere!==void 0&&(A=new Rs,A.radius=T.boundingSphere.radius,A.center.fromArray(T.boundingSphere.center)),{...T,boundingBox:E,boundingSphere:A}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=p(e.matricesTexture.uuid),o._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new Rs,o.boundingSphere.center.fromArray(e.boundingSphere.center),o.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&&(o.boundingBox=new zs,o.boundingBox.min.fromArray(e.boundingBox.min),o.boundingBox.max.fromArray(e.boundingBox.max));break;case"LOD":o=new r3;break;case"Line":o=new fc(c(e.geometry),f(e.material));break;case"LineLoop":o=new LE(c(e.geometry),f(e.material));break;case"LineSegments":o=new To(c(e.geometry),f(e.material));break;case"PointCloud":case"Points":o=new NE(c(e.geometry),f(e.material));break;case"Sprite":o=new a3(f(e.material));break;case"Group":o=new sc;break;case"Bone":o=new zx;break;default:o=new On}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let x=0;x<y.length;x++)o.add(this.parseObject(y[x],t,n,s,r))}if(e.animations!==void 0){const y=e.animations;for(let x=0;x<y.length;x++){const S=y[x];o.animations.push(r[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const y=e.levels;for(let x=0;x<y.length;x++){const S=y[x],T=o.getObjectByProperty("uuid",S.object);T!==void 0&&o.addLevel(T,S.distance,S.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,s=e.getObjectByProperty("uuid",n);s!==void 0?t.target=s:t.target=new On}})}}const OV={UVMapping:Au,CubeReflectionMapping:_l,CubeRefractionMapping:Su,EquirectangularReflectionMapping:$d,EquirectangularRefractionMapping:Gg,CubeUVReflectionMapping:_p},PR={RepeatWrapping:Mu,ClampToEdgeWrapping:Wi,MirroredRepeatWrapping:ep},FR={NearestFilter:Ts,NearestMipmapNearestFilter:Cx,NearestMipmapLinearFilter:jf,LinearFilter:Jn,LinearMipmapNearestFilter:Yd,LinearMipmapLinearFilter:Ir};class k3 extends Vs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=ac.get(e);if(o!==void 0){if(r.manager.itemStart(e),o.then){o.then(p=>{t&&t(p),r.manager.itemEnd(e)}).catch(p=>{s&&s(p)});return}return setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader;const f=fetch(e,c).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(p){return ac.add(e,p),t&&t(p),r.manager.itemEnd(e),p}).catch(function(p){s&&s(p),ac.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});ac.add(e,f),r.manager.itemStart(e)}}let zy;class ZE{static getContext(){return zy===void 0&&(zy=new(window.AudioContext||window.webkitAudioContext)),zy}static setContext(e){zy=e}}class IV extends Vs{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Gs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(f){try{const p=f.slice(0);ZE.getContext().decodeAudioData(p,function(v){t(v)}).catch(c)}catch(p){c(p)}},n,s);function c(f){s?s(f):console.error(f),r.manager.itemError(e)}}}const HR=new Jt,zR=new Jt,wf=new Jt;class PV{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ki,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ki,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,wf.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,o=t.near*Math.tan(th*t.fov*.5)/t.zoom;let c,f;zR.elements[12]=-s,HR.elements[12]=s,c=-o*t.aspect+r,f=o*t.aspect+r,wf.elements[0]=2*t.near/(f-c),wf.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(wf),c=-o*t.aspect-r,f=o*t.aspect-r,wf.elements[0]=2*t.near/(f-c),wf.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(wf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(zR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(HR)}}class X3 extends ki{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class QE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=GR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=GR();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function GR(){return performance.now()}const Bf=new $,VR=new Cs,FV=new $,Df=new $;class HV extends On{constructor(){super(),this.type="AudioListener",this.context=ZE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new QE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Bf,VR,FV),Df.set(0,0,-1).applyQuaternion(VR),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Bf.x,s),t.positionY.linearRampToValueAtTime(Bf.y,s),t.positionZ.linearRampToValueAtTime(Bf.z,s),t.forwardX.linearRampToValueAtTime(Df.x,s),t.forwardY.linearRampToValueAtTime(Df.y,s),t.forwardZ.linearRampToValueAtTime(Df.z,s),t.upX.linearRampToValueAtTime(n.x,s),t.upY.linearRampToValueAtTime(n.y,s),t.upZ.linearRampToValueAtTime(n.z,s)}else t.setPosition(Bf.x,Bf.y,Bf.z),t.setOrientation(Df.x,Df.y,Df.z,n.x,n.y,n.z)}}class j3 extends On{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Uf=new $,kR=new Cs,zV=new $,Lf=new $;class GV extends j3{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Uf,kR,zV),Lf.set(0,0,1).applyQuaternion(kR);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Uf.x,n),t.positionY.linearRampToValueAtTime(Uf.y,n),t.positionZ.linearRampToValueAtTime(Uf.z,n),t.orientationX.linearRampToValueAtTime(Lf.x,n),t.orientationY.linearRampToValueAtTime(Lf.y,n),t.orientationZ.linearRampToValueAtTime(Lf.z,n)}else t.setPosition(Uf.x,Uf.y,Uf.z),t.setOrientation(Lf.x,Lf.y,Lf.z)}}class VV{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Y3{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,r,o;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,r=e*s+s;let o=this.cumulativeWeight;if(o===0){for(let c=0;c!==s;++c)n[r+c]=n[c];o=t}else{o+=t;const c=t/o;this._mixBufferRegion(n,r,0,c,s)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const f=t*this._origIndex;this._mixBufferRegion(n,s,f,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let f=t,p=t+t;f!==p;++f)if(n[f]!==n[f+t]){c.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let r=n,o=s;r!==o;++r)t[r]=t[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,r){if(s>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]}_slerp(e,t,n,s){Cs.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,r){const o=this._workIndex*r;Cs.multiplyQuaternionsFlat(e,o,e,t,e,n),Cs.slerpFlat(e,t,e,t,e,o,s)}_lerp(e,t,n,s,r){const o=1-s;for(let c=0;c!==r;++c){const f=t+c;e[f]=e[f]*o+e[n+c]*s}}_lerpAdditive(e,t,n,s,r){for(let o=0;o!==r;++o){const c=t+o;e[c]=e[c]+e[n+o]*s}}}const $E="\\[\\]\\.:\\/",kV=new RegExp("["+$E+"]","g"),e1="[^"+$E+"]",XV="[^"+$E.replace("\\.","")+"]",jV=/((?:WC+[\/:])*)/.source.replace("WC",e1),YV=/(WCOD+)?/.source.replace("WCOD",XV),qV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e1),JV=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e1),KV=new RegExp("^"+jV+YV+qV+JV+"$"),WV=["material","materials","bones","map"];class ZV{constructor(e,t,n){const s=n||Fn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Fn{constructor(e,t,n){this.path=t,this.parsedPath=n||Fn.parseTrackName(t),this.node=Fn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Fn.Composite(e,t,n):new Fn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(kV,"")}static parseTrackName(e){const t=KV.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);WV.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let o=0;o<r.length;o++){const c=r[o];if(c.name===t||c.uuid===t)return c;const f=n(c.children);if(f)return f}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=Fn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===p){p=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const o=e[s];if(o===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}f=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(f=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Fn.Composite=ZV;Fn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Fn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Fn.prototype.GetterByBindingType=[Fn.prototype._getValue_direct,Fn.prototype._getValue_array,Fn.prototype._getValue_arrayElement,Fn.prototype._getValue_toArray];Fn.prototype.SetterByBindingTypeAndVersioning=[[Fn.prototype._setValue_direct,Fn.prototype._setValue_direct_setNeedsUpdate,Fn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Fn.prototype._setValue_array,Fn.prototype._setValue_array_setNeedsUpdate,Fn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Fn.prototype._setValue_arrayElement,Fn.prototype._setValue_arrayElement_setNeedsUpdate,Fn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Fn.prototype._setValue_fromArray,Fn.prototype._setValue_fromArray_setNeedsUpdate,Fn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class QV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,o=r.length;let c,f=e.length,p=this.nCachedObjects_;for(let m=0,v=arguments.length;m!==v;++m){const y=arguments[m],x=y.uuid;let S=t[x];if(S===void 0){S=f++,t[x]=S,e.push(y);for(let T=0,E=o;T!==E;++T)r[T].push(new Fn(y,n[T],s[T]))}else if(S<p){c=e[S];const T=--p,E=e[T];t[E.uuid]=S,e[S]=E,t[x]=T,e[T]=y;for(let A=0,w=o;A!==w;++A){const B=r[A],D=B[T];let O=B[S];B[S]=D,O===void 0&&(O=new Fn(y,n[A],s[A])),B[T]=O}}else e[S]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],p=f.uuid,m=t[p];if(m!==void 0&&m>=r){const v=r++,y=e[v];t[y.uuid]=m,e[m]=y,t[p]=v,e[v]=f;for(let x=0,S=s;x!==S;++x){const T=n[x],E=T[v],A=T[m];T[m]=E,T[v]=A}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,o=e.length;for(let c=0,f=arguments.length;c!==f;++c){const p=arguments[c],m=p.uuid,v=t[m];if(v!==void 0)if(delete t[m],v<r){const y=--r,x=e[y],S=--o,T=e[S];t[x.uuid]=v,e[v]=x,t[T.uuid]=y,e[y]=T,e.pop();for(let E=0,A=s;E!==A;++E){const w=n[E],B=w[y],D=w[S];w[v]=B,w[y]=D,w.pop()}}else{const y=--o,x=e[y];y>0&&(t[x.uuid]=v),e[v]=x,e.pop();for(let S=0,T=s;S!==T;++S){const E=n[S];E[v]=E[y],E.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const r=this._bindings;if(s!==void 0)return r[s];const o=this._paths,c=this._parsedPaths,f=this._objects,p=f.length,m=this.nCachedObjects_,v=new Array(p);s=r.length,n[e]=s,o.push(e),c.push(t),r.push(v);for(let y=m,x=f.length;y!==x;++y){const S=f[y];v[y]=new Fn(S,e,t)}return v}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,r=this._parsedPaths,o=this._bindings,c=o.length-1,f=o[c],p=e[c];t[p]=n,o[n]=f,o.pop(),r[n]=r[c],r.pop(),s[n]=s[c],s.pop()}}}class q3{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const r=t.tracks,o=r.length,c=new Array(o),f={endingStart:Yf,endingEnd:Yf};for(let p=0;p!==o;++p){const m=r[p].createInterpolant(null);c[p]=m,m.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=PD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const s=this._clip.duration,r=e._clip.duration,o=r/s,c=s/r;e.warp(1,o,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,r=s.time,o=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=s._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,p=c.sampleValues;return f[0]=r,f[1]=r+n,p[0]=e/o,p[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const f=(e-r)*n;f<0||n===0?t=0:(this._startTime=null,t=n*f)}t*=this._updateTimeScale(e);const o=this._updateTime(t),c=this._updateWeight(e);if(c>0){const f=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case ME:for(let m=0,v=f.length;m!==v;++m)f[m].evaluate(o),p[m].accumulateAdditive(c);break;case Nx:default:for(let m=0,v=f.length;m!==v;++m)f[m].evaluate(o),p[m].accumulate(s,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,r=this._loopCount;const o=n===FD;if(e===0)return r===-1?s:o&&(r&1)===1?t-s:s;if(n===ID){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=t||s<0){const c=Math.floor(s/t);s-=t*c,r+=Math.abs(c);const f=this.repetitions-r;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const p=e<0;this._setEndings(p,!p,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=s;if(o&&(r&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=qf,s.endingEnd=qf):(e?s.endingStart=this.zeroSlopeAtStart?qf:Yf:s.endingStart=Vg,t?s.endingEnd=this.zeroSlopeAtEnd?qf:Yf:s.endingEnd=Vg)}_scheduleFading(e,t,n){const s=this._mixer,r=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=r,f[0]=t,c[1]=r+e,f[1]=n,this}}const $V=new Float32Array(1);class e5 extends Ml{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,r=s.length,o=e._propertyBindings,c=e._interpolants,f=n.uuid,p=this._bindingsByRootAndName;let m=p[f];m===void 0&&(m={},p[f]=m);for(let v=0;v!==r;++v){const y=s[v],x=y.name;let S=m[x];if(S!==void 0)++S.referenceCount,o[v]=S;else{if(S=o[v],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,f,x));continue}const T=t&&t._propertyBindings[v].binding.parsedPath;S=new Y3(Fn.create(n,x,T),y.ValueTypeName,y.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,f,x),o[v]=S}c[v].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const c=o.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=s.length,s.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,c=o[r],f=c.knownActions,p=f[f.length-1],m=e._byClipCacheIndex;p._byClipCacheIndex=m,f[m]=p,f.pop(),e._byClipCacheIndex=null;const v=c.actionByRoot,y=(e._localRoot||this._root).uuid;delete v[y],f.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,r=this._bindings;let o=s[t];o===void 0&&(o={},s[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,c=o[s],f=t[t.length-1],p=e._cacheIndex;f._cacheIndex=p,t[p]=f,t.pop(),delete c[r],Object.keys(c).length===0&&delete o[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new XE(new Float32Array(2),new Float32Array(2),1,$V),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const s=t||this._root,r=s.uuid;let o=typeof e=="string"?fp.findByName(s,e):e;const c=o!==null?o.uuid:e,f=this._actionsByClip[c];let p=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Nx),f!==void 0){const v=f.actionByRoot[r];if(v!==void 0&&v.blendMode===n)return v;p=f.knownActions[0],o===null&&(o=p._clip)}if(o===null)return null;const m=new q3(this,o,t,n);return this._bindAction(m,p),this._addInactiveAction(m,c,r),m}existingAction(e,t){const n=t||this._root,s=n.uuid,r=typeof e=="string"?fp.findByName(n,e):e,o=r?r.uuid:e,c=this._actionsByClip[o];return c!==void 0&&c.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(s,e,r,o);const c=this._bindings,f=this._nActiveBindings;for(let p=0;p!==f;++p)c[p].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const o=r.knownActions;for(let c=0,f=o.length;c!==f;++c){const p=o[c];this._deactivateAction(p);const m=p._cacheIndex,v=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=m,t[m]=v,t.pop(),this._removeInactiveBindingsForAction(p)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const c=n[o].actionByRoot,f=c[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const o in r){const c=r[o];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class t5 extends Ox{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Ix(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class n5 extends Ox{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTargetArray=!0,this.depth=n,this.texture=new hv(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class t1{constructor(e){this.value=e}clone(){return new t1(this.value.clone===void 0?this.value:this.value.clone())}}let i5=0;class s5 extends Ml{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:i5++}),this.name="",this.usage=Xg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++){const r=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<r.length;o++)this.uniforms.push(r[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class a5 extends mv{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class r5{constructor(e,t,n,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const XR=new Jt;class n1{constructor(e,t,n=0,s=1/0){this.ray=new dh(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new lp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return XR.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(XR),this}intersectObject(e,t=!0,n=[]){return ob(e,this,n,t),n.sort(jR),n}intersectObjects(e,t=!0,n=[]){for(let s=0,r=e.length;s<r;s++)ob(e[s],this,n,t);return n.sort(jR),n}}function jR(i,e){return i.distance-e.distance}function ob(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let o=0,c=r.length;o<c;o++)ob(r[o],e,t,!0)}}class lb{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=hn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(hn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class o5{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class i1{constructor(e,t,n,s){i1.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=s,this}}const YR=new Ke;class l5{constructor(e=new Ke(1/0,1/0),t=new Ke(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=YR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,YR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qR=new $,Gy=new $;class c5{constructor(e=new $,t=new $){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){qR.subVectors(e,this.start),Gy.subVectors(this.end,this.start);const n=Gy.dot(Gy);let r=Gy.dot(qR)/n;return t&&(r=hn(r,0,1)),r}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const JR=new $;class u5 extends On{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new dn,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,c=1,f=32;o<f;o++,c++){const p=o/f*Math.PI*2,m=c/f*Math.PI*2;s.push(Math.cos(p),Math.sin(p),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new It(s,3));const r=new sa({fog:!1,toneMapped:!1});this.cone=new To(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),JR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(JR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const fu=new $,Vy=new Jt,kS=new Jt;class f5 extends To{constructor(e){const t=J3(e),n=new dn,s=[],r=[],o=new Tt(0,0,1),c=new Tt(0,1,0);for(let p=0;p<t.length;p++){const m=t[p];m.parent&&m.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(o.r,o.g,o.b),r.push(c.r,c.g,c.b))}n.setAttribute("position",new It(s,3)),n.setAttribute("color",new It(r,3));const f=new sa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,f),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");kS.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const c=t[r];c.parent&&c.parent.isBone&&(Vy.multiplyMatrices(kS,c.matrixWorld),fu.setFromMatrixPosition(Vy),s.setXYZ(o,fu.x,fu.y,fu.z),Vy.multiplyMatrices(kS,c.parent.matrixWorld),fu.setFromMatrixPosition(Vy),s.setXYZ(o+1,fu.x,fu.y,fu.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function J3(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...J3(i.children[t]));return e}class h5 extends Ei{constructor(e,t,n){const s=new Av(t,4,2),r=new Xa({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const d5=new $,KR=new Tt,WR=new Tt;class p5 extends On{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new xv(t);s.rotateY(Math.PI*.5),this.material=new Xa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),o=new Float32Array(r.count*3);s.setAttribute("color",new zn(o,3)),this.add(new Ei(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");KR.copy(this.light.color),WR.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const r=n<s/2?KR:WR;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(d5.setFromMatrixPosition(this.light.matrixWorld).negate())}}class m5 extends To{constructor(e=10,t=10,n=4473924,s=8947848){n=new Tt(n),s=new Tt(s);const r=t/2,o=e/t,c=e/2,f=[],p=[];for(let y=0,x=0,S=-c;y<=t;y++,S+=o){f.push(-c,0,S,c,0,S),f.push(S,0,-c,S,0,c);const T=y===r?n:s;T.toArray(p,x),x+=3,T.toArray(p,x),x+=3,T.toArray(p,x),x+=3,T.toArray(p,x),x+=3}const m=new dn;m.setAttribute("position",new It(f,3)),m.setAttribute("color",new It(p,3));const v=new sa({vertexColors:!0,toneMapped:!1});super(m,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class g5 extends To{constructor(e=10,t=16,n=8,s=64,r=4473924,o=8947848){r=new Tt(r),o=new Tt(o);const c=[],f=[];if(t>1)for(let v=0;v<t;v++){const y=v/t*(Math.PI*2),x=Math.sin(y)*e,S=Math.cos(y)*e;c.push(0,0,0),c.push(x,0,S);const T=v&1?r:o;f.push(T.r,T.g,T.b),f.push(T.r,T.g,T.b)}for(let v=0;v<n;v++){const y=v&1?r:o,x=e-e/n*v;for(let S=0;S<s;S++){let T=S/s*(Math.PI*2),E=Math.sin(T)*x,A=Math.cos(T)*x;c.push(E,0,A),f.push(y.r,y.g,y.b),T=(S+1)/s*(Math.PI*2),E=Math.sin(T)*x,A=Math.cos(T)*x,c.push(E,0,A),f.push(y.r,y.g,y.b)}}const p=new dn;p.setAttribute("position",new It(c,3)),p.setAttribute("color",new It(f,3));const m=new sa({vertexColors:!0,toneMapped:!1});super(p,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const ZR=new $,ky=new $,QR=new $;class v5 extends On{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new dn;s.setAttribute("position",new It([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new sa({fog:!1,toneMapped:!1});this.lightPlane=new fc(s,r),this.add(this.lightPlane),s=new dn,s.setAttribute("position",new It([0,0,0,0,0,1],3)),this.targetLine=new fc(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ZR.setFromMatrixPosition(this.light.matrixWorld),ky.setFromMatrixPosition(this.light.target.matrixWorld),QR.subVectors(ky,ZR),this.lightPlane.lookAt(ky),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ky),this.targetLine.scale.z=QR.length()}}const Xy=new $,Gi=new Px;class y5 extends To{constructor(e){const t=new dn,n=new sa({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],o={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(S,T){f(S),f(T)}function f(S){s.push(0,0,0),r.push(0,0,0),o[S]===void 0&&(o[S]=[]),o[S].push(s.length/3-1)}t.setAttribute("position",new It(s,3)),t.setAttribute("color",new It(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const p=new Tt(16755200),m=new Tt(16711680),v=new Tt(43775),y=new Tt(16777215),x=new Tt(3355443);this.setColors(p,m,v,y,x)}setColors(e,t,n,s,r){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,s.r,s.g,s.b),c.setXYZ(39,s.r,s.g,s.b),c.setXYZ(40,r.r,r.g,r.b),c.setXYZ(41,r.r,r.g,r.b),c.setXYZ(42,r.r,r.g,r.b),c.setXYZ(43,r.r,r.g,r.b),c.setXYZ(44,r.r,r.g,r.b),c.setXYZ(45,r.r,r.g,r.b),c.setXYZ(46,r.r,r.g,r.b),c.setXYZ(47,r.r,r.g,r.b),c.setXYZ(48,r.r,r.g,r.b),c.setXYZ(49,r.r,r.g,r.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;Gi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===Pr?-1:0;Ji("c",t,e,Gi,0,0,r),Ji("t",t,e,Gi,0,0,1),Ji("n1",t,e,Gi,-1,-1,r),Ji("n2",t,e,Gi,n,-1,r),Ji("n3",t,e,Gi,-1,s,r),Ji("n4",t,e,Gi,n,s,r),Ji("f1",t,e,Gi,-1,-1,1),Ji("f2",t,e,Gi,n,-1,1),Ji("f3",t,e,Gi,-1,s,1),Ji("f4",t,e,Gi,n,s,1),Ji("u1",t,e,Gi,n*.7,s*1.1,r),Ji("u2",t,e,Gi,-1*.7,s*1.1,r),Ji("u3",t,e,Gi,0,s*2,r),Ji("cf1",t,e,Gi,-1,0,1),Ji("cf2",t,e,Gi,n,0,1),Ji("cf3",t,e,Gi,0,-1,1),Ji("cf4",t,e,Gi,0,s,1),Ji("cn1",t,e,Gi,-1,0,r),Ji("cn2",t,e,Gi,n,0,r),Ji("cn3",t,e,Gi,0,-1,r),Ji("cn4",t,e,Gi,0,s,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ji(i,e,t,n,s,r,o){Xy.set(s,r,o).unproject(n);const c=e[i];if(c!==void 0){const f=t.getAttribute("position");for(let p=0,m=c.length;p<m;p++)f.setXYZ(c[p],Xy.x,Xy.y,Xy.z)}}const jy=new zs;class _5 extends To{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new dn;r.setIndex(new zn(n,1)),r.setAttribute("position",new zn(s,3)),super(r,new sa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&jy.setFromObject(this.object),jy.isEmpty())return;const e=jy.min,t=jy.max,n=this.geometry.attributes.position,s=n.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class x5 extends To{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new dn;r.setIndex(new zn(n,1)),r.setAttribute("position",new It(s,3)),super(r,new sa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class A5 extends fc{constructor(e,t=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new dn;o.setAttribute("position",new It(r,3)),o.computeBoundingSphere(),super(o,new sa({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new dn;f.setAttribute("position",new It(c,3)),f.computeBoundingSphere(),this.add(new Ei(f,new Xa({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const $R=new $;let Yy,XS;class S5 extends On{constructor(e=new $(0,0,1),t=new $(0,0,0),n=1,s=16776960,r=n*.2,o=r*.2){super(),this.type="ArrowHelper",Yy===void 0&&(Yy=new dn,Yy.setAttribute("position",new It([0,0,0,0,1,0],3)),XS=new yv(.5,1,5,1),XS.translate(0,-.5,0)),this.position.copy(t),this.line=new fc(Yy,new sa({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ei(XS,new Xa({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$R.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle($R,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class M5 extends To{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new dn;s.setAttribute("position",new It(t,3)),s.setAttribute("color",new It(n,3));const r=new sa({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,n){const s=new Tt,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class b5{constructor(){this.type="ShapePath",this.color=new Tt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ux,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,r,o){return this.currentPath.bezierCurveTo(e,t,n,s,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(A){const w=[];for(let B=0,D=A.length;B<D;B++){const O=A[B],I=new nh;I.curves=O.curves,w.push(I)}return w}function n(A,w){const B=w.length;let D=!1;for(let O=B-1,I=0;I<B;O=I++){let z=w[O],P=w[I],L=P.x-z.x,N=P.y-z.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(z=w[I],L=-L,P=w[O],N=-N),A.y<z.y||A.y>P.y)continue;if(A.y===z.y){if(A.x===z.x)return!0}else{const j=N*(A.x-z.x)-L*(A.y-z.y);if(j===0)return!0;if(j<0)continue;D=!D}}else{if(A.y!==z.y)continue;if(P.x<=A.x&&A.x<=z.x||z.x<=A.x&&A.x<=P.x)return!0}}return D}const s=Ao.isClockWise,r=this.subPaths;if(r.length===0)return[];let o,c,f;const p=[];if(r.length===1)return c=r[0],f=new nh,f.curves=c.curves,p.push(f),p;let m=!s(r[0].getPoints());m=e?!m:m;const v=[],y=[];let x=[],S=0,T;y[S]=void 0,x[S]=[];for(let A=0,w=r.length;A<w;A++)c=r[A],T=c.getPoints(),o=s(T),o=e?!o:o,o?(!m&&y[S]&&S++,y[S]={s:new nh,p:T},y[S].s.curves=c.curves,m&&S++,x[S]=[]):x[S].push({h:c,p:T[0]});if(!y[0])return t(r);if(y.length>1){let A=!1,w=0;for(let B=0,D=y.length;B<D;B++)v[B]=[];for(let B=0,D=y.length;B<D;B++){const O=x[B];for(let I=0;I<O.length;I++){const z=O[I];let P=!0;for(let L=0;L<y.length;L++)n(z.p,y[L].p)&&(B!==L&&w++,P?(P=!1,v[L].push(z)):A=!0);P&&v[B].push(z)}}w>0&&A===!1&&(x=v)}let E;for(let A=0,w=y.length;A<w;A++){f=y[A].s,p.push(f),E=x[A];for(let B=0,D=E.length;B<D;B++)f.holes.push(E[B].h)}return p}}class E5 extends Ml{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function T5(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function C5(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function R5(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function cb(i,e,t,n){const s=w5(n);switch(t){case _E:return i*e;case uv:return i*e/s.components*s.byteLength;case fv:return i*e/s.components*s.byteLength;case AE:return i*e*2/s.components*s.byteLength;case Ux:return i*e*2/s.components*s.byteLength;case xE:return i*e*3/s.components*s.byteLength;case Zi:return i*e*4/s.components*s.byteLength;case Lx:return i*e*4/s.components*s.byteLength;case xg:case Ag:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Sg:case Mg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case O_:case P_:return Math.max(i,16)*Math.max(e,8)/4;case N_:case I_:return Math.max(i,8)*Math.max(e,8)/2;case F_:case H_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case z_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case G_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case V_:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case k_:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case X_:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case j_:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case Y_:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case q_:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case J_:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case K_:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case W_:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Z_:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case Q_:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case $_:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case ex:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case bg:case tx:case nx:return Math.ceil(i/4)*Math.ceil(e/4)*16;case SE:case ix:return Math.ceil(i/4)*Math.ceil(e/4)*8;case sx:case ax:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function w5(i){switch(i){case Ta:case Rx:return{byteLength:1,components:1};case tp:case wx:case Es:return{byteLength:2,components:1};case Bx:case Dx:return{byteLength:2,components:4};case xl:case cv:case Ii:return{byteLength:4,components:1};case yE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class B5{static contain(e,t){return T5(e,t)}static cover(e,t){return C5(e,t)}static fill(e){return R5(e)}static getByteLength(e,t,n,s){return cb(e,t,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ov}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ov);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function K3(){let i=null,e=!1,t=null,n=null;function s(r,o){t(r,o),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function D5(i){const e=new WeakMap;function t(c,f){const p=c.array,m=c.usage,v=p.byteLength,y=i.createBuffer();i.bindBuffer(f,y),i.bufferData(f,p,m),c.onUploadCallback();let x;if(p instanceof Float32Array)x=i.FLOAT;else if(p instanceof Uint16Array)c.isFloat16BufferAttribute?x=i.HALF_FLOAT:x=i.UNSIGNED_SHORT;else if(p instanceof Int16Array)x=i.SHORT;else if(p instanceof Uint32Array)x=i.UNSIGNED_INT;else if(p instanceof Int32Array)x=i.INT;else if(p instanceof Int8Array)x=i.BYTE;else if(p instanceof Uint8Array)x=i.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)x=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:y,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version,size:v}}function n(c,f,p){const m=f.array,v=f.updateRanges;if(i.bindBuffer(p,c),v.length===0)i.bufferSubData(p,0,m);else{v.sort((x,S)=>x.start-S.start);let y=0;for(let x=1;x<v.length;x++){const S=v[y],T=v[x];T.start<=S.start+S.count+1?S.count=Math.max(S.count,T.start+T.count-S.start):(++y,v[y]=T)}v.length=y+1;for(let x=0,S=v.length;x<S;x++){const T=v[x];i.bufferSubData(p,T.start*m.BYTES_PER_ELEMENT,m,T.start,T.count)}f.clearUpdateRanges()}f.onUploadCallback()}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function r(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=e.get(c);f&&(i.deleteBuffer(f.buffer),e.delete(c))}function o(c,f){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const m=e.get(c);(!m||m.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const p=e.get(c);if(p===void 0)e.set(c,t(c,f));else if(p.version<c.version){if(p.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,c,f),p.version=c.version}}return{get:s,remove:r,update:o}}var U5=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,L5=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,N5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,O5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,I5=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,P5=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,F5=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,H5=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,z5=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,G5=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,V5=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,k5=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,X5=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,j5=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Y5=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,q5=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,J5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,K5=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,W5=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Z5=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Q5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,$5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,e8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,t8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,n8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,i8=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,s8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,a8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,r8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,o8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,l8="gl_FragColor = linearToOutputTexel( gl_FragColor );",c8=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,u8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,f8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,h8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,d8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,p8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,m8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,g8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,v8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,y8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,_8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,x8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,A8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,S8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,M8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,b8=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,E8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,T8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,C8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,R8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,w8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,B8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,D8=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,U8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,L8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,N8=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,O8=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,I8=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,P8=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,F8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,H8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,z8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,G8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,V8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,k8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,X8=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,j8=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Y8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,q8=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,J8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,K8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,W8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Z8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Q8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,e6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,t6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,n6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,i6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,s6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,a6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,r6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,o6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,l6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,c6=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,u6=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,f6=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,h6=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,d6=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,p6=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,m6=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,g6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,v6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,y6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,_6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,x6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,A6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,S6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,M6=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,b6=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,E6=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,T6=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,C6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,R6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,w6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,B6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const D6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,U6=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,L6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,N6=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,O6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,I6=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,P6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,F6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,H6=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,z6=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,G6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,V6=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,k6=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,X6=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,j6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Y6=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q6=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,J6=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K6=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,W6=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Z6=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Q6=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,e9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,n9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,s9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,r9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,o9=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,l9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,c9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,u9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,An={alphahash_fragment:U5,alphahash_pars_fragment:L5,alphamap_fragment:N5,alphamap_pars_fragment:O5,alphatest_fragment:I5,alphatest_pars_fragment:P5,aomap_fragment:F5,aomap_pars_fragment:H5,batching_pars_vertex:z5,batching_vertex:G5,begin_vertex:V5,beginnormal_vertex:k5,bsdfs:X5,iridescence_fragment:j5,bumpmap_pars_fragment:Y5,clipping_planes_fragment:q5,clipping_planes_pars_fragment:J5,clipping_planes_pars_vertex:K5,clipping_planes_vertex:W5,color_fragment:Z5,color_pars_fragment:Q5,color_pars_vertex:$5,color_vertex:e8,common:t8,cube_uv_reflection_fragment:n8,defaultnormal_vertex:i8,displacementmap_pars_vertex:s8,displacementmap_vertex:a8,emissivemap_fragment:r8,emissivemap_pars_fragment:o8,colorspace_fragment:l8,colorspace_pars_fragment:c8,envmap_fragment:u8,envmap_common_pars_fragment:f8,envmap_pars_fragment:h8,envmap_pars_vertex:d8,envmap_physical_pars_fragment:b8,envmap_vertex:p8,fog_vertex:m8,fog_pars_vertex:g8,fog_fragment:v8,fog_pars_fragment:y8,gradientmap_pars_fragment:_8,lightmap_pars_fragment:x8,lights_lambert_fragment:A8,lights_lambert_pars_fragment:S8,lights_pars_begin:M8,lights_toon_fragment:E8,lights_toon_pars_fragment:T8,lights_phong_fragment:C8,lights_phong_pars_fragment:R8,lights_physical_fragment:w8,lights_physical_pars_fragment:B8,lights_fragment_begin:D8,lights_fragment_maps:U8,lights_fragment_end:L8,logdepthbuf_fragment:N8,logdepthbuf_pars_fragment:O8,logdepthbuf_pars_vertex:I8,logdepthbuf_vertex:P8,map_fragment:F8,map_pars_fragment:H8,map_particle_fragment:z8,map_particle_pars_fragment:G8,metalnessmap_fragment:V8,metalnessmap_pars_fragment:k8,morphinstance_vertex:X8,morphcolor_vertex:j8,morphnormal_vertex:Y8,morphtarget_pars_vertex:q8,morphtarget_vertex:J8,normal_fragment_begin:K8,normal_fragment_maps:W8,normal_pars_fragment:Z8,normal_pars_vertex:Q8,normal_vertex:$8,normalmap_pars_fragment:e6,clearcoat_normal_fragment_begin:t6,clearcoat_normal_fragment_maps:n6,clearcoat_pars_fragment:i6,iridescence_pars_fragment:s6,opaque_fragment:a6,packing:r6,premultiplied_alpha_fragment:o6,project_vertex:l6,dithering_fragment:c6,dithering_pars_fragment:u6,roughnessmap_fragment:f6,roughnessmap_pars_fragment:h6,shadowmap_pars_fragment:d6,shadowmap_pars_vertex:p6,shadowmap_vertex:m6,shadowmask_pars_fragment:g6,skinbase_vertex:v6,skinning_pars_vertex:y6,skinning_vertex:_6,skinnormal_vertex:x6,specularmap_fragment:A6,specularmap_pars_fragment:S6,tonemapping_fragment:M6,tonemapping_pars_fragment:b6,transmission_fragment:E6,transmission_pars_fragment:T6,uv_pars_fragment:C6,uv_pars_vertex:R6,uv_vertex:w6,worldpos_vertex:B6,background_vert:D6,background_frag:U6,backgroundCube_vert:L6,backgroundCube_frag:N6,cube_vert:O6,cube_frag:I6,depth_vert:P6,depth_frag:F6,distanceRGBA_vert:H6,distanceRGBA_frag:z6,equirect_vert:G6,equirect_frag:V6,linedashed_vert:k6,linedashed_frag:X6,meshbasic_vert:j6,meshbasic_frag:Y6,meshlambert_vert:q6,meshlambert_frag:J6,meshmatcap_vert:K6,meshmatcap_frag:W6,meshnormal_vert:Z6,meshnormal_frag:Q6,meshphong_vert:$6,meshphong_frag:e9,meshphysical_vert:t9,meshphysical_frag:n9,meshtoon_vert:i9,meshtoon_frag:s9,points_vert:a9,points_frag:r9,shadow_vert:o9,shadow_frag:l9,sprite_vert:c9,sprite_frag:u9},Rt={common:{diffuse:{value:new Tt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gn}},envmap:{envMap:{value:null},envMapRotation:{value:new gn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gn},normalScale:{value:new Ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Tt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Tt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0},uvTransform:{value:new gn}},sprite:{diffuse:{value:new Tt(16777215)},opacity:{value:1},center:{value:new Ke(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}}},_o={basic:{uniforms:Aa([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.fog]),vertexShader:An.meshbasic_vert,fragmentShader:An.meshbasic_frag},lambert:{uniforms:Aa([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new Tt(0)}}]),vertexShader:An.meshlambert_vert,fragmentShader:An.meshlambert_frag},phong:{uniforms:Aa([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new Tt(0)},specular:{value:new Tt(1118481)},shininess:{value:30}}]),vertexShader:An.meshphong_vert,fragmentShader:An.meshphong_frag},standard:{uniforms:Aa([Rt.common,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.roughnessmap,Rt.metalnessmap,Rt.fog,Rt.lights,{emissive:{value:new Tt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag},toon:{uniforms:Aa([Rt.common,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.gradientmap,Rt.fog,Rt.lights,{emissive:{value:new Tt(0)}}]),vertexShader:An.meshtoon_vert,fragmentShader:An.meshtoon_frag},matcap:{uniforms:Aa([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,{matcap:{value:null}}]),vertexShader:An.meshmatcap_vert,fragmentShader:An.meshmatcap_frag},points:{uniforms:Aa([Rt.points,Rt.fog]),vertexShader:An.points_vert,fragmentShader:An.points_frag},dashed:{uniforms:Aa([Rt.common,Rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:An.linedashed_vert,fragmentShader:An.linedashed_frag},depth:{uniforms:Aa([Rt.common,Rt.displacementmap]),vertexShader:An.depth_vert,fragmentShader:An.depth_frag},normal:{uniforms:Aa([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,{opacity:{value:1}}]),vertexShader:An.meshnormal_vert,fragmentShader:An.meshnormal_frag},sprite:{uniforms:Aa([Rt.sprite,Rt.fog]),vertexShader:An.sprite_vert,fragmentShader:An.sprite_frag},background:{uniforms:{uvTransform:{value:new gn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:An.background_vert,fragmentShader:An.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gn}},vertexShader:An.backgroundCube_vert,fragmentShader:An.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:An.cube_vert,fragmentShader:An.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:An.equirect_vert,fragmentShader:An.equirect_frag},distanceRGBA:{uniforms:Aa([Rt.common,Rt.displacementmap,{referencePosition:{value:new $},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:An.distanceRGBA_vert,fragmentShader:An.distanceRGBA_frag},shadow:{uniforms:Aa([Rt.lights,Rt.fog,{color:{value:new Tt(0)},opacity:{value:1}}]),vertexShader:An.shadow_vert,fragmentShader:An.shadow_frag}};_o.physical={uniforms:Aa([_o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gn},clearcoatNormalScale:{value:new Ke(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gn},sheen:{value:0},sheenColor:{value:new Tt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gn},transmissionSamplerSize:{value:new Ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gn},attenuationDistance:{value:0},attenuationColor:{value:new Tt(0)},specularColor:{value:new Tt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gn},anisotropyVector:{value:new Ke},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gn}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag};const qy={r:0,b:0,g:0},Nf=new ur,f9=new Jt;function h9(i,e,t,n,s,r,o){const c=new Tt(0);let f=r===!0?0:1,p,m,v=null,y=0,x=null;function S(B){let D=B.isScene===!0?B.background:null;return D&&D.isTexture&&(D=(B.backgroundBlurriness>0?t:e).get(D)),D}function T(B){let D=!1;const O=S(B);O===null?A(c,f):O&&O.isColor&&(A(O,1),D=!0);const I=i.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,o):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||D)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function E(B,D){const O=S(D);O&&(O.isCubeTexture||O.mapping===_p)?(m===void 0&&(m=new Ei(new ph(1,1,1),new Ya({name:"BackgroundCubeMaterial",uniforms:cp(_o.backgroundCube.uniforms),vertexShader:_o.backgroundCube.vertexShader,fragmentShader:_o.backgroundCube.fragmentShader,side:Ea,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(I,z,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(m)),Nf.copy(D.backgroundRotation),Nf.x*=-1,Nf.y*=-1,Nf.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(Nf.y*=-1,Nf.z*=-1),m.material.uniforms.envMap.value=O,m.material.uniforms.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(f9.makeRotationFromEuler(Nf)),m.material.toneMapped=Nn.getTransfer(O.colorSpace)!==ii,(v!==O||y!==O.version||x!==i.toneMapping)&&(m.material.needsUpdate=!0,v=O,y=O.version,x=i.toneMapping),m.layers.enableAll(),B.unshift(m,m.geometry,m.material,0,0,null)):O&&O.isTexture&&(p===void 0&&(p=new Ei(new Ru(2,2),new Ya({name:"BackgroundMaterial",uniforms:cp(_o.background.uniforms),vertexShader:_o.background.vertexShader,fragmentShader:_o.background.fragmentShader,side:yl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(p)),p.material.uniforms.t2D.value=O,p.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,p.material.toneMapped=Nn.getTransfer(O.colorSpace)!==ii,O.matrixAutoUpdate===!0&&O.updateMatrix(),p.material.uniforms.uvTransform.value.copy(O.matrix),(v!==O||y!==O.version||x!==i.toneMapping)&&(p.material.needsUpdate=!0,v=O,y=O.version,x=i.toneMapping),p.layers.enableAll(),B.unshift(p,p.geometry,p.material,0,0,null))}function A(B,D){B.getRGB(qy,t3(i)),n.buffers.color.setClear(qy.r,qy.g,qy.b,D,o)}function w(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return c},setClearColor:function(B,D=1){c.set(B),f=D,A(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(B){f=B,A(c,f)},render:T,addToRenderList:E,dispose:w}}function d9(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=y(null);let r=s,o=!1;function c(N,j,ce,ne,fe){let _e=!1;const H=v(ne,ce,j);r!==H&&(r=H,p(r.object)),_e=x(N,ne,ce,fe),_e&&S(N,ne,ce,fe),fe!==null&&e.update(fe,i.ELEMENT_ARRAY_BUFFER),(_e||o)&&(o=!1,D(N,j,ce,ne),fe!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(fe).buffer))}function f(){return i.createVertexArray()}function p(N){return i.bindVertexArray(N)}function m(N){return i.deleteVertexArray(N)}function v(N,j,ce){const ne=ce.wireframe===!0;let fe=n[N.id];fe===void 0&&(fe={},n[N.id]=fe);let _e=fe[j.id];_e===void 0&&(_e={},fe[j.id]=_e);let H=_e[ne];return H===void 0&&(H=y(f()),_e[ne]=H),H}function y(N){const j=[],ce=[],ne=[];for(let fe=0;fe<t;fe++)j[fe]=0,ce[fe]=0,ne[fe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:ce,attributeDivisors:ne,object:N,attributes:{},index:null}}function x(N,j,ce,ne){const fe=r.attributes,_e=j.attributes;let H=0;const W=ce.getAttributes();for(const Q in W)if(W[Q].location>=0){const X=fe[Q];let re=_e[Q];if(re===void 0&&(Q==="instanceMatrix"&&N.instanceMatrix&&(re=N.instanceMatrix),Q==="instanceColor"&&N.instanceColor&&(re=N.instanceColor)),X===void 0||X.attribute!==re||re&&X.data!==re.data)return!0;H++}return r.attributesNum!==H||r.index!==ne}function S(N,j,ce,ne){const fe={},_e=j.attributes;let H=0;const W=ce.getAttributes();for(const Q in W)if(W[Q].location>=0){let X=_e[Q];X===void 0&&(Q==="instanceMatrix"&&N.instanceMatrix&&(X=N.instanceMatrix),Q==="instanceColor"&&N.instanceColor&&(X=N.instanceColor));const re={};re.attribute=X,X&&X.data&&(re.data=X.data),fe[Q]=re,H++}r.attributes=fe,r.attributesNum=H,r.index=ne}function T(){const N=r.newAttributes;for(let j=0,ce=N.length;j<ce;j++)N[j]=0}function E(N){A(N,0)}function A(N,j){const ce=r.newAttributes,ne=r.enabledAttributes,fe=r.attributeDivisors;ce[N]=1,ne[N]===0&&(i.enableVertexAttribArray(N),ne[N]=1),fe[N]!==j&&(i.vertexAttribDivisor(N,j),fe[N]=j)}function w(){const N=r.newAttributes,j=r.enabledAttributes;for(let ce=0,ne=j.length;ce<ne;ce++)j[ce]!==N[ce]&&(i.disableVertexAttribArray(ce),j[ce]=0)}function B(N,j,ce,ne,fe,_e,H){H===!0?i.vertexAttribIPointer(N,j,ce,fe,_e):i.vertexAttribPointer(N,j,ce,ne,fe,_e)}function D(N,j,ce,ne){T();const fe=ne.attributes,_e=ce.getAttributes(),H=j.defaultAttributeValues;for(const W in _e){const Q=_e[W];if(Q.location>=0){let ve=fe[W];if(ve===void 0&&(W==="instanceMatrix"&&N.instanceMatrix&&(ve=N.instanceMatrix),W==="instanceColor"&&N.instanceColor&&(ve=N.instanceColor)),ve!==void 0){const X=ve.normalized,re=ve.itemSize,Ae=e.get(ve);if(Ae===void 0)continue;const Ce=Ae.buffer,oe=Ae.type,Ne=Ae.bytesPerElement,Oe=oe===i.INT||oe===i.UNSIGNED_INT||ve.gpuType===cv;if(ve.isInterleavedBufferAttribute){const $e=ve.data,tt=$e.stride,Dt=ve.offset;if($e.isInstancedInterleavedBuffer){for(let wt=0;wt<Q.locationSize;wt++)A(Q.location+wt,$e.meshPerAttribute);N.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let wt=0;wt<Q.locationSize;wt++)E(Q.location+wt);i.bindBuffer(i.ARRAY_BUFFER,Ce);for(let wt=0;wt<Q.locationSize;wt++)B(Q.location+wt,re/Q.locationSize,oe,X,tt*Ne,(Dt+re/Q.locationSize*wt)*Ne,Oe)}else{if(ve.isInstancedBufferAttribute){for(let $e=0;$e<Q.locationSize;$e++)A(Q.location+$e,ve.meshPerAttribute);N.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let $e=0;$e<Q.locationSize;$e++)E(Q.location+$e);i.bindBuffer(i.ARRAY_BUFFER,Ce);for(let $e=0;$e<Q.locationSize;$e++)B(Q.location+$e,re/Q.locationSize,oe,X,re*Ne,re/Q.locationSize*$e*Ne,Oe)}}else if(H!==void 0){const X=H[W];if(X!==void 0)switch(X.length){case 2:i.vertexAttrib2fv(Q.location,X);break;case 3:i.vertexAttrib3fv(Q.location,X);break;case 4:i.vertexAttrib4fv(Q.location,X);break;default:i.vertexAttrib1fv(Q.location,X)}}}}w()}function O(){P();for(const N in n){const j=n[N];for(const ce in j){const ne=j[ce];for(const fe in ne)m(ne[fe].object),delete ne[fe];delete j[ce]}delete n[N]}}function I(N){if(n[N.id]===void 0)return;const j=n[N.id];for(const ce in j){const ne=j[ce];for(const fe in ne)m(ne[fe].object),delete ne[fe];delete j[ce]}delete n[N.id]}function z(N){for(const j in n){const ce=n[j];if(ce[N.id]===void 0)continue;const ne=ce[N.id];for(const fe in ne)m(ne[fe].object),delete ne[fe];delete ce[N.id]}}function P(){L(),o=!0,r!==s&&(r=s,p(r.object))}function L(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:c,reset:P,resetDefaultState:L,dispose:O,releaseStatesOfGeometry:I,releaseStatesOfProgram:z,initAttributes:T,enableAttribute:E,disableUnusedAttributes:w}}function p9(i,e,t){let n;function s(p){n=p}function r(p,m){i.drawArrays(n,p,m),t.update(m,n,1)}function o(p,m,v){v!==0&&(i.drawArraysInstanced(n,p,m,v),t.update(m,n,v))}function c(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,m,0,v);let x=0;for(let S=0;S<v;S++)x+=m[S];t.update(x,n,1)}function f(p,m,v,y){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let S=0;S<p.length;S++)o(p[S],m[S],y[S]);else{x.multiDrawArraysInstancedWEBGL(n,p,0,m,0,y,0,v);let S=0;for(let T=0;T<v;T++)S+=m[T]*y[T];t.update(S,n,1)}}this.setMode=s,this.render=r,this.renderInstances=o,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function m9(i,e,t,n){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(z){return!(z!==Zi&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(z){const P=z===Es&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==Ta&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==Ii&&!P)}function f(z){if(z==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const m=f(p);m!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",m,"instead."),p=m);const v=t.logarithmicDepthBuffer===!0,y=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),x=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),S=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=i.getParameter(i.MAX_TEXTURE_SIZE),E=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),A=i.getParameter(i.MAX_VERTEX_ATTRIBS),w=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),B=i.getParameter(i.MAX_VARYING_VECTORS),D=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),O=S>0,I=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:f,textureFormatReadable:o,textureTypeReadable:c,precision:p,logarithmicDepthBuffer:v,reverseDepthBuffer:y,maxTextures:x,maxVertexTextures:S,maxTextureSize:T,maxCubemapSize:E,maxAttributes:A,maxVertexUniforms:w,maxVaryings:B,maxFragmentUniforms:D,vertexTextures:O,maxSamples:I}}function g9(i){const e=this;let t=null,n=0,s=!1,r=!1;const o=new tc,c=new gn,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(v,y){const x=v.length!==0||y||n!==0||s;return s=y,n=v.length,x},this.beginShadows=function(){r=!0,m(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(v,y){t=m(v,y,0)},this.setState=function(v,y,x){const S=v.clippingPlanes,T=v.clipIntersection,E=v.clipShadows,A=i.get(v);if(!s||S===null||S.length===0||r&&!E)r?m(null):p();else{const w=r?0:n,B=w*4;let D=A.clippingState||null;f.value=D,D=m(S,y,B,x);for(let O=0;O!==B;++O)D[O]=t[O];A.clippingState=D,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=w}};function p(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function m(v,y,x,S){const T=v!==null?v.length:0;let E=null;if(T!==0){if(E=f.value,S!==!0||E===null){const A=x+T*4,w=y.matrixWorldInverse;c.getNormalMatrix(w),(E===null||E.length<A)&&(E=new Float32Array(A));for(let B=0,D=x;B!==T;++B,D+=4)o.copy(v[B]).applyMatrix4(w,c),o.normal.toArray(E,D),E[D+3]=o.constant}f.value=E,f.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,E}}function v9(i){let e=new WeakMap;function t(o,c){return c===$d?o.mapping=_l:c===Gg&&(o.mapping=Su),o}function n(o){if(o&&o.isTexture){const c=o.mapping;if(c===$d||c===Gg)if(e.has(o)){const f=e.get(o).texture;return t(f,o.mapping)}else{const f=o.image;if(f&&f.height>0){const p=new wE(f.height);return p.fromEquirectangularTexture(i,o),e.set(o,p),o.addEventListener("dispose",s),t(p.texture,o.mapping)}else return null}}return o}function s(o){const c=o.target;c.removeEventListener("dispose",s);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}const jd=4,ew=[.125,.215,.35,.446,.526,.582],Vf=20,jS=new gl,tw=new Tt;let YS=null,qS=0,JS=0,KS=!1;const Gf=(1+Math.sqrt(5))/2,Od=1/Gf,nw=[new $(-Gf,Od,0),new $(Gf,Od,0),new $(-Od,0,Gf),new $(Od,0,Gf),new $(0,Gf,-Od),new $(0,Gf,Od),new $(-1,1,-1),new $(1,1,-1),new $(-1,1,1),new $(1,1,1)],y9=new $;class ub{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100,r={}){const{size:o=256,position:c=y9}=r;YS=this._renderer.getRenderTarget(),qS=this._renderer.getActiveCubeFace(),JS=this._renderer.getActiveMipmapLevel(),KS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,n,s,f,c),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=aw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=sw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(YS,qS,JS),this._renderer.xr.enabled=KS,e.scissorTest=!1,Jy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_l||e.mapping===Su?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),YS=this._renderer.getRenderTarget(),qS=this._renderer.getActiveCubeFace(),JS=this._renderer.getActiveMipmapLevel(),KS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Jn,minFilter:Jn,generateMipmaps:!1,type:Es,format:Zi,colorSpace:Eo,depthBuffer:!1},s=iw(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=iw(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_9(r)),this._blurMaterial=x9(r,e,t)}return s}_compileMaterial(e){const t=new Ei(this._lodPlanes[0],e);this._renderer.compile(t,jS)}_sceneToCubeUV(e,t,n,s,r){const f=new ki(90,1,t,n),p=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],v=this._renderer,y=v.autoClear,x=v.toneMapping;v.getClearColor(tw),v.toneMapping=ml,v.autoClear=!1;const S=new Xa({name:"PMREM.Background",side:Ea,depthWrite:!1,depthTest:!1}),T=new Ei(new ph,S);let E=!1;const A=e.background;A?A.isColor&&(S.color.copy(A),e.background=null,E=!0):(S.color.copy(tw),E=!0);for(let w=0;w<6;w++){const B=w%3;B===0?(f.up.set(0,p[w],0),f.position.set(r.x,r.y,r.z),f.lookAt(r.x+m[w],r.y,r.z)):B===1?(f.up.set(0,0,p[w]),f.position.set(r.x,r.y,r.z),f.lookAt(r.x,r.y+m[w],r.z)):(f.up.set(0,p[w],0),f.position.set(r.x,r.y,r.z),f.lookAt(r.x,r.y,r.z+m[w]));const D=this._cubeSize;Jy(s,B*D,w>2?D:0,D,D),v.setRenderTarget(s),E&&v.render(T,f),v.render(e,f)}T.geometry.dispose(),T.material.dispose(),v.toneMapping=x,v.autoClear=y,e.background=A}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===_l||e.mapping===Su;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=aw()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=sw());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new Ei(this._lodPlanes[0],r),c=r.uniforms;c.envMap.value=e;const f=this._cubeSize;Jy(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(o,jS)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),c=nw[(s-r-1)%nw.length];this._blur(e,r-1,r,o,c)}t.autoClear=n}_blur(e,t,n,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,s,"latitudinal",r),this._halfBlur(o,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,o,c){const f=this._renderer,p=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,v=new Ei(this._lodPlanes[s],p),y=p.uniforms,x=this._sizeLods[n]-1,S=isFinite(r)?Math.PI/(2*x):2*Math.PI/(2*Vf-1),T=r/S,E=isFinite(r)?1+Math.floor(m*T):Vf;E>Vf&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${Vf}`);const A=[];let w=0;for(let z=0;z<Vf;++z){const P=z/T,L=Math.exp(-P*P/2);A.push(L),z===0?w+=L:z<E&&(w+=2*L)}for(let z=0;z<A.length;z++)A[z]=A[z]/w;y.envMap.value=e.texture,y.samples.value=E,y.weights.value=A,y.latitudinal.value=o==="latitudinal",c&&(y.poleAxis.value=c);const{_lodMax:B}=this;y.dTheta.value=S,y.mipInt.value=B-n;const D=this._sizeLods[s],O=3*D*(s>B-jd?s-B+jd:0),I=4*(this._cubeSize-D);Jy(t,O,I,3*D,2*D),f.setRenderTarget(t),f.render(v,jS)}}function _9(i){const e=[],t=[],n=[];let s=i;const r=i-jd+1+ew.length;for(let o=0;o<r;o++){const c=Math.pow(2,s);t.push(c);let f=1/c;o>i-jd?f=ew[o-i+jd-1]:o===0&&(f=0),n.push(f);const p=1/(c-2),m=-p,v=1+p,y=[m,m,v,m,v,v,m,m,v,v,m,v],x=6,S=6,T=3,E=2,A=1,w=new Float32Array(T*S*x),B=new Float32Array(E*S*x),D=new Float32Array(A*S*x);for(let I=0;I<x;I++){const z=I%3*2/3-1,P=I>2?0:-1,L=[z,P,0,z+2/3,P,0,z+2/3,P+1,0,z,P,0,z+2/3,P+1,0,z,P+1,0];w.set(L,T*S*I),B.set(y,E*S*I);const N=[I,I,I,I,I,I];D.set(N,A*S*I)}const O=new dn;O.setAttribute("position",new zn(w,T)),O.setAttribute("uv",new zn(B,E)),O.setAttribute("faceIndex",new zn(D,A)),e.push(O),s>jd&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function iw(i,e,t){const n=new Hr(i,e,t);return n.texture.mapping=_p,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Jy(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function x9(i,e,t){const n=new Float32Array(Vf),s=new $(0,1,0);return new Ya({name:"SphericalGaussianBlur",defines:{n:Vf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:s1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:pl,depthTest:!1,depthWrite:!1})}function sw(){return new Ya({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:s1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:pl,depthTest:!1,depthWrite:!1})}function aw(){return new Ya({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:s1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:pl,depthTest:!1,depthWrite:!1})}function s1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function A9(i){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const f=c.mapping,p=f===$d||f===Gg,m=f===_l||f===Su;if(p||m){let v=e.get(c);const y=v!==void 0?v.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==y)return t===null&&(t=new ub(i)),v=p?t.fromEquirectangular(c,v):t.fromCubemap(c,v),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),v.texture;if(v!==void 0)return v.texture;{const x=c.image;return p&&x&&x.height>0||m&&x&&s(x)?(t===null&&(t=new ub(i)),v=p?t.fromEquirectangular(c):t.fromCubemap(c),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),c.addEventListener("dispose",r),v.texture):null}}}return c}function s(c){let f=0;const p=6;for(let m=0;m<p;m++)c[m]!==void 0&&f++;return f===p}function r(c){const f=c.target;f.removeEventListener("dispose",r);const p=e.get(f);p!==void 0&&(e.delete(f),p.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function S9(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&d_("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function M9(i,e,t,n){const s={},r=new WeakMap;function o(v){const y=v.target;y.index!==null&&e.remove(y.index);for(const S in y.attributes)e.remove(y.attributes[S]);y.removeEventListener("dispose",o),delete s[y.id];const x=r.get(y);x&&(e.remove(x),r.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function c(v,y){return s[y.id]===!0||(y.addEventListener("dispose",o),s[y.id]=!0,t.memory.geometries++),y}function f(v){const y=v.attributes;for(const x in y)e.update(y[x],i.ARRAY_BUFFER)}function p(v){const y=[],x=v.index,S=v.attributes.position;let T=0;if(x!==null){const w=x.array;T=x.version;for(let B=0,D=w.length;B<D;B+=3){const O=w[B+0],I=w[B+1],z=w[B+2];y.push(O,I,I,z,z,O)}}else if(S!==void 0){const w=S.array;T=S.version;for(let B=0,D=w.length/3-1;B<D;B+=3){const O=B+0,I=B+1,z=B+2;y.push(O,I,I,z,z,O)}}else return;const E=new(ZD(y)?RE:CE)(y,1);E.version=T;const A=r.get(v);A&&e.remove(A),r.set(v,E)}function m(v){const y=r.get(v);if(y){const x=v.index;x!==null&&y.version<x.version&&p(v)}else p(v);return r.get(v)}return{get:c,update:f,getWireframeAttribute:m}}function b9(i,e,t){let n;function s(y){n=y}let r,o;function c(y){r=y.type,o=y.bytesPerElement}function f(y,x){i.drawElements(n,x,r,y*o),t.update(x,n,1)}function p(y,x,S){S!==0&&(i.drawElementsInstanced(n,x,r,y*o,S),t.update(x,n,S))}function m(y,x,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,x,0,r,y,0,S);let E=0;for(let A=0;A<S;A++)E+=x[A];t.update(E,n,1)}function v(y,x,S,T){if(S===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let A=0;A<y.length;A++)p(y[A]/o,x[A],T[A]);else{E.multiDrawElementsInstancedWEBGL(n,x,0,r,y,0,T,0,S);let A=0;for(let w=0;w<S;w++)A+=x[w]*T[w];t.update(A,n,1)}}this.setMode=s,this.setIndex=c,this.render=f,this.renderInstances=p,this.renderMultiDraw=m,this.renderMultiDrawInstances=v}function E9(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,o,c){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=c*(r/3);break;case i.LINES:t.lines+=c*(r/2);break;case i.LINE_STRIP:t.lines+=c*(r-1);break;case i.LINE_LOOP:t.lines+=c*r;break;case i.POINTS:t.points+=c*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function T9(i,e,t){const n=new WeakMap,s=new Hn;function r(o,c,f){const p=o.morphTargetInfluences,m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=m!==void 0?m.length:0;let y=n.get(c);if(y===void 0||y.count!==v){let N=function(){P.dispose(),n.delete(c),c.removeEventListener("dispose",N)};var x=N;y!==void 0&&y.texture.dispose();const S=c.morphAttributes.position!==void 0,T=c.morphAttributes.normal!==void 0,E=c.morphAttributes.color!==void 0,A=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],B=c.morphAttributes.color||[];let D=0;S===!0&&(D=1),T===!0&&(D=2),E===!0&&(D=3);let O=c.attributes.position.count*D,I=1;O>e.maxTextureSize&&(I=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const z=new Float32Array(O*I*4*v),P=new hv(z,O,I,v);P.type=Ii,P.needsUpdate=!0;const L=D*4;for(let j=0;j<v;j++){const ce=A[j],ne=w[j],fe=B[j],_e=O*I*4*j;for(let H=0;H<ce.count;H++){const W=H*L;S===!0&&(s.fromBufferAttribute(ce,H),z[_e+W+0]=s.x,z[_e+W+1]=s.y,z[_e+W+2]=s.z,z[_e+W+3]=0),T===!0&&(s.fromBufferAttribute(ne,H),z[_e+W+4]=s.x,z[_e+W+5]=s.y,z[_e+W+6]=s.z,z[_e+W+7]=0),E===!0&&(s.fromBufferAttribute(fe,H),z[_e+W+8]=s.x,z[_e+W+9]=s.y,z[_e+W+10]=s.z,z[_e+W+11]=fe.itemSize===4?s.w:1)}}y={count:v,texture:P,size:new Ke(O,I)},n.set(c,y),c.addEventListener("dispose",N)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)f.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let S=0;for(let E=0;E<p.length;E++)S+=p[E];const T=c.morphTargetsRelative?1:1-S;f.getUniforms().setValue(i,"morphTargetBaseInfluence",T),f.getUniforms().setValue(i,"morphTargetInfluences",p)}f.getUniforms().setValue(i,"morphTargetsTexture",y.texture,t),f.getUniforms().setValue(i,"morphTargetsTextureSize",y.size)}return{update:r}}function C9(i,e,t,n){let s=new WeakMap;function r(f){const p=n.render.frame,m=f.geometry,v=e.get(f,m);if(s.get(v)!==p&&(e.update(v),s.set(v,p)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),s.get(f)!==p&&(t.update(f.instanceMatrix,i.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,i.ARRAY_BUFFER),s.set(f,p))),f.isSkinnedMesh){const y=f.skeleton;s.get(y)!==p&&(y.update(),s.set(y,p))}return v}function o(){s=new WeakMap}function c(f){const p=f.target;p.removeEventListener("dispose",c),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:r,dispose:o}}const W3=new Wn,rw=new Xx(1,1),Z3=new hv,Q3=new Ix,$3=new dv,ow=[],lw=[],cw=new Float32Array(16),uw=new Float32Array(9),fw=new Float32Array(4);function Sp(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let r=ow[s];if(r===void 0&&(r=new Float32Array(s),ow[s]=r),e!==0){n.toArray(r,0);for(let o=1,c=0;o!==e;++o)c+=t,i[o].toArray(r,c)}return r}function ms(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function gs(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function aA(i,e){let t=lw[e];t===void 0&&(t=new Int32Array(e),lw[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function R9(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function w9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ms(t,e))return;i.uniform2fv(this.addr,e),gs(t,e)}}function B9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ms(t,e))return;i.uniform3fv(this.addr,e),gs(t,e)}}function D9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ms(t,e))return;i.uniform4fv(this.addr,e),gs(t,e)}}function U9(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ms(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),gs(t,e)}else{if(ms(t,n))return;fw.set(n),i.uniformMatrix2fv(this.addr,!1,fw),gs(t,n)}}function L9(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ms(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),gs(t,e)}else{if(ms(t,n))return;uw.set(n),i.uniformMatrix3fv(this.addr,!1,uw),gs(t,n)}}function N9(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ms(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),gs(t,e)}else{if(ms(t,n))return;cw.set(n),i.uniformMatrix4fv(this.addr,!1,cw),gs(t,n)}}function O9(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function I9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ms(t,e))return;i.uniform2iv(this.addr,e),gs(t,e)}}function P9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ms(t,e))return;i.uniform3iv(this.addr,e),gs(t,e)}}function F9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ms(t,e))return;i.uniform4iv(this.addr,e),gs(t,e)}}function H9(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function z9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ms(t,e))return;i.uniform2uiv(this.addr,e),gs(t,e)}}function G9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ms(t,e))return;i.uniform3uiv(this.addr,e),gs(t,e)}}function V9(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ms(t,e))return;i.uniform4uiv(this.addr,e),gs(t,e)}}function k9(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(rw.compareFunction=EE,r=rw):r=W3,t.setTexture2D(e||r,s)}function X9(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||Q3,s)}function j9(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||$3,s)}function Y9(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||Z3,s)}function q9(i){switch(i){case 5126:return R9;case 35664:return w9;case 35665:return B9;case 35666:return D9;case 35674:return U9;case 35675:return L9;case 35676:return N9;case 5124:case 35670:return O9;case 35667:case 35671:return I9;case 35668:case 35672:return P9;case 35669:case 35673:return F9;case 5125:return H9;case 36294:return z9;case 36295:return G9;case 36296:return V9;case 35678:case 36198:case 36298:case 36306:case 35682:return k9;case 35679:case 36299:case 36307:return X9;case 35680:case 36300:case 36308:case 36293:return j9;case 36289:case 36303:case 36311:case 36292:return Y9}}function J9(i,e){i.uniform1fv(this.addr,e)}function K9(i,e){const t=Sp(e,this.size,2);i.uniform2fv(this.addr,t)}function W9(i,e){const t=Sp(e,this.size,3);i.uniform3fv(this.addr,t)}function Z9(i,e){const t=Sp(e,this.size,4);i.uniform4fv(this.addr,t)}function Q9(i,e){const t=Sp(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function $9(i,e){const t=Sp(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function ek(i,e){const t=Sp(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function tk(i,e){i.uniform1iv(this.addr,e)}function nk(i,e){i.uniform2iv(this.addr,e)}function ik(i,e){i.uniform3iv(this.addr,e)}function sk(i,e){i.uniform4iv(this.addr,e)}function ak(i,e){i.uniform1uiv(this.addr,e)}function rk(i,e){i.uniform2uiv(this.addr,e)}function ok(i,e){i.uniform3uiv(this.addr,e)}function lk(i,e){i.uniform4uiv(this.addr,e)}function ck(i,e,t){const n=this.cache,s=e.length,r=aA(t,s);ms(n,r)||(i.uniform1iv(this.addr,r),gs(n,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||W3,r[o])}function uk(i,e,t){const n=this.cache,s=e.length,r=aA(t,s);ms(n,r)||(i.uniform1iv(this.addr,r),gs(n,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||Q3,r[o])}function fk(i,e,t){const n=this.cache,s=e.length,r=aA(t,s);ms(n,r)||(i.uniform1iv(this.addr,r),gs(n,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||$3,r[o])}function hk(i,e,t){const n=this.cache,s=e.length,r=aA(t,s);ms(n,r)||(i.uniform1iv(this.addr,r),gs(n,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||Z3,r[o])}function dk(i){switch(i){case 5126:return J9;case 35664:return K9;case 35665:return W9;case 35666:return Z9;case 35674:return Q9;case 35675:return $9;case 35676:return ek;case 5124:case 35670:return tk;case 35667:case 35671:return nk;case 35668:case 35672:return ik;case 35669:case 35673:return sk;case 5125:return ak;case 36294:return rk;case 36295:return ok;case 36296:return lk;case 35678:case 36198:case 36298:case 36306:case 35682:return ck;case 35679:case 36299:case 36307:return uk;case 35680:case 36300:case 36308:case 36293:return fk;case 36289:case 36303:case 36311:case 36292:return hk}}class pk{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=q9(t.type)}}class mk{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=dk(t.type)}}class gk{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const c=s[r];c.setValue(e,t[c.id],n)}}}const WS=/(\w+)(\])?(\[|\.)?/g;function hw(i,e){i.seq.push(e),i.map[e.id]=e}function vk(i,e,t){const n=i.name,s=n.length;for(WS.lastIndex=0;;){const r=WS.exec(n),o=WS.lastIndex;let c=r[1];const f=r[2]==="]",p=r[3];if(f&&(c=c|0),p===void 0||p==="["&&o+2===s){hw(t,p===void 0?new pk(c,i,e):new mk(c,i,e));break}else{let v=t.map[c];v===void 0&&(v=new gk(c),hw(t,v)),t=v}}}class m_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);vk(r,o,this)}}setValue(e,t,n,s){const r=this.map[t];r!==void 0&&r.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let r=0,o=t.length;r!==o;++r){const c=t[r],f=n[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&n.push(o)}return n}}function dw(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const yk=37297;let _k=0;function xk(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const c=o+1;n.push(`${c===e?">":" "} ${c}: ${t[o]}`)}return n.join(`
`)}const pw=new gn;function Ak(i){Nn._getMatrix(pw,Nn.workingColorSpace,i);const e=`mat3( ${pw.elements.map(t=>t.toFixed(4))} )`;switch(Nn.getTransfer(i)){case kg:return[e,"LinearTransferOETF"];case ii:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function mw(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+xk(i.getShaderSource(e),o)}else return s}function Sk(i,e){const t=Ak(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Mk(i,e){let t;switch(e){case wD:t="Linear";break;case BD:t="Reinhard";break;case DD:t="Cineon";break;case vE:t="ACESFilmic";break;case LD:t="AgX";break;case ND:t="Neutral";break;case UD:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Ky=new $;function bk(){Nn.getLuminanceCoefficients(Ky);const i=Ky.x.toFixed(4),e=Ky.y.toFixed(4),t=Ky.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Ek(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ug).join(`
`)}function Tk(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Ck(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(e,s),o=r.name;let c=1;r.type===i.FLOAT_MAT2&&(c=2),r.type===i.FLOAT_MAT3&&(c=3),r.type===i.FLOAT_MAT4&&(c=4),t[o]={type:r.type,location:i.getAttribLocation(e,o),locationSize:c}}return t}function ug(i){return i!==""}function gw(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vw(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Rk=/^[ \t]*#include +<([\w\d./]+)>/gm;function fb(i){return i.replace(Rk,Bk)}const wk=new Map;function Bk(i,e){let t=An[e];if(t===void 0){const n=wk.get(e);if(n!==void 0)t=An[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return fb(t)}const Dk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yw(i){return i.replace(Dk,Uk)}function Uk(i,e,t,n){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function _w(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Lk(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Tx?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===_g?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===yo&&(e="SHADOWMAP_TYPE_VSM"),e}function Nk(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case _l:case Su:e="ENVMAP_TYPE_CUBE";break;case _p:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Ok(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Su:e="ENVMAP_MODE_REFRACTION";break}return e}function Ik(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case lv:e="ENVMAP_BLENDING_MULTIPLY";break;case CD:e="ENVMAP_BLENDING_MIX";break;case RD:e="ENVMAP_BLENDING_ADD";break}return e}function Pk(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function Fk(i,e,t,n){const s=i.getContext(),r=t.defines;let o=t.vertexShader,c=t.fragmentShader;const f=Lk(t),p=Nk(t),m=Ok(t),v=Ik(t),y=Pk(t),x=Ek(t),S=Tk(r),T=s.createProgram();let E,A,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(ug).join(`
`),E.length>0&&(E+=`
`),A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(ug).join(`
`),A.length>0&&(A+=`
`)):(E=[_w(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ug).join(`
`),A=[_w(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",t.envMap?"#define "+v:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ml?"#define TONE_MAPPING":"",t.toneMapping!==ml?An.tonemapping_pars_fragment:"",t.toneMapping!==ml?Mk("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",An.colorspace_pars_fragment,Sk("linearToOutputTexel",t.outputColorSpace),bk(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ug).join(`
`)),o=fb(o),o=gw(o,t),o=vw(o,t),c=fb(c),c=gw(c,t),c=vw(c,t),o=yw(o),c=yw(c),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,E=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,A=["#define varying in",t.glslVersion===nb?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===nb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const B=w+E+o,D=w+A+c,O=dw(s,s.VERTEX_SHADER,B),I=dw(s,s.FRAGMENT_SHADER,D);s.attachShader(T,O),s.attachShader(T,I),t.index0AttributeName!==void 0?s.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(T,0,"position"),s.linkProgram(T);function z(j){if(i.debug.checkShaderErrors){const ce=s.getProgramInfoLog(T).trim(),ne=s.getShaderInfoLog(O).trim(),fe=s.getShaderInfoLog(I).trim();let _e=!0,H=!0;if(s.getProgramParameter(T,s.LINK_STATUS)===!1)if(_e=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,T,O,I);else{const W=mw(s,O,"vertex"),Q=mw(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(T,s.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+ce+`
`+W+`
`+Q)}else ce!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ce):(ne===""||fe==="")&&(H=!1);H&&(j.diagnostics={runnable:_e,programLog:ce,vertexShader:{log:ne,prefix:E},fragmentShader:{log:fe,prefix:A}})}s.deleteShader(O),s.deleteShader(I),P=new m_(s,T),L=Ck(s,T)}let P;this.getUniforms=function(){return P===void 0&&z(this),P};let L;this.getAttributes=function(){return L===void 0&&z(this),L};let N=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=s.getProgramParameter(T,yk)),N},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=_k++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=O,this.fragmentShader=I,this}let Hk=0;class zk{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Gk(e),t.set(e,n)),n}}class Gk{constructor(e){this.id=Hk++,this.code=e,this.usedTimes=0}}function Vk(i,e,t,n,s,r,o){const c=new lp,f=new zk,p=new Set,m=[],v=s.logarithmicDepthBuffer,y=s.vertexTextures;let x=s.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(L){return p.add(L),L===0?"uv":`uv${L}`}function E(L,N,j,ce,ne){const fe=ce.fog,_e=ne.geometry,H=L.isMeshStandardMaterial?ce.environment:null,W=(L.isMeshStandardMaterial?t:e).get(L.envMap||H),Q=W&&W.mapping===_p?W.image.height:null,ve=S[L.type];L.precision!==null&&(x=s.getMaxPrecision(L.precision),x!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",x,"instead."));const X=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,re=X!==void 0?X.length:0;let Ae=0;_e.morphAttributes.position!==void 0&&(Ae=1),_e.morphAttributes.normal!==void 0&&(Ae=2),_e.morphAttributes.color!==void 0&&(Ae=3);let Ce,oe,Ne,Oe;if(ve){const on=_o[ve];Ce=on.vertexShader,oe=on.fragmentShader}else Ce=L.vertexShader,oe=L.fragmentShader,f.update(L),Ne=f.getVertexShaderID(L),Oe=f.getFragmentShaderID(L);const $e=i.getRenderTarget(),tt=i.state.buffers.depth.getReversed(),Dt=ne.isInstancedMesh===!0,wt=ne.isBatchedMesh===!0,Pt=!!L.map,ot=!!L.matcap,dt=!!W,K=!!L.aoMap,rt=!!L.lightMap,Ze=!!L.bumpMap,je=!!L.normalMap,Xe=!!L.displacementMap,_t=!!L.emissiveMap,We=!!L.metalnessMap,Z=!!L.roughnessMap,k=L.anisotropy>0,xe=L.clearcoat>0,ze=L.dispersion>0,Qe=L.iridescence>0,He=L.sheen>0,pt=L.transmission>0,ut=k&&!!L.anisotropyMap,xt=xe&&!!L.clearcoatMap,Nt=xe&&!!L.clearcoatNormalMap,at=xe&&!!L.clearcoatRoughnessMap,At=Qe&&!!L.iridescenceMap,Et=Qe&&!!L.iridescenceThicknessMap,St=He&&!!L.sheenColorMap,mt=He&&!!L.sheenRoughnessMap,he=!!L.specularMap,Fe=!!L.specularColorMap,lt=!!L.specularIntensityMap,ue=pt&&!!L.transmissionMap,be=pt&&!!L.thicknessMap,De=!!L.gradientMap,ke=!!L.alphaMap,yt=L.alphaTest>0,gt=!!L.alphaHash,Ft=!!L.extensions;let rn=ml;L.toneMapped&&($e===null||$e.isXRRenderTarget===!0)&&(rn=i.toneMapping);const wn={shaderID:ve,shaderType:L.type,shaderName:L.name,vertexShader:Ce,fragmentShader:oe,defines:L.defines,customVertexShaderID:Ne,customFragmentShaderID:Oe,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:x,batching:wt,batchingColor:wt&&ne._colorsTexture!==null,instancing:Dt,instancingColor:Dt&&ne.instanceColor!==null,instancingMorph:Dt&&ne.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:$e===null?i.outputColorSpace:$e.isXRRenderTarget===!0?$e.texture.colorSpace:Eo,alphaToCoverage:!!L.alphaToCoverage,map:Pt,matcap:ot,envMap:dt,envMapMode:dt&&W.mapping,envMapCubeUVHeight:Q,aoMap:K,lightMap:rt,bumpMap:Ze,normalMap:je,displacementMap:y&&Xe,emissiveMap:_t,normalMapObjectSpace:je&&L.normalMapType===VD,normalMapTangentSpace:je&&L.normalMapType===Tu,metalnessMap:We,roughnessMap:Z,anisotropy:k,anisotropyMap:ut,clearcoat:xe,clearcoatMap:xt,clearcoatNormalMap:Nt,clearcoatRoughnessMap:at,dispersion:ze,iridescence:Qe,iridescenceMap:At,iridescenceThicknessMap:Et,sheen:He,sheenColorMap:St,sheenRoughnessMap:mt,specularMap:he,specularColorMap:Fe,specularIntensityMap:lt,transmission:pt,transmissionMap:ue,thicknessMap:be,gradientMap:De,opaque:L.transparent===!1&&L.blending===eh&&L.alphaToCoverage===!1,alphaMap:ke,alphaTest:yt,alphaHash:gt,combine:L.combine,mapUv:Pt&&T(L.map.channel),aoMapUv:K&&T(L.aoMap.channel),lightMapUv:rt&&T(L.lightMap.channel),bumpMapUv:Ze&&T(L.bumpMap.channel),normalMapUv:je&&T(L.normalMap.channel),displacementMapUv:Xe&&T(L.displacementMap.channel),emissiveMapUv:_t&&T(L.emissiveMap.channel),metalnessMapUv:We&&T(L.metalnessMap.channel),roughnessMapUv:Z&&T(L.roughnessMap.channel),anisotropyMapUv:ut&&T(L.anisotropyMap.channel),clearcoatMapUv:xt&&T(L.clearcoatMap.channel),clearcoatNormalMapUv:Nt&&T(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:at&&T(L.clearcoatRoughnessMap.channel),iridescenceMapUv:At&&T(L.iridescenceMap.channel),iridescenceThicknessMapUv:Et&&T(L.iridescenceThicknessMap.channel),sheenColorMapUv:St&&T(L.sheenColorMap.channel),sheenRoughnessMapUv:mt&&T(L.sheenRoughnessMap.channel),specularMapUv:he&&T(L.specularMap.channel),specularColorMapUv:Fe&&T(L.specularColorMap.channel),specularIntensityMapUv:lt&&T(L.specularIntensityMap.channel),transmissionMapUv:ue&&T(L.transmissionMap.channel),thicknessMapUv:be&&T(L.thicknessMap.channel),alphaMapUv:ke&&T(L.alphaMap.channel),vertexTangents:!!_e.attributes.tangent&&(je||k),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,pointsUvs:ne.isPoints===!0&&!!_e.attributes.uv&&(Pt||ke),fog:!!fe,useFog:L.fog===!0,fogExp2:!!fe&&fe.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:v,reverseDepthBuffer:tt,skinning:ne.isSkinnedMesh===!0,morphTargets:_e.morphAttributes.position!==void 0,morphNormals:_e.morphAttributes.normal!==void 0,morphColors:_e.morphAttributes.color!==void 0,morphTargetsCount:re,morphTextureStride:Ae,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:i.shadowMap.enabled&&j.length>0,shadowMapType:i.shadowMap.type,toneMapping:rn,decodeVideoTexture:Pt&&L.map.isVideoTexture===!0&&Nn.getTransfer(L.map.colorSpace)===ii,decodeVideoTextureEmissive:_t&&L.emissiveMap.isVideoTexture===!0&&Nn.getTransfer(L.emissiveMap.colorSpace)===ii,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Nr,flipSided:L.side===Ea,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:Ft&&L.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ft&&L.extensions.multiDraw===!0||wt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return wn.vertexUv1s=p.has(1),wn.vertexUv2s=p.has(2),wn.vertexUv3s=p.has(3),p.clear(),wn}function A(L){const N=[];if(L.shaderID?N.push(L.shaderID):(N.push(L.customVertexShaderID),N.push(L.customFragmentShaderID)),L.defines!==void 0)for(const j in L.defines)N.push(j),N.push(L.defines[j]);return L.isRawShaderMaterial===!1&&(w(N,L),B(N,L),N.push(i.outputColorSpace)),N.push(L.customProgramCacheKey),N.join()}function w(L,N){L.push(N.precision),L.push(N.outputColorSpace),L.push(N.envMapMode),L.push(N.envMapCubeUVHeight),L.push(N.mapUv),L.push(N.alphaMapUv),L.push(N.lightMapUv),L.push(N.aoMapUv),L.push(N.bumpMapUv),L.push(N.normalMapUv),L.push(N.displacementMapUv),L.push(N.emissiveMapUv),L.push(N.metalnessMapUv),L.push(N.roughnessMapUv),L.push(N.anisotropyMapUv),L.push(N.clearcoatMapUv),L.push(N.clearcoatNormalMapUv),L.push(N.clearcoatRoughnessMapUv),L.push(N.iridescenceMapUv),L.push(N.iridescenceThicknessMapUv),L.push(N.sheenColorMapUv),L.push(N.sheenRoughnessMapUv),L.push(N.specularMapUv),L.push(N.specularColorMapUv),L.push(N.specularIntensityMapUv),L.push(N.transmissionMapUv),L.push(N.thicknessMapUv),L.push(N.combine),L.push(N.fogExp2),L.push(N.sizeAttenuation),L.push(N.morphTargetsCount),L.push(N.morphAttributeCount),L.push(N.numDirLights),L.push(N.numPointLights),L.push(N.numSpotLights),L.push(N.numSpotLightMaps),L.push(N.numHemiLights),L.push(N.numRectAreaLights),L.push(N.numDirLightShadows),L.push(N.numPointLightShadows),L.push(N.numSpotLightShadows),L.push(N.numSpotLightShadowsWithMaps),L.push(N.numLightProbes),L.push(N.shadowMapType),L.push(N.toneMapping),L.push(N.numClippingPlanes),L.push(N.numClipIntersection),L.push(N.depthPacking)}function B(L,N){c.disableAll(),N.supportsVertexTextures&&c.enable(0),N.instancing&&c.enable(1),N.instancingColor&&c.enable(2),N.instancingMorph&&c.enable(3),N.matcap&&c.enable(4),N.envMap&&c.enable(5),N.normalMapObjectSpace&&c.enable(6),N.normalMapTangentSpace&&c.enable(7),N.clearcoat&&c.enable(8),N.iridescence&&c.enable(9),N.alphaTest&&c.enable(10),N.vertexColors&&c.enable(11),N.vertexAlphas&&c.enable(12),N.vertexUv1s&&c.enable(13),N.vertexUv2s&&c.enable(14),N.vertexUv3s&&c.enable(15),N.vertexTangents&&c.enable(16),N.anisotropy&&c.enable(17),N.alphaHash&&c.enable(18),N.batching&&c.enable(19),N.dispersion&&c.enable(20),N.batchingColor&&c.enable(21),L.push(c.mask),c.disableAll(),N.fog&&c.enable(0),N.useFog&&c.enable(1),N.flatShading&&c.enable(2),N.logarithmicDepthBuffer&&c.enable(3),N.reverseDepthBuffer&&c.enable(4),N.skinning&&c.enable(5),N.morphTargets&&c.enable(6),N.morphNormals&&c.enable(7),N.morphColors&&c.enable(8),N.premultipliedAlpha&&c.enable(9),N.shadowMapEnabled&&c.enable(10),N.doubleSided&&c.enable(11),N.flipSided&&c.enable(12),N.useDepthPacking&&c.enable(13),N.dithering&&c.enable(14),N.transmission&&c.enable(15),N.sheen&&c.enable(16),N.opaque&&c.enable(17),N.pointsUvs&&c.enable(18),N.decodeVideoTexture&&c.enable(19),N.decodeVideoTextureEmissive&&c.enable(20),N.alphaToCoverage&&c.enable(21),L.push(c.mask)}function D(L){const N=S[L.type];let j;if(N){const ce=_o[N];j=n3.clone(ce.uniforms)}else j=L.uniforms;return j}function O(L,N){let j;for(let ce=0,ne=m.length;ce<ne;ce++){const fe=m[ce];if(fe.cacheKey===N){j=fe,++j.usedTimes;break}}return j===void 0&&(j=new Fk(i,N,L,r),m.push(j)),j}function I(L){if(--L.usedTimes===0){const N=m.indexOf(L);m[N]=m[m.length-1],m.pop(),L.destroy()}}function z(L){f.remove(L)}function P(){f.dispose()}return{getParameters:E,getProgramCacheKey:A,getUniforms:D,acquireProgram:O,releaseProgram:I,releaseShaderCache:z,programs:m,dispose:P}}function kk(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let c=i.get(o);return c===void 0&&(c={},i.set(o,c)),c}function n(o){i.delete(o)}function s(o,c,f){i.get(o)[c]=f}function r(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:r}}function Xk(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function xw(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Aw(){const i=[];let e=0;const t=[],n=[],s=[];function r(){e=0,t.length=0,n.length=0,s.length=0}function o(v,y,x,S,T,E){let A=i[e];return A===void 0?(A={id:v.id,object:v,geometry:y,material:x,groupOrder:S,renderOrder:v.renderOrder,z:T,group:E},i[e]=A):(A.id=v.id,A.object=v,A.geometry=y,A.material=x,A.groupOrder=S,A.renderOrder=v.renderOrder,A.z=T,A.group=E),e++,A}function c(v,y,x,S,T,E){const A=o(v,y,x,S,T,E);x.transmission>0?n.push(A):x.transparent===!0?s.push(A):t.push(A)}function f(v,y,x,S,T,E){const A=o(v,y,x,S,T,E);x.transmission>0?n.unshift(A):x.transparent===!0?s.unshift(A):t.unshift(A)}function p(v,y){t.length>1&&t.sort(v||Xk),n.length>1&&n.sort(y||xw),s.length>1&&s.sort(y||xw)}function m(){for(let v=e,y=i.length;v<y;v++){const x=i[v];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:n,transparent:s,init:r,push:c,unshift:f,finish:m,sort:p}}function jk(){let i=new WeakMap;function e(n,s){const r=i.get(n);let o;return r===void 0?(o=new Aw,i.set(n,[o])):s>=r.length?(o=new Aw,r.push(o)):o=r[s],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function Yk(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $,color:new Tt};break;case"SpotLight":t={position:new $,direction:new $,color:new Tt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $,color:new Tt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $,skyColor:new Tt,groundColor:new Tt};break;case"RectAreaLight":t={color:new Tt,position:new $,halfWidth:new $,halfHeight:new $};break}return i[e.id]=t,t}}}function qk(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let Jk=0;function Kk(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Wk(i){const e=new Yk,t=qk(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new $);const s=new $,r=new Jt,o=new Jt;function c(p){let m=0,v=0,y=0;for(let L=0;L<9;L++)n.probe[L].set(0,0,0);let x=0,S=0,T=0,E=0,A=0,w=0,B=0,D=0,O=0,I=0,z=0;p.sort(Kk);for(let L=0,N=p.length;L<N;L++){const j=p[L],ce=j.color,ne=j.intensity,fe=j.distance,_e=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)m+=ce.r*ne,v+=ce.g*ne,y+=ce.b*ne;else if(j.isLightProbe){for(let H=0;H<9;H++)n.probe[H].addScaledVector(j.sh.coefficients[H],ne);z++}else if(j.isDirectionalLight){const H=e.get(j);if(H.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const W=j.shadow,Q=t.get(j);Q.shadowIntensity=W.intensity,Q.shadowBias=W.bias,Q.shadowNormalBias=W.normalBias,Q.shadowRadius=W.radius,Q.shadowMapSize=W.mapSize,n.directionalShadow[x]=Q,n.directionalShadowMap[x]=_e,n.directionalShadowMatrix[x]=j.shadow.matrix,w++}n.directional[x]=H,x++}else if(j.isSpotLight){const H=e.get(j);H.position.setFromMatrixPosition(j.matrixWorld),H.color.copy(ce).multiplyScalar(ne),H.distance=fe,H.coneCos=Math.cos(j.angle),H.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),H.decay=j.decay,n.spot[T]=H;const W=j.shadow;if(j.map&&(n.spotLightMap[O]=j.map,O++,W.updateMatrices(j),j.castShadow&&I++),n.spotLightMatrix[T]=W.matrix,j.castShadow){const Q=t.get(j);Q.shadowIntensity=W.intensity,Q.shadowBias=W.bias,Q.shadowNormalBias=W.normalBias,Q.shadowRadius=W.radius,Q.shadowMapSize=W.mapSize,n.spotShadow[T]=Q,n.spotShadowMap[T]=_e,D++}T++}else if(j.isRectAreaLight){const H=e.get(j);H.color.copy(ce).multiplyScalar(ne),H.halfWidth.set(j.width*.5,0,0),H.halfHeight.set(0,j.height*.5,0),n.rectArea[E]=H,E++}else if(j.isPointLight){const H=e.get(j);if(H.color.copy(j.color).multiplyScalar(j.intensity),H.distance=j.distance,H.decay=j.decay,j.castShadow){const W=j.shadow,Q=t.get(j);Q.shadowIntensity=W.intensity,Q.shadowBias=W.bias,Q.shadowNormalBias=W.normalBias,Q.shadowRadius=W.radius,Q.shadowMapSize=W.mapSize,Q.shadowCameraNear=W.camera.near,Q.shadowCameraFar=W.camera.far,n.pointShadow[S]=Q,n.pointShadowMap[S]=_e,n.pointShadowMatrix[S]=j.shadow.matrix,B++}n.point[S]=H,S++}else if(j.isHemisphereLight){const H=e.get(j);H.skyColor.copy(j.color).multiplyScalar(ne),H.groundColor.copy(j.groundColor).multiplyScalar(ne),n.hemi[A]=H,A++}}E>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Rt.LTC_FLOAT_1,n.rectAreaLTC2=Rt.LTC_FLOAT_2):(n.rectAreaLTC1=Rt.LTC_HALF_1,n.rectAreaLTC2=Rt.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=v,n.ambient[2]=y;const P=n.hash;(P.directionalLength!==x||P.pointLength!==S||P.spotLength!==T||P.rectAreaLength!==E||P.hemiLength!==A||P.numDirectionalShadows!==w||P.numPointShadows!==B||P.numSpotShadows!==D||P.numSpotMaps!==O||P.numLightProbes!==z)&&(n.directional.length=x,n.spot.length=T,n.rectArea.length=E,n.point.length=S,n.hemi.length=A,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=B,n.pointShadowMap.length=B,n.spotShadow.length=D,n.spotShadowMap.length=D,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=B,n.spotLightMatrix.length=D+O-I,n.spotLightMap.length=O,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=z,P.directionalLength=x,P.pointLength=S,P.spotLength=T,P.rectAreaLength=E,P.hemiLength=A,P.numDirectionalShadows=w,P.numPointShadows=B,P.numSpotShadows=D,P.numSpotMaps=O,P.numLightProbes=z,n.version=Jk++)}function f(p,m){let v=0,y=0,x=0,S=0,T=0;const E=m.matrixWorldInverse;for(let A=0,w=p.length;A<w;A++){const B=p[A];if(B.isDirectionalLight){const D=n.directional[v];D.direction.setFromMatrixPosition(B.matrixWorld),s.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(E),v++}else if(B.isSpotLight){const D=n.spot[x];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(E),D.direction.setFromMatrixPosition(B.matrixWorld),s.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(E),x++}else if(B.isRectAreaLight){const D=n.rectArea[S];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(E),o.identity(),r.copy(B.matrixWorld),r.premultiply(E),o.extractRotation(r),D.halfWidth.set(B.width*.5,0,0),D.halfHeight.set(0,B.height*.5,0),D.halfWidth.applyMatrix4(o),D.halfHeight.applyMatrix4(o),S++}else if(B.isPointLight){const D=n.point[y];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(E),y++}else if(B.isHemisphereLight){const D=n.hemi[T];D.direction.setFromMatrixPosition(B.matrixWorld),D.direction.transformDirection(E),T++}}}return{setup:c,setupView:f,state:n}}function Sw(i){const e=new Wk(i),t=[],n=[];function s(m){p.camera=m,t.length=0,n.length=0}function r(m){t.push(m)}function o(m){n.push(m)}function c(){e.setup(t)}function f(m){e.setupView(t,m)}const p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:p,setupLights:c,setupLightsView:f,pushLight:r,pushShadow:o}}function Zk(i){let e=new WeakMap;function t(s,r=0){const o=e.get(s);let c;return o===void 0?(c=new Sw(i),e.set(s,[c])):r>=o.length?(c=new Sw(i),o.push(c)):c=o[r],c}function n(){e=new WeakMap}return{get:t,dispose:n}}const Qk=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,$k=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function eX(i,e,t){let n=new xp;const s=new Ke,r=new Ke,o=new Hn,c=new GE({depthPacking:GD}),f=new VE,p={},m=t.maxTextureSize,v={[yl]:Ea,[Ea]:yl,[Nr]:Nr},y=new Ya({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ke},radius:{value:4}},vertexShader:Qk,fragmentShader:$k}),x=y.clone();x.defines.HORIZONTAL_PASS=1;const S=new dn;S.setAttribute("position",new zn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new Ei(S,y),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Tx;let A=this.type;this.render=function(I,z,P){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||I.length===0)return;const L=i.getRenderTarget(),N=i.getActiveCubeFace(),j=i.getActiveMipmapLevel(),ce=i.state;ce.setBlending(pl),ce.buffers.color.setClear(1,1,1,1),ce.buffers.depth.setTest(!0),ce.setScissorTest(!1);const ne=A!==yo&&this.type===yo,fe=A===yo&&this.type!==yo;for(let _e=0,H=I.length;_e<H;_e++){const W=I[_e],Q=W.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;s.copy(Q.mapSize);const ve=Q.getFrameExtents();if(s.multiply(ve),r.copy(Q.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(r.x=Math.floor(m/ve.x),s.x=r.x*ve.x,Q.mapSize.x=r.x),s.y>m&&(r.y=Math.floor(m/ve.y),s.y=r.y*ve.y,Q.mapSize.y=r.y)),Q.map===null||ne===!0||fe===!0){const re=this.type!==yo?{minFilter:Ts,magFilter:Ts}:{};Q.map!==null&&Q.map.dispose(),Q.map=new Hr(s.x,s.y,re),Q.map.texture.name=W.name+".shadowMap",Q.camera.updateProjectionMatrix()}i.setRenderTarget(Q.map),i.clear();const X=Q.getViewportCount();for(let re=0;re<X;re++){const Ae=Q.getViewport(re);o.set(r.x*Ae.x,r.y*Ae.y,r.x*Ae.z,r.y*Ae.w),ce.viewport(o),Q.updateMatrices(W,re),n=Q.getFrustum(),D(z,P,Q.camera,W,this.type)}Q.isPointLightShadow!==!0&&this.type===yo&&w(Q,P),Q.needsUpdate=!1}A=this.type,E.needsUpdate=!1,i.setRenderTarget(L,N,j)};function w(I,z){const P=e.update(T);y.defines.VSM_SAMPLES!==I.blurSamples&&(y.defines.VSM_SAMPLES=I.blurSamples,x.defines.VSM_SAMPLES=I.blurSamples,y.needsUpdate=!0,x.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Hr(s.x,s.y)),y.uniforms.shadow_pass.value=I.map.texture,y.uniforms.resolution.value=I.mapSize,y.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(z,null,P,y,T,null),x.uniforms.shadow_pass.value=I.mapPass.texture,x.uniforms.resolution.value=I.mapSize,x.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(z,null,P,x,T,null)}function B(I,z,P,L){let N=null;const j=P.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(j!==void 0)N=j;else if(N=P.isPointLight===!0?f:c,i.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0||z.alphaToCoverage===!0){const ce=N.uuid,ne=z.uuid;let fe=p[ce];fe===void 0&&(fe={},p[ce]=fe);let _e=fe[ne];_e===void 0&&(_e=N.clone(),fe[ne]=_e,z.addEventListener("dispose",O)),N=_e}if(N.visible=z.visible,N.wireframe=z.wireframe,L===yo?N.side=z.shadowSide!==null?z.shadowSide:z.side:N.side=z.shadowSide!==null?z.shadowSide:v[z.side],N.alphaMap=z.alphaMap,N.alphaTest=z.alphaToCoverage===!0?.5:z.alphaTest,N.map=z.map,N.clipShadows=z.clipShadows,N.clippingPlanes=z.clippingPlanes,N.clipIntersection=z.clipIntersection,N.displacementMap=z.displacementMap,N.displacementScale=z.displacementScale,N.displacementBias=z.displacementBias,N.wireframeLinewidth=z.wireframeLinewidth,N.linewidth=z.linewidth,P.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const ce=i.properties.get(N);ce.light=P}return N}function D(I,z,P,L,N){if(I.visible===!1)return;if(I.layers.test(z.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&N===yo)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,I.matrixWorld);const ne=e.update(I),fe=I.material;if(Array.isArray(fe)){const _e=ne.groups;for(let H=0,W=_e.length;H<W;H++){const Q=_e[H],ve=fe[Q.materialIndex];if(ve&&ve.visible){const X=B(I,ve,L,N);I.onBeforeShadow(i,I,z,P,ne,X,Q),i.renderBufferDirect(P,null,ne,X,I,Q),I.onAfterShadow(i,I,z,P,ne,X,Q)}}}else if(fe.visible){const _e=B(I,fe,L,N);I.onBeforeShadow(i,I,z,P,ne,_e,null),i.renderBufferDirect(P,null,ne,_e,I,null),I.onAfterShadow(i,I,z,P,ne,_e,null)}}const ce=I.children;for(let ne=0,fe=ce.length;ne<fe;ne++)D(ce[ne],z,P,L,N)}function O(I){I.target.removeEventListener("dispose",O);for(const P in p){const L=p[P],N=I.target.uuid;N in L&&(L[N].dispose(),delete L[N])}}}const tX={[C_]:R_,[w_]:U_,[B_]:L_,[sh]:D_,[R_]:C_,[U_]:w_,[L_]:B_,[D_]:sh};function nX(i,e){function t(){let ue=!1;const be=new Hn;let De=null;const ke=new Hn(0,0,0,0);return{setMask:function(yt){De!==yt&&!ue&&(i.colorMask(yt,yt,yt,yt),De=yt)},setLocked:function(yt){ue=yt},setClear:function(yt,gt,Ft,rn,wn){wn===!0&&(yt*=rn,gt*=rn,Ft*=rn),be.set(yt,gt,Ft,rn),ke.equals(be)===!1&&(i.clearColor(yt,gt,Ft,rn),ke.copy(be))},reset:function(){ue=!1,De=null,ke.set(-1,0,0,0)}}}function n(){let ue=!1,be=!1,De=null,ke=null,yt=null;return{setReversed:function(gt){if(be!==gt){const Ft=e.get("EXT_clip_control");gt?Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.ZERO_TO_ONE_EXT):Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.NEGATIVE_ONE_TO_ONE_EXT),be=gt;const rn=yt;yt=null,this.setClear(rn)}},getReversed:function(){return be},setTest:function(gt){gt?$e(i.DEPTH_TEST):tt(i.DEPTH_TEST)},setMask:function(gt){De!==gt&&!ue&&(i.depthMask(gt),De=gt)},setFunc:function(gt){if(be&&(gt=tX[gt]),ke!==gt){switch(gt){case C_:i.depthFunc(i.NEVER);break;case R_:i.depthFunc(i.ALWAYS);break;case w_:i.depthFunc(i.LESS);break;case sh:i.depthFunc(i.LEQUAL);break;case B_:i.depthFunc(i.EQUAL);break;case D_:i.depthFunc(i.GEQUAL);break;case U_:i.depthFunc(i.GREATER);break;case L_:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ke=gt}},setLocked:function(gt){ue=gt},setClear:function(gt){yt!==gt&&(be&&(gt=1-gt),i.clearDepth(gt),yt=gt)},reset:function(){ue=!1,De=null,ke=null,yt=null,be=!1}}}function s(){let ue=!1,be=null,De=null,ke=null,yt=null,gt=null,Ft=null,rn=null,wn=null;return{setTest:function(on){ue||(on?$e(i.STENCIL_TEST):tt(i.STENCIL_TEST))},setMask:function(on){be!==on&&!ue&&(i.stencilMask(on),be=on)},setFunc:function(on,yi,ai){(De!==on||ke!==yi||yt!==ai)&&(i.stencilFunc(on,yi,ai),De=on,ke=yi,yt=ai)},setOp:function(on,yi,ai){(gt!==on||Ft!==yi||rn!==ai)&&(i.stencilOp(on,yi,ai),gt=on,Ft=yi,rn=ai)},setLocked:function(on){ue=on},setClear:function(on){wn!==on&&(i.clearStencil(on),wn=on)},reset:function(){ue=!1,be=null,De=null,ke=null,yt=null,gt=null,Ft=null,rn=null,wn=null}}}const r=new t,o=new n,c=new s,f=new WeakMap,p=new WeakMap;let m={},v={},y=new WeakMap,x=[],S=null,T=!1,E=null,A=null,w=null,B=null,D=null,O=null,I=null,z=new Tt(0,0,0),P=0,L=!1,N=null,j=null,ce=null,ne=null,fe=null;const _e=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,W=0;const Q=i.getParameter(i.VERSION);Q.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(Q)[1]),H=W>=1):Q.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),H=W>=2);let ve=null,X={};const re=i.getParameter(i.SCISSOR_BOX),Ae=i.getParameter(i.VIEWPORT),Ce=new Hn().fromArray(re),oe=new Hn().fromArray(Ae);function Ne(ue,be,De,ke){const yt=new Uint8Array(4),gt=i.createTexture();i.bindTexture(ue,gt),i.texParameteri(ue,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ue,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Ft=0;Ft<De;Ft++)ue===i.TEXTURE_3D||ue===i.TEXTURE_2D_ARRAY?i.texImage3D(be,0,i.RGBA,1,1,ke,0,i.RGBA,i.UNSIGNED_BYTE,yt):i.texImage2D(be+Ft,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,yt);return gt}const Oe={};Oe[i.TEXTURE_2D]=Ne(i.TEXTURE_2D,i.TEXTURE_2D,1),Oe[i.TEXTURE_CUBE_MAP]=Ne(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Oe[i.TEXTURE_2D_ARRAY]=Ne(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Oe[i.TEXTURE_3D]=Ne(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),c.setClear(0),$e(i.DEPTH_TEST),o.setFunc(sh),Ze(!1),je(KM),$e(i.CULL_FACE),K(pl);function $e(ue){m[ue]!==!0&&(i.enable(ue),m[ue]=!0)}function tt(ue){m[ue]!==!1&&(i.disable(ue),m[ue]=!1)}function Dt(ue,be){return v[ue]!==be?(i.bindFramebuffer(ue,be),v[ue]=be,ue===i.DRAW_FRAMEBUFFER&&(v[i.FRAMEBUFFER]=be),ue===i.FRAMEBUFFER&&(v[i.DRAW_FRAMEBUFFER]=be),!0):!1}function wt(ue,be){let De=x,ke=!1;if(ue){De=y.get(be),De===void 0&&(De=[],y.set(be,De));const yt=ue.textures;if(De.length!==yt.length||De[0]!==i.COLOR_ATTACHMENT0){for(let gt=0,Ft=yt.length;gt<Ft;gt++)De[gt]=i.COLOR_ATTACHMENT0+gt;De.length=yt.length,ke=!0}}else De[0]!==i.BACK&&(De[0]=i.BACK,ke=!0);ke&&i.drawBuffers(De)}function Pt(ue){return S!==ue?(i.useProgram(ue),S=ue,!0):!1}const ot={[gu]:i.FUNC_ADD,[uD]:i.FUNC_SUBTRACT,[fD]:i.FUNC_REVERSE_SUBTRACT};ot[hD]=i.MIN,ot[dD]=i.MAX;const dt={[pD]:i.ZERO,[mD]:i.ONE,[gD]:i.SRC_COLOR,[E_]:i.SRC_ALPHA,[SD]:i.SRC_ALPHA_SATURATE,[xD]:i.DST_COLOR,[yD]:i.DST_ALPHA,[vD]:i.ONE_MINUS_SRC_COLOR,[T_]:i.ONE_MINUS_SRC_ALPHA,[AD]:i.ONE_MINUS_DST_COLOR,[_D]:i.ONE_MINUS_DST_ALPHA,[MD]:i.CONSTANT_COLOR,[bD]:i.ONE_MINUS_CONSTANT_COLOR,[ED]:i.CONSTANT_ALPHA,[TD]:i.ONE_MINUS_CONSTANT_ALPHA};function K(ue,be,De,ke,yt,gt,Ft,rn,wn,on){if(ue===pl){T===!0&&(tt(i.BLEND),T=!1);return}if(T===!1&&($e(i.BLEND),T=!0),ue!==cD){if(ue!==E||on!==L){if((A!==gu||D!==gu)&&(i.blendEquation(i.FUNC_ADD),A=gu,D=gu),on)switch(ue){case eh:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case WM:i.blendFunc(i.ONE,i.ONE);break;case ZM:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case QM:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}else switch(ue){case eh:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case WM:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case ZM:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case QM:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}w=null,B=null,O=null,I=null,z.set(0,0,0),P=0,E=ue,L=on}return}yt=yt||be,gt=gt||De,Ft=Ft||ke,(be!==A||yt!==D)&&(i.blendEquationSeparate(ot[be],ot[yt]),A=be,D=yt),(De!==w||ke!==B||gt!==O||Ft!==I)&&(i.blendFuncSeparate(dt[De],dt[ke],dt[gt],dt[Ft]),w=De,B=ke,O=gt,I=Ft),(rn.equals(z)===!1||wn!==P)&&(i.blendColor(rn.r,rn.g,rn.b,wn),z.copy(rn),P=wn),E=ue,L=!1}function rt(ue,be){ue.side===Nr?tt(i.CULL_FACE):$e(i.CULL_FACE);let De=ue.side===Ea;be&&(De=!De),Ze(De),ue.blending===eh&&ue.transparent===!1?K(pl):K(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.blendColor,ue.blendAlpha,ue.premultipliedAlpha),o.setFunc(ue.depthFunc),o.setTest(ue.depthTest),o.setMask(ue.depthWrite),r.setMask(ue.colorWrite);const ke=ue.stencilWrite;c.setTest(ke),ke&&(c.setMask(ue.stencilWriteMask),c.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),c.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),_t(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?$e(i.SAMPLE_ALPHA_TO_COVERAGE):tt(i.SAMPLE_ALPHA_TO_COVERAGE)}function Ze(ue){N!==ue&&(ue?i.frontFace(i.CW):i.frontFace(i.CCW),N=ue)}function je(ue){ue!==rD?($e(i.CULL_FACE),ue!==j&&(ue===KM?i.cullFace(i.BACK):ue===oD?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):tt(i.CULL_FACE),j=ue}function Xe(ue){ue!==ce&&(H&&i.lineWidth(ue),ce=ue)}function _t(ue,be,De){ue?($e(i.POLYGON_OFFSET_FILL),(ne!==be||fe!==De)&&(i.polygonOffset(be,De),ne=be,fe=De)):tt(i.POLYGON_OFFSET_FILL)}function We(ue){ue?$e(i.SCISSOR_TEST):tt(i.SCISSOR_TEST)}function Z(ue){ue===void 0&&(ue=i.TEXTURE0+_e-1),ve!==ue&&(i.activeTexture(ue),ve=ue)}function k(ue,be,De){De===void 0&&(ve===null?De=i.TEXTURE0+_e-1:De=ve);let ke=X[De];ke===void 0&&(ke={type:void 0,texture:void 0},X[De]=ke),(ke.type!==ue||ke.texture!==be)&&(ve!==De&&(i.activeTexture(De),ve=De),i.bindTexture(ue,be||Oe[ue]),ke.type=ue,ke.texture=be)}function xe(){const ue=X[ve];ue!==void 0&&ue.type!==void 0&&(i.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function ze(){try{i.compressedTexImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Qe(){try{i.compressedTexImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function He(){try{i.texSubImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function pt(){try{i.texSubImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ut(){try{i.compressedTexSubImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function xt(){try{i.compressedTexSubImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Nt(){try{i.texStorage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function at(){try{i.texStorage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function At(){try{i.texImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Et(){try{i.texImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function St(ue){Ce.equals(ue)===!1&&(i.scissor(ue.x,ue.y,ue.z,ue.w),Ce.copy(ue))}function mt(ue){oe.equals(ue)===!1&&(i.viewport(ue.x,ue.y,ue.z,ue.w),oe.copy(ue))}function he(ue,be){let De=p.get(be);De===void 0&&(De=new WeakMap,p.set(be,De));let ke=De.get(ue);ke===void 0&&(ke=i.getUniformBlockIndex(be,ue.name),De.set(ue,ke))}function Fe(ue,be){const ke=p.get(be).get(ue);f.get(be)!==ke&&(i.uniformBlockBinding(be,ke,ue.__bindingPointIndex),f.set(be,ke))}function lt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),m={},ve=null,X={},v={},y=new WeakMap,x=[],S=null,T=!1,E=null,A=null,w=null,B=null,D=null,O=null,I=null,z=new Tt(0,0,0),P=0,L=!1,N=null,j=null,ce=null,ne=null,fe=null,Ce.set(0,0,i.canvas.width,i.canvas.height),oe.set(0,0,i.canvas.width,i.canvas.height),r.reset(),o.reset(),c.reset()}return{buffers:{color:r,depth:o,stencil:c},enable:$e,disable:tt,bindFramebuffer:Dt,drawBuffers:wt,useProgram:Pt,setBlending:K,setMaterial:rt,setFlipSided:Ze,setCullFace:je,setLineWidth:Xe,setPolygonOffset:_t,setScissorTest:We,activeTexture:Z,bindTexture:k,unbindTexture:xe,compressedTexImage2D:ze,compressedTexImage3D:Qe,texImage2D:At,texImage3D:Et,updateUBOMapping:he,uniformBlockBinding:Fe,texStorage2D:Nt,texStorage3D:at,texSubImage2D:He,texSubImage3D:pt,compressedTexSubImage2D:ut,compressedTexSubImage3D:xt,scissor:St,viewport:mt,reset:lt}}function iX(i,e,t,n,s,r,o){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Ke,m=new WeakMap;let v;const y=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(Z,k){return x?new OffscreenCanvas(Z,k):Yg("canvas")}function T(Z,k,xe){let ze=1;const Qe=We(Z);if((Qe.width>xe||Qe.height>xe)&&(ze=xe/Math.max(Qe.width,Qe.height)),ze<1)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap||typeof VideoFrame<"u"&&Z instanceof VideoFrame){const He=Math.floor(ze*Qe.width),pt=Math.floor(ze*Qe.height);v===void 0&&(v=S(He,pt));const ut=k?S(He,pt):v;return ut.width=He,ut.height=pt,ut.getContext("2d").drawImage(Z,0,0,He,pt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Qe.width+"x"+Qe.height+") to ("+He+"x"+pt+")."),ut}else return"data"in Z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Qe.width+"x"+Qe.height+")."),Z;return Z}function E(Z){return Z.generateMipmaps}function A(Z){i.generateMipmap(Z)}function w(Z){return Z.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Z.isWebGL3DRenderTarget?i.TEXTURE_3D:Z.isWebGLArrayRenderTarget||Z.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function B(Z,k,xe,ze,Qe=!1){if(Z!==null){if(i[Z]!==void 0)return i[Z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let He=k;if(k===i.RED&&(xe===i.FLOAT&&(He=i.R32F),xe===i.HALF_FLOAT&&(He=i.R16F),xe===i.UNSIGNED_BYTE&&(He=i.R8)),k===i.RED_INTEGER&&(xe===i.UNSIGNED_BYTE&&(He=i.R8UI),xe===i.UNSIGNED_SHORT&&(He=i.R16UI),xe===i.UNSIGNED_INT&&(He=i.R32UI),xe===i.BYTE&&(He=i.R8I),xe===i.SHORT&&(He=i.R16I),xe===i.INT&&(He=i.R32I)),k===i.RG&&(xe===i.FLOAT&&(He=i.RG32F),xe===i.HALF_FLOAT&&(He=i.RG16F),xe===i.UNSIGNED_BYTE&&(He=i.RG8)),k===i.RG_INTEGER&&(xe===i.UNSIGNED_BYTE&&(He=i.RG8UI),xe===i.UNSIGNED_SHORT&&(He=i.RG16UI),xe===i.UNSIGNED_INT&&(He=i.RG32UI),xe===i.BYTE&&(He=i.RG8I),xe===i.SHORT&&(He=i.RG16I),xe===i.INT&&(He=i.RG32I)),k===i.RGB_INTEGER&&(xe===i.UNSIGNED_BYTE&&(He=i.RGB8UI),xe===i.UNSIGNED_SHORT&&(He=i.RGB16UI),xe===i.UNSIGNED_INT&&(He=i.RGB32UI),xe===i.BYTE&&(He=i.RGB8I),xe===i.SHORT&&(He=i.RGB16I),xe===i.INT&&(He=i.RGB32I)),k===i.RGBA_INTEGER&&(xe===i.UNSIGNED_BYTE&&(He=i.RGBA8UI),xe===i.UNSIGNED_SHORT&&(He=i.RGBA16UI),xe===i.UNSIGNED_INT&&(He=i.RGBA32UI),xe===i.BYTE&&(He=i.RGBA8I),xe===i.SHORT&&(He=i.RGBA16I),xe===i.INT&&(He=i.RGBA32I)),k===i.RGB&&xe===i.UNSIGNED_INT_5_9_9_9_REV&&(He=i.RGB9_E5),k===i.RGBA){const pt=Qe?kg:Nn.getTransfer(ze);xe===i.FLOAT&&(He=i.RGBA32F),xe===i.HALF_FLOAT&&(He=i.RGBA16F),xe===i.UNSIGNED_BYTE&&(He=pt===ii?i.SRGB8_ALPHA8:i.RGBA8),xe===i.UNSIGNED_SHORT_4_4_4_4&&(He=i.RGBA4),xe===i.UNSIGNED_SHORT_5_5_5_1&&(He=i.RGB5_A1)}return(He===i.R16F||He===i.R32F||He===i.RG16F||He===i.RG32F||He===i.RGBA16F||He===i.RGBA32F)&&e.get("EXT_color_buffer_float"),He}function D(Z,k){let xe;return Z?k===null||k===xl||k===np?xe=i.DEPTH24_STENCIL8:k===Ii?xe=i.DEPTH32F_STENCIL8:k===tp&&(xe=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===xl||k===np?xe=i.DEPTH_COMPONENT24:k===Ii?xe=i.DEPTH_COMPONENT32F:k===tp&&(xe=i.DEPTH_COMPONENT16),xe}function O(Z,k){return E(Z)===!0||Z.isFramebufferTexture&&Z.minFilter!==Ts&&Z.minFilter!==Jn?Math.log2(Math.max(k.width,k.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?k.mipmaps.length:1}function I(Z){const k=Z.target;k.removeEventListener("dispose",I),P(k),k.isVideoTexture&&m.delete(k)}function z(Z){const k=Z.target;k.removeEventListener("dispose",z),N(k)}function P(Z){const k=n.get(Z);if(k.__webglInit===void 0)return;const xe=Z.source,ze=y.get(xe);if(ze){const Qe=ze[k.__cacheKey];Qe.usedTimes--,Qe.usedTimes===0&&L(Z),Object.keys(ze).length===0&&y.delete(xe)}n.remove(Z)}function L(Z){const k=n.get(Z);i.deleteTexture(k.__webglTexture);const xe=Z.source,ze=y.get(xe);delete ze[k.__cacheKey],o.memory.textures--}function N(Z){const k=n.get(Z);if(Z.depthTexture&&(Z.depthTexture.dispose(),n.remove(Z.depthTexture)),Z.isWebGLCubeRenderTarget)for(let ze=0;ze<6;ze++){if(Array.isArray(k.__webglFramebuffer[ze]))for(let Qe=0;Qe<k.__webglFramebuffer[ze].length;Qe++)i.deleteFramebuffer(k.__webglFramebuffer[ze][Qe]);else i.deleteFramebuffer(k.__webglFramebuffer[ze]);k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer[ze])}else{if(Array.isArray(k.__webglFramebuffer))for(let ze=0;ze<k.__webglFramebuffer.length;ze++)i.deleteFramebuffer(k.__webglFramebuffer[ze]);else i.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&i.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let ze=0;ze<k.__webglColorRenderbuffer.length;ze++)k.__webglColorRenderbuffer[ze]&&i.deleteRenderbuffer(k.__webglColorRenderbuffer[ze]);k.__webglDepthRenderbuffer&&i.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const xe=Z.textures;for(let ze=0,Qe=xe.length;ze<Qe;ze++){const He=n.get(xe[ze]);He.__webglTexture&&(i.deleteTexture(He.__webglTexture),o.memory.textures--),n.remove(xe[ze])}n.remove(Z)}let j=0;function ce(){j=0}function ne(){const Z=j;return Z>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+s.maxTextures),j+=1,Z}function fe(Z){const k=[];return k.push(Z.wrapS),k.push(Z.wrapT),k.push(Z.wrapR||0),k.push(Z.magFilter),k.push(Z.minFilter),k.push(Z.anisotropy),k.push(Z.internalFormat),k.push(Z.format),k.push(Z.type),k.push(Z.generateMipmaps),k.push(Z.premultiplyAlpha),k.push(Z.flipY),k.push(Z.unpackAlignment),k.push(Z.colorSpace),k.join()}function _e(Z,k){const xe=n.get(Z);if(Z.isVideoTexture&&Xe(Z),Z.isRenderTargetTexture===!1&&Z.version>0&&xe.__version!==Z.version){const ze=Z.image;if(ze===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ze.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(xe,Z,k);return}}t.bindTexture(i.TEXTURE_2D,xe.__webglTexture,i.TEXTURE0+k)}function H(Z,k){const xe=n.get(Z);if(Z.version>0&&xe.__version!==Z.version){oe(xe,Z,k);return}t.bindTexture(i.TEXTURE_2D_ARRAY,xe.__webglTexture,i.TEXTURE0+k)}function W(Z,k){const xe=n.get(Z);if(Z.version>0&&xe.__version!==Z.version){oe(xe,Z,k);return}t.bindTexture(i.TEXTURE_3D,xe.__webglTexture,i.TEXTURE0+k)}function Q(Z,k){const xe=n.get(Z);if(Z.version>0&&xe.__version!==Z.version){Ne(xe,Z,k);return}t.bindTexture(i.TEXTURE_CUBE_MAP,xe.__webglTexture,i.TEXTURE0+k)}const ve={[Mu]:i.REPEAT,[Wi]:i.CLAMP_TO_EDGE,[ep]:i.MIRRORED_REPEAT},X={[Ts]:i.NEAREST,[Cx]:i.NEAREST_MIPMAP_NEAREST,[jf]:i.NEAREST_MIPMAP_LINEAR,[Jn]:i.LINEAR,[Yd]:i.LINEAR_MIPMAP_NEAREST,[Ir]:i.LINEAR_MIPMAP_LINEAR},re={[kD]:i.NEVER,[KD]:i.ALWAYS,[XD]:i.LESS,[EE]:i.LEQUAL,[jD]:i.EQUAL,[JD]:i.GEQUAL,[YD]:i.GREATER,[qD]:i.NOTEQUAL};function Ae(Z,k){if(k.type===Ii&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===Jn||k.magFilter===Yd||k.magFilter===jf||k.magFilter===Ir||k.minFilter===Jn||k.minFilter===Yd||k.minFilter===jf||k.minFilter===Ir)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Z,i.TEXTURE_WRAP_S,ve[k.wrapS]),i.texParameteri(Z,i.TEXTURE_WRAP_T,ve[k.wrapT]),(Z===i.TEXTURE_3D||Z===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Z,i.TEXTURE_WRAP_R,ve[k.wrapR]),i.texParameteri(Z,i.TEXTURE_MAG_FILTER,X[k.magFilter]),i.texParameteri(Z,i.TEXTURE_MIN_FILTER,X[k.minFilter]),k.compareFunction&&(i.texParameteri(Z,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Z,i.TEXTURE_COMPARE_FUNC,re[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Ts||k.minFilter!==jf&&k.minFilter!==Ir||k.type===Ii&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||n.get(k).__currentAnisotropy){const xe=e.get("EXT_texture_filter_anisotropic");i.texParameterf(Z,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,s.getMaxAnisotropy())),n.get(k).__currentAnisotropy=k.anisotropy}}}function Ce(Z,k){let xe=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,k.addEventListener("dispose",I));const ze=k.source;let Qe=y.get(ze);Qe===void 0&&(Qe={},y.set(ze,Qe));const He=fe(k);if(He!==Z.__cacheKey){Qe[He]===void 0&&(Qe[He]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,xe=!0),Qe[He].usedTimes++;const pt=Qe[Z.__cacheKey];pt!==void 0&&(Qe[Z.__cacheKey].usedTimes--,pt.usedTimes===0&&L(k)),Z.__cacheKey=He,Z.__webglTexture=Qe[He].texture}return xe}function oe(Z,k,xe){let ze=i.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ze=i.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ze=i.TEXTURE_3D);const Qe=Ce(Z,k),He=k.source;t.bindTexture(ze,Z.__webglTexture,i.TEXTURE0+xe);const pt=n.get(He);if(He.version!==pt.__version||Qe===!0){t.activeTexture(i.TEXTURE0+xe);const ut=Nn.getPrimaries(Nn.workingColorSpace),xt=k.colorSpace===nc?null:Nn.getPrimaries(k.colorSpace),Nt=k.colorSpace===nc||ut===xt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Nt);let at=T(k.image,!1,s.maxTextureSize);at=_t(k,at);const At=r.convert(k.format,k.colorSpace),Et=r.convert(k.type);let St=B(k.internalFormat,At,Et,k.colorSpace,k.isVideoTexture);Ae(ze,k);let mt;const he=k.mipmaps,Fe=k.isVideoTexture!==!0,lt=pt.__version===void 0||Qe===!0,ue=He.dataReady,be=O(k,at);if(k.isDepthTexture)St=D(k.format===sp,k.type),lt&&(Fe?t.texStorage2D(i.TEXTURE_2D,1,St,at.width,at.height):t.texImage2D(i.TEXTURE_2D,0,St,at.width,at.height,0,At,Et,null));else if(k.isDataTexture)if(he.length>0){Fe&&lt&&t.texStorage2D(i.TEXTURE_2D,be,St,he[0].width,he[0].height);for(let De=0,ke=he.length;De<ke;De++)mt=he[De],Fe?ue&&t.texSubImage2D(i.TEXTURE_2D,De,0,0,mt.width,mt.height,At,Et,mt.data):t.texImage2D(i.TEXTURE_2D,De,St,mt.width,mt.height,0,At,Et,mt.data);k.generateMipmaps=!1}else Fe?(lt&&t.texStorage2D(i.TEXTURE_2D,be,St,at.width,at.height),ue&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,at.width,at.height,At,Et,at.data)):t.texImage2D(i.TEXTURE_2D,0,St,at.width,at.height,0,At,Et,at.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Fe&&lt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,be,St,he[0].width,he[0].height,at.depth);for(let De=0,ke=he.length;De<ke;De++)if(mt=he[De],k.format!==Zi)if(At!==null)if(Fe){if(ue)if(k.layerUpdates.size>0){const yt=cb(mt.width,mt.height,k.format,k.type);for(const gt of k.layerUpdates){const Ft=mt.data.subarray(gt*yt/mt.data.BYTES_PER_ELEMENT,(gt+1)*yt/mt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,De,0,0,gt,mt.width,mt.height,1,At,Ft)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,De,0,0,0,mt.width,mt.height,at.depth,At,mt.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,De,St,mt.width,mt.height,at.depth,0,mt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Fe?ue&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,De,0,0,0,mt.width,mt.height,at.depth,At,Et,mt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,De,St,mt.width,mt.height,at.depth,0,At,Et,mt.data)}else{Fe&&lt&&t.texStorage2D(i.TEXTURE_2D,be,St,he[0].width,he[0].height);for(let De=0,ke=he.length;De<ke;De++)mt=he[De],k.format!==Zi?At!==null?Fe?ue&&t.compressedTexSubImage2D(i.TEXTURE_2D,De,0,0,mt.width,mt.height,At,mt.data):t.compressedTexImage2D(i.TEXTURE_2D,De,St,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Fe?ue&&t.texSubImage2D(i.TEXTURE_2D,De,0,0,mt.width,mt.height,At,Et,mt.data):t.texImage2D(i.TEXTURE_2D,De,St,mt.width,mt.height,0,At,Et,mt.data)}else if(k.isDataArrayTexture)if(Fe){if(lt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,be,St,at.width,at.height,at.depth),ue)if(k.layerUpdates.size>0){const De=cb(at.width,at.height,k.format,k.type);for(const ke of k.layerUpdates){const yt=at.data.subarray(ke*De/at.data.BYTES_PER_ELEMENT,(ke+1)*De/at.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,ke,at.width,at.height,1,At,Et,yt)}k.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,at.width,at.height,at.depth,At,Et,at.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,St,at.width,at.height,at.depth,0,At,Et,at.data);else if(k.isData3DTexture)Fe?(lt&&t.texStorage3D(i.TEXTURE_3D,be,St,at.width,at.height,at.depth),ue&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,at.width,at.height,at.depth,At,Et,at.data)):t.texImage3D(i.TEXTURE_3D,0,St,at.width,at.height,at.depth,0,At,Et,at.data);else if(k.isFramebufferTexture){if(lt)if(Fe)t.texStorage2D(i.TEXTURE_2D,be,St,at.width,at.height);else{let De=at.width,ke=at.height;for(let yt=0;yt<be;yt++)t.texImage2D(i.TEXTURE_2D,yt,St,De,ke,0,At,Et,null),De>>=1,ke>>=1}}else if(he.length>0){if(Fe&&lt){const De=We(he[0]);t.texStorage2D(i.TEXTURE_2D,be,St,De.width,De.height)}for(let De=0,ke=he.length;De<ke;De++)mt=he[De],Fe?ue&&t.texSubImage2D(i.TEXTURE_2D,De,0,0,At,Et,mt):t.texImage2D(i.TEXTURE_2D,De,St,At,Et,mt);k.generateMipmaps=!1}else if(Fe){if(lt){const De=We(at);t.texStorage2D(i.TEXTURE_2D,be,St,De.width,De.height)}ue&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,At,Et,at)}else t.texImage2D(i.TEXTURE_2D,0,St,At,Et,at);E(k)&&A(ze),pt.__version=He.version,k.onUpdate&&k.onUpdate(k)}Z.__version=k.version}function Ne(Z,k,xe){if(k.image.length!==6)return;const ze=Ce(Z,k),Qe=k.source;t.bindTexture(i.TEXTURE_CUBE_MAP,Z.__webglTexture,i.TEXTURE0+xe);const He=n.get(Qe);if(Qe.version!==He.__version||ze===!0){t.activeTexture(i.TEXTURE0+xe);const pt=Nn.getPrimaries(Nn.workingColorSpace),ut=k.colorSpace===nc?null:Nn.getPrimaries(k.colorSpace),xt=k.colorSpace===nc||pt===ut?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);const Nt=k.isCompressedTexture||k.image[0].isCompressedTexture,at=k.image[0]&&k.image[0].isDataTexture,At=[];for(let ke=0;ke<6;ke++)!Nt&&!at?At[ke]=T(k.image[ke],!0,s.maxCubemapSize):At[ke]=at?k.image[ke].image:k.image[ke],At[ke]=_t(k,At[ke]);const Et=At[0],St=r.convert(k.format,k.colorSpace),mt=r.convert(k.type),he=B(k.internalFormat,St,mt,k.colorSpace),Fe=k.isVideoTexture!==!0,lt=He.__version===void 0||ze===!0,ue=Qe.dataReady;let be=O(k,Et);Ae(i.TEXTURE_CUBE_MAP,k);let De;if(Nt){Fe&&lt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,be,he,Et.width,Et.height);for(let ke=0;ke<6;ke++){De=At[ke].mipmaps;for(let yt=0;yt<De.length;yt++){const gt=De[yt];k.format!==Zi?St!==null?Fe?ue&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,yt,0,0,gt.width,gt.height,St,gt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,yt,he,gt.width,gt.height,0,gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fe?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,yt,0,0,gt.width,gt.height,St,mt,gt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,yt,he,gt.width,gt.height,0,St,mt,gt.data)}}}else{if(De=k.mipmaps,Fe&&lt){De.length>0&&be++;const ke=We(At[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,be,he,ke.width,ke.height)}for(let ke=0;ke<6;ke++)if(at){Fe?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,At[ke].width,At[ke].height,St,mt,At[ke].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,he,At[ke].width,At[ke].height,0,St,mt,At[ke].data);for(let yt=0;yt<De.length;yt++){const Ft=De[yt].image[ke].image;Fe?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,yt+1,0,0,Ft.width,Ft.height,St,mt,Ft.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,yt+1,he,Ft.width,Ft.height,0,St,mt,Ft.data)}}else{Fe?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,St,mt,At[ke]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,he,St,mt,At[ke]);for(let yt=0;yt<De.length;yt++){const gt=De[yt];Fe?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,yt+1,0,0,St,mt,gt.image[ke]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,yt+1,he,St,mt,gt.image[ke])}}}E(k)&&A(i.TEXTURE_CUBE_MAP),He.__version=Qe.version,k.onUpdate&&k.onUpdate(k)}Z.__version=k.version}function Oe(Z,k,xe,ze,Qe,He){const pt=r.convert(xe.format,xe.colorSpace),ut=r.convert(xe.type),xt=B(xe.internalFormat,pt,ut,xe.colorSpace),Nt=n.get(k),at=n.get(xe);if(at.__renderTarget=k,!Nt.__hasExternalTextures){const At=Math.max(1,k.width>>He),Et=Math.max(1,k.height>>He);Qe===i.TEXTURE_3D||Qe===i.TEXTURE_2D_ARRAY?t.texImage3D(Qe,He,xt,At,Et,k.depth,0,pt,ut,null):t.texImage2D(Qe,He,xt,At,Et,0,pt,ut,null)}t.bindFramebuffer(i.FRAMEBUFFER,Z),je(k)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,ze,Qe,at.__webglTexture,0,Ze(k)):(Qe===i.TEXTURE_2D||Qe>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Qe<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,ze,Qe,at.__webglTexture,He),t.bindFramebuffer(i.FRAMEBUFFER,null)}function $e(Z,k,xe){if(i.bindRenderbuffer(i.RENDERBUFFER,Z),k.depthBuffer){const ze=k.depthTexture,Qe=ze&&ze.isDepthTexture?ze.type:null,He=D(k.stencilBuffer,Qe),pt=k.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ut=Ze(k);je(k)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ut,He,k.width,k.height):xe?i.renderbufferStorageMultisample(i.RENDERBUFFER,ut,He,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,He,k.width,k.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,pt,i.RENDERBUFFER,Z)}else{const ze=k.textures;for(let Qe=0;Qe<ze.length;Qe++){const He=ze[Qe],pt=r.convert(He.format,He.colorSpace),ut=r.convert(He.type),xt=B(He.internalFormat,pt,ut,He.colorSpace),Nt=Ze(k);xe&&je(k)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Nt,xt,k.width,k.height):je(k)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Nt,xt,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,xt,k.width,k.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function tt(Z,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,Z),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ze=n.get(k.depthTexture);ze.__renderTarget=k,(!ze.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),_e(k.depthTexture,0);const Qe=ze.__webglTexture,He=Ze(k);if(k.depthTexture.format===ip)je(k)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Qe,0,He):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Qe,0);else if(k.depthTexture.format===sp)je(k)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Qe,0,He):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Qe,0);else throw new Error("Unknown depthTexture format")}function Dt(Z){const k=n.get(Z),xe=Z.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==Z.depthTexture){const ze=Z.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),ze){const Qe=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,ze.removeEventListener("dispose",Qe)};ze.addEventListener("dispose",Qe),k.__depthDisposeCallback=Qe}k.__boundDepthTexture=ze}if(Z.depthTexture&&!k.__autoAllocateDepthBuffer){if(xe)throw new Error("target.depthTexture not supported in Cube render targets");const ze=Z.texture.mipmaps;ze&&ze.length>0?tt(k.__webglFramebuffer[0],Z):tt(k.__webglFramebuffer,Z)}else if(xe){k.__webglDepthbuffer=[];for(let ze=0;ze<6;ze++)if(t.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer[ze]),k.__webglDepthbuffer[ze]===void 0)k.__webglDepthbuffer[ze]=i.createRenderbuffer(),$e(k.__webglDepthbuffer[ze],Z,!1);else{const Qe=Z.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,He=k.__webglDepthbuffer[ze];i.bindRenderbuffer(i.RENDERBUFFER,He),i.framebufferRenderbuffer(i.FRAMEBUFFER,Qe,i.RENDERBUFFER,He)}}else{const ze=Z.texture.mipmaps;if(ze&&ze.length>0?t.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=i.createRenderbuffer(),$e(k.__webglDepthbuffer,Z,!1);else{const Qe=Z.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,He=k.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,He),i.framebufferRenderbuffer(i.FRAMEBUFFER,Qe,i.RENDERBUFFER,He)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function wt(Z,k,xe){const ze=n.get(Z);k!==void 0&&Oe(ze.__webglFramebuffer,Z,Z.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),xe!==void 0&&Dt(Z)}function Pt(Z){const k=Z.texture,xe=n.get(Z),ze=n.get(k);Z.addEventListener("dispose",z);const Qe=Z.textures,He=Z.isWebGLCubeRenderTarget===!0,pt=Qe.length>1;if(pt||(ze.__webglTexture===void 0&&(ze.__webglTexture=i.createTexture()),ze.__version=k.version,o.memory.textures++),He){xe.__webglFramebuffer=[];for(let ut=0;ut<6;ut++)if(k.mipmaps&&k.mipmaps.length>0){xe.__webglFramebuffer[ut]=[];for(let xt=0;xt<k.mipmaps.length;xt++)xe.__webglFramebuffer[ut][xt]=i.createFramebuffer()}else xe.__webglFramebuffer[ut]=i.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){xe.__webglFramebuffer=[];for(let ut=0;ut<k.mipmaps.length;ut++)xe.__webglFramebuffer[ut]=i.createFramebuffer()}else xe.__webglFramebuffer=i.createFramebuffer();if(pt)for(let ut=0,xt=Qe.length;ut<xt;ut++){const Nt=n.get(Qe[ut]);Nt.__webglTexture===void 0&&(Nt.__webglTexture=i.createTexture(),o.memory.textures++)}if(Z.samples>0&&je(Z)===!1){xe.__webglMultisampledFramebuffer=i.createFramebuffer(),xe.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,xe.__webglMultisampledFramebuffer);for(let ut=0;ut<Qe.length;ut++){const xt=Qe[ut];xe.__webglColorRenderbuffer[ut]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,xe.__webglColorRenderbuffer[ut]);const Nt=r.convert(xt.format,xt.colorSpace),at=r.convert(xt.type),At=B(xt.internalFormat,Nt,at,xt.colorSpace,Z.isXRRenderTarget===!0),Et=Ze(Z);i.renderbufferStorageMultisample(i.RENDERBUFFER,Et,At,Z.width,Z.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ut,i.RENDERBUFFER,xe.__webglColorRenderbuffer[ut])}i.bindRenderbuffer(i.RENDERBUFFER,null),Z.depthBuffer&&(xe.__webglDepthRenderbuffer=i.createRenderbuffer(),$e(xe.__webglDepthRenderbuffer,Z,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(He){t.bindTexture(i.TEXTURE_CUBE_MAP,ze.__webglTexture),Ae(i.TEXTURE_CUBE_MAP,k);for(let ut=0;ut<6;ut++)if(k.mipmaps&&k.mipmaps.length>0)for(let xt=0;xt<k.mipmaps.length;xt++)Oe(xe.__webglFramebuffer[ut][xt],Z,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ut,xt);else Oe(xe.__webglFramebuffer[ut],Z,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0);E(k)&&A(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(pt){for(let ut=0,xt=Qe.length;ut<xt;ut++){const Nt=Qe[ut],at=n.get(Nt);t.bindTexture(i.TEXTURE_2D,at.__webglTexture),Ae(i.TEXTURE_2D,Nt),Oe(xe.__webglFramebuffer,Z,Nt,i.COLOR_ATTACHMENT0+ut,i.TEXTURE_2D,0),E(Nt)&&A(i.TEXTURE_2D)}t.unbindTexture()}else{let ut=i.TEXTURE_2D;if((Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(ut=Z.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(ut,ze.__webglTexture),Ae(ut,k),k.mipmaps&&k.mipmaps.length>0)for(let xt=0;xt<k.mipmaps.length;xt++)Oe(xe.__webglFramebuffer[xt],Z,k,i.COLOR_ATTACHMENT0,ut,xt);else Oe(xe.__webglFramebuffer,Z,k,i.COLOR_ATTACHMENT0,ut,0);E(k)&&A(ut),t.unbindTexture()}Z.depthBuffer&&Dt(Z)}function ot(Z){const k=Z.textures;for(let xe=0,ze=k.length;xe<ze;xe++){const Qe=k[xe];if(E(Qe)){const He=w(Z),pt=n.get(Qe).__webglTexture;t.bindTexture(He,pt),A(He),t.unbindTexture()}}}const dt=[],K=[];function rt(Z){if(Z.samples>0){if(je(Z)===!1){const k=Z.textures,xe=Z.width,ze=Z.height;let Qe=i.COLOR_BUFFER_BIT;const He=Z.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,pt=n.get(Z),ut=k.length>1;if(ut)for(let Nt=0;Nt<k.length;Nt++)t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,pt.__webglMultisampledFramebuffer);const xt=Z.texture.mipmaps;xt&&xt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,pt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,pt.__webglFramebuffer);for(let Nt=0;Nt<k.length;Nt++){if(Z.resolveDepthBuffer&&(Z.depthBuffer&&(Qe|=i.DEPTH_BUFFER_BIT),Z.stencilBuffer&&Z.resolveStencilBuffer&&(Qe|=i.STENCIL_BUFFER_BIT)),ut){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,pt.__webglColorRenderbuffer[Nt]);const at=n.get(k[Nt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,at,0)}i.blitFramebuffer(0,0,xe,ze,0,0,xe,ze,Qe,i.NEAREST),f===!0&&(dt.length=0,K.length=0,dt.push(i.COLOR_ATTACHMENT0+Nt),Z.depthBuffer&&Z.resolveDepthBuffer===!1&&(dt.push(He),K.push(He),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,K)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,dt))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),ut)for(let Nt=0;Nt<k.length;Nt++){t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.RENDERBUFFER,pt.__webglColorRenderbuffer[Nt]);const at=n.get(k[Nt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.TEXTURE_2D,at,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,pt.__webglMultisampledFramebuffer)}else if(Z.depthBuffer&&Z.resolveDepthBuffer===!1&&f){const k=Z.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[k])}}}function Ze(Z){return Math.min(s.maxSamples,Z.samples)}function je(Z){const k=n.get(Z);return Z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Xe(Z){const k=o.render.frame;m.get(Z)!==k&&(m.set(Z,k),Z.update())}function _t(Z,k){const xe=Z.colorSpace,ze=Z.format,Qe=Z.type;return Z.isCompressedTexture===!0||Z.isVideoTexture===!0||xe!==Eo&&xe!==nc&&(Nn.getTransfer(xe)===ii?(ze!==Zi||Qe!==Ta)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",xe)),k}function We(Z){return typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement?(p.width=Z.naturalWidth||Z.width,p.height=Z.naturalHeight||Z.height):typeof VideoFrame<"u"&&Z instanceof VideoFrame?(p.width=Z.displayWidth,p.height=Z.displayHeight):(p.width=Z.width,p.height=Z.height),p}this.allocateTextureUnit=ne,this.resetTextureUnits=ce,this.setTexture2D=_e,this.setTexture2DArray=H,this.setTexture3D=W,this.setTextureCube=Q,this.rebindTextures=wt,this.setupRenderTarget=Pt,this.updateRenderTargetMipmap=ot,this.updateMultisampleRenderTarget=rt,this.setupDepthRenderbuffer=Dt,this.setupFrameBufferTexture=Oe,this.useMultisampledRTT=je}function eU(i,e){function t(n,s=nc){let r;const o=Nn.getTransfer(s);if(n===Ta)return i.UNSIGNED_BYTE;if(n===Bx)return i.UNSIGNED_SHORT_4_4_4_4;if(n===Dx)return i.UNSIGNED_SHORT_5_5_5_1;if(n===yE)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===Rx)return i.BYTE;if(n===wx)return i.SHORT;if(n===tp)return i.UNSIGNED_SHORT;if(n===cv)return i.INT;if(n===xl)return i.UNSIGNED_INT;if(n===Ii)return i.FLOAT;if(n===Es)return i.HALF_FLOAT;if(n===_E)return i.ALPHA;if(n===xE)return i.RGB;if(n===Zi)return i.RGBA;if(n===ip)return i.DEPTH_COMPONENT;if(n===sp)return i.DEPTH_STENCIL;if(n===uv)return i.RED;if(n===fv)return i.RED_INTEGER;if(n===AE)return i.RG;if(n===Ux)return i.RG_INTEGER;if(n===Lx)return i.RGBA_INTEGER;if(n===xg||n===Ag||n===Sg||n===Mg)if(o===ii)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===xg)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ag)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Sg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Mg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===xg)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ag)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Sg)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Mg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===N_||n===O_||n===I_||n===P_)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===N_)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===O_)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===I_)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===P_)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===F_||n===H_||n===z_)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===F_||n===H_)return o===ii?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===z_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===G_||n===V_||n===k_||n===X_||n===j_||n===Y_||n===q_||n===J_||n===K_||n===W_||n===Z_||n===Q_||n===$_||n===ex)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===G_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===V_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===k_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===X_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===j_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Y_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===q_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===J_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===K_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===W_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Z_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Q_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===$_)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ex)return o===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===bg||n===tx||n===nx)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===bg)return o===ii?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===tx)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===nx)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===SE||n===ix||n===sx||n===ax)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===bg)return r.COMPRESSED_RED_RGTC1_EXT;if(n===ix)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===sx)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===ax)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===np?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const sX=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,aX=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class rX{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const s=new Wn,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Ya({vertexShader:sX,fragmentShader:aX,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ei(new Ru(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class oX extends Ml{constructor(e,t){super();const n=this;let s=null,r=1,o=null,c="local-floor",f=1,p=null,m=null,v=null,y=null,x=null,S=null;const T=new rX,E=t.getContextAttributes();let A=null,w=null;const B=[],D=[],O=new Ke;let I=null;const z=new ki;z.viewport=new Hn;const P=new ki;P.viewport=new Hn;const L=[z,P],N=new X3;let j=null,ce=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let Ne=B[oe];return Ne===void 0&&(Ne=new p_,B[oe]=Ne),Ne.getTargetRaySpace()},this.getControllerGrip=function(oe){let Ne=B[oe];return Ne===void 0&&(Ne=new p_,B[oe]=Ne),Ne.getGripSpace()},this.getHand=function(oe){let Ne=B[oe];return Ne===void 0&&(Ne=new p_,B[oe]=Ne),Ne.getHandSpace()};function ne(oe){const Ne=D.indexOf(oe.inputSource);if(Ne===-1)return;const Oe=B[Ne];Oe!==void 0&&(Oe.update(oe.inputSource,oe.frame,p||o),Oe.dispatchEvent({type:oe.type,data:oe.inputSource}))}function fe(){s.removeEventListener("select",ne),s.removeEventListener("selectstart",ne),s.removeEventListener("selectend",ne),s.removeEventListener("squeeze",ne),s.removeEventListener("squeezestart",ne),s.removeEventListener("squeezeend",ne),s.removeEventListener("end",fe),s.removeEventListener("inputsourceschange",_e);for(let oe=0;oe<B.length;oe++){const Ne=D[oe];Ne!==null&&(D[oe]=null,B[oe].disconnect(Ne))}j=null,ce=null,T.reset(),e.setRenderTarget(A),x=null,y=null,v=null,s=null,w=null,Ce.stop(),n.isPresenting=!1,e.setPixelRatio(I),e.setSize(O.width,O.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){r=oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){c=oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||o},this.setReferenceSpace=function(oe){p=oe},this.getBaseLayer=function(){return y!==null?y:x},this.getBinding=function(){return v},this.getFrame=function(){return S},this.getSession=function(){return s},this.setSession=async function(oe){if(s=oe,s!==null){if(A=e.getRenderTarget(),s.addEventListener("select",ne),s.addEventListener("selectstart",ne),s.addEventListener("selectend",ne),s.addEventListener("squeeze",ne),s.addEventListener("squeezestart",ne),s.addEventListener("squeezeend",ne),s.addEventListener("end",fe),s.addEventListener("inputsourceschange",_e),E.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(O),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Oe=null,$e=null,tt=null;E.depth&&(tt=E.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Oe=E.stencil?sp:ip,$e=E.stencil?np:xl);const Dt={colorFormat:t.RGBA8,depthFormat:tt,scaleFactor:r};v=new XRWebGLBinding(s,t),y=v.createProjectionLayer(Dt),s.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),w=new Hr(y.textureWidth,y.textureHeight,{format:Zi,type:Ta,depthTexture:new Xx(y.textureWidth,y.textureHeight,$e,void 0,void 0,void 0,void 0,void 0,void 0,Oe),stencilBuffer:E.stencil,colorSpace:e.outputColorSpace,samples:E.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const Oe={antialias:E.antialias,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:r};x=new XRWebGLLayer(s,t,Oe),s.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),w=new Hr(x.framebufferWidth,x.framebufferHeight,{format:Zi,type:Ta,colorSpace:e.outputColorSpace,stencilBuffer:E.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(f),p=null,o=await s.requestReferenceSpace(c),Ce.setContext(s),Ce.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function _e(oe){for(let Ne=0;Ne<oe.removed.length;Ne++){const Oe=oe.removed[Ne],$e=D.indexOf(Oe);$e>=0&&(D[$e]=null,B[$e].disconnect(Oe))}for(let Ne=0;Ne<oe.added.length;Ne++){const Oe=oe.added[Ne];let $e=D.indexOf(Oe);if($e===-1){for(let Dt=0;Dt<B.length;Dt++)if(Dt>=D.length){D.push(Oe),$e=Dt;break}else if(D[Dt]===null){D[Dt]=Oe,$e=Dt;break}if($e===-1)break}const tt=B[$e];tt&&tt.connect(Oe)}}const H=new $,W=new $;function Q(oe,Ne,Oe){H.setFromMatrixPosition(Ne.matrixWorld),W.setFromMatrixPosition(Oe.matrixWorld);const $e=H.distanceTo(W),tt=Ne.projectionMatrix.elements,Dt=Oe.projectionMatrix.elements,wt=tt[14]/(tt[10]-1),Pt=tt[14]/(tt[10]+1),ot=(tt[9]+1)/tt[5],dt=(tt[9]-1)/tt[5],K=(tt[8]-1)/tt[0],rt=(Dt[8]+1)/Dt[0],Ze=wt*K,je=wt*rt,Xe=$e/(-K+rt),_t=Xe*-K;if(Ne.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(_t),oe.translateZ(Xe),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert(),tt[10]===-1)oe.projectionMatrix.copy(Ne.projectionMatrix),oe.projectionMatrixInverse.copy(Ne.projectionMatrixInverse);else{const We=wt+Xe,Z=Pt+Xe,k=Ze-_t,xe=je+($e-_t),ze=ot*Pt/Z*We,Qe=dt*Pt/Z*We;oe.projectionMatrix.makePerspective(k,xe,ze,Qe,We,Z),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}}function ve(oe,Ne){Ne===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(Ne.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(s===null)return;let Ne=oe.near,Oe=oe.far;T.texture!==null&&(T.depthNear>0&&(Ne=T.depthNear),T.depthFar>0&&(Oe=T.depthFar)),N.near=P.near=z.near=Ne,N.far=P.far=z.far=Oe,(j!==N.near||ce!==N.far)&&(s.updateRenderState({depthNear:N.near,depthFar:N.far}),j=N.near,ce=N.far),z.layers.mask=oe.layers.mask|2,P.layers.mask=oe.layers.mask|4,N.layers.mask=z.layers.mask|P.layers.mask;const $e=oe.parent,tt=N.cameras;ve(N,$e);for(let Dt=0;Dt<tt.length;Dt++)ve(tt[Dt],$e);tt.length===2?Q(N,z,P):N.projectionMatrix.copy(z.projectionMatrix),X(oe,N,$e)};function X(oe,Ne,Oe){Oe===null?oe.matrix.copy(Ne.matrixWorld):(oe.matrix.copy(Oe.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(Ne.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(Ne.projectionMatrix),oe.projectionMatrixInverse.copy(Ne.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=op*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return N},this.getFoveation=function(){if(!(y===null&&x===null))return f},this.setFoveation=function(oe){f=oe,y!==null&&(y.fixedFoveation=oe),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=oe)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(N)};let re=null;function Ae(oe,Ne){if(m=Ne.getViewerPose(p||o),S=Ne,m!==null){const Oe=m.views;x!==null&&(e.setRenderTargetFramebuffer(w,x.framebuffer),e.setRenderTarget(w));let $e=!1;Oe.length!==N.cameras.length&&(N.cameras.length=0,$e=!0);for(let wt=0;wt<Oe.length;wt++){const Pt=Oe[wt];let ot=null;if(x!==null)ot=x.getViewport(Pt);else{const K=v.getViewSubImage(y,Pt);ot=K.viewport,wt===0&&(e.setRenderTargetTextures(w,K.colorTexture,K.depthStencilTexture),e.setRenderTarget(w))}let dt=L[wt];dt===void 0&&(dt=new ki,dt.layers.enable(wt),dt.viewport=new Hn,L[wt]=dt),dt.matrix.fromArray(Pt.transform.matrix),dt.matrix.decompose(dt.position,dt.quaternion,dt.scale),dt.projectionMatrix.fromArray(Pt.projectionMatrix),dt.projectionMatrixInverse.copy(dt.projectionMatrix).invert(),dt.viewport.set(ot.x,ot.y,ot.width,ot.height),wt===0&&(N.matrix.copy(dt.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale)),$e===!0&&N.cameras.push(dt)}const tt=s.enabledFeatures;if(tt&&tt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&v){const wt=v.getDepthInformation(Oe[0]);wt&&wt.isValid&&wt.texture&&T.init(e,wt,s.renderState)}}for(let Oe=0;Oe<B.length;Oe++){const $e=D[Oe],tt=B[Oe];$e!==null&&tt!==void 0&&tt.update($e,Ne,p||o)}re&&re(oe,Ne),Ne.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ne}),S=null}const Ce=new K3;Ce.setAnimationLoop(Ae),this.setAnimationLoop=function(oe){re=oe},this.dispose=function(){}}}const Of=new ur,lX=new Jt;function cX(i,e){function t(E,A){E.matrixAutoUpdate===!0&&E.updateMatrix(),A.value.copy(E.matrix)}function n(E,A){A.color.getRGB(E.fogColor.value,t3(i)),A.isFog?(E.fogNear.value=A.near,E.fogFar.value=A.far):A.isFogExp2&&(E.fogDensity.value=A.density)}function s(E,A,w,B,D){A.isMeshBasicMaterial||A.isMeshLambertMaterial?r(E,A):A.isMeshToonMaterial?(r(E,A),v(E,A)):A.isMeshPhongMaterial?(r(E,A),m(E,A)):A.isMeshStandardMaterial?(r(E,A),y(E,A),A.isMeshPhysicalMaterial&&x(E,A,D)):A.isMeshMatcapMaterial?(r(E,A),S(E,A)):A.isMeshDepthMaterial?r(E,A):A.isMeshDistanceMaterial?(r(E,A),T(E,A)):A.isMeshNormalMaterial?r(E,A):A.isLineBasicMaterial?(o(E,A),A.isLineDashedMaterial&&c(E,A)):A.isPointsMaterial?f(E,A,w,B):A.isSpriteMaterial?p(E,A):A.isShadowMaterial?(E.color.value.copy(A.color),E.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function r(E,A){E.opacity.value=A.opacity,A.color&&E.diffuse.value.copy(A.color),A.emissive&&E.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(E.map.value=A.map,t(A.map,E.mapTransform)),A.alphaMap&&(E.alphaMap.value=A.alphaMap,t(A.alphaMap,E.alphaMapTransform)),A.bumpMap&&(E.bumpMap.value=A.bumpMap,t(A.bumpMap,E.bumpMapTransform),E.bumpScale.value=A.bumpScale,A.side===Ea&&(E.bumpScale.value*=-1)),A.normalMap&&(E.normalMap.value=A.normalMap,t(A.normalMap,E.normalMapTransform),E.normalScale.value.copy(A.normalScale),A.side===Ea&&E.normalScale.value.negate()),A.displacementMap&&(E.displacementMap.value=A.displacementMap,t(A.displacementMap,E.displacementMapTransform),E.displacementScale.value=A.displacementScale,E.displacementBias.value=A.displacementBias),A.emissiveMap&&(E.emissiveMap.value=A.emissiveMap,t(A.emissiveMap,E.emissiveMapTransform)),A.specularMap&&(E.specularMap.value=A.specularMap,t(A.specularMap,E.specularMapTransform)),A.alphaTest>0&&(E.alphaTest.value=A.alphaTest);const w=e.get(A),B=w.envMap,D=w.envMapRotation;B&&(E.envMap.value=B,Of.copy(D),Of.x*=-1,Of.y*=-1,Of.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(Of.y*=-1,Of.z*=-1),E.envMapRotation.value.setFromMatrix4(lX.makeRotationFromEuler(Of)),E.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=A.reflectivity,E.ior.value=A.ior,E.refractionRatio.value=A.refractionRatio),A.lightMap&&(E.lightMap.value=A.lightMap,E.lightMapIntensity.value=A.lightMapIntensity,t(A.lightMap,E.lightMapTransform)),A.aoMap&&(E.aoMap.value=A.aoMap,E.aoMapIntensity.value=A.aoMapIntensity,t(A.aoMap,E.aoMapTransform))}function o(E,A){E.diffuse.value.copy(A.color),E.opacity.value=A.opacity,A.map&&(E.map.value=A.map,t(A.map,E.mapTransform))}function c(E,A){E.dashSize.value=A.dashSize,E.totalSize.value=A.dashSize+A.gapSize,E.scale.value=A.scale}function f(E,A,w,B){E.diffuse.value.copy(A.color),E.opacity.value=A.opacity,E.size.value=A.size*w,E.scale.value=B*.5,A.map&&(E.map.value=A.map,t(A.map,E.uvTransform)),A.alphaMap&&(E.alphaMap.value=A.alphaMap,t(A.alphaMap,E.alphaMapTransform)),A.alphaTest>0&&(E.alphaTest.value=A.alphaTest)}function p(E,A){E.diffuse.value.copy(A.color),E.opacity.value=A.opacity,E.rotation.value=A.rotation,A.map&&(E.map.value=A.map,t(A.map,E.mapTransform)),A.alphaMap&&(E.alphaMap.value=A.alphaMap,t(A.alphaMap,E.alphaMapTransform)),A.alphaTest>0&&(E.alphaTest.value=A.alphaTest)}function m(E,A){E.specular.value.copy(A.specular),E.shininess.value=Math.max(A.shininess,1e-4)}function v(E,A){A.gradientMap&&(E.gradientMap.value=A.gradientMap)}function y(E,A){E.metalness.value=A.metalness,A.metalnessMap&&(E.metalnessMap.value=A.metalnessMap,t(A.metalnessMap,E.metalnessMapTransform)),E.roughness.value=A.roughness,A.roughnessMap&&(E.roughnessMap.value=A.roughnessMap,t(A.roughnessMap,E.roughnessMapTransform)),A.envMap&&(E.envMapIntensity.value=A.envMapIntensity)}function x(E,A,w){E.ior.value=A.ior,A.sheen>0&&(E.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),E.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(E.sheenColorMap.value=A.sheenColorMap,t(A.sheenColorMap,E.sheenColorMapTransform)),A.sheenRoughnessMap&&(E.sheenRoughnessMap.value=A.sheenRoughnessMap,t(A.sheenRoughnessMap,E.sheenRoughnessMapTransform))),A.clearcoat>0&&(E.clearcoat.value=A.clearcoat,E.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(E.clearcoatMap.value=A.clearcoatMap,t(A.clearcoatMap,E.clearcoatMapTransform)),A.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap,t(A.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),A.clearcoatNormalMap&&(E.clearcoatNormalMap.value=A.clearcoatNormalMap,t(A.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),A.side===Ea&&E.clearcoatNormalScale.value.negate())),A.dispersion>0&&(E.dispersion.value=A.dispersion),A.iridescence>0&&(E.iridescence.value=A.iridescence,E.iridescenceIOR.value=A.iridescenceIOR,E.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(E.iridescenceMap.value=A.iridescenceMap,t(A.iridescenceMap,E.iridescenceMapTransform)),A.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=A.iridescenceThicknessMap,t(A.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),A.transmission>0&&(E.transmission.value=A.transmission,E.transmissionSamplerMap.value=w.texture,E.transmissionSamplerSize.value.set(w.width,w.height),A.transmissionMap&&(E.transmissionMap.value=A.transmissionMap,t(A.transmissionMap,E.transmissionMapTransform)),E.thickness.value=A.thickness,A.thicknessMap&&(E.thicknessMap.value=A.thicknessMap,t(A.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=A.attenuationDistance,E.attenuationColor.value.copy(A.attenuationColor)),A.anisotropy>0&&(E.anisotropyVector.value.set(A.anisotropy*Math.cos(A.anisotropyRotation),A.anisotropy*Math.sin(A.anisotropyRotation)),A.anisotropyMap&&(E.anisotropyMap.value=A.anisotropyMap,t(A.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=A.specularIntensity,E.specularColor.value.copy(A.specularColor),A.specularColorMap&&(E.specularColorMap.value=A.specularColorMap,t(A.specularColorMap,E.specularColorMapTransform)),A.specularIntensityMap&&(E.specularIntensityMap.value=A.specularIntensityMap,t(A.specularIntensityMap,E.specularIntensityMapTransform))}function S(E,A){A.matcap&&(E.matcap.value=A.matcap)}function T(E,A){const w=e.get(A).light;E.referencePosition.value.setFromMatrixPosition(w.matrixWorld),E.nearDistance.value=w.shadow.camera.near,E.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function uX(i,e,t,n){let s={},r={},o=[];const c=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function f(w,B){const D=B.program;n.uniformBlockBinding(w,D)}function p(w,B){let D=s[w.id];D===void 0&&(S(w),D=m(w),s[w.id]=D,w.addEventListener("dispose",E));const O=B.program;n.updateUBOMapping(w,O);const I=e.render.frame;r[w.id]!==I&&(y(w),r[w.id]=I)}function m(w){const B=v();w.__bindingPointIndex=B;const D=i.createBuffer(),O=w.__size,I=w.usage;return i.bindBuffer(i.UNIFORM_BUFFER,D),i.bufferData(i.UNIFORM_BUFFER,O,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,B,D),D}function v(){for(let w=0;w<c;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(w){const B=s[w.id],D=w.uniforms,O=w.__cache;i.bindBuffer(i.UNIFORM_BUFFER,B);for(let I=0,z=D.length;I<z;I++){const P=Array.isArray(D[I])?D[I]:[D[I]];for(let L=0,N=P.length;L<N;L++){const j=P[L];if(x(j,I,L,O)===!0){const ce=j.__offset,ne=Array.isArray(j.value)?j.value:[j.value];let fe=0;for(let _e=0;_e<ne.length;_e++){const H=ne[_e],W=T(H);typeof H=="number"||typeof H=="boolean"?(j.__data[0]=H,i.bufferSubData(i.UNIFORM_BUFFER,ce+fe,j.__data)):H.isMatrix3?(j.__data[0]=H.elements[0],j.__data[1]=H.elements[1],j.__data[2]=H.elements[2],j.__data[3]=0,j.__data[4]=H.elements[3],j.__data[5]=H.elements[4],j.__data[6]=H.elements[5],j.__data[7]=0,j.__data[8]=H.elements[6],j.__data[9]=H.elements[7],j.__data[10]=H.elements[8],j.__data[11]=0):(H.toArray(j.__data,fe),fe+=W.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ce,j.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function x(w,B,D,O){const I=w.value,z=B+"_"+D;if(O[z]===void 0)return typeof I=="number"||typeof I=="boolean"?O[z]=I:O[z]=I.clone(),!0;{const P=O[z];if(typeof I=="number"||typeof I=="boolean"){if(P!==I)return O[z]=I,!0}else if(P.equals(I)===!1)return P.copy(I),!0}return!1}function S(w){const B=w.uniforms;let D=0;const O=16;for(let z=0,P=B.length;z<P;z++){const L=Array.isArray(B[z])?B[z]:[B[z]];for(let N=0,j=L.length;N<j;N++){const ce=L[N],ne=Array.isArray(ce.value)?ce.value:[ce.value];for(let fe=0,_e=ne.length;fe<_e;fe++){const H=ne[fe],W=T(H),Q=D%O,ve=Q%W.boundary,X=Q+ve;D+=ve,X!==0&&O-X<W.storage&&(D+=O-X),ce.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),ce.__offset=D,D+=W.storage}}}const I=D%O;return I>0&&(D+=O-I),w.__size=D,w.__cache={},this}function T(w){const B={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(B.boundary=4,B.storage=4):w.isVector2?(B.boundary=8,B.storage=8):w.isVector3||w.isColor?(B.boundary=16,B.storage=12):w.isVector4?(B.boundary=16,B.storage=16):w.isMatrix3?(B.boundary=48,B.storage=48):w.isMatrix4?(B.boundary=64,B.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),B}function E(w){const B=w.target;B.removeEventListener("dispose",E);const D=o.indexOf(B.__bindingPointIndex);o.splice(D,1),i.deleteBuffer(s[B.id]),delete s[B.id],delete r[B.id]}function A(){for(const w in s)i.deleteBuffer(s[w]);o=[],s={},r={}}return{bind:f,update:p,dispose:A}}class a1{constructor(e={}){const{canvas:t=QD(),context:n=null,depth:s=!0,stencil:r=!1,alpha:o=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:p=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:v=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let x;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=n.getContextAttributes().alpha}else x=o;const S=new Uint32Array(4),T=new Int32Array(4);let E=null,A=null;const w=[],B=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ml,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let O=!1;this._outputColorSpace=Hs;let I=0,z=0,P=null,L=-1,N=null;const j=new Hn,ce=new Hn;let ne=null;const fe=new Tt(0);let _e=0,H=t.width,W=t.height,Q=1,ve=null,X=null;const re=new Hn(0,0,H,W),Ae=new Hn(0,0,H,W);let Ce=!1;const oe=new xp;let Ne=!1,Oe=!1;const $e=new Jt,tt=new Jt,Dt=new $,wt=new Hn,Pt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ot=!1;function dt(){return P===null?Q:1}let K=n;function rt(V,te){return t.getContext(V,te)}try{const V={alpha:!0,depth:s,stencil:r,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:p,powerPreference:m,failIfMajorPerformanceCaveat:v};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ov}`),t.addEventListener("webglcontextlost",ke,!1),t.addEventListener("webglcontextrestored",yt,!1),t.addEventListener("webglcontextcreationerror",gt,!1),K===null){const te="webgl2";if(K=rt(te,V),K===null)throw rt(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let Ze,je,Xe,_t,We,Z,k,xe,ze,Qe,He,pt,ut,xt,Nt,at,At,Et,St,mt,he,Fe,lt,ue;function be(){Ze=new S9(K),Ze.init(),Fe=new eU(K,Ze),je=new m9(K,Ze,e,Fe),Xe=new nX(K,Ze),je.reverseDepthBuffer&&y&&Xe.buffers.depth.setReversed(!0),_t=new E9(K),We=new kk,Z=new iX(K,Ze,Xe,We,je,Fe,_t),k=new v9(D),xe=new A9(D),ze=new D5(K),lt=new d9(K,ze),Qe=new M9(K,ze,_t,lt),He=new C9(K,Qe,ze,_t),St=new T9(K,je,Z),at=new g9(We),pt=new Vk(D,k,xe,Ze,je,lt,at),ut=new cX(D,We),xt=new jk,Nt=new Zk(Ze),Et=new h9(D,k,xe,Xe,He,x,f),At=new eX(D,He,je),ue=new uX(K,_t,je,Xe),mt=new p9(K,Ze,_t),he=new b9(K,Ze,_t),_t.programs=pt.programs,D.capabilities=je,D.extensions=Ze,D.properties=We,D.renderLists=xt,D.shadowMap=At,D.state=Xe,D.info=_t}be();const De=new oX(D,K);this.xr=De,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const V=Ze.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=Ze.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(V){V!==void 0&&(Q=V,this.setSize(H,W,!1))},this.getSize=function(V){return V.set(H,W)},this.setSize=function(V,te,se=!0){if(De.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=V,W=te,t.width=Math.floor(V*Q),t.height=Math.floor(te*Q),se===!0&&(t.style.width=V+"px",t.style.height=te+"px"),this.setViewport(0,0,V,te)},this.getDrawingBufferSize=function(V){return V.set(H*Q,W*Q).floor()},this.setDrawingBufferSize=function(V,te,se){H=V,W=te,Q=se,t.width=Math.floor(V*se),t.height=Math.floor(te*se),this.setViewport(0,0,V,te)},this.getCurrentViewport=function(V){return V.copy(j)},this.getViewport=function(V){return V.copy(re)},this.setViewport=function(V,te,se,ae){V.isVector4?re.set(V.x,V.y,V.z,V.w):re.set(V,te,se,ae),Xe.viewport(j.copy(re).multiplyScalar(Q).round())},this.getScissor=function(V){return V.copy(Ae)},this.setScissor=function(V,te,se,ae){V.isVector4?Ae.set(V.x,V.y,V.z,V.w):Ae.set(V,te,se,ae),Xe.scissor(ce.copy(Ae).multiplyScalar(Q).round())},this.getScissorTest=function(){return Ce},this.setScissorTest=function(V){Xe.setScissorTest(Ce=V)},this.setOpaqueSort=function(V){ve=V},this.setTransparentSort=function(V){X=V},this.getClearColor=function(V){return V.copy(Et.getClearColor())},this.setClearColor=function(){Et.setClearColor(...arguments)},this.getClearAlpha=function(){return Et.getClearAlpha()},this.setClearAlpha=function(){Et.setClearAlpha(...arguments)},this.clear=function(V=!0,te=!0,se=!0){let ae=0;if(V){let ge=!1;if(P!==null){const Te=P.texture.format;ge=Te===Lx||Te===Ux||Te===fv}if(ge){const Te=P.texture.type,Ve=Te===Ta||Te===xl||Te===tp||Te===np||Te===Bx||Te===Dx,Ye=Et.getClearColor(),it=Et.getClearAlpha(),Mt=Ye.r,vt=Ye.g,bt=Ye.b;Ve?(S[0]=Mt,S[1]=vt,S[2]=bt,S[3]=it,K.clearBufferuiv(K.COLOR,0,S)):(T[0]=Mt,T[1]=vt,T[2]=bt,T[3]=it,K.clearBufferiv(K.COLOR,0,T))}else ae|=K.COLOR_BUFFER_BIT}te&&(ae|=K.DEPTH_BUFFER_BIT),se&&(ae|=K.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),K.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ke,!1),t.removeEventListener("webglcontextrestored",yt,!1),t.removeEventListener("webglcontextcreationerror",gt,!1),Et.dispose(),xt.dispose(),Nt.dispose(),We.dispose(),k.dispose(),xe.dispose(),He.dispose(),lt.dispose(),ue.dispose(),pt.dispose(),De.dispose(),De.removeEventListener("sessionstart",_i),De.removeEventListener("sessionend",Ti),Ci.stop()};function ke(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function yt(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;const V=_t.autoReset,te=At.enabled,se=At.autoUpdate,ae=At.needsUpdate,ge=At.type;be(),_t.autoReset=V,At.enabled=te,At.autoUpdate=se,At.needsUpdate=ae,At.type=ge}function gt(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function Ft(V){const te=V.target;te.removeEventListener("dispose",Ft),rn(te)}function rn(V){wn(V),We.remove(V)}function wn(V){const te=We.get(V).programs;te!==void 0&&(te.forEach(function(se){pt.releaseProgram(se)}),V.isShaderMaterial&&pt.releaseShaderCache(V))}this.renderBufferDirect=function(V,te,se,ae,ge,Te){te===null&&(te=Pt);const Ve=ge.isMesh&&ge.matrixWorld.determinant()<0,Ye=de(V,te,se,ae,ge);Xe.setMaterial(ae,Ve);let it=se.index,Mt=1;if(ae.wireframe===!0){if(it=Qe.getWireframeAttribute(se),it===void 0)return;Mt=2}const vt=se.drawRange,bt=se.attributes.position;let kt=vt.start*Mt,Ht=(vt.start+vt.count)*Mt;Te!==null&&(kt=Math.max(kt,Te.start*Mt),Ht=Math.min(Ht,(Te.start+Te.count)*Mt)),it!==null?(kt=Math.max(kt,0),Ht=Math.min(Ht,it.count)):bt!=null&&(kt=Math.max(kt,0),Ht=Math.min(Ht,bt.count));const Tn=Ht-kt;if(Tn<0||Tn===1/0)return;lt.setup(ge,ae,Ye,se,it);let Ut,Gt=mt;if(it!==null&&(Ut=ze.get(it),Gt=he,Gt.setIndex(Ut)),ge.isMesh)ae.wireframe===!0?(Xe.setLineWidth(ae.wireframeLinewidth*dt()),Gt.setMode(K.LINES)):Gt.setMode(K.TRIANGLES);else if(ge.isLine){let Lt=ae.linewidth;Lt===void 0&&(Lt=1),Xe.setLineWidth(Lt*dt()),ge.isLineSegments?Gt.setMode(K.LINES):ge.isLineLoop?Gt.setMode(K.LINE_LOOP):Gt.setMode(K.LINE_STRIP)}else ge.isPoints?Gt.setMode(K.POINTS):ge.isSprite&&Gt.setMode(K.TRIANGLES);if(ge.isBatchedMesh)if(ge._multiDrawInstances!==null)d_("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Gt.renderMultiDrawInstances(ge._multiDrawStarts,ge._multiDrawCounts,ge._multiDrawCount,ge._multiDrawInstances);else if(Ze.get("WEBGL_multi_draw"))Gt.renderMultiDraw(ge._multiDrawStarts,ge._multiDrawCounts,ge._multiDrawCount);else{const Lt=ge._multiDrawStarts,Yn=ge._multiDrawCounts,$t=ge._multiDrawCount,an=it?ze.get(it).bytesPerElement:1,Zn=We.get(ae).currentProgram.getUniforms();for(let jt=0;jt<$t;jt++)Zn.setValue(K,"_gl_DrawID",jt),Gt.render(Lt[jt]/an,Yn[jt])}else if(ge.isInstancedMesh)Gt.renderInstances(kt,Tn,ge.count);else if(se.isInstancedBufferGeometry){const Lt=se._maxInstanceCount!==void 0?se._maxInstanceCount:1/0,Yn=Math.min(se.instanceCount,Lt);Gt.renderInstances(kt,Tn,Yn)}else Gt.render(kt,Tn)};function on(V,te,se){V.transparent===!0&&V.side===Nr&&V.forceSinglePass===!1?(V.side=Ea,V.needsUpdate=!0,Gn(V,te,se),V.side=yl,V.needsUpdate=!0,Gn(V,te,se),V.side=Nr):Gn(V,te,se)}this.compile=function(V,te,se=null){se===null&&(se=V),A=Nt.get(se),A.init(te),B.push(A),se.traverseVisible(function(ge){ge.isLight&&ge.layers.test(te.layers)&&(A.pushLight(ge),ge.castShadow&&A.pushShadow(ge))}),V!==se&&V.traverseVisible(function(ge){ge.isLight&&ge.layers.test(te.layers)&&(A.pushLight(ge),ge.castShadow&&A.pushShadow(ge))}),A.setupLights();const ae=new Set;return V.traverse(function(ge){if(!(ge.isMesh||ge.isPoints||ge.isLine||ge.isSprite))return;const Te=ge.material;if(Te)if(Array.isArray(Te))for(let Ve=0;Ve<Te.length;Ve++){const Ye=Te[Ve];on(Ye,se,ge),ae.add(Ye)}else on(Te,se,ge),ae.add(Te)}),A=B.pop(),ae},this.compileAsync=function(V,te,se=null){const ae=this.compile(V,te,se);return new Promise(ge=>{function Te(){if(ae.forEach(function(Ve){We.get(Ve).currentProgram.isReady()&&ae.delete(Ve)}),ae.size===0){ge(V);return}setTimeout(Te,10)}Ze.get("KHR_parallel_shader_compile")!==null?Te():setTimeout(Te,10)})};let yi=null;function ai(V){yi&&yi(V)}function _i(){Ci.stop()}function Ti(){Ci.start()}const Ci=new K3;Ci.setAnimationLoop(ai),typeof self<"u"&&Ci.setContext(self),this.setAnimationLoop=function(V){yi=V,De.setAnimationLoop(V),V===null?Ci.stop():Ci.start()},De.addEventListener("sessionstart",_i),De.addEventListener("sessionend",Ti),this.render=function(V,te){if(te!==void 0&&te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),te.parent===null&&te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),De.enabled===!0&&De.isPresenting===!0&&(De.cameraAutoUpdate===!0&&De.updateCamera(te),te=De.getCamera()),V.isScene===!0&&V.onBeforeRender(D,V,te,P),A=Nt.get(V,B.length),A.init(te),B.push(A),tt.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),oe.setFromProjectionMatrix(tt),Oe=this.localClippingEnabled,Ne=at.init(this.clippingPlanes,Oe),E=xt.get(V,w.length),E.init(),w.push(E),De.enabled===!0&&De.isPresenting===!0){const Te=D.xr.getDepthSensingMesh();Te!==null&&vs(Te,te,-1/0,D.sortObjects)}vs(V,te,0,D.sortObjects),E.finish(),D.sortObjects===!0&&E.sort(ve,X),ot=De.enabled===!1||De.isPresenting===!1||De.hasDepthSensing()===!1,ot&&Et.addToRenderList(E,V),this.info.render.frame++,Ne===!0&&at.beginShadows();const se=A.state.shadowsArray;At.render(se,V,te),Ne===!0&&at.endShadows(),this.info.autoReset===!0&&this.info.reset();const ae=E.opaque,ge=E.transmissive;if(A.setupLights(),te.isArrayCamera){const Te=te.cameras;if(ge.length>0)for(let Ve=0,Ye=Te.length;Ve<Ye;Ve++){const it=Te[Ve];as(ae,ge,V,it)}ot&&Et.render(V);for(let Ve=0,Ye=Te.length;Ve<Ye;Ve++){const it=Te[Ve];qa(E,V,it,it.viewport)}}else ge.length>0&&as(ae,ge,V,te),ot&&Et.render(V),qa(E,V,te);P!==null&&z===0&&(Z.updateMultisampleRenderTarget(P),Z.updateRenderTargetMipmap(P)),V.isScene===!0&&V.onAfterRender(D,V,te),lt.resetDefaultState(),L=-1,N=null,B.pop(),B.length>0?(A=B[B.length-1],Ne===!0&&at.setGlobalState(D.clippingPlanes,A.state.camera)):A=null,w.pop(),w.length>0?E=w[w.length-1]:E=null};function vs(V,te,se,ae){if(V.visible===!1)return;if(V.layers.test(te.layers)){if(V.isGroup)se=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(te);else if(V.isLight)A.pushLight(V),V.castShadow&&A.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||oe.intersectsSprite(V)){ae&&wt.setFromMatrixPosition(V.matrixWorld).applyMatrix4(tt);const Ve=He.update(V),Ye=V.material;Ye.visible&&E.push(V,Ve,Ye,se,wt.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||oe.intersectsObject(V))){const Ve=He.update(V),Ye=V.material;if(ae&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),wt.copy(V.boundingSphere.center)):(Ve.boundingSphere===null&&Ve.computeBoundingSphere(),wt.copy(Ve.boundingSphere.center)),wt.applyMatrix4(V.matrixWorld).applyMatrix4(tt)),Array.isArray(Ye)){const it=Ve.groups;for(let Mt=0,vt=it.length;Mt<vt;Mt++){const bt=it[Mt],kt=Ye[bt.materialIndex];kt&&kt.visible&&E.push(V,Ve,kt,se,wt.z,bt)}}else Ye.visible&&E.push(V,Ve,Ye,se,wt.z,null)}}const Te=V.children;for(let Ve=0,Ye=Te.length;Ve<Ye;Ve++)vs(Te[Ve],te,se,ae)}function qa(V,te,se,ae){const ge=V.opaque,Te=V.transmissive,Ve=V.transparent;A.setupLightsView(se),Ne===!0&&at.setGlobalState(D.clippingPlanes,se),ae&&Xe.viewport(j.copy(ae)),ge.length>0&&Yt(ge,te,se),Te.length>0&&Yt(Te,te,se),Ve.length>0&&Yt(Ve,te,se),Xe.buffers.depth.setTest(!0),Xe.buffers.depth.setMask(!0),Xe.buffers.color.setMask(!0),Xe.setPolygonOffset(!1)}function as(V,te,se,ae){if((se.isScene===!0?se.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[ae.id]===void 0&&(A.state.transmissionRenderTarget[ae.id]=new Hr(1,1,{generateMipmaps:!0,type:Ze.has("EXT_color_buffer_half_float")||Ze.has("EXT_color_buffer_float")?Es:Ta,minFilter:Ir,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Nn.workingColorSpace}));const Te=A.state.transmissionRenderTarget[ae.id],Ve=ae.viewport||j;Te.setSize(Ve.z*D.transmissionResolutionScale,Ve.w*D.transmissionResolutionScale);const Ye=D.getRenderTarget();D.setRenderTarget(Te),D.getClearColor(fe),_e=D.getClearAlpha(),_e<1&&D.setClearColor(16777215,.5),D.clear(),ot&&Et.render(se);const it=D.toneMapping;D.toneMapping=ml;const Mt=ae.viewport;if(ae.viewport!==void 0&&(ae.viewport=void 0),A.setupLightsView(ae),Ne===!0&&at.setGlobalState(D.clippingPlanes,ae),Yt(V,se,ae),Z.updateMultisampleRenderTarget(Te),Z.updateRenderTargetMipmap(Te),Ze.has("WEBGL_multisampled_render_to_texture")===!1){let vt=!1;for(let bt=0,kt=te.length;bt<kt;bt++){const Ht=te[bt],Tn=Ht.object,Ut=Ht.geometry,Gt=Ht.material,Lt=Ht.group;if(Gt.side===Nr&&Tn.layers.test(ae.layers)){const Yn=Gt.side;Gt.side=Ea,Gt.needsUpdate=!0,ks(Tn,se,ae,Ut,Gt,Lt),Gt.side=Yn,Gt.needsUpdate=!0,vt=!0}}vt===!0&&(Z.updateMultisampleRenderTarget(Te),Z.updateRenderTargetMipmap(Te))}D.setRenderTarget(Ye),D.setClearColor(fe,_e),Mt!==void 0&&(ae.viewport=Mt),D.toneMapping=it}function Yt(V,te,se){const ae=te.isScene===!0?te.overrideMaterial:null;for(let ge=0,Te=V.length;ge<Te;ge++){const Ve=V[ge],Ye=Ve.object,it=Ve.geometry,Mt=Ve.group;let vt=Ve.material;vt.allowOverride===!0&&ae!==null&&(vt=ae),Ye.layers.test(se.layers)&&ks(Ye,te,se,it,vt,Mt)}}function ks(V,te,se,ae,ge,Te){V.onBeforeRender(D,te,se,ae,ge,Te),V.modelViewMatrix.multiplyMatrices(se.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),ge.onBeforeRender(D,te,se,ae,V,Te),ge.transparent===!0&&ge.side===Nr&&ge.forceSinglePass===!1?(ge.side=Ea,ge.needsUpdate=!0,D.renderBufferDirect(se,te,ae,ge,V,Te),ge.side=yl,ge.needsUpdate=!0,D.renderBufferDirect(se,te,ae,ge,V,Te),ge.side=Nr):D.renderBufferDirect(se,te,ae,ge,V,Te),V.onAfterRender(D,te,se,ae,ge,Te)}function Gn(V,te,se){te.isScene!==!0&&(te=Pt);const ae=We.get(V),ge=A.state.lights,Te=A.state.shadowsArray,Ve=ge.state.version,Ye=pt.getParameters(V,ge.state,Te,te,se),it=pt.getProgramCacheKey(Ye);let Mt=ae.programs;ae.environment=V.isMeshStandardMaterial?te.environment:null,ae.fog=te.fog,ae.envMap=(V.isMeshStandardMaterial?xe:k).get(V.envMap||ae.environment),ae.envMapRotation=ae.environment!==null&&V.envMap===null?te.environmentRotation:V.envMapRotation,Mt===void 0&&(V.addEventListener("dispose",Ft),Mt=new Map,ae.programs=Mt);let vt=Mt.get(it);if(vt!==void 0){if(ae.currentProgram===vt&&ae.lightsStateVersion===Ve)return J(V,Ye),vt}else Ye.uniforms=pt.getUniforms(V),V.onBeforeCompile(Ye,D),vt=pt.acquireProgram(Ye,it),Mt.set(it,vt),ae.uniforms=Ye.uniforms;const bt=ae.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(bt.clippingPlanes=at.uniform),J(V,Ye),ae.needsLights=Ue(V),ae.lightsStateVersion=Ve,ae.needsLights&&(bt.ambientLightColor.value=ge.state.ambient,bt.lightProbe.value=ge.state.probe,bt.directionalLights.value=ge.state.directional,bt.directionalLightShadows.value=ge.state.directionalShadow,bt.spotLights.value=ge.state.spot,bt.spotLightShadows.value=ge.state.spotShadow,bt.rectAreaLights.value=ge.state.rectArea,bt.ltc_1.value=ge.state.rectAreaLTC1,bt.ltc_2.value=ge.state.rectAreaLTC2,bt.pointLights.value=ge.state.point,bt.pointLightShadows.value=ge.state.pointShadow,bt.hemisphereLights.value=ge.state.hemi,bt.directionalShadowMap.value=ge.state.directionalShadowMap,bt.directionalShadowMatrix.value=ge.state.directionalShadowMatrix,bt.spotShadowMap.value=ge.state.spotShadowMap,bt.spotLightMatrix.value=ge.state.spotLightMatrix,bt.spotLightMap.value=ge.state.spotLightMap,bt.pointShadowMap.value=ge.state.pointShadowMap,bt.pointShadowMatrix.value=ge.state.pointShadowMatrix),ae.currentProgram=vt,ae.uniformsList=null,vt}function G(V){if(V.uniformsList===null){const te=V.currentProgram.getUniforms();V.uniformsList=m_.seqWithValue(te.seq,V.uniforms)}return V.uniformsList}function J(V,te){const se=We.get(V);se.outputColorSpace=te.outputColorSpace,se.batching=te.batching,se.batchingColor=te.batchingColor,se.instancing=te.instancing,se.instancingColor=te.instancingColor,se.instancingMorph=te.instancingMorph,se.skinning=te.skinning,se.morphTargets=te.morphTargets,se.morphNormals=te.morphNormals,se.morphColors=te.morphColors,se.morphTargetsCount=te.morphTargetsCount,se.numClippingPlanes=te.numClippingPlanes,se.numIntersection=te.numClipIntersection,se.vertexAlphas=te.vertexAlphas,se.vertexTangents=te.vertexTangents,se.toneMapping=te.toneMapping}function de(V,te,se,ae,ge){te.isScene!==!0&&(te=Pt),Z.resetTextureUnits();const Te=te.fog,Ve=ae.isMeshStandardMaterial?te.environment:null,Ye=P===null?D.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Eo,it=(ae.isMeshStandardMaterial?xe:k).get(ae.envMap||Ve),Mt=ae.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,vt=!!se.attributes.tangent&&(!!ae.normalMap||ae.anisotropy>0),bt=!!se.morphAttributes.position,kt=!!se.morphAttributes.normal,Ht=!!se.morphAttributes.color;let Tn=ml;ae.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(Tn=D.toneMapping);const Ut=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,Gt=Ut!==void 0?Ut.length:0,Lt=We.get(ae),Yn=A.state.lights;if(Ne===!0&&(Oe===!0||V!==N)){const Qn=V===N&&ae.id===L;at.setState(ae,V,Qn)}let $t=!1;ae.version===Lt.__version?(Lt.needsLights&&Lt.lightsStateVersion!==Yn.state.version||Lt.outputColorSpace!==Ye||ge.isBatchedMesh&&Lt.batching===!1||!ge.isBatchedMesh&&Lt.batching===!0||ge.isBatchedMesh&&Lt.batchingColor===!0&&ge.colorTexture===null||ge.isBatchedMesh&&Lt.batchingColor===!1&&ge.colorTexture!==null||ge.isInstancedMesh&&Lt.instancing===!1||!ge.isInstancedMesh&&Lt.instancing===!0||ge.isSkinnedMesh&&Lt.skinning===!1||!ge.isSkinnedMesh&&Lt.skinning===!0||ge.isInstancedMesh&&Lt.instancingColor===!0&&ge.instanceColor===null||ge.isInstancedMesh&&Lt.instancingColor===!1&&ge.instanceColor!==null||ge.isInstancedMesh&&Lt.instancingMorph===!0&&ge.morphTexture===null||ge.isInstancedMesh&&Lt.instancingMorph===!1&&ge.morphTexture!==null||Lt.envMap!==it||ae.fog===!0&&Lt.fog!==Te||Lt.numClippingPlanes!==void 0&&(Lt.numClippingPlanes!==at.numPlanes||Lt.numIntersection!==at.numIntersection)||Lt.vertexAlphas!==Mt||Lt.vertexTangents!==vt||Lt.morphTargets!==bt||Lt.morphNormals!==kt||Lt.morphColors!==Ht||Lt.toneMapping!==Tn||Lt.morphTargetsCount!==Gt)&&($t=!0):($t=!0,Lt.__version=ae.version);let an=Lt.currentProgram;$t===!0&&(an=Gn(ae,te,ge));let Zn=!1,jt=!1,vn=!1;const pn=an.getUniforms(),fi=Lt.uniforms;if(Xe.useProgram(an.program)&&(Zn=!0,jt=!0,vn=!0),ae.id!==L&&(L=ae.id,jt=!0),Zn||N!==V){Xe.buffers.depth.getReversed()?($e.copy(V.projectionMatrix),n4($e),i4($e),pn.setValue(K,"projectionMatrix",$e)):pn.setValue(K,"projectionMatrix",V.projectionMatrix),pn.setValue(K,"viewMatrix",V.matrixWorldInverse);const Qi=pn.map.cameraPosition;Qi!==void 0&&Qi.setValue(K,Dt.setFromMatrixPosition(V.matrixWorld)),je.logarithmicDepthBuffer&&pn.setValue(K,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial)&&pn.setValue(K,"isOrthographic",V.isOrthographicCamera===!0),N!==V&&(N=V,jt=!0,vn=!0)}if(ge.isSkinnedMesh){pn.setOptional(K,ge,"bindMatrix"),pn.setOptional(K,ge,"bindMatrixInverse");const Qn=ge.skeleton;Qn&&(Qn.boneTexture===null&&Qn.computeBoneTexture(),pn.setValue(K,"boneTexture",Qn.boneTexture,Z))}ge.isBatchedMesh&&(pn.setOptional(K,ge,"batchingTexture"),pn.setValue(K,"batchingTexture",ge._matricesTexture,Z),pn.setOptional(K,ge,"batchingIdTexture"),pn.setValue(K,"batchingIdTexture",ge._indirectTexture,Z),pn.setOptional(K,ge,"batchingColorTexture"),ge._colorsTexture!==null&&pn.setValue(K,"batchingColorTexture",ge._colorsTexture,Z));const Bn=se.morphAttributes;if((Bn.position!==void 0||Bn.normal!==void 0||Bn.color!==void 0)&&St.update(ge,se,an),(jt||Lt.receiveShadow!==ge.receiveShadow)&&(Lt.receiveShadow=ge.receiveShadow,pn.setValue(K,"receiveShadow",ge.receiveShadow)),ae.isMeshGouraudMaterial&&ae.envMap!==null&&(fi.envMap.value=it,fi.flipEnvMap.value=it.isCubeTexture&&it.isRenderTargetTexture===!1?-1:1),ae.isMeshStandardMaterial&&ae.envMap===null&&te.environment!==null&&(fi.envMapIntensity.value=te.environmentIntensity),jt&&(pn.setValue(K,"toneMappingExposure",D.toneMappingExposure),Lt.needsLights&&we(fi,vn),Te&&ae.fog===!0&&ut.refreshFogUniforms(fi,Te),ut.refreshMaterialUniforms(fi,ae,Q,W,A.state.transmissionRenderTarget[V.id]),m_.upload(K,G(Lt),fi,Z)),ae.isShaderMaterial&&ae.uniformsNeedUpdate===!0&&(m_.upload(K,G(Lt),fi,Z),ae.uniformsNeedUpdate=!1),ae.isSpriteMaterial&&pn.setValue(K,"center",ge.center),pn.setValue(K,"modelViewMatrix",ge.modelViewMatrix),pn.setValue(K,"normalMatrix",ge.normalMatrix),pn.setValue(K,"modelMatrix",ge.matrixWorld),ae.isShaderMaterial||ae.isRawShaderMaterial){const Qn=ae.uniformsGroups;for(let Qi=0,ws=Qn.length;Qi<ws;Qi++){const fr=Qn[Qi];ue.update(fr,an),ue.bind(fr,an)}}return an}function we(V,te){V.ambientLightColor.needsUpdate=te,V.lightProbe.needsUpdate=te,V.directionalLights.needsUpdate=te,V.directionalLightShadows.needsUpdate=te,V.pointLights.needsUpdate=te,V.pointLightShadows.needsUpdate=te,V.spotLights.needsUpdate=te,V.spotLightShadows.needsUpdate=te,V.rectAreaLights.needsUpdate=te,V.hemisphereLights.needsUpdate=te}function Ue(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(V,te,se){const ae=We.get(V);ae.__autoAllocateDepthBuffer=V.resolveDepthBuffer===!1,ae.__autoAllocateDepthBuffer===!1&&(ae.__useRenderToTexture=!1),We.get(V.texture).__webglTexture=te,We.get(V.depthTexture).__webglTexture=ae.__autoAllocateDepthBuffer?void 0:se,ae.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(V,te){const se=We.get(V);se.__webglFramebuffer=te,se.__useDefaultFramebuffer=te===void 0};const Ge=K.createFramebuffer();this.setRenderTarget=function(V,te=0,se=0){P=V,I=te,z=se;let ae=!0,ge=null,Te=!1,Ve=!1;if(V){const it=We.get(V);if(it.__useDefaultFramebuffer!==void 0)Xe.bindFramebuffer(K.FRAMEBUFFER,null),ae=!1;else if(it.__webglFramebuffer===void 0)Z.setupRenderTarget(V);else if(it.__hasExternalTextures)Z.rebindTextures(V,We.get(V.texture).__webglTexture,We.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const bt=V.depthTexture;if(it.__boundDepthTexture!==bt){if(bt!==null&&We.has(bt)&&(V.width!==bt.image.width||V.height!==bt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Z.setupDepthRenderbuffer(V)}}const Mt=V.texture;(Mt.isData3DTexture||Mt.isDataArrayTexture||Mt.isCompressedArrayTexture)&&(Ve=!0);const vt=We.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(vt[te])?ge=vt[te][se]:ge=vt[te],Te=!0):V.samples>0&&Z.useMultisampledRTT(V)===!1?ge=We.get(V).__webglMultisampledFramebuffer:Array.isArray(vt)?ge=vt[se]:ge=vt,j.copy(V.viewport),ce.copy(V.scissor),ne=V.scissorTest}else j.copy(re).multiplyScalar(Q).floor(),ce.copy(Ae).multiplyScalar(Q).floor(),ne=Ce;if(se!==0&&(ge=Ge),Xe.bindFramebuffer(K.FRAMEBUFFER,ge)&&ae&&Xe.drawBuffers(V,ge),Xe.viewport(j),Xe.scissor(ce),Xe.setScissorTest(ne),Te){const it=We.get(V.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+te,it.__webglTexture,se)}else if(Ve){const it=We.get(V.texture),Mt=te;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,it.__webglTexture,se,Mt)}else if(V!==null&&se!==0){const it=We.get(V.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,it.__webglTexture,se)}L=-1},this.readRenderTargetPixels=function(V,te,se,ae,ge,Te,Ve){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=We.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&Ve!==void 0&&(Ye=Ye[Ve]),Ye){Xe.bindFramebuffer(K.FRAMEBUFFER,Ye);try{const it=V.texture,Mt=it.format,vt=it.type;if(!je.textureFormatReadable(Mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!je.textureTypeReadable(vt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te>=0&&te<=V.width-ae&&se>=0&&se<=V.height-ge&&K.readPixels(te,se,ae,ge,Fe.convert(Mt),Fe.convert(vt),Te)}finally{const it=P!==null?We.get(P).__webglFramebuffer:null;Xe.bindFramebuffer(K.FRAMEBUFFER,it)}}},this.readRenderTargetPixelsAsync=async function(V,te,se,ae,ge,Te,Ve){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ye=We.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&Ve!==void 0&&(Ye=Ye[Ve]),Ye)if(te>=0&&te<=V.width-ae&&se>=0&&se<=V.height-ge){Xe.bindFramebuffer(K.FRAMEBUFFER,Ye);const it=V.texture,Mt=it.format,vt=it.type;if(!je.textureFormatReadable(Mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!je.textureTypeReadable(vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const bt=K.createBuffer();K.bindBuffer(K.PIXEL_PACK_BUFFER,bt),K.bufferData(K.PIXEL_PACK_BUFFER,Te.byteLength,K.STREAM_READ),K.readPixels(te,se,ae,ge,Fe.convert(Mt),Fe.convert(vt),0);const kt=P!==null?We.get(P).__webglFramebuffer:null;Xe.bindFramebuffer(K.FRAMEBUFFER,kt);const Ht=K.fenceSync(K.SYNC_GPU_COMMANDS_COMPLETE,0);return K.flush(),await t4(K,Ht,4),K.bindBuffer(K.PIXEL_PACK_BUFFER,bt),K.getBufferSubData(K.PIXEL_PACK_BUFFER,0,Te),K.deleteBuffer(bt),K.deleteSync(Ht),Te}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(V,te=null,se=0){const ae=Math.pow(2,-se),ge=Math.floor(V.image.width*ae),Te=Math.floor(V.image.height*ae),Ve=te!==null?te.x:0,Ye=te!==null?te.y:0;Z.setTexture2D(V,0),K.copyTexSubImage2D(K.TEXTURE_2D,se,0,0,Ve,Ye,ge,Te),Xe.unbindTexture()};const ct=K.createFramebuffer(),st=K.createFramebuffer();this.copyTextureToTexture=function(V,te,se=null,ae=null,ge=0,Te=null){Te===null&&(ge!==0?(d_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Te=ge,ge=0):Te=0);let Ve,Ye,it,Mt,vt,bt,kt,Ht,Tn;const Ut=V.isCompressedTexture?V.mipmaps[Te]:V.image;if(se!==null)Ve=se.max.x-se.min.x,Ye=se.max.y-se.min.y,it=se.isBox3?se.max.z-se.min.z:1,Mt=se.min.x,vt=se.min.y,bt=se.isBox3?se.min.z:0;else{const Bn=Math.pow(2,-ge);Ve=Math.floor(Ut.width*Bn),Ye=Math.floor(Ut.height*Bn),V.isDataArrayTexture?it=Ut.depth:V.isData3DTexture?it=Math.floor(Ut.depth*Bn):it=1,Mt=0,vt=0,bt=0}ae!==null?(kt=ae.x,Ht=ae.y,Tn=ae.z):(kt=0,Ht=0,Tn=0);const Gt=Fe.convert(te.format),Lt=Fe.convert(te.type);let Yn;te.isData3DTexture?(Z.setTexture3D(te,0),Yn=K.TEXTURE_3D):te.isDataArrayTexture||te.isCompressedArrayTexture?(Z.setTexture2DArray(te,0),Yn=K.TEXTURE_2D_ARRAY):(Z.setTexture2D(te,0),Yn=K.TEXTURE_2D),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,te.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,te.unpackAlignment);const $t=K.getParameter(K.UNPACK_ROW_LENGTH),an=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Zn=K.getParameter(K.UNPACK_SKIP_PIXELS),jt=K.getParameter(K.UNPACK_SKIP_ROWS),vn=K.getParameter(K.UNPACK_SKIP_IMAGES);K.pixelStorei(K.UNPACK_ROW_LENGTH,Ut.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Ut.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Mt),K.pixelStorei(K.UNPACK_SKIP_ROWS,vt),K.pixelStorei(K.UNPACK_SKIP_IMAGES,bt);const pn=V.isDataArrayTexture||V.isData3DTexture,fi=te.isDataArrayTexture||te.isData3DTexture;if(V.isDepthTexture){const Bn=We.get(V),Qn=We.get(te),Qi=We.get(Bn.__renderTarget),ws=We.get(Qn.__renderTarget);Xe.bindFramebuffer(K.READ_FRAMEBUFFER,Qi.__webglFramebuffer),Xe.bindFramebuffer(K.DRAW_FRAMEBUFFER,ws.__webglFramebuffer);for(let fr=0;fr<it;fr++)pn&&(K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,We.get(V).__webglTexture,ge,bt+fr),K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,We.get(te).__webglTexture,Te,Tn+fr)),K.blitFramebuffer(Mt,vt,Ve,Ye,kt,Ht,Ve,Ye,K.DEPTH_BUFFER_BIT,K.NEAREST);Xe.bindFramebuffer(K.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else if(ge!==0||V.isRenderTargetTexture||We.has(V)){const Bn=We.get(V),Qn=We.get(te);Xe.bindFramebuffer(K.READ_FRAMEBUFFER,ct),Xe.bindFramebuffer(K.DRAW_FRAMEBUFFER,st);for(let Qi=0;Qi<it;Qi++)pn?K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Bn.__webglTexture,ge,bt+Qi):K.framebufferTexture2D(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Bn.__webglTexture,ge),fi?K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Qn.__webglTexture,Te,Tn+Qi):K.framebufferTexture2D(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Qn.__webglTexture,Te),ge!==0?K.blitFramebuffer(Mt,vt,Ve,Ye,kt,Ht,Ve,Ye,K.COLOR_BUFFER_BIT,K.NEAREST):fi?K.copyTexSubImage3D(Yn,Te,kt,Ht,Tn+Qi,Mt,vt,Ve,Ye):K.copyTexSubImage2D(Yn,Te,kt,Ht,Mt,vt,Ve,Ye);Xe.bindFramebuffer(K.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else fi?V.isDataTexture||V.isData3DTexture?K.texSubImage3D(Yn,Te,kt,Ht,Tn,Ve,Ye,it,Gt,Lt,Ut.data):te.isCompressedArrayTexture?K.compressedTexSubImage3D(Yn,Te,kt,Ht,Tn,Ve,Ye,it,Gt,Ut.data):K.texSubImage3D(Yn,Te,kt,Ht,Tn,Ve,Ye,it,Gt,Lt,Ut):V.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,Te,kt,Ht,Ve,Ye,Gt,Lt,Ut.data):V.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,Te,kt,Ht,Ut.width,Ut.height,Gt,Ut.data):K.texSubImage2D(K.TEXTURE_2D,Te,kt,Ht,Ve,Ye,Gt,Lt,Ut);K.pixelStorei(K.UNPACK_ROW_LENGTH,$t),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,an),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Zn),K.pixelStorei(K.UNPACK_SKIP_ROWS,jt),K.pixelStorei(K.UNPACK_SKIP_IMAGES,vn),Te===0&&te.generateMipmaps&&K.generateMipmap(Yn),Xe.unbindTexture()},this.copyTextureToTexture3D=function(V,te,se=null,ae=null,ge=0){return d_('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(V,te,se,ae,ge)},this.initRenderTarget=function(V){We.get(V).__webglFramebuffer===void 0&&Z.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?Z.setTextureCube(V,0):V.isData3DTexture?Z.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?Z.setTexture2DArray(V,0):Z.setTexture2D(V,0),Xe.unbindTexture()},this.resetState=function(){I=0,z=0,P=null,Xe.reset(),lt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Pr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Nn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Nn._getUnpackColorSpace()}}const fX=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:vE,AddEquation:gu,AddOperation:RD,AdditiveAnimationBlendMode:ME,AdditiveBlending:WM,AgXToneMapping:LD,AlphaFormat:_E,AlwaysCompare:KD,AlwaysDepth:R_,AlwaysStencilFunc:tb,AmbientLight:P3,AnimationAction:q3,AnimationClip:fp,AnimationLoader:wV,AnimationMixer:e5,AnimationObjectGroup:QV,AnimationUtils:EV,ArcCurve:u3,ArrayCamera:X3,ArrowHelper:S5,AttachedBindMode:$M,Audio:j3,AudioAnalyser:VV,AudioContext:ZE,AudioListener:HV,AudioLoader:IV,AxesHelper:M5,BackSide:Ea,BasicDepthPacking:zD,BasicShadowMap:lD,BatchedMesh:o3,Bone:zx,BooleanKeyframeTrack:mh,Box2:l5,Box3:zs,Box3Helper:x5,BoxGeometry:ph,BoxHelper:_5,BufferAttribute:zn,BufferGeometry:dn,BufferGeometryLoader:V3,ByteType:Rx,Cache:ac,Camera:Px,CameraHelper:y5,CanvasTexture:q4,CapsuleGeometry:jx,CatmullRomCurve3:f3,CineonToneMapping:DD,CircleGeometry:Yx,ClampToEdgeWrapping:Wi,Clock:QE,Color:Tt,ColorKeyframeTrack:jE,ColorManagement:Nn,CompressedArrayTexture:j4,CompressedCubeTexture:Y4,CompressedTexture:kx,CompressedTextureLoader:BV,ConeGeometry:yv,ConstantAlphaFactor:ED,ConstantColorFactor:MD,Controls:E5,CubeCamera:i3,CubeReflectionMapping:_l,CubeRefractionMapping:Su,CubeTexture:dv,CubeTextureLoader:N3,CubeUVReflectionMapping:_p,CubicBezierCurve:IE,CubicBezierCurve3:h3,CubicInterpolant:B3,CullFaceBack:KM,CullFaceFront:oD,CullFaceFrontBack:aG,CullFaceNone:rD,Curve:Co,CurvePath:p3,CustomBlending:cD,CustomToneMapping:UD,CylinderGeometry:vv,Cylindrical:o5,Data3DTexture:Ix,DataArrayTexture:hv,DataTexture:Mo,DataTextureLoader:YE,DataUtils:Jf,DecrementStencilOp:mG,DecrementWrapStencilOp:vG,DefaultLoadingManager:L3,DepthArrayTexture:J4,DepthFormat:ip,DepthStencilFormat:sp,DepthTexture:Xx,DetachedBindMode:OD,DirectionalLight:WE,DirectionalLightHelper:v5,DiscreteInterpolant:D3,DodecahedronGeometry:qx,DoubleSide:Nr,DstAlphaFactor:yD,DstColorFactor:xD,DynamicCopyUsage:UG,DynamicDrawUsage:TG,DynamicReadUsage:wG,EdgesGeometry:c3,EllipseCurve:Jx,EqualCompare:jD,EqualDepth:B_,EqualStencilFunc:AG,EquirectangularReflectionMapping:$d,EquirectangularRefractionMapping:Gg,Euler:ur,EventDispatcher:Ml,ExtrudeGeometry:Kx,FileLoader:Gs,Float16BufferAttribute:b4,Float32BufferAttribute:It,FloatType:Ii,Fog:Hx,FogExp2:Fx,FramebufferTexture:X4,FrontSide:yl,Frustum:xp,FrustumArray:Gx,GLBufferAttribute:r5,GLSL1:NG,GLSL3:nb,GreaterCompare:YD,GreaterDepth:U_,GreaterEqualCompare:JD,GreaterEqualDepth:D_,GreaterEqualStencilFunc:EG,GreaterStencilFunc:MG,GridHelper:m5,Group:sc,HalfFloatType:Es,HemisphereLight:I3,HemisphereLightHelper:p5,IcosahedronGeometry:_v,ImageBitmapLoader:k3,ImageLoader:Wg,ImageUtils:$D,IncrementStencilOp:pG,IncrementWrapStencilOp:gG,InstancedBufferAttribute:ah,InstancedBufferGeometry:G3,InstancedInterleavedBuffer:a5,InstancedMesh:UE,Int16BufferAttribute:S4,Int32BufferAttribute:M4,Int8BufferAttribute:_4,IntType:cv,InterleavedBuffer:mv,InterleavedBufferAttribute:bu,Interpolant:Ap,InterpolateDiscrete:ap,InterpolateLinear:rp,InterpolateSmooth:h_,InterpolationSamplingMode:PG,InterpolationSamplingType:IG,InvertStencilOp:yG,KeepStencilOp:zf,KeyframeTrack:Gr,LOD:r3,LatheGeometry:Wx,Layers:lp,LessCompare:XD,LessDepth:w_,LessEqualCompare:EE,LessEqualDepth:sh,LessEqualStencilFunc:SG,LessStencilFunc:xG,Light:wu,LightProbe:z3,Line:fc,Line3:c5,LineBasicMaterial:sa,LineCurve:PE,LineCurve3:d3,LineDashedMaterial:C3,LineLoop:LE,LineSegments:To,LinearFilter:Jn,LinearInterpolant:XE,LinearMipMapLinearFilter:eb,LinearMipMapNearestFilter:lG,LinearMipmapLinearFilter:Ir,LinearMipmapNearestFilter:Yd,LinearSRGBColorSpace:Eo,LinearToneMapping:wD,LinearTransfer:kg,Loader:Vs,LoaderUtils:_u,LoadingManager:iA,LoopOnce:ID,LoopPingPong:FD,LoopRepeat:PD,MOUSE:Ff,Material:ps,MaterialLoader:sA,MathUtils:WD,Matrix2:i1,Matrix3:gn,Matrix4:Jt,MaxEquation:dD,Mesh:Ei,MeshBasicMaterial:Xa,MeshDepthMaterial:GE,MeshDistanceMaterial:VE,MeshLambertMaterial:E3,MeshMatcapMaterial:T3,MeshNormalMaterial:b3,MeshPhongMaterial:S3,MeshPhysicalMaterial:zr,MeshStandardMaterial:Sv,MeshToonMaterial:M3,MinEquation:hD,MirroredRepeatWrapping:ep,MixOperation:CD,MultiplyBlending:QM,MultiplyOperation:lv,NearestFilter:Ts,NearestMipMapLinearFilter:oG,NearestMipMapNearestFilter:rG,NearestMipmapLinearFilter:jf,NearestMipmapNearestFilter:Cx,NeutralToneMapping:ND,NeverCompare:kD,NeverDepth:C_,NeverStencilFunc:_G,NoBlending:pl,NoColorSpace:nc,NoToneMapping:ml,NormalAnimationBlendMode:Nx,NormalBlending:eh,NotEqualCompare:qD,NotEqualDepth:L_,NotEqualStencilFunc:bG,NumberKeyframeTrack:oh,Object3D:On,ObjectLoader:NV,ObjectSpaceNormalMap:VD,OctahedronGeometry:xv,OneFactor:mD,OneMinusConstantAlphaFactor:TD,OneMinusConstantColorFactor:bD,OneMinusDstAlphaFactor:_D,OneMinusDstColorFactor:AD,OneMinusSrcAlphaFactor:T_,OneMinusSrcColorFactor:vD,OrthographicCamera:gl,PCFShadowMap:Tx,PCFSoftShadowMap:_g,PMREMGenerator:ub,Path:ux,PerspectiveCamera:ki,Plane:tc,PlaneGeometry:Ru,PlaneHelper:A5,PointLight:KE,PointLightHelper:h5,Points:NE,PointsMaterial:Vx,PolarGridHelper:g5,PolyhedronGeometry:Cu,PositionalAudio:GV,PropertyBinding:Fn,PropertyMixer:Y3,QuadraticBezierCurve:FE,QuadraticBezierCurve3:HE,Quaternion:Cs,QuaternionKeyframeTrack:lh,QuaternionLinearInterpolant:U3,RED_GREEN_RGTC2_Format:sx,RED_RGTC1_Format:SE,REVISION:ov,RGBADepthPacking:GD,RGBAFormat:Zi,RGBAIntegerFormat:Lx,RGBA_ASTC_10x10_Format:Q_,RGBA_ASTC_10x5_Format:K_,RGBA_ASTC_10x6_Format:W_,RGBA_ASTC_10x8_Format:Z_,RGBA_ASTC_12x10_Format:$_,RGBA_ASTC_12x12_Format:ex,RGBA_ASTC_4x4_Format:G_,RGBA_ASTC_5x4_Format:V_,RGBA_ASTC_5x5_Format:k_,RGBA_ASTC_6x5_Format:X_,RGBA_ASTC_6x6_Format:j_,RGBA_ASTC_8x5_Format:Y_,RGBA_ASTC_8x6_Format:q_,RGBA_ASTC_8x8_Format:J_,RGBA_BPTC_Format:bg,RGBA_ETC2_EAC_Format:z_,RGBA_PVRTC_2BPPV1_Format:P_,RGBA_PVRTC_4BPPV1_Format:I_,RGBA_S3TC_DXT1_Format:Ag,RGBA_S3TC_DXT3_Format:Sg,RGBA_S3TC_DXT5_Format:Mg,RGBDepthPacking:uG,RGBFormat:xE,RGBIntegerFormat:cG,RGB_BPTC_SIGNED_Format:tx,RGB_BPTC_UNSIGNED_Format:nx,RGB_ETC1_Format:F_,RGB_ETC2_Format:H_,RGB_PVRTC_2BPPV1_Format:O_,RGB_PVRTC_4BPPV1_Format:N_,RGB_S3TC_DXT1_Format:xg,RGDepthPacking:fG,RGFormat:AE,RGIntegerFormat:Ux,RawShaderMaterial:A3,Ray:dh,Raycaster:n1,RectAreaLight:F3,RedFormat:uv,RedIntegerFormat:fv,ReinhardToneMapping:BD,RenderTarget:Ox,RenderTarget3D:t5,RenderTargetArray:n5,RepeatWrapping:Mu,ReplaceStencilOp:dG,ReverseSubtractEquation:fD,RingGeometry:Zx,SIGNED_RED_GREEN_RGTC2_Format:ax,SIGNED_RED_RGTC1_Format:ix,SRGBColorSpace:Hs,SRGBTransfer:ii,Scene:pv,ShaderChunk:An,ShaderLib:_o,ShaderMaterial:Ya,ShadowMaterial:x3,Shape:nh,ShapeGeometry:Qx,ShapePath:b5,ShapeUtils:Ao,ShortType:wx,Skeleton:gv,SkeletonHelper:f5,SkinnedMesh:DE,Source:vu,Sphere:Rs,SphereGeometry:Av,Spherical:lb,SphericalHarmonics3:H3,SplineCurve:zE,SpotLight:JE,SpotLightHelper:u5,Sprite:a3,SpriteMaterial:BE,SrcAlphaFactor:E_,SrcAlphaSaturateFactor:SD,SrcColorFactor:gD,StaticCopyUsage:DG,StaticDrawUsage:Xg,StaticReadUsage:RG,StereoCamera:PV,StreamCopyUsage:LG,StreamDrawUsage:CG,StreamReadUsage:BG,StringKeyframeTrack:gh,SubtractEquation:uD,SubtractiveBlending:ZM,TOUCH:Hf,TangentSpaceNormalMap:Tu,TetrahedronGeometry:$x,Texture:Wn,TextureLoader:O3,TextureUtils:B5,TimestampQuery:OG,TorusGeometry:eA,TorusKnotGeometry:tA,Triangle:Va,TriangleFanDrawMode:rx,TriangleStripDrawMode:bE,TrianglesDrawMode:HD,TubeGeometry:nA,UVMapping:Au,Uint16BufferAttribute:CE,Uint32BufferAttribute:RE,Uint8BufferAttribute:x4,Uint8ClampedBufferAttribute:A4,Uniform:t1,UniformsGroup:s5,UniformsLib:Rt,UniformsUtils:n3,UnsignedByteType:Ta,UnsignedInt248Type:np,UnsignedInt5999Type:yE,UnsignedIntType:xl,UnsignedShort4444Type:Bx,UnsignedShort5551Type:Dx,UnsignedShortType:tp,VSMShadowMap:yo,Vector2:Ke,Vector3:$,Vector4:Hn,VectorKeyframeTrack:ch,VideoFrameTexture:k4,VideoTexture:l3,WebGL3DRenderTarget:l4,WebGLArrayRenderTarget:o4,WebGLCoordinateSystem:Pr,WebGLCubeRenderTarget:wE,WebGLRenderTarget:Hr,WebGLRenderer:a1,WebGLUtils:eU,WebGPUCoordinateSystem:jg,WebXRController:p_,WireframeGeometry:_3,WrapAroundEnding:Vg,ZeroCurvatureEnding:Yf,ZeroFactor:pD,ZeroSlopeEnding:qf,ZeroStencilOp:hG,createCanvasElement:QD},Symbol.toStringTag,{value:"Module"}));var ZS={exports:{}},$l={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function hX(){return Mw||(Mw=1,$l.ConcurrentRoot=1,$l.ContinuousEventPriority=8,$l.DefaultEventPriority=32,$l.DiscreteEventPriority=2,$l.IdleEventPriority=268435456,$l.LegacyRoot=0,$l.NoEventPriority=0),$l}var bw;function dX(){return bw||(bw=1,ZS.exports=hX()),ZS.exports}var g_=dX(),QS={exports:{}},$S={},eM={exports:{}},tM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew;function pX(){if(Ew)return tM;Ew=1;var i=dp();function e(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,o=i.useDebugValue;function c(v,y){var x=y(),S=n({inst:{value:x,getSnapshot:y}}),T=S[0].inst,E=S[1];return r(function(){T.value=x,T.getSnapshot=y,f(T)&&E({inst:T})},[v,x,y]),s(function(){return f(T)&&E({inst:T}),v(function(){f(T)&&E({inst:T})})},[v]),o(x),x}function f(v){var y=v.getSnapshot;v=v.value;try{var x=y();return!t(v,x)}catch{return!0}}function p(v,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return tM.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:m,tM}var Tw;function mX(){return Tw||(Tw=1,eM.exports=pX()),eM.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function gX(){if(Cw)return $S;Cw=1;var i=dp(),e=mX();function t(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=i.useRef,o=i.useEffect,c=i.useMemo,f=i.useDebugValue;return $S.useSyncExternalStoreWithSelector=function(p,m,v,y,x){var S=r(null);if(S.current===null){var T={hasValue:!1,value:null};S.current=T}else T=S.current;S=c(function(){function A(I){if(!w){if(w=!0,B=I,I=y(I),x!==void 0&&T.hasValue){var z=T.value;if(x(z,I))return D=z}return D=I}if(z=D,n(B,I))return z;var P=y(I);return x!==void 0&&x(z,P)?(B=I,z):(B=I,D=P)}var w=!1,B,D,O=v===void 0?null:v;return[function(){return A(m())},O===null?void 0:function(){return A(O())}]},[m,v,y,x]);var E=s(p,S[0],S[1]);return o(function(){T.hasValue=!0,T.value=E},[E]),f(E),E},$S}var Rw;function vX(){return Rw||(Rw=1,QS.exports=gX()),QS.exports}var yX=vX();const _X=Ab(yX),ww=i=>{let e;const t=new Set,n=(p,m)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const y=e;e=m??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(x=>x(e,y))}},s=()=>e,c={setState:n,getState:s,getInitialState:()=>f,subscribe:p=>(t.add(p),()=>t.delete(p))},f=e=i(n,s,c);return c},xX=i=>i?ww(i):ww,{useSyncExternalStoreWithSelector:AX}=_X,SX=i=>i;function MX(i,e=SX,t){const n=AX(i.subscribe,i.getState,i.getInitialState,e,t);return CL.useDebugValue(n),n}const Bw=(i,e)=>{const t=xX(i),n=(s,r=e)=>MX(t,s,r);return Object.assign(n,t),n},tU=(i,e)=>i?Bw(i,e):Bw;var nM={exports:{}},iM={exports:{}},sM={exports:{}},aM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function bX(){return Dw||(Dw=1,function(i){function e(H,W){var Q=H.length;H.push(W);e:for(;0<Q;){var ve=Q-1>>>1,X=H[ve];if(0<s(X,W))H[ve]=W,H[Q]=X,Q=ve;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var W=H[0],Q=H.pop();if(Q!==W){H[0]=Q;e:for(var ve=0,X=H.length,re=X>>>1;ve<re;){var Ae=2*(ve+1)-1,Ce=H[Ae],oe=Ae+1,Ne=H[oe];if(0>s(Ce,Q))oe<X&&0>s(Ne,Ce)?(H[ve]=Ne,H[oe]=Q,ve=oe):(H[ve]=Ce,H[Ae]=Q,ve=Ae);else if(oe<X&&0>s(Ne,Q))H[ve]=Ne,H[oe]=Q,ve=oe;else break e}}return W}function s(H,W){var Q=H.sortIndex-W.sortIndex;return Q!==0?Q:H.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],p=[],m=1,v=null,y=3,x=!1,S=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function B(H){for(var W=t(p);W!==null;){if(W.callback===null)n(p);else if(W.startTime<=H)n(p),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(p)}}function D(H){if(T=!1,B(H),!S)if(t(f)!==null)S=!0,fe();else{var W=t(p);W!==null&&_e(D,W.startTime-H)}}var O=!1,I=-1,z=5,P=-1;function L(){return!(i.unstable_now()-P<z)}function N(){if(O){var H=i.unstable_now();P=H;var W=!0;try{e:{S=!1,T&&(T=!1,A(I),I=-1),x=!0;var Q=y;try{t:{for(B(H),v=t(f);v!==null&&!(v.expirationTime>H&&L());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,y=v.priorityLevel;var X=ve(v.expirationTime<=H);if(H=i.unstable_now(),typeof X=="function"){v.callback=X,B(H),W=!0;break t}v===t(f)&&n(f),B(H)}else n(f);v=t(f)}if(v!==null)W=!0;else{var re=t(p);re!==null&&_e(D,re.startTime-H),W=!1}}break e}finally{v=null,y=Q,x=!1}W=void 0}}finally{W?j():O=!1}}}var j;if(typeof w=="function")j=function(){w(N)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ne=ce.port2;ce.port1.onmessage=N,j=function(){ne.postMessage(null)}}else j=function(){E(N,0)};function fe(){O||(O=!0,j())}function _e(H,W){I=E(function(){H(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){S||x||(S=!0,fe())},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(H){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var Q=y;y=W;try{return H()}finally{y=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=y;y=H;try{return W()}finally{y=Q}},i.unstable_scheduleCallback=function(H,W,Q){var ve=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ve+Q:ve):Q=ve,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Q+X,H={id:m++,callback:W,priorityLevel:H,startTime:Q,expirationTime:X,sortIndex:-1},Q>ve?(H.sortIndex=Q,e(p,H),t(f)===null&&H===t(p)&&(T?(A(I),I=-1):T=!0,_e(D,Q-ve))):(H.sortIndex=X,e(f,H),S||x||(S=!0,fe())),H},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(H){var W=y;return function(){var Q=y;y=W;try{return H.apply(this,arguments)}finally{y=Q}}}}(aM)),aM}var Uw;function EX(){return Uw||(Uw=1,sM.exports=bX()),sM.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function TX(){return Lw||(Lw=1,function(i){i.exports=function(e){function t(u,h,_,b){return new Qp(u,h,_,b)}function n(){}function s(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return u===null||typeof u!="object"?null:(u=eo&&u[eo]||u["@@iterator"],typeof u=="function"?u:null)}function o(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===nm?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case ko:return"Fragment";case Ba:return"Portal";case zh:return"Profiler";case sf:return"StrictMode";case Gh:return"Suspense";case Lc:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Wa:return(u.displayName||"Context")+".Provider";case em:return(u._context.displayName||"Context")+".Consumer";case rf:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Vh:return h=u.displayName||null,h!==null?h:o(u.type)||"Memo";case Da:h=u._payload,u=u._init;try{return o(u(h))}catch{}}return null}function c(u){if(gr===void 0)try{throw Error()}catch(_){var h=_.stack.trim().match(/\n( *(at )?)/);gr=h&&h[1]||"",to=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gr+u+to}function f(u,h){if(!u||Rl)return"";Rl=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(h){var Ct=function(){throw Error()};if(Object.defineProperty(Ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ct,[])}catch(cn){var Bt=cn}Reflect.construct(u,[],Ct)}else{try{Ct.call()}catch(cn){Bt=cn}u.call(Ct.prototype)}}else{try{throw Error()}catch(cn){Bt=cn}(Ct=u())&&typeof Ct.catch=="function"&&Ct.catch(function(){})}}catch(cn){if(cn&&Bt&&typeof cn.stack=="string")return[cn.stack,Bt.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=b.DetermineComponentFrameRoot(),q=U[0],le=U[1];if(q&&le){var Me=q.split(`
`),qe=le.split(`
`);for(R=b=0;b<Me.length&&!Me[b].includes("DetermineComponentFrameRoot");)b++;for(;R<qe.length&&!qe[R].includes("DetermineComponentFrameRoot");)R++;if(b===Me.length||R===qe.length)for(b=Me.length-1,R=qe.length-1;1<=b&&0<=R&&Me[b]!==qe[R];)R--;for(;1<=b&&0<=R;b--,R--)if(Me[b]!==qe[R]){if(b!==1||R!==1)do if(b--,R--,0>R||Me[b]!==qe[R]){var ht=`
`+Me[b].replace(" at new "," at ");return u.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",u.displayName)),ht}while(1<=b&&0<=R);break}}}finally{Rl=!1,Error.prepareStackTrace=_}return(_=u?u.displayName||u.name:"")?c(_):""}function p(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=f(u.type,!1),u;case 11:return u=f(u.type.render,!1),u;case 1:return u=f(u.type,!0),u;default:return""}}function m(u){try{var h="";do h+=p(u),u=u.return;while(u);return h}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function v(u){var h=u,_=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(_=h.return),u=h.return;while(u)}return h.tag===3?_:null}function y(u){if(v(u)!==u)throw Error(s(188))}function x(u){var h=u.alternate;if(!h){if(h=v(u),h===null)throw Error(s(188));return h!==u?null:u}for(var _=u,b=h;;){var R=_.return;if(R===null)break;var U=R.alternate;if(U===null){if(b=R.return,b!==null){_=b;continue}break}if(R.child===U.child){for(U=R.child;U;){if(U===_)return y(R),u;if(U===b)return y(R),h;U=U.sibling}throw Error(s(188))}if(_.return!==b.return)_=R,b=U;else{for(var q=!1,le=R.child;le;){if(le===_){q=!0,_=R,b=U;break}if(le===b){q=!0,b=R,_=U;break}le=le.sibling}if(!q){for(le=U.child;le;){if(le===_){q=!0,_=U,b=R;break}if(le===b){q=!0,b=U,_=R;break}le=le.sibling}if(!q)throw Error(s(189))}}if(_.alternate!==b)throw Error(s(190))}if(_.tag!==3)throw Error(s(188));return _.stateNode.current===_?u:h}function S(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=S(u),h!==null)return h;u=u.sibling}return null}function T(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(h=T(u),h!==null))return h;u=u.sibling}return null}function E(u){return{current:u}}function A(u){0>ao||(u.current=Bi[ao],Bi[ao]=null,ao--)}function w(u,h){ao++,Bi[ao]=u.current,u.current=h}function B(u){return u>>>=0,u===0?32:31-(B0(u)/D0|0)|0}function D(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function O(u,h){var _=u.pendingLanes;if(_===0)return 0;var b=0,R=u.suspendedLanes,U=u.pingedLanes,q=u.warmLanes;u=u.finishedLanes!==0;var le=_&134217727;return le!==0?(_=le&~R,_!==0?b=D(_):(U&=le,U!==0?b=D(U):u||(q=le&~q,q!==0&&(b=D(q))))):(le=_&~R,le!==0?b=D(le):U!==0?b=D(U):u||(q=_&~q,q!==0&&(b=D(q)))),b===0?0:h!==0&&h!==b&&(h&R)===0&&(R=b&-b,q=h&-h,R>=q||R===32&&(q&4194176)!==0)?h:b}function I(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function z(u,h){switch(u){case 1:case 2:case 4:case 8:return h+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P(){var u=yr;return yr<<=1,(yr&4194176)===0&&(yr=128),u}function L(){var u=Dl;return Dl<<=1,(Dl&62914560)===0&&(Dl=4194304),u}function N(u){for(var h=[],_=0;31>_;_++)h.push(u);return h}function j(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ce(u,h,_,b,R,U){var q=u.pendingLanes;u.pendingLanes=_,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=_,u.entangledLanes&=_,u.errorRecoveryDisabledLanes&=_,u.shellSuspendCounter=0;var le=u.entanglements,Me=u.expirationTimes,qe=u.hiddenUpdates;for(_=q&~_;0<_;){var ht=31-Os(_),Ct=1<<ht;le[ht]=0,Me[ht]=-1;var Bt=qe[ht];if(Bt!==null)for(qe[ht]=null,ht=0;ht<Bt.length;ht++){var cn=Bt[ht];cn!==null&&(cn.lane&=-536870913)}_&=~Ct}b!==0&&ne(u,b,0),U!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=U&~(q&~h))}function ne(u,h,_){u.pendingLanes|=h,u.suspendedLanes&=~h;var b=31-Os(h);u.entangledLanes|=h,u.entanglements[b]=u.entanglements[b]|1073741824|_&4194218}function fe(u,h){var _=u.entangledLanes|=h;for(u=u.entanglements;_;){var b=31-Os(_),R=1<<b;R&h|u[b]&h&&(u[b]|=h),_&=~R}}function _e(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function H(u){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(Di,u,void 0,(u.current.flags&128)===128)}catch{}}function W(u){if(typeof N0=="function"&&ts(u),Ws&&typeof Ws.setStrictMode=="function")try{Ws.setStrictMode(Di,u)}catch{}}function Q(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}function ve(u,h){if(typeof u=="object"&&u!==null){var _=Am.get(u);return _!==void 0?_:(h={value:u,source:h,stack:m(h)},Am.set(u,h),h)}return{value:u,source:h,stack:m(h)}}function X(u,h){Ul[Ll++]=Vc,Ul[Ll++]=Nl,Nl=u,Vc=h}function re(u,h,_){ca[ua++]=$a,ca[ua++]=er,ca[ua++]=Wo,Wo=u;var b=$a;u=er;var R=32-Os(b)-1;b&=~(1<<R),_+=1;var U=32-Os(h)+R;if(30<U){var q=R-R%5;U=(b&(1<<q)-1).toString(32),b>>=q,R-=q,$a=1<<32-Os(h)+R|_<<R|b,er=U+u}else $a=1<<U|_<<R|b,er=u}function Ae(u){u.return!==null&&(X(u,1),re(u,1,0))}function Ce(u){for(;u===Nl;)Nl=Ul[--Ll],Ul[Ll]=null,Vc=Ul[--Ll],Ul[Ll]=null;for(;u===Wo;)Wo=ca[--ua],ca[ua]=null,er=ca[--ua],ca[ua]=null,$a=ca[--ua],ca[ua]=null}function oe(u,h){w(_r,h),w(kc,u),w(ji,null),u=Kv(h),A(ji),w(ji,u)}function Ne(){A(ji),A(kc),A(_r)}function Oe(u){u.memoizedState!==null&&w(Ol,u);var h=ji.current,_=Pc(h,u.type);h!==_&&(w(kc,u),w(ji,_))}function $e(u){kc.current===u&&(A(ji),A(kc)),Ol.current===u&&(A(Ol),Ls?Za._currentValue=jo:Za._currentValue2=jo)}function tt(u){var h=Error(s(418,""));throw dt(ve(h,u)),mf}function Dt(u,h){if(!fs)throw Error(s(175));x0(u.stateNode,u.type,u.memoizedProps,h,u)||tt(u)}function wt(u){for(hs=u.return;hs;)switch(hs.tag){case 3:case 27:ns=!0;return;case 5:case 13:ns=!1;return;default:hs=hs.return}}function Pt(u){if(!fs||u!==hs)return!1;if(!Dn)return wt(u),Dn=!0,!1;var h=!1;if($n?u.tag!==3&&u.tag!==27&&(u.tag!==5||Zh(u.type)&&!fn(u.type,u.memoizedProps))&&(h=!0):u.tag!==3&&(u.tag!==5||Zh(u.type)&&!fn(u.type,u.memoizedProps))&&(h=!0),h&&ds&&tt(u),wt(u),u.tag===13){if(!fs)throw Error(s(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));ds=S0(u)}else ds=hs?vm(u.stateNode):null;return!0}function ot(){fs&&(ds=hs=null,Dn=!1)}function dt(u){Na===null?Na=[u]:Na.push(u)}function K(){for(var u=Il,h=tr=Il=0;h<u;){var _=Oa[h];Oa[h++]=null;var b=Oa[h];Oa[h++]=null;var R=Oa[h];Oa[h++]=null;var U=Oa[h];if(Oa[h++]=null,b!==null&&R!==null){var q=b.pending;q===null?R.next=R:(R.next=q.next,q.next=R),b.pending=R}U!==0&&Xe(_,R,U)}}function rt(u,h,_,b){Oa[Il++]=u,Oa[Il++]=h,Oa[Il++]=_,Oa[Il++]=b,tr|=b,u.lanes|=b,u=u.alternate,u!==null&&(u.lanes|=b)}function Ze(u,h,_,b){return rt(u,h,_,b),_t(u)}function je(u,h){return rt(u,null,null,h),_t(u)}function Xe(u,h,_){u.lanes|=_;var b=u.alternate;b!==null&&(b.lanes|=_);for(var R=!1,U=u.return;U!==null;)U.childLanes|=_,b=U.alternate,b!==null&&(b.childLanes|=_),U.tag===22&&(u=U.stateNode,u===null||u._visibility&1||(R=!0)),u=U,U=U.return;R&&h!==null&&u.tag===3&&(U=u.stateNode,R=31-Os(_),U=U.hiddenUpdates,u=U[R],u===null?U[R]=[h]:u.push(h),h.lane=_|536870912)}function _t(u){if(50<Qc)throw Qc=0,hd=null,Error(s(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}function We(u){u!==ro&&u.next===null&&(ro===null?gf=ro=u:ro=ro.next=u),ri=!0,Pl||(Pl=!0,He(k))}function Z(u,h){if(!Sm&&ri){Sm=!0;do for(var _=!1,b=gf;b!==null;){if(u!==0){var R=b.pendingLanes;if(R===0)var U=0;else{var q=b.suspendedLanes,le=b.pingedLanes;U=(1<<31-Os(42|u)+1)-1,U&=R&~(q&~le),U=U&201326677?U&201326677|1:U?U|2:0}U!==0&&(_=!0,Qe(b,U))}else U=bn,U=O(b,b===Xn?U:0),(U&3)===0||I(b,U)||(_=!0,Qe(b,U));b=b.next}while(_);Sm=!1}}function k(){ri=Pl=!1;var u=0;Xc!==0&&($v()&&(u=Xc),Xc=0);for(var h=La(),_=null,b=gf;b!==null;){var R=b.next,U=xe(b,h);U===0?(b.next=null,_===null?gf=R:_.next=R,R===null&&(ro=_)):(_=b,(u!==0||(U&3)!==0)&&(ri=!0)),b=R}Z(u)}function xe(u,h){for(var _=u.suspendedLanes,b=u.pingedLanes,R=u.expirationTimes,U=u.pendingLanes&-62914561;0<U;){var q=31-Os(U),le=1<<q,Me=R[q];Me===-1?((le&_)===0||(le&b)!==0)&&(R[q]=z(le,h)):Me<=h&&(u.expiredLanes|=le),U&=~le}if(h=Xn,_=bn,_=O(u,u===h?_:0),b=u.callbackNode,_===0||u===h&&Kn===2||u.cancelPendingCommit!==null)return b!==null&&b!==null&&td(b),u.callbackNode=null,u.callbackPriority=0;if((_&3)===0||I(u,_)){if(h=_&-_,h===u.callbackPriority)return h;switch(b!==null&&td(b),_e(_)){case 2:case 8:_=L0;break;case 32:_=sd;break;case 268435456:_=_A;break;default:_=sd}return b=ze.bind(null,u),_=pf(_,b),u.callbackPriority=h,u.callbackNode=_,h}return b!==null&&b!==null&&td(b),u.callbackPriority=2,u.callbackNode=null,2}function ze(u,h){var _=u.callbackNode;if(Ka()&&u.callbackNode!==_)return null;var b=bn;return b=O(u,u===Xn?b:0),b===0?null:(Fo(u,b,h),xe(u,La()),u.callbackNode!=null&&u.callbackNode===_?ze.bind(null,u):null)}function Qe(u,h){if(Ka())return null;Fo(u,h,!0)}function He(u){om?so(function(){(Ln&6)!==0?pf(id,u):u()}):pf(id,u)}function pt(){return Xc===0&&(Xc=P()),Xc}function ut(u,h){if(jc===null){var _=jc=[];Fl=0,fa=pt(),Hl={status:"pending",value:void 0,then:function(b){_.push(b)}}}return Fl++,h.then(xt,xt),h}function xt(){if(--Fl===0&&jc!==null){Hl!==null&&(Hl.status="fulfilled");var u=jc;jc=null,fa=0,Hl=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function Nt(u,h){var _=[],b={status:"pending",value:null,reason:null,then:function(R){_.push(R)}};return u.then(function(){b.status="fulfilled",b.value=h;for(var R=0;R<_.length;R++)(0,_[R])(h)},function(R){for(b.status="rejected",b.reason=R,R=0;R<_.length;R++)(0,_[R])(void 0)}),b}function at(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function At(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Et(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function St(u,h,_){var b=u.updateQueue;if(b===null)return null;if(b=b.shared,(Ln&2)!==0){var R=b.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),b.pending=h,h=_t(u),Xe(u,null,_),h}return rt(u,b,h,_),_t(u)}function mt(u,h,_){if(h=h.updateQueue,h!==null&&(h=h.shared,(_&4194176)!==0)){var b=h.lanes;b&=u.pendingLanes,_|=b,h.lanes=_,fe(u,_)}}function he(u,h){var _=u.updateQueue,b=u.alternate;if(b!==null&&(b=b.updateQueue,_===b)){var R=null,U=null;if(_=_.firstBaseUpdate,_!==null){do{var q={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};U===null?R=U=q:U=U.next=q,_=_.next}while(_!==null);U===null?R=U=h:U=U.next=h}else R=U=h;_={baseState:b.baseState,firstBaseUpdate:R,lastBaseUpdate:U,shared:b.shared,callbacks:b.callbacks},u.updateQueue=_;return}u=_.lastBaseUpdate,u===null?_.firstBaseUpdate=h:u.next=h,_.lastBaseUpdate=h}function Fe(){if(zl){var u=Hl;if(u!==null)throw u}}function lt(u,h,_,b){zl=!1;var R=u.updateQueue;oo=!1;var U=R.firstBaseUpdate,q=R.lastBaseUpdate,le=R.shared.pending;if(le!==null){R.shared.pending=null;var Me=le,qe=Me.next;Me.next=null,q===null?U=qe:q.next=qe,q=Me;var ht=u.alternate;ht!==null&&(ht=ht.updateQueue,le=ht.lastBaseUpdate,le!==q&&(le===null?ht.firstBaseUpdate=qe:le.next=qe,ht.lastBaseUpdate=Me))}if(U!==null){var Ct=R.baseState;q=0,ht=qe=Me=null,le=U;do{var Bt=le.lane&-536870913,cn=Bt!==le.lane;if(cn?(bn&Bt)===Bt:(b&Bt)===Bt){Bt!==0&&Bt===fa&&(zl=!0),ht!==null&&(ht=ht.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var _a=u,al=le;Bt=h;var rl=_;switch(al.tag){case 1:if(_a=al.payload,typeof _a=="function"){Ct=_a.call(rl,Ct,Bt);break e}Ct=_a;break e;case 3:_a.flags=_a.flags&-65537|128;case 0:if(_a=al.payload,Bt=typeof _a=="function"?_a.call(rl,Ct,Bt):_a,Bt==null)break e;Ct=Hh({},Ct,Bt);break e;case 2:oo=!0}}Bt=le.callback,Bt!==null&&(u.flags|=64,cn&&(u.flags|=8192),cn=R.callbacks,cn===null?R.callbacks=[Bt]:cn.push(Bt))}else cn={lane:Bt,tag:le.tag,payload:le.payload,callback:le.callback,next:null},ht===null?(qe=ht=cn,Me=Ct):ht=ht.next=cn,q|=Bt;if(le=le.next,le===null){if(le=R.shared.pending,le===null)break;cn=le,le=cn.next,cn.next=null,R.lastBaseUpdate=cn,R.shared.pending=null}}while(!0);ht===null&&(Me=Ct),R.baseState=Me,R.firstBaseUpdate=qe,R.lastBaseUpdate=ht,U===null&&(R.shared.lanes=0),va|=q,u.lanes=q,u.memoizedState=Ct}}function ue(u,h){if(typeof u!="function")throw Error(s(191,u));u.call(h)}function be(u,h){var _=u.callbacks;if(_!==null)for(u.callbacks=null,u=0;u<_.length;u++)ue(_[u],h)}function De(u,h){if(Zs(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var _=Object.keys(u),b=Object.keys(h);if(_.length!==b.length)return!1;for(b=0;b<_.length;b++){var R=_[b];if(!xr.call(h,R)||!Zs(u[R],h[R]))return!1}return!0}function ke(u){return u=u.status,u==="fulfilled"||u==="rejected"}function yt(){}function gt(u,h,_){switch(_=u[_],_===void 0?u.push(h):_!==h&&(h.then(yt,yt),h=_),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===Yc?Error(s(483)):u;default:if(typeof h.status=="string")h.then(yt,yt);else{if(u=Xn,u!==null&&100<u.shellSuspendCounter)throw Error(s(482));u=h,u.status="pending",u.then(function(b){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=b}},function(b){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=b}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===Yc?Error(s(483)):u}throw Zo=h,Yc}}function Ft(){if(Zo===null)throw Error(s(459));var u=Zo;return Zo=null,u}function rn(u){var h=$o;return $o+=1,Qo===null&&(Qo=[]),gt(Qo,u,h)}function wn(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function on(u,h){throw h.$$typeof===hA?Error(s(525)):(u=Object.prototype.toString.call(h),Error(s(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function yi(u){var h=u._init;return h(u._payload)}function ai(u){function h(Be,me){if(u){var Pe=Be.deletions;Pe===null?(Be.deletions=[me],Be.flags|=16):Pe.push(me)}}function _(Be,me){if(!u)return null;for(;me!==null;)h(Be,me),me=me.sibling;return null}function b(Be){for(var me=new Map;Be!==null;)Be.key!==null?me.set(Be.key,Be):me.set(Be.index,Be),Be=Be.sibling;return me}function R(Be,me){return Be=wa(Be,me),Be.index=0,Be.sibling=null,Be}function U(Be,me,Pe){return Be.index=Pe,u?(Pe=Be.alternate,Pe!==null?(Pe=Pe.index,Pe<me?(Be.flags|=33554434,me):Pe):(Be.flags|=33554434,me)):(Be.flags|=1048576,me)}function q(Be){return u&&Be.alternate===null&&(Be.flags|=33554434),Be}function le(Be,me,Pe,ft){return me===null||me.tag!==6?(me=Ph(Pe,Be.mode,ft),me.return=Be,me):(me=R(me,Pe),me.return=Be,me)}function Me(Be,me,Pe,ft){var zt=Pe.type;return zt===ko?ht(Be,me,Pe.props.children,ft,Pe.key):me!==null&&(me.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===Da&&yi(zt)===me.type)?(me=R(me,Pe.props),wn(me,Pe),me.return=Be,me):(me=mr(Pe.type,Pe.key,Pe.props,null,Be.mode,ft),wn(me,Pe),me.return=Be,me)}function qe(Be,me,Pe,ft){return me===null||me.tag!==4||me.stateNode.containerInfo!==Pe.containerInfo||me.stateNode.implementation!==Pe.implementation?(me=$p(Pe,Be.mode,ft),me.return=Be,me):(me=R(me,Pe.children||[]),me.return=Be,me)}function ht(Be,me,Pe,ft,zt){return me===null||me.tag!==7?(me=xi(Pe,Be.mode,ft,zt),me.return=Be,me):(me=R(me,Pe),me.return=Be,me)}function Ct(Be,me,Pe){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=Ph(""+me,Be.mode,Pe),me.return=Be,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case nf:return Pe=mr(me.type,me.key,me.props,null,Be.mode,Pe),wn(Pe,me),Pe.return=Be,Pe;case Ba:return me=$p(me,Be.mode,Pe),me.return=Be,me;case Da:var ft=me._init;return me=ft(me._payload),Ct(Be,me,Pe)}if(Nc(me)||r(me))return me=xi(me,Be.mode,Pe,null),me.return=Be,me;if(typeof me.then=="function")return Ct(Be,rn(me),Pe);if(me.$$typeof===Wa)return Ct(Be,Gu(Be,me),Pe);on(Be,me)}return null}function Bt(Be,me,Pe,ft){var zt=me!==null?me.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return zt!==null?null:le(Be,me,""+Pe,ft);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case nf:return Pe.key===zt?Me(Be,me,Pe,ft):null;case Ba:return Pe.key===zt?qe(Be,me,Pe,ft):null;case Da:return zt=Pe._init,Pe=zt(Pe._payload),Bt(Be,me,Pe,ft)}if(Nc(Pe)||r(Pe))return zt!==null?null:ht(Be,me,Pe,ft,null);if(typeof Pe.then=="function")return Bt(Be,me,rn(Pe),ft);if(Pe.$$typeof===Wa)return Bt(Be,me,Gu(Be,Pe),ft);on(Be,Pe)}return null}function cn(Be,me,Pe,ft,zt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Be=Be.get(Pe)||null,le(me,Be,""+ft,zt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case nf:return Be=Be.get(ft.key===null?Pe:ft.key)||null,Me(me,Be,ft,zt);case Ba:return Be=Be.get(ft.key===null?Pe:ft.key)||null,qe(me,Be,ft,zt);case Da:var di=ft._init;return ft=di(ft._payload),cn(Be,me,Pe,ft,zt)}if(Nc(ft)||r(ft))return Be=Be.get(Pe)||null,ht(me,Be,ft,zt,null);if(typeof ft.then=="function")return cn(Be,me,Pe,rn(ft),zt);if(ft.$$typeof===Wa)return cn(Be,me,Pe,Gu(me,ft),zt);on(me,ft)}return null}function _a(Be,me,Pe,ft){for(var zt=null,di=null,tn=me,Pn=me=0,Ui=null;tn!==null&&Pn<Pe.length;Pn++){tn.index>Pn?(Ui=tn,tn=null):Ui=tn.sibling;var Mn=Bt(Be,tn,Pe[Pn],ft);if(Mn===null){tn===null&&(tn=Ui);break}u&&tn&&Mn.alternate===null&&h(Be,tn),me=U(Mn,me,Pn),di===null?zt=Mn:di.sibling=Mn,di=Mn,tn=Ui}if(Pn===Pe.length)return _(Be,tn),Dn&&X(Be,Pn),zt;if(tn===null){for(;Pn<Pe.length;Pn++)tn=Ct(Be,Pe[Pn],ft),tn!==null&&(me=U(tn,me,Pn),di===null?zt=tn:di.sibling=tn,di=tn);return Dn&&X(Be,Pn),zt}for(tn=b(tn);Pn<Pe.length;Pn++)Ui=cn(tn,Be,Pn,Pe[Pn],ft),Ui!==null&&(u&&Ui.alternate!==null&&tn.delete(Ui.key===null?Pn:Ui.key),me=U(Ui,me,Pn),di===null?zt=Ui:di.sibling=Ui,di=Ui);return u&&tn.forEach(function(Rr){return h(Be,Rr)}),Dn&&X(Be,Pn),zt}function al(Be,me,Pe,ft){if(Pe==null)throw Error(s(151));for(var zt=null,di=null,tn=me,Pn=me=0,Ui=null,Mn=Pe.next();tn!==null&&!Mn.done;Pn++,Mn=Pe.next()){tn.index>Pn?(Ui=tn,tn=null):Ui=tn.sibling;var Rr=Bt(Be,tn,Mn.value,ft);if(Rr===null){tn===null&&(tn=Ui);break}u&&tn&&Rr.alternate===null&&h(Be,tn),me=U(Rr,me,Pn),di===null?zt=Rr:di.sibling=Rr,di=Rr,tn=Ui}if(Mn.done)return _(Be,tn),Dn&&X(Be,Pn),zt;if(tn===null){for(;!Mn.done;Pn++,Mn=Pe.next())Mn=Ct(Be,Mn.value,ft),Mn!==null&&(me=U(Mn,me,Pn),di===null?zt=Mn:di.sibling=Mn,di=Mn);return Dn&&X(Be,Pn),zt}for(tn=b(tn);!Mn.done;Pn++,Mn=Pe.next())Mn=cn(tn,Be,Pn,Mn.value,ft),Mn!==null&&(u&&Mn.alternate!==null&&tn.delete(Mn.key===null?Pn:Mn.key),me=U(Mn,me,Pn),di===null?zt=Mn:di.sibling=Mn,di=Mn);return u&&tn.forEach(function(dd){return h(Be,dd)}),Dn&&X(Be,Pn),zt}function rl(Be,me,Pe,ft){if(typeof Pe=="object"&&Pe!==null&&Pe.type===ko&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case nf:e:{for(var zt=Pe.key;me!==null;){if(me.key===zt){if(zt=Pe.type,zt===ko){if(me.tag===7){_(Be,me.sibling),ft=R(me,Pe.props.children),ft.return=Be,Be=ft;break e}}else if(me.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===Da&&yi(zt)===me.type){_(Be,me.sibling),ft=R(me,Pe.props),wn(ft,Pe),ft.return=Be,Be=ft;break e}_(Be,me);break}else h(Be,me);me=me.sibling}Pe.type===ko?(ft=xi(Pe.props.children,Be.mode,ft,Pe.key),ft.return=Be,Be=ft):(ft=mr(Pe.type,Pe.key,Pe.props,null,Be.mode,ft),wn(ft,Pe),ft.return=Be,Be=ft)}return q(Be);case Ba:e:{for(zt=Pe.key;me!==null;){if(me.key===zt)if(me.tag===4&&me.stateNode.containerInfo===Pe.containerInfo&&me.stateNode.implementation===Pe.implementation){_(Be,me.sibling),ft=R(me,Pe.children||[]),ft.return=Be,Be=ft;break e}else{_(Be,me);break}else h(Be,me);me=me.sibling}ft=$p(Pe,Be.mode,ft),ft.return=Be,Be=ft}return q(Be);case Da:return zt=Pe._init,Pe=zt(Pe._payload),rl(Be,me,Pe,ft)}if(Nc(Pe))return _a(Be,me,Pe,ft);if(r(Pe)){if(zt=r(Pe),typeof zt!="function")throw Error(s(150));return Pe=zt.call(Pe),al(Be,me,Pe,ft)}if(typeof Pe.then=="function")return rl(Be,me,rn(Pe),ft);if(Pe.$$typeof===Wa)return rl(Be,me,Gu(Be,Pe),ft);on(Be,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,me!==null&&me.tag===6?(_(Be,me.sibling),ft=R(me,Pe),ft.return=Be,Be=ft):(_(Be,me),ft=Ph(Pe,Be.mode,ft),ft.return=Be,Be=ft),q(Be)):_(Be,me)}return function(Be,me,Pe,ft){try{$o=0;var zt=rl(Be,me,Pe,ft);return Qo=null,zt}catch(tn){if(tn===Yc)throw tn;var di=t(29,tn,null,Be.mode);return di.lanes=ft,di.return=Be,di}finally{}}}function _i(u,h){u=As,w(qc,u),w(oi,h),As=u|h.baseLanes}function Ti(){w(qc,As),w(oi,oi.current)}function Ci(){As=qc.current,A(oi),A(qc)}function vs(u){var h=u.alternate;w(Yi,Yi.current&1),w(ha,u),ei===null&&(h===null||oi.current!==null||h.memoizedState!==null)&&(ei=u)}function qa(u){if(u.tag===22){if(w(Yi,Yi.current),w(ha,u),ei===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(ei=u)}}else as()}function as(){w(Yi,Yi.current),w(ha,ha.current)}function Yt(u){A(ha),ei===u&&(ei=null),A(Yi)}function ks(u){for(var h=u;h!==null;){if(h.tag===13){var _=h.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||Jh(_)||Kh(_)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Gn(){throw Error(s(321))}function G(u,h){if(h===null)return!1;for(var _=0;_<h.length&&_<u.length;_++)if(!Zs(u[_],h[_]))return!1;return!0}function J(u,h,_,b,R,U){return lo=U,yn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,en.H=u===null||u.memoizedState===null?nl:Is,tl=!1,U=_(b,R),tl=!1,Gl&&(U=we(h,_,b,R)),de(u),U}function de(u){en.H=Ai;var h=qt!==null&&qt.next!==null;if(lo=0,Un=qt=yn=null,Ia=!1,Vl=0,is=null,h)throw Error(s(300));u===null||ti||(u=u.dependencies,u!==null&&zu(u)&&(ti=!0))}function we(u,h,_,b){yn=u;var R=0;do{if(Gl&&(is=null),Vl=0,Gl=!1,25<=R)throw Error(s(301));if(R+=1,Un=qt=null,u.updateQueue!=null){var U=u.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}en.H=da,U=h(_,b)}while(Gl);return U}function Ue(){var u=en.H,h=u.useState()[0];return h=typeof h.then=="function"?se(h):h,u=u.useState()[0],(qt!==null?qt.memoizedState:null)!==u&&(yn.flags|=1024),h}function Ge(){var u=ad!==0;return ad=0,u}function ct(u,h,_){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~_}function st(u){if(Ia){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Ia=!1}lo=0,Un=qt=yn=null,Gl=!1,Vl=ad=0,is=null}function V(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?yn.memoizedState=Un=u:Un=Un.next=u,Un}function te(){if(qt===null){var u=yn.alternate;u=u!==null?u.memoizedState:null}else u=qt.next;var h=Un===null?yn.memoizedState:Un.next;if(h!==null)Un=h,qt=u;else{if(u===null)throw yn.alternate===null?Error(s(467)):Error(s(310));qt=u,u={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Un===null?yn.memoizedState=Un=u:Un=Un.next=u}return Un}function se(u){var h=Vl;return Vl+=1,is===null&&(is=[]),u=gt(is,u,h),h=yn,(Un===null?h.memoizedState:Un.next)===null&&(h=h.alternate,en.H=h===null||h.memoizedState===null?nl:Is),u}function ae(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return se(u);if(u.$$typeof===Wa)return os(u)}throw Error(s(438,String(u)))}function ge(u){var h=null,_=yn.updateQueue;if(_!==null&&(h=_.memoCache),h==null){var b=yn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(h={data:b.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),_===null&&(_=rd(),yn.updateQueue=_),_.memoCache=h,_=h.data[h.index],_===void 0)for(_=h.data[h.index]=Array(u),b=0;b<u;b++)_[b]=Jv;return h.index++,_}function Te(u,h){return typeof h=="function"?h(u):h}function Ve(u){var h=te();return Ye(h,qt,u)}function Ye(u,h,_){var b=u.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=_;var R=u.baseQueue,U=b.pending;if(U!==null){if(R!==null){var q=R.next;R.next=U.next,U.next=q}h.baseQueue=R=U,b.pending=null}if(U=u.baseState,R===null)u.memoizedState=U;else{h=R.next;var le=q=null,Me=null,qe=h,ht=!1;do{var Ct=qe.lane&-536870913;if(Ct!==qe.lane?(bn&Ct)===Ct:(lo&Ct)===Ct){var Bt=qe.revertLane;if(Bt===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),Ct===fa&&(ht=!0);else if((lo&Bt)===Bt){qe=qe.next,Bt===fa&&(ht=!0);continue}else Ct={lane:0,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Me===null?(le=Me=Ct,q=U):Me=Me.next=Ct,yn.lanes|=Bt,va|=Bt;Ct=qe.action,tl&&_(U,Ct),U=qe.hasEagerState?qe.eagerState:_(U,Ct)}else Bt={lane:Ct,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Me===null?(le=Me=Bt,q=U):Me=Me.next=Bt,yn.lanes|=Ct,va|=Ct;qe=qe.next}while(qe!==null&&qe!==h);if(Me===null?q=U:Me.next=le,!Zs(U,u.memoizedState)&&(ti=!0,ht&&(_=Hl,_!==null)))throw _;u.memoizedState=U,u.baseState=q,u.baseQueue=Me,b.lastRenderedState=U}return R===null&&(b.lanes=0),[u.memoizedState,b.dispatch]}function it(u){var h=te(),_=h.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=u;var b=_.dispatch,R=_.pending,U=h.memoizedState;if(R!==null){_.pending=null;var q=R=R.next;do U=u(U,q.action),q=q.next;while(q!==R);Zs(U,h.memoizedState)||(ti=!0),h.memoizedState=U,h.baseQueue===null&&(h.baseState=U),_.lastRenderedState=U}return[U,b]}function Mt(u,h,_){var b=yn,R=te(),U=Dn;if(U){if(_===void 0)throw Error(s(407));_=_()}else _=h();var q=!Zs((qt||R).memoizedState,_);if(q&&(R.memoizedState=_,ti=!0),R=R.queue,bp(kt.bind(null,b,R,u),[u]),R.getSnapshot!==h||q||Un!==null&&Un.memoizedState.tag&1){if(b.flags|=2048,ws(9,bt.bind(null,b,R,_,h),{destroy:void 0},null),Xn===null)throw Error(s(349));U||(lo&60)!==0||vt(b,h,_)}return _}function vt(u,h,_){u.flags|=16384,u={getSnapshot:h,value:_},h=yn.updateQueue,h===null?(h=rd(),yn.updateQueue=h,h.stores=[u]):(_=h.stores,_===null?h.stores=[u]:_.push(u))}function bt(u,h,_,b){h.value=_,h.getSnapshot=b,Ht(h)&&Tn(u)}function kt(u,h,_){return _(function(){Ht(h)&&Tn(u)})}function Ht(u){var h=u.getSnapshot;u=u.value;try{var _=h();return!Zs(u,_)}catch{return!0}}function Tn(u){var h=je(u,2);h!==null&&es(h,u,2)}function Ut(u){var h=V();if(typeof u=="function"){var _=u;if(u=_(),tl){W(!0);try{_()}finally{W(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Te,lastRenderedState:u},h}function Gt(u,h,_,b){return u.baseState=_,Ye(u,qt,typeof b=="function"?b:Te)}function Lt(u,h,_,b,R){if(Ou(u))throw Error(s(485));if(u=h.action,u!==null){var U={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){U.listeners.push(q)}};en.T!==null?_(!0):U.isTransition=!1,b(U),_=h.pending,_===null?(U.next=h.pending=U,Yn(h,U)):(U.next=_.next,h.pending=_.next=U)}}function Yn(u,h){var _=h.action,b=h.payload,R=u.state;if(h.isTransition){var U=en.T,q={};en.T=q;try{var le=_(R,b),Me=en.S;Me!==null&&Me(q,le),$t(u,h,le)}catch(qe){Zn(u,h,qe)}finally{en.T=U}}else try{U=_(R,b),$t(u,h,U)}catch(qe){Zn(u,h,qe)}}function $t(u,h,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(b){an(u,h,b)},function(b){return Zn(u,h,b)}):an(u,h,_)}function an(u,h,_){h.status="fulfilled",h.value=_,jt(h),u.state=_,h=u.pending,h!==null&&(_=h.next,_===h?u.pending=null:(_=_.next,h.next=_,Yn(u,_)))}function Zn(u,h,_){var b=u.pending;if(u.pending=null,b!==null){b=b.next;do h.status="rejected",h.reason=_,jt(h),h=h.next;while(h!==b)}u.action=null}function jt(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function vn(u,h){return h}function pn(u,h){if(Dn){var _=Xn.formState;if(_!==null){e:{var b=yn;if(Dn){if(ds){var R=gm(ds,ns);if(R){ds=vm(R),b=g0(R);break e}}tt(b)}b=!1}b&&(h=_[0])}}_=V(),_.memoizedState=_.baseState=h,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:h},_.queue=b,_=Rp.bind(null,yn,b),b.dispatch=_,b=Ut(!1);var U=gc.bind(null,yn,!1,b.queue);return b=V(),R={state:h,dispatch:null,action:u,pending:null},b.queue=R,_=Lt.bind(null,yn,R,U,_),R.dispatch=_,b.memoizedState=u,[h,_,!1]}function fi(u){var h=te();return Bn(h,qt,u)}function Bn(u,h,_){h=Ye(u,h,vn)[0],u=Ve(Te)[0],h=typeof h=="object"&&h!==null&&typeof h.then=="function"?se(h):h;var b=te(),R=b.queue,U=R.dispatch;return _!==b.memoizedState&&(yn.flags|=2048,ws(9,Qn.bind(null,R,_),{destroy:void 0},null)),[h,U,u]}function Qn(u,h){u.action=h}function Qi(u){var h=te(),_=qt;if(_!==null)return Bn(h,_,u);te(),h=h.memoizedState,_=te();var b=_.queue.dispatch;return _.memoizedState=u,[h,b,!1]}function ws(u,h,_,b){return u={tag:u,create:h,inst:_,deps:b,next:null},h=yn.updateQueue,h===null&&(h=rd(),yn.updateQueue=h),_=h.lastEffect,_===null?h.lastEffect=u.next=u:(b=_.next,_.next=u,u.next=b,h.lastEffect=u),u}function fr(){return te().memoizedState}function Bu(u,h,_,b){var R=V();yn.flags|=u,R.memoizedState=ws(1|h,_,{destroy:void 0},b===void 0?null:b)}function Du(u,h,_,b){var R=te();b=b===void 0?null:b;var U=R.memoizedState.inst;qt!==null&&b!==null&&G(b,qt.memoizedState.deps)?R.memoizedState=ws(h,_,U,b):(yn.flags|=u,R.memoizedState=ws(1|h,_,U,b))}function vh(u,h){Bu(8390656,8,u,h)}function bp(u,h){Du(2048,8,u,h)}function Tv(u,h){return Du(4,2,u,h)}function Uu(u,h){return Du(4,4,u,h)}function yh(u,h){if(typeof h=="function"){u=u();var _=h(u);return function(){typeof _=="function"?_():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function _h(u,h,_){_=_!=null?_.concat([u]):null,Du(4,4,yh.bind(null,h,u),_)}function Ro(){}function bl(u,h){var _=te();h=h===void 0?null:h;var b=_.memoizedState;return h!==null&&G(h,b[1])?b[0]:(_.memoizedState=[u,h],u)}function Ep(u,h){var _=te();h=h===void 0?null:h;var b=_.memoizedState;if(h!==null&&G(h,b[1]))return b[0];if(b=u(),tl){W(!0);try{u()}finally{W(!1)}}return _.memoizedState=[b,h],b}function Lu(u,h,_){return _===void 0||(lo&1073741824)!==0?u.memoizedState=h:(u.memoizedState=_,u=qp(),yn.lanes|=u,va|=u,_)}function Tp(u,h,_,b){return Zs(_,h)?_:oi.current!==null?(u=Lu(u,_,b),Zs(u,h)||(ti=!0),u):(lo&42)===0?(ti=!0,u.memoizedState=_):(u=qp(),yn.lanes|=u,va|=u,h)}function pc(u,h,_,b,R){var U=io();_s(U!==0&&8>U?U:8);var q=en.T,le={};en.T=le,gc(u,!1,h,_);try{var Me=R(),qe=en.S;if(qe!==null&&qe(le,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var ht=Nt(Me,b);wo(u,h,ht,Ri(u))}else wo(u,h,b,Ri(u))}catch(Ct){wo(u,h,{then:function(){},status:"rejected",reason:Ct},Ri())}finally{_s(U),en.T=q}}function hr(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:jo,baseState:jo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Te,lastRenderedState:jo},next:null};var _={};return h.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Te,lastRenderedState:_},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function Nu(){return os(Za)}function mc(){return te().memoizedState}function Vr(){return te().memoizedState}function Cp(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var _=Ri();u=Et(_);var b=St(h,u,_);b!==null&&(es(b,h,_),mt(b,h,_)),h={cache:Lo()},u.payload=h;return}h=h.return}}function xh(u,h,_){var b=Ri();_={lane:b,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null},Ou(u)?Bs(h,_):(_=Ze(u,h,_,b),_!==null&&(es(_,u,b),Bo(_,h,b)))}function Rp(u,h,_){var b=Ri();wo(u,h,_,b)}function wo(u,h,_,b){var R={lane:b,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null};if(Ou(u))Bs(h,R);else{var U=u.alternate;if(u.lanes===0&&(U===null||U.lanes===0)&&(U=h.lastRenderedReducer,U!==null))try{var q=h.lastRenderedState,le=U(q,_);if(R.hasEagerState=!0,R.eagerState=le,Zs(le,q))return rt(u,h,R,0),Xn===null&&K(),!1}catch{}finally{}if(_=Ze(u,h,R,b),_!==null)return es(_,u,b),Bo(_,h,b),!0}return!1}function gc(u,h,_,b){if(b={lane:2,revertLane:pt(),action:b,hasEagerState:!1,eagerState:null,next:null},Ou(u)){if(h)throw Error(s(479))}else h=Ze(u,_,b,2),h!==null&&es(h,u,2)}function Ou(u){var h=u.alternate;return u===yn||h!==null&&h===yn}function Bs(u,h){Gl=Ia=!0;var _=u.pending;_===null?h.next=h:(h.next=_.next,_.next=h),u.pending=h}function Bo(u,h,_){if((_&4194176)!==0){var b=h.lanes;b&=u.pendingLanes,_|=b,h.lanes=_,fe(u,_)}}function vc(u,h,_,b){h=u.memoizedState,_=_(b,h),_=_==null?h:Hh({},h,_),u.memoizedState=_,u.lanes===0&&(u.updateQueue.baseState=_)}function yc(u,h,_,b,R,U,q){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(b,U,q):h.prototype&&h.prototype.isPureReactComponent?!De(_,b)||!De(R,U):!0}function Cv(u,h,_,b){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(_,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(_,b),h.state!==u&&Sr.enqueueReplaceState(h,h.state,null)}function kr(u,h){var _=h;if("ref"in h){_={};for(var b in h)b!=="ref"&&(_[b]=h[b])}if(u=u.defaultProps){_===h&&(_=Hh({},_));for(var R in u)_[R]===void 0&&(_[R]=u[R])}return _}function _c(u,h){try{var _=u.onUncaughtError;_(h.value,{componentStack:h.stack})}catch(b){setTimeout(function(){throw b})}}function xc(u,h,_){try{var b=u.onCaughtError;b(_.value,{componentStack:_.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Ac(u,h,_){return _=Et(_),_.tag=3,_.payload={element:null},_.callback=function(){_c(u,h)},_}function wp(u){return u=Et(u),u.tag=3,u}function Rv(u,h,_,b){var R=_.type.getDerivedStateFromError;if(typeof R=="function"){var U=b.value;u.payload=function(){return R(U)},u.callback=function(){xc(h,_,b)}}var q=_.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(u.callback=function(){xc(h,_,b),typeof R!="function"&&(il===null?il=new Set([this]):il.add(this));var le=b.stack;this.componentDidCatch(b.value,{componentStack:le!==null?le:""})})}function lA(u,h,_,b,R){if(_.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(h=_.alternate,h!==null&&Hu(h,_,R,!0),_=ha.current,_!==null){switch(_.tag){case 13:return ei===null?Zr():_.alternate===null&&ni===0&&(ni=3),_.flags&=-257,_.flags|=65536,_.lanes=R,b===yf?_.flags|=16384:(h=_.updateQueue,h===null?_.updateQueue=new Set([b]):h.add(b),Cl(u,b,R)),!1;case 22:return _.flags|=65536,b===yf?_.flags|=16384:(h=_.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([b])},_.updateQueue=h):(_=h.retryQueue,_===null?h.retryQueue=new Set([b]):_.add(b)),Cl(u,b,R)),!1}throw Error(s(435,_.tag))}return Cl(u,b,R),Zr(),!1}if(Dn)return h=ha.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,b!==mf&&(u=Error(s(422),{cause:b}),dt(ve(u,_)))):(b!==mf&&(h=Error(s(423),{cause:b}),dt(ve(h,_))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,b=ve(b,_),R=Ac(u.stateNode,b,R),he(u,R),ni!==4&&(ni=2)),!1;var U=Error(s(520),{cause:b});if(U=ve(U,_),Xl===null?Xl=[U]:Xl.push(U),ni!==4&&(ni=2),h===null)return!0;b=ve(b,_),_=h;do{switch(_.tag){case 3:return _.flags|=65536,u=R&-R,_.lanes|=u,u=Ac(_.stateNode,b,u),he(_,u),!1;case 1:if(h=_.type,U=_.stateNode,(_.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(il===null||!il.has(U))))return _.flags|=65536,R&=-R,_.lanes|=R,R=wp(R),Rv(R,u,_,b),he(_,R),!1}_=_.return}while(_!==null);return!1}function rs(u,h,_,b){h.child=u===null?Ar(h,null,_,b):el(h,u.child,_,b)}function Ah(u,h,_,b,R){_=_.render;var U=h.ref;if("ref"in b){var q={};for(var le in b)le!=="ref"&&(q[le]=b[le])}else q=b;return Uo(h),b=J(u,h,_,q,U,R),le=Ge(),u!==null&&!ti?(ct(u,h,R),Xr(u,h,R)):(Dn&&le&&Ae(h),h.flags|=1,rs(u,h,b,R),h.child)}function wv(u,h,_,b,R){if(u===null){var U=_.type;return typeof U=="function"&&!Qu(U)&&U.defaultProps===void 0&&_.compare===null?(h.tag=15,h.type=U,Bv(u,h,U,b,R)):(u=mr(_.type,null,b,h,h.mode,R),u.ref=h.ref,u.return=h,h.child=u)}if(U=u.child,!Np(u,R)){var q=U.memoizedProps;if(_=_.compare,_=_!==null?_:De,_(q,b)&&u.ref===h.ref)return Xr(u,h,R)}return h.flags|=1,u=wa(U,b),u.ref=h.ref,u.return=h,h.child=u}function Bv(u,h,_,b,R){if(u!==null){var U=u.memoizedProps;if(De(U,b)&&u.ref===h.ref)if(ti=!1,h.pendingProps=b=U,Np(u,R))(u.flags&131072)!==0&&(ti=!0);else return h.lanes=u.lanes,Xr(u,h,R)}return Sh(u,h,_,b,R)}function Dv(u,h,_){var b=h.pendingProps,R=b.children,U=(h.stateNode._pendingVisibility&2)!==0,q=u!==null?u.memoizedState:null;if(Iu(u,h),b.mode==="hidden"||U){if((h.flags&128)!==0){if(b=q!==null?q.baseLanes|_:_,u!==null){for(R=h.child=u.child,U=0;R!==null;)U=U|R.lanes|R.childLanes,R=R.sibling;h.childLanes=U&~b}else h.childLanes=0,h.child=null;return Uv(u,h,b,_)}if((_&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&bh(h,q!==null?q.cachePool:null),q!==null?_i(h,q):Ti(),qa(h);else return h.lanes=h.childLanes=536870912,Uv(u,h,q!==null?q.baseLanes|_:_,_)}else q!==null?(bh(h,q.cachePool),_i(h,q),as(),h.memoizedState=null):(u!==null&&bh(h,null),Ti(),as());return rs(u,h,R,_),h.child}function Uv(u,h,_,b){var R=Ip();return R=R===null?null:{parent:Ls?li._currentValue:li._currentValue2,pool:R},h.memoizedState={baseLanes:_,cachePool:R},u!==null&&bh(h,null),Ti(),qa(h),u!==null&&Hu(u,h,b,!0),null}function Iu(u,h){var _=h.ref;if(_===null)u!==null&&u.ref!==null&&(h.flags|=2097664);else{if(typeof _!="function"&&typeof _!="object")throw Error(s(284));(u===null||u.ref!==_)&&(h.flags|=2097664)}}function Sh(u,h,_,b,R){return Uo(h),_=J(u,h,_,b,void 0,R),b=Ge(),u!==null&&!ti?(ct(u,h,R),Xr(u,h,R)):(Dn&&b&&Ae(h),h.flags|=1,rs(u,h,_,R),h.child)}function Lv(u,h,_,b,R,U){return Uo(h),h.updateQueue=null,_=we(h,b,_,R),de(u),b=Ge(),u!==null&&!ti?(ct(u,h,U),Xr(u,h,U)):(Dn&&b&&Ae(h),h.flags|=1,rs(u,h,_,U),h.child)}function Nv(u,h,_,b,R){if(Uo(h),h.stateNode===null){var U=Ko,q=_.contextType;typeof q=="object"&&q!==null&&(U=os(q)),U=new _(b,U),h.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Sr,h.stateNode=U,U._reactInternals=h,U=h.stateNode,U.props=b,U.state=h.memoizedState,U.refs={},at(h),q=_.contextType,U.context=typeof q=="object"&&q!==null?os(q):Ko,U.state=h.memoizedState,q=_.getDerivedStateFromProps,typeof q=="function"&&(vc(h,_,q,b),U.state=h.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(q=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),q!==U.state&&Sr.enqueueReplaceState(U,U.state,null),lt(h,b,U,R),Fe(),U.state=h.memoizedState),typeof U.componentDidMount=="function"&&(h.flags|=4194308),b=!0}else if(u===null){U=h.stateNode;var le=h.memoizedProps,Me=kr(_,le);U.props=Me;var qe=U.context,ht=_.contextType;q=Ko,typeof ht=="object"&&ht!==null&&(q=os(ht));var Ct=_.getDerivedStateFromProps;ht=typeof Ct=="function"||typeof U.getSnapshotBeforeUpdate=="function",le=h.pendingProps!==le,ht||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(le||qe!==q)&&Cv(h,U,b,q),oo=!1;var Bt=h.memoizedState;U.state=Bt,lt(h,b,U,R),Fe(),qe=h.memoizedState,le||Bt!==qe||oo?(typeof Ct=="function"&&(vc(h,_,Ct,b),qe=h.memoizedState),(Me=oo||yc(h,_,Me,b,Bt,qe,q))?(ht||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(h.flags|=4194308)):(typeof U.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=qe),U.props=b,U.state=qe,U.context=q,b=Me):(typeof U.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{U=h.stateNode,At(u,h),q=h.memoizedProps,ht=kr(_,q),U.props=ht,Ct=h.pendingProps,Bt=U.context,qe=_.contextType,Me=Ko,typeof qe=="object"&&qe!==null&&(Me=os(qe)),le=_.getDerivedStateFromProps,(qe=typeof le=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(q!==Ct||Bt!==Me)&&Cv(h,U,b,Me),oo=!1,Bt=h.memoizedState,U.state=Bt,lt(h,b,U,R),Fe();var cn=h.memoizedState;q!==Ct||Bt!==cn||oo||u!==null&&u.dependencies!==null&&zu(u.dependencies)?(typeof le=="function"&&(vc(h,_,le,b),cn=h.memoizedState),(ht=oo||yc(h,_,ht,b,Bt,cn,Me)||u!==null&&u.dependencies!==null&&zu(u.dependencies))?(qe||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(b,cn,Me),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(b,cn,Me)),typeof U.componentDidUpdate=="function"&&(h.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof U.componentDidUpdate!="function"||q===u.memoizedProps&&Bt===u.memoizedState||(h.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&Bt===u.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=cn),U.props=b,U.state=cn,U.context=Me,b=ht):(typeof U.componentDidUpdate!="function"||q===u.memoizedProps&&Bt===u.memoizedState||(h.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&Bt===u.memoizedState||(h.flags|=1024),b=!1)}return U=b,Iu(u,h),b=(h.flags&128)!==0,U||b?(U=h.stateNode,_=b&&typeof _.getDerivedStateFromError!="function"?null:U.render(),h.flags|=1,u!==null&&b?(h.child=el(h,u.child,null,R),h.child=el(h,null,_,R)):rs(u,h,_,R),h.memoizedState=U.state,u=h.child):u=Xr(u,h,R),u}function Ov(u,h,_,b){return ot(),h.flags|=256,rs(u,h,_,b),h.child}function Bp(u){return{baseLanes:u,cachePool:Pp()}}function Pu(u,h,_){return u=u!==null?u.childLanes&~_:0,h&&(u|=ya),u}function Iv(u,h,_){var b=h.pendingProps,R=!1,U=(h.flags&128)!==0,q;if((q=U)||(q=u!==null&&u.memoizedState===null?!1:(Yi.current&2)!==0),q&&(R=!0,h.flags&=-129),q=(h.flags&32)!==0,h.flags&=-33,u===null){if(Dn){if(R?vs(h):as(),Dn){var le=ds,Me;(Me=le)&&(le=_0(le,ns),le!==null?(h.memoizedState={dehydrated:le,treeContext:Wo!==null?{id:$a,overflow:er}:null,retryLane:536870912},Me=t(18,null,null,0),Me.stateNode=le,Me.return=h,h.child=Me,hs=h,ds=null,Me=!0):Me=!1),Me||tt(h)}if(le=h.memoizedState,le!==null&&(le=le.dehydrated,le!==null))return Kh(le)?h.lanes=16:h.lanes=536870912,null;Yt(h)}return le=b.children,b=b.fallback,R?(as(),R=h.mode,le=Up({mode:"hidden",children:le},R),b=xi(b,R,_,null),le.return=h,b.return=h,le.sibling=b,h.child=le,R=h.child,R.memoizedState=Bp(_),R.childLanes=Pu(u,q,_),h.memoizedState=cd,b):(vs(h),Dp(h,le))}if(Me=u.memoizedState,Me!==null&&(le=Me.dehydrated,le!==null)){if(U)h.flags&256?(vs(h),h.flags&=-257,h=Mh(u,h,_)):h.memoizedState!==null?(as(),h.child=u.child,h.flags|=128,h=null):(as(),R=b.fallback,le=h.mode,b=Up({mode:"visible",children:b.children},le),R=xi(R,le,_,null),R.flags|=2,b.return=h,R.return=h,b.sibling=R,h.child=b,el(h,u.child,null,_),b=h.child,b.memoizedState=Bp(_),b.childLanes=Pu(u,q,_),h.memoizedState=cd,h=R);else if(vs(h),Kh(le))q=p0(le).digest,b=Error(s(419)),b.stack="",b.digest=q,dt({value:b,source:null,stack:null}),h=Mh(u,h,_);else if(ti||Hu(u,h,_,!1),q=(_&u.childLanes)!==0,ti||q){if(q=Xn,q!==null){if(b=_&-_,(b&42)!==0)b=1;else switch(b){case 2:b=1;break;case 8:b=4;break;case 32:b=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:b=64;break;case 268435456:b=134217728;break;default:b=0}if(b=(b&(q.suspendedLanes|_))!==0?0:b,b!==0&&b!==Me.retryLane)throw Me.retryLane=b,je(u,b),es(q,u,b),ld}Jh(le)||Zr(),h=Mh(u,h,_)}else Jh(le)?(h.flags|=128,h.child=u.child,h=Qr.bind(null,u),m0(le,h),h=null):(u=Me.treeContext,fs&&(ds=y0(le),hs=h,Dn=!0,Na=null,ns=!1,u!==null&&(ca[ua++]=$a,ca[ua++]=er,ca[ua++]=Wo,$a=u.id,er=u.overflow,Wo=h)),h=Dp(h,b.children),h.flags|=4096);return h}return R?(as(),R=b.fallback,le=h.mode,Me=u.child,U=Me.sibling,b=wa(Me,{mode:"hidden",children:b.children}),b.subtreeFlags=Me.subtreeFlags&31457280,U!==null?R=wa(U,R):(R=xi(R,le,_,null),R.flags|=2),R.return=h,b.return=h,b.sibling=R,h.child=b,b=R,R=h.child,le=u.child.memoizedState,le===null?le=Bp(_):(Me=le.cachePool,Me!==null?(U=Ls?li._currentValue:li._currentValue2,Me=Me.parent!==U?{parent:U,pool:U}:Me):Me=Pp(),le={baseLanes:le.baseLanes|_,cachePool:Me}),R.memoizedState=le,R.childLanes=Pu(u,q,_),h.memoizedState=cd,b):(vs(h),_=u.child,u=_.sibling,_=wa(_,{mode:"visible",children:b.children}),_.return=h,_.sibling=null,u!==null&&(q=h.deletions,q===null?(h.deletions=[u],h.flags|=16):q.push(u)),h.child=_,h.memoizedState=null,_)}function Dp(u,h){return h=Up({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function Up(u,h){return ef(u,h,0,null)}function Mh(u,h,_){return el(h,u.child,null,_),u=Dp(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function Pv(u,h,_){u.lanes|=h;var b=u.alternate;b!==null&&(b.lanes|=h),Fu(u.return,h,_)}function Lp(u,h,_,b,R){var U=u.memoizedState;U===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:_,tailMode:R}:(U.isBackwards=h,U.rendering=null,U.renderingStartTime=0,U.last=b,U.tail=_,U.tailMode=R)}function Fv(u,h,_){var b=h.pendingProps,R=b.revealOrder,U=b.tail;if(rs(u,h,b.children,_),b=Yi.current,(b&2)!==0)b=b&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Pv(u,_,h);else if(u.tag===19)Pv(u,_,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}b&=1}switch(w(Yi,b),R){case"forwards":for(_=h.child,R=null;_!==null;)u=_.alternate,u!==null&&ks(u)===null&&(R=_),_=_.sibling;_=R,_===null?(R=h.child,h.child=null):(R=_.sibling,_.sibling=null),Lp(h,!1,R,_,U);break;case"backwards":for(_=null,R=h.child,h.child=null;R!==null;){if(u=R.alternate,u!==null&&ks(u)===null){h.child=R;break}u=R.sibling,R.sibling=_,_=R,R=u}Lp(h,!0,_,null,U);break;case"together":Lp(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Xr(u,h,_){if(u!==null&&(h.dependencies=u.dependencies),va|=h.lanes,(_&h.childLanes)===0)if(u!==null){if(Hu(u,h,_,!1),(_&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(s(153));if(h.child!==null){for(u=h.child,_=wa(u,u.pendingProps),h.child=_,_.return=h;u.sibling!==null;)u=u.sibling,_=_.sibling=wa(u,u.pendingProps),_.return=h;_.sibling=null}return h.child}function Np(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&zu(u)))}function cA(u,h,_){switch(h.tag){case 3:oe(h,h.stateNode.containerInfo),Do(h,li,u.memoizedState.cache),ot();break;case 27:case 5:Oe(h);break;case 4:oe(h,h.stateNode.containerInfo);break;case 10:Do(h,h.type,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(vs(h),h.flags|=128,null):(_&h.child.childLanes)!==0?Iv(u,h,_):(vs(h),u=Xr(u,h,_),u!==null?u.sibling:null);vs(h);break;case 19:var R=(u.flags&128)!==0;if(b=(_&h.childLanes)!==0,b||(Hu(u,h,_,!1),b=(_&h.childLanes)!==0),R){if(b)return Fv(u,h,_);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),w(Yi,Yi.current),b)break;return null;case 22:case 23:return h.lanes=0,Dv(u,h,_);case 24:Do(h,li,u.memoizedState.cache)}return Xr(u,h,_)}function Hv(u,h,_){if(u!==null)if(u.memoizedProps!==h.pendingProps)ti=!0;else{if(!Np(u,_)&&(h.flags&128)===0)return ti=!1,cA(u,h,_);ti=(u.flags&131072)!==0}else ti=!1,Dn&&(h.flags&1048576)!==0&&re(h,Vc,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var b=h.elementType,R=b._init;if(b=R(b._payload),h.type=b,typeof b=="function")Qu(b)?(u=kr(b,u),h.tag=1,h=Nv(null,h,b,u,_)):(h.tag=0,h=Sh(null,h,b,u,_));else{if(b!=null){if(R=b.$$typeof,R===rf){h.tag=11,h=Ah(null,h,b,u,_);break e}else if(R===Vh){h.tag=14,h=wv(null,h,b,u,_);break e}}throw h=o(b)||b,Error(s(306,h,""))}}return h;case 0:return Sh(u,h,h.type,h.pendingProps,_);case 1:return b=h.type,R=kr(b,h.pendingProps),Nv(u,h,b,R,_);case 3:e:{if(oe(h,h.stateNode.containerInfo),u===null)throw Error(s(387));var U=h.pendingProps;R=h.memoizedState,b=R.element,At(u,h),lt(h,U,null,_);var q=h.memoizedState;if(U=q.cache,Do(h,li,U),U!==R.cache&&El(h,[li],_,!0),Fe(),U=q.element,fs&&R.isDehydrated)if(R={element:U,isDehydrated:!1,cache:q.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=Ov(u,h,U,_);break e}else if(U!==b){b=ve(Error(s(424)),h),dt(b),h=Ov(u,h,U,_);break e}else for(fs&&(ds=v0(h.stateNode.containerInfo),hs=h,Dn=!0,Na=null,ns=!0),_=Ar(h,null,U,_),h.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(ot(),U===b){h=Xr(u,h,_);break e}rs(u,h,U,_)}h=h.child}return h;case 26:if(la)return Iu(u,h),u===null?(_=xm(h.type,null,h.pendingProps,null))?h.memoizedState=_:Dn||(h.stateNode=ed(h.type,h.pendingProps,_r.current,h)):h.memoizedState=xm(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:if($n)return Oe(h),u===null&&$n&&Dn&&(b=h.stateNode=Qa(h.type,h.pendingProps,_r.current,ji.current,!1),hs=h,ns=!0,ds=Wh(b)),b=h.pendingProps.children,u!==null||Dn?rs(u,h,b,_):h.child=el(h,null,b,_),Iu(u,h),h.child;case 5:return u===null&&Dn&&(Qh(h.type,h.pendingProps,ji.current),(R=b=ds)&&(b=gA(b,h.type,h.pendingProps,ns),b!==null?(h.stateNode=b,hs=h,ds=Wh(b),ns=!1,R=!0):R=!1),R||tt(h)),Oe(h),R=h.type,U=h.pendingProps,q=u!==null?u.memoizedProps:null,b=U.children,fn(R,U)?b=null:q!==null&&fn(R,q)&&(h.flags|=32),h.memoizedState!==null&&(R=J(u,h,Ue,null,null,_),Ls?Za._currentValue=R:Za._currentValue2=R),Iu(u,h),rs(u,h,b,_),h.child;case 6:return u===null&&Dn&&(b0(h.pendingProps,ji.current),(u=_=ds)&&(_=ym(_,h.pendingProps,ns),_!==null?(h.stateNode=_,hs=h,ds=null,u=!0):u=!1),u||tt(h)),null;case 13:return Iv(u,h,_);case 4:return oe(h,h.stateNode.containerInfo),b=h.pendingProps,u===null?h.child=el(h,null,b,_):rs(u,h,b,_),h.child;case 11:return Ah(u,h,h.type,h.pendingProps,_);case 7:return rs(u,h,h.pendingProps,_),h.child;case 8:return rs(u,h,h.pendingProps.children,_),h.child;case 12:return rs(u,h,h.pendingProps.children,_),h.child;case 10:return b=h.pendingProps,Do(h,h.type,b.value),rs(u,h,b.children,_),h.child;case 9:return R=h.type._context,b=h.pendingProps.children,Uo(h),R=os(R),b=b(R),h.flags|=1,rs(u,h,b,_),h.child;case 14:return wv(u,h,h.type,h.pendingProps,_);case 15:return Bv(u,h,h.type,h.pendingProps,_);case 19:return Fv(u,h,_);case 22:return Dv(u,h,_);case 24:return Uo(h),b=os(li),u===null?(R=Ip(),R===null&&(R=Xn,U=Lo(),R.pooledCache=U,U.refCount++,U!==null&&(R.pooledCacheLanes|=_),R=U),h.memoizedState={parent:b,cache:R},at(h),Do(h,li,R)):((u.lanes&_)!==0&&(At(u,h),lt(h,null,null,_),Fe()),R=u.memoizedState,U=h.memoizedState,R.parent!==b?(R={parent:b,cache:b},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),Do(h,li,b)):(b=U.cache,Do(h,li,b),b!==R.cache&&El(h,[li],_,!0))),rs(u,h,h.pendingProps.children,_),h.child;case 29:throw h.pendingProps}throw Error(s(156,h.tag))}function Do(u,h,_){Ls?(w(co,h._currentValue),h._currentValue=_):(w(co,h._currentValue2),h._currentValue2=_)}function jr(u){var h=co.current;Ls?u._currentValue=h:u._currentValue2=h,A(co)}function Fu(u,h,_){for(;u!==null;){var b=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),u===_)break;u=u.return}}function El(u,h,_,b){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var U=R.dependencies;if(U!==null){var q=R.child;U=U.firstContext;e:for(;U!==null;){var le=U;U=R;for(var Me=0;Me<h.length;Me++)if(le.context===h[Me]){U.lanes|=_,le=U.alternate,le!==null&&(le.lanes|=_),Fu(U.return,_,u),b||(q=null);break e}U=le.next}}else if(R.tag===18){if(q=R.return,q===null)throw Error(s(341));q.lanes|=_,U=q.alternate,U!==null&&(U.lanes|=_),Fu(q,_,u),q=null}else q=R.child;if(q!==null)q.return=R;else for(q=R;q!==null;){if(q===u){q=null;break}if(R=q.sibling,R!==null){R.return=q.return,q=R;break}q=q.return}R=q}}function Hu(u,h,_,b){u=null;for(var R=h,U=!1;R!==null;){if(!U){if((R.flags&524288)!==0)U=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var q=R.alternate;if(q===null)throw Error(s(387));if(q=q.memoizedProps,q!==null){var le=R.type;Zs(R.pendingProps.value,q.value)||(u!==null?u.push(le):u=[le])}}else if(R===Ol.current){if(q=R.alternate,q===null)throw Error(s(387));q.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(Za):u=[Za])}R=R.return}u!==null&&El(h,u,_,b),h.flags|=262144}function zu(u){for(u=u.firstContext;u!==null;){var h=u.context;if(!Zs(Ls?h._currentValue:h._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function Uo(u){ir=u,pa=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function os(u){return Op(ir,u)}function Gu(u,h){return ir===null&&Uo(u),Op(u,h)}function Op(u,h){var _=Ls?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:_,next:null},pa===null){if(u===null)throw Error(s(308));pa=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else pa=pa.next=h;return _}function Lo(){return{controller:new Jc,data:new Map,refCount:0}}function Vu(u){u.refCount--,u.refCount===0&&O0(I0,function(){u.controller.abort()})}function Ip(){var u=Mr.current;return u!==null?u:Xn.pooledCache}function bh(u,h){h===null?w(Mr,Mr.current):w(Mr,h.pool)}function Pp(){var u=Ip();return u===null?null:{parent:Ls?li._currentValue:li._currentValue2,pool:u}}function Xs(u){u.flags|=4}function Sc(u,h){if(u!==null&&u.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(u=h.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function Tl(u,h,_,b){if(Xi)for(_=h.child;_!==null;){if(_.tag===5||_.tag===6)lf(u,_.stateNode);else if(!(_.tag===4||$n&&_.tag===27)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===h)break;for(;_.sibling===null;){if(_.return===null||_.return===h)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else if(Ua)for(var R=h.child;R!==null;){if(R.tag===5){var U=R.stateNode;_&&b&&(U=pm(U,R.type,R.memoizedProps)),lf(u,U)}else if(R.tag===6)U=R.stateNode,_&&b&&(U=mm(U,R.memoizedProps)),lf(u,U);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)U=R.child,U!==null&&(U.return=R),Tl(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function zv(u,h,_,b){if(Ua)for(var R=h.child;R!==null;){if(R.tag===5){var U=R.stateNode;_&&b&&(U=pm(U,R.type,R.memoizedProps)),dm(u,U)}else if(R.tag===6)U=R.stateNode,_&&b&&(U=mm(U,R.memoizedProps)),dm(u,U);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)U=R.child,U!==null&&(U.return=R),zv(u,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function ku(u,h){if(Ua&&Sc(u,h)){u=h.stateNode;var _=u.containerInfo,b=cf();zv(b,h,!1,!1),u.pendingChildren=b,Xs(h),qh(_,b)}}function Eh(u,h,_,b){if(Xi)u.memoizedProps!==b&&Xs(h);else if(Ua){var R=u.stateNode,U=u.memoizedProps;if((u=Sc(u,h))||U!==b){var q=ji.current;U=Hc(R,_,U,b,!u,null),U===R?h.stateNode=R:(no(U,_,b,q)&&Xs(h),h.stateNode=U,u?Tl(U,h,!1,!1):Xs(h))}else h.stateNode=R}}function Th(u,h,_){if(am(h,_)){if(u.flags|=16777216,!jh(h,_))if(Ho())u.flags|=8192;else throw Zo=yf,vf}else u.flags&=-16777217}function Ch(u,h){if(C0(h)){if(u.flags|=16777216,!Bl(h))if(Ho())u.flags|=8192;else throw Zo=yf,vf}else u.flags&=-16777217}function Mc(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?L():536870912,u.lanes|=h,Tr|=h)}function bc(u,h){if(!Dn)switch(u.tailMode){case"hidden":h=u.tail;for(var _=null;h!==null;)h.alternate!==null&&(_=h),h=h.sibling;_===null?u.tail=null:_.sibling=null;break;case"collapsed":_=u.tail;for(var b=null;_!==null;)_.alternate!==null&&(b=_),_=_.sibling;b===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:b.sibling=null}}function pi(u){var h=u.alternate!==null&&u.alternate.child===u.child,_=0,b=0;if(h)for(var R=u.child;R!==null;)_|=R.lanes|R.childLanes,b|=R.subtreeFlags&31457280,b|=R.flags&31457280,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)_|=R.lanes|R.childLanes,b|=R.subtreeFlags,b|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=b,u.childLanes=_,h}function Gv(u,h,_){var b=h.pendingProps;switch(Ce(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(h),null;case 1:return pi(h),null;case 3:return _=h.stateNode,b=null,u!==null&&(b=u.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),jr(li),Ne(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(u===null||u.child===null)&&(Pt(h)?Xs(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Na!==null&&(Wu(Na),Na=null))),ku(u,h),pi(h),null;case 26:if(la){_=h.type;var R=h.memoizedState;return u===null?(Xs(h),R!==null?(pi(h),Ch(h,R)):(pi(h),Th(h,_,b))):R?R!==u.memoizedState?(Xs(h),pi(h),Ch(h,R)):(pi(h),h.flags&=-16777217):(Xi?u.memoizedProps!==b&&Xs(h):Eh(u,h,_,b),pi(h),Th(h,_,b)),null}case 27:if($n){if($e(h),_=_r.current,R=h.type,u!==null&&h.stateNode!=null)Xi?u.memoizedProps!==b&&Xs(h):Eh(u,h,R,b);else{if(!b){if(h.stateNode===null)throw Error(s(166));return pi(h),null}u=ji.current,Pt(h)?Dt(h,u):(u=Qa(R,b,_,u,!0),h.stateNode=u,Xs(h))}return pi(h),null}case 5:if($e(h),_=h.type,u!==null&&h.stateNode!=null)Eh(u,h,_,b);else{if(!b){if(h.stateNode===null)throw Error(s(166));return pi(h),null}u=ji.current,Pt(h)?Dt(h,u):(R=sm(_,b,_r.current,u,h),Tl(R,h,!1,!1),h.stateNode=R,no(R,_,b,u)&&Xs(h))}return pi(h),Th(h,h.type,h.pendingProps),null;case 6:if(u&&h.stateNode!=null)_=u.memoizedProps,Xi?_!==b&&Xs(h):Ua&&(_!==b?(h.stateNode=qn(b,_r.current,ji.current,h),Xs(h)):h.stateNode=u.stateNode);else{if(typeof b!="string"&&h.stateNode===null)throw Error(s(166));if(u=_r.current,_=ji.current,Pt(h)){if(!fs)throw Error(s(176));if(u=h.stateNode,_=h.memoizedProps,b=null,R=hs,R!==null)switch(R.tag){case 27:case 5:b=R.memoizedProps}_m(u,_,h,b)||tt(h)}else h.stateNode=qn(b,u,_,h)}return pi(h),null;case 13:if(b=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=Pt(h),b!==null&&b.dehydrated!==null){if(u===null){if(!R)throw Error(s(318));if(!fs)throw Error(s(344));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(s(317));A0(R,h)}else ot(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;pi(h),R=!1}else Na!==null&&(Wu(Na),Na=null),R=!0;if(!R)return h.flags&256?(Yt(h),h):(Yt(h),null)}if(Yt(h),(h.flags&128)!==0)return h.lanes=_,h;if(_=b!==null,u=u!==null&&u.memoizedState!==null,_){b=h.child,R=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(R=b.alternate.memoizedState.cachePool.pool);var U=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(U=b.memoizedState.cachePool.pool),U!==R&&(b.flags|=2048)}return _!==u&&_&&(h.child.flags|=8192),Mc(h,h.updateQueue),pi(h),null;case 4:return Ne(),ku(u,h),u===null&&wi(h.stateNode.containerInfo),pi(h),null;case 10:return jr(h.type),pi(h),null;case 19:if(A(Yi),R=h.memoizedState,R===null)return pi(h),null;if(b=(h.flags&128)!==0,U=R.rendering,U===null)if(b)bc(R,!1);else{if(ni!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(U=ks(u),U!==null){for(h.flags|=128,bc(R,!1),u=U.updateQueue,h.updateQueue=u,Mc(h,u),h.subtreeFlags=0,u=_,_=h.child;_!==null;)$u(_,u),_=_.sibling;return w(Yi,Yi.current&1|2),h.child}u=u.sibling}R.tail!==null&&La()>Zc&&(h.flags|=128,b=!0,bc(R,!1),h.lanes=4194304)}else{if(!b)if(u=ks(U),u!==null){if(h.flags|=128,b=!0,u=u.updateQueue,h.updateQueue=u,Mc(h,u),bc(R,!0),R.tail===null&&R.tailMode==="hidden"&&!U.alternate&&!Dn)return pi(h),null}else 2*La()-R.renderingStartTime>Zc&&_!==536870912&&(h.flags|=128,b=!0,bc(R,!1),h.lanes=4194304);R.isBackwards?(U.sibling=h.child,h.child=U):(u=R.last,u!==null?u.sibling=U:h.child=U,R.last=U)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=La(),h.sibling=null,u=Yi.current,w(Yi,b?u&1|2:u&1),h):(pi(h),null);case 22:case 23:return Yt(h),Ci(),b=h.memoizedState!==null,u!==null?u.memoizedState!==null!==b&&(h.flags|=8192):b&&(h.flags|=8192),b?(_&536870912)!==0&&(h.flags&128)===0&&(pi(h),h.subtreeFlags&6&&(h.flags|=8192)):pi(h),_=h.updateQueue,_!==null&&Mc(h,_.retryQueue),_=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==_&&(h.flags|=2048),u!==null&&A(Mr),null;case 24:return _=null,u!==null&&(_=u.memoizedState.cache),h.memoizedState.cache!==_&&(h.flags|=2048),jr(li),pi(h),null;case 25:return null}throw Error(s(156,h.tag))}function uA(u,h){switch(Ce(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return jr(li),Ne(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return $e(h),null;case 13:if(Yt(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(s(340));ot()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return A(Yi),null;case 4:return Ne(),null;case 10:return jr(h.type),null;case 22:case 23:return Yt(h),Ci(),u!==null&&A(Mr),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return jr(li),null;case 25:return null;default:return null}}function Vv(u,h){switch(Ce(h),h.tag){case 3:jr(li),Ne();break;case 26:case 27:case 5:$e(h);break;case 4:Ne();break;case 13:Yt(h);break;case 19:A(Yi);break;case 10:jr(h.type);break;case 22:case 23:Yt(h),Ci(),u!==null&&A(Mr);break;case 24:jr(li)}}function Xu(u,h){try{var _=h.updateQueue,b=_!==null?_.lastEffect:null;if(b!==null){var R=b.next;_=R;do{if((_.tag&u)===u){b=void 0;var U=_.create,q=_.inst;b=U(),q.destroy=b}_=_.next}while(_!==R)}}catch(le){Vn(h,h.return,le)}}function No(u,h,_){try{var b=h.updateQueue,R=b!==null?b.lastEffect:null;if(R!==null){var U=R.next;b=U;do{if((b.tag&u)===u){var q=b.inst,le=q.destroy;if(le!==void 0){q.destroy=void 0,R=h;var Me=_;try{le()}catch(qe){Vn(R,Me,qe)}}}b=b.next}while(b!==U)}}catch(qe){Vn(h,h.return,qe)}}function kv(u){var h=u.updateQueue;if(h!==null){var _=u.stateNode;try{be(h,_)}catch(b){Vn(u,u.return,b)}}}function js(u,h,_){_.props=kr(u.type,u.memoizedProps),_.state=u.memoizedState;try{_.componentWillUnmount()}catch(b){Vn(u,h,b)}}function Ja(u,h){try{var _=u.ref;if(_!==null){var b=u.stateNode;switch(u.tag){case 26:case 27:case 5:var R=Ic(b);break;default:R=b}typeof _=="function"?u.refCleanup=_(R):_.current=R}}catch(U){Vn(u,h,U)}}function Ys(u,h){var _=u.ref,b=u.refCleanup;if(_!==null)if(typeof b=="function")try{b()}catch(R){Vn(u,h,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(R){Vn(u,h,R)}else _.current=null}function Fp(u){var h=u.type,_=u.memoizedProps,b=u.stateNode;try{pA(b,h,_,u)}catch(R){Vn(u,u.return,R)}}function Hp(u,h,_){try{r0(u.stateNode,u.type,_,h,u)}catch(b){Vn(u,u.return,b)}}function zp(u){return u.tag===5||u.tag===3||(la?u.tag===26:!1)||($n?u.tag===27:!1)||u.tag===4}function ju(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||zp(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!$n||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Gp(u,h,_){var b=u.tag;if(b===5||b===6)u=u.stateNode,h?l0(_,u,h):um(_,u);else if(!(b===4||$n&&b===27)&&(u=u.child,u!==null))for(Gp(u,h,_),u=u.sibling;u!==null;)Gp(u,h,_),u=u.sibling}function Yr(u,h,_){var b=u.tag;if(b===5||b===6)u=u.stateNode,h?o0(_,u,h):s0(_,u);else if(!(b===4||$n&&b===27)&&(u=u.child,u!==null))for(Yr(u,h,_),u=u.sibling;u!==null;)Yr(u,h,_),u=u.sibling}function Rh(u,h,_){u=u.containerInfo;try{zc(u,_)}catch(b){Vn(h,h.return,b)}}function Yu(u,h){for(kh(u.containerInfo),ln=h;ln!==null;)if(u=ln,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,ln=h;else for(;ln!==null;){u=ln;var _=u.alternate;switch(h=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&_!==null){h=void 0;var b=u,R=_.memoizedProps;_=_.memoizedState;var U=b.stateNode;try{var q=kr(b.type,R,b.elementType===b.type);h=U.getSnapshotBeforeUpdate(q,_),U.__reactInternalSnapshotBeforeUpdate=h}catch(le){Vn(b,b.return,le)}}break;case 3:(h&1024)!==0&&Xi&&d0(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(s(163))}if(h=u.sibling,h!==null){h.return=u.return,ln=h;break}ln=u.return}return q=Sn,Sn=!1,q}function wh(u,h,_){var b=_.flags;switch(_.tag){case 0:case 11:case 15:Jr(u,_),b&4&&Xu(5,_);break;case 1:if(Jr(u,_),b&4)if(u=_.stateNode,h===null)try{u.componentDidMount()}catch(le){Vn(_,_.return,le)}else{var R=kr(_.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(R,h,u.__reactInternalSnapshotBeforeUpdate)}catch(le){Vn(_,_.return,le)}}b&64&&kv(_),b&512&&Ja(_,_.return);break;case 3:if(Jr(u,_),b&64&&(b=_.updateQueue,b!==null)){if(u=null,_.child!==null)switch(_.child.tag){case 27:case 5:u=Ic(_.child.stateNode);break;case 1:u=_.child.stateNode}try{be(b,u)}catch(le){Vn(_,_.return,le)}}break;case 26:if(la){Jr(u,_),b&512&&Ja(_,_.return);break}case 27:case 5:Jr(u,_),h===null&&b&4&&Fp(_),b&512&&Ja(_,_.return);break;case 12:Jr(u,_);break;case 13:Jr(u,_),b&4&&Bh(u,_);break;case 22:if(R=_.memoizedState!==null||br,!R){h=h!==null&&h.memoizedState!==null||Si;var U=br,q=Si;br=R,(Si=h)&&!q?Kr(u,_,(_.subtreeFlags&8772)!==0):Jr(u,_),br=U,Si=q}b&512&&(_.memoizedProps.mode==="manual"?Ja(_,_.return):Ys(_,_.return));break;default:Jr(u,_)}}function Vp(u){var h=u.alternate;h!==null&&(u.alternate=null,Vp(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&dA(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function ls(u,h,_){for(_=_.child;_!==null;)Oo(u,h,_),_=_.sibling}function Oo(u,h,_){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(Di,_)}catch{}switch(_.tag){case 26:if(la){Si||Ys(_,h),ls(u,h,_),_.memoizedState?wl(_.memoizedState):_.stateNode&&Gc(_.stateNode);break}case 27:if($n){Si||Ys(_,h);var b=Xt,R=mn;Xt=_.stateNode,ls(u,h,_),Jo(_.stateNode),Xt=b,mn=R;break}case 5:Si||Ys(_,h);case 6:if(Xi){if(b=Xt,R=mn,Xt=null,ls(u,h,_),Xt=b,mn=R,Xt!==null)if(mn)try{c0(Xt,_.stateNode)}catch(U){Vn(_,h,U)}else try{fm(Xt,_.stateNode)}catch(U){Vn(_,h,U)}}else ls(u,h,_);break;case 18:Xi&&Xt!==null&&(mn?uf(Xt,_.stateNode):M0(Xt,_.stateNode));break;case 4:Xi?(b=Xt,R=mn,Xt=_.stateNode.containerInfo,mn=!0,ls(u,h,_),Xt=b,mn=R):(Ua&&Rh(_.stateNode,_,cf()),ls(u,h,_));break;case 0:case 11:case 14:case 15:Si||No(2,_,h),Si||No(4,_,h),ls(u,h,_);break;case 1:Si||(Ys(_,h),b=_.stateNode,typeof b.componentWillUnmount=="function"&&js(_,h,b)),ls(u,h,_);break;case 21:ls(u,h,_);break;case 22:Si||Ys(_,h),Si=(b=Si)||_.memoizedState!==null,ls(u,h,_),Si=b;break;default:ls(u,h,_)}}function Bh(u,h){if(fs&&h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{yA(u)}catch(_){Vn(h,h.return,_)}}function Xv(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new kn),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new kn),h;default:throw Error(s(435,u.tag))}}function qr(u,h){var _=Xv(u);h.forEach(function(b){var R=Vo.bind(null,u,b);_.has(b)||(_.add(b),b.then(R,R))})}function Ds(u,h){var _=h.deletions;if(_!==null)for(var b=0;b<_.length;b++){var R=_[b],U=u,q=h;if(Xi){var le=q;e:for(;le!==null;){switch(le.tag){case 27:case 5:Xt=le.stateNode,mn=!1;break e;case 3:Xt=le.stateNode.containerInfo,mn=!0;break e;case 4:Xt=le.stateNode.containerInfo,mn=!0;break e}le=le.return}if(Xt===null)throw Error(s(160));Oo(U,q,R),Xt=null,mn=!1}else Oo(U,q,R);U=R.alternate,U!==null&&(U.return=null),R.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)kp(h,u),h=h.sibling}function kp(u,h){var _=u.alternate,b=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Ds(h,u),qs(u),b&4&&(No(3,u,u.return),Xu(3,u),No(5,u,u.return));break;case 1:Ds(h,u),qs(u),b&512&&(Si||_===null||Ys(_,_.return)),b&64&&br&&(u=u.updateQueue,u!==null&&(b=u.callbacks,b!==null&&(_=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=_===null?b:_.concat(b))));break;case 26:if(la){var R=gi;Ds(h,u),qs(u),b&512&&(Si||_===null||Ys(_,_.return)),b&4&&(b=_!==null?_.memoizedState:null,h=u.memoizedState,_===null?h===null?u.stateNode===null?u.stateNode=hf(R,u.type,u.memoizedProps,u):df(R,u.type,u.stateNode):u.stateNode=E0(R,h,u.memoizedProps):b!==h?(b===null?_.stateNode!==null&&Gc(_.stateNode):wl(b),h===null?df(R,u.type,u.stateNode):E0(R,h,u.memoizedProps)):h===null&&u.stateNode!==null&&Hp(u,u.memoizedProps,_.memoizedProps));break}case 27:if($n&&b&4&&u.alternate===null){R=u.stateNode;var U=u.memoizedProps;try{qo(R),w0(u.type,U,R,u)}catch(ht){Vn(u,u.return,ht)}}case 5:if(Ds(h,u),qs(u),b&512&&(Si||_===null||Ys(_,_.return)),Xi){if(u.flags&32){h=u.stateNode;try{hm(h)}catch(ht){Vn(u,u.return,ht)}}b&4&&u.stateNode!=null&&(h=u.memoizedProps,Hp(u,h,_!==null?_.memoizedProps:h)),b&1024&&(bm=!0)}break;case 6:if(Ds(h,u),qs(u),b&4&&Xi){if(u.stateNode===null)throw Error(s(162));b=u.memoizedProps,_=_!==null?_.memoizedProps:b,h=u.stateNode;try{a0(h,_,b)}catch(ht){Vn(u,u.return,ht)}}break;case 3:if(la?(T0(),R=gi,gi=$h(h.containerInfo),Ds(h,u),gi=R):Ds(h,u),qs(u),b&4){if(Xi&&fs&&_!==null&&_.memoizedState.isDehydrated)try{vA(h.containerInfo)}catch(ht){Vn(u,u.return,ht)}if(Ua){b=h.containerInfo,_=h.pendingChildren;try{zc(b,_)}catch(ht){Vn(u,u.return,ht)}}}bm&&(bm=!1,jv(u));break;case 4:la?(_=gi,gi=$h(u.stateNode.containerInfo),Ds(h,u),qs(u),gi=_):(Ds(h,u),qs(u)),b&4&&Ua&&Rh(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:Ds(h,u),qs(u);break;case 13:Ds(h,u),qs(u),u.child.flags&8192&&u.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(Ps=La()),b&4&&(b=u.updateQueue,b!==null&&(u.updateQueue=null,qr(u,b)));break;case 22:b&512&&(Si||_===null||Ys(_,_.return)),R=u.memoizedState!==null;var q=_!==null&&_.memoizedState!==null,le=br,Me=Si;if(br=le||R,Si=Me||q,Ds(h,u),Si=Me,br=le,qs(u),h=u.stateNode,h._current=u,h._visibility&=-3,h._visibility|=h._pendingVisibility&2,b&8192&&(h._visibility=R?h._visibility&-2:h._visibility|1,R&&(h=br||Si,_===null||q||h||Ec(u)),Xi&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(_=null,Xi)for(h=u;;){if(h.tag===5||la&&h.tag===26||$n&&h.tag===27){if(_===null){q=_=h;try{U=q.stateNode,R?u0(U):h0(q.stateNode,q.memoizedProps)}catch(ht){Vn(q,q.return,ht)}}}else if(h.tag===6){if(_===null){q=h;try{var qe=q.stateNode;R?f0(qe):mA(qe,q.memoizedProps)}catch(ht){Vn(q,q.return,ht)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;_===h&&(_=null),h=h.return}_===h&&(_=null),h.sibling.return=h.return,h=h.sibling}}b&4&&(b=u.updateQueue,b!==null&&(_=b.retryQueue,_!==null&&(b.retryQueue=null,qr(u,_))));break;case 19:Ds(h,u),qs(u),b&4&&(b=u.updateQueue,b!==null&&(u.updateQueue=null,qr(u,b)));break;case 21:break;default:Ds(h,u),qs(u)}}function qs(u){var h=u.flags;if(h&2){try{if(Xi&&(!$n||u.tag!==27)){e:{for(var _=u.return;_!==null;){if(zp(_)){var b=_;break e}_=_.return}throw Error(s(160))}switch(b.tag){case 27:if($n){var R=b.stateNode,U=ju(u);Yr(u,U,R);break}case 5:var q=b.stateNode;b.flags&32&&(hm(q),b.flags&=-33);var le=ju(u);Yr(u,le,q);break;case 3:case 4:var Me=b.stateNode.containerInfo,qe=ju(u);Gp(u,qe,Me);break;default:throw Error(s(161))}}}catch(ht){Vn(u,u.return,ht)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function jv(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;jv(h),h.tag===5&&h.flags&1024&&Yh(h.stateNode),u=u.sibling}}function Jr(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)wh(u,h.alternate,h),h=h.sibling}function Ec(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:No(4,h,h.return),Ec(h);break;case 1:Ys(h,h.return);var _=h.stateNode;typeof _.componentWillUnmount=="function"&&js(h,h.return,_),Ec(h);break;case 26:case 27:case 5:Ys(h,h.return),Ec(h);break;case 22:Ys(h,h.return),h.memoizedState===null&&Ec(h);break;default:Ec(h)}u=u.sibling}}function Kr(u,h,_){for(_=_&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var b=h.alternate,R=u,U=h,q=U.flags;switch(U.tag){case 0:case 11:case 15:Kr(R,U,_),Xu(4,U);break;case 1:if(Kr(R,U,_),b=U,R=b.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(qe){Vn(b,b.return,qe)}if(b=U,R=b.updateQueue,R!==null){var le=b.stateNode;try{var Me=R.shared.hiddenCallbacks;if(Me!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Me.length;R++)ue(Me[R],le)}catch(qe){Vn(b,b.return,qe)}}_&&q&64&&kv(U),Ja(U,U.return);break;case 26:case 27:case 5:Kr(R,U,_),_&&b===null&&q&4&&Fp(U),Ja(U,U.return);break;case 12:Kr(R,U,_);break;case 13:Kr(R,U,_),_&&q&4&&Bh(R,U);break;case 22:U.memoizedState===null&&Kr(R,U,_),Ja(U,U.return);break;default:Kr(R,U,_)}h=h.sibling}}function Dh(u,h){var _=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==_&&(u!=null&&u.refCount++,_!=null&&Vu(_))}function qu(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Vu(u))}function $i(u,h,_,b){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Xp(u,h,_,b),h=h.sibling}function Xp(u,h,_,b){var R=h.flags;switch(h.tag){case 0:case 11:case 15:$i(u,h,_,b),R&2048&&Xu(9,h);break;case 3:$i(u,h,_,b),R&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Vu(u)));break;case 12:if(R&2048){$i(u,h,_,b),u=h.stateNode;try{var U=h.memoizedProps,q=U.id,le=U.onPostCommit;typeof le=="function"&&le(q,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Me){Vn(h,h.return,Me)}}else $i(u,h,_,b);break;case 23:break;case 22:U=h.stateNode,h.memoizedState!==null?U._visibility&4?$i(u,h,_,b):ys(u,h):U._visibility&4?$i(u,h,_,b):(U._visibility|=4,cs(u,h,_,b,(h.subtreeFlags&10256)!==0)),R&2048&&Dh(h.alternate,h);break;case 24:$i(u,h,_,b),R&2048&&qu(h.alternate,h);break;default:$i(u,h,_,b)}}function cs(u,h,_,b,R){for(R=R&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var U=u,q=h,le=_,Me=b,qe=q.flags;switch(q.tag){case 0:case 11:case 15:cs(U,q,le,Me,R),Xu(8,q);break;case 23:break;case 22:var ht=q.stateNode;q.memoizedState!==null?ht._visibility&4?cs(U,q,le,Me,R):ys(U,q):(ht._visibility|=4,cs(U,q,le,Me,R)),R&&qe&2048&&Dh(q.alternate,q);break;case 24:cs(U,q,le,Me,R),R&&qe&2048&&qu(q.alternate,q);break;default:cs(U,q,le,Me,R)}h=h.sibling}}function ys(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var _=u,b=h,R=b.flags;switch(b.tag){case 22:ys(_,b),R&2048&&Dh(b.alternate,b);break;case 24:ys(_,b),R&2048&&qu(b.alternate,b);break;default:ys(_,b)}h=h.sibling}}function Ca(u){if(u.subtreeFlags&ma)for(u=u.child;u!==null;)Uh(u),u=u.sibling}function Uh(u){switch(u.tag){case 26:Ca(u),u.flags&ma&&(u.memoizedState!==null?R0(gi,u.memoizedState,u.memoizedProps):Ns(u.type,u.memoizedProps));break;case 5:Ca(u),u.flags&ma&&Ns(u.type,u.memoizedProps);break;case 3:case 4:if(la){var h=gi;gi=$h(u.stateNode.containerInfo),Ca(u),gi=h}else Ca(u);break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=ma,ma=16777216,Ca(u),ma=h):Ca(u));break;default:Ca(u)}}function Ju(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Io(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var _=0;_<h.length;_++){var b=h[_];ln=b,jp(b,u)}Ju(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Lh(u),u=u.sibling}function Lh(u){switch(u.tag){case 0:case 11:case 15:Io(u),u.flags&2048&&No(9,u,u.return);break;case 3:Io(u);break;case 12:Io(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&4&&(u.return===null||u.return.tag!==13)?(h._visibility&=-5,Wr(u)):Io(u);break;default:Io(u)}}function Wr(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var _=0;_<h.length;_++){var b=h[_];ln=b,jp(b,u)}Ju(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:No(8,h,h.return),Wr(h);break;case 22:_=h.stateNode,_._visibility&4&&(_._visibility&=-5,Wr(h));break;default:Wr(h)}u=u.sibling}}function jp(u,h){for(;ln!==null;){var _=ln;switch(_.tag){case 0:case 11:case 15:No(8,_,h);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var b=_.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Vu(_.memoizedState.cache)}if(b=_.child,b!==null)b.return=_,ln=b;else e:for(_=u;ln!==null;){b=ln;var R=b.sibling,U=b.return;if(Vp(b),b===_){ln=null;break e}if(R!==null){R.return=U,ln=R;break e}ln=U}}}function Tc(u){var h=Zv(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(s(364));return h}if(u=lm(u),u===null)throw Error(s(362));return u.stateNode.current}function Po(u,h){var _=u.tag;switch(h.$$typeof){case Wc:if(u.type===h.value)return!0;break;case Pa:e:{for(h=h.value,u=[u,0],_=0;_<u.length;){var b=u[_++],R=b.tag,U=u[_++],q=h[U];if(R!==5&&R!==26&&R!==27||!Fc(b)){for(;q!=null&&Po(b,q);)U++,q=h[U];if(U===h.length){h=!0;break e}else for(b=b.child;b!==null;)u.push(b,U),b=b.sibling}}h=!1}return h;case hi:if((_===5||_===26||_===27)&&t0(u.stateNode,h.value))return!0;break;case Er:if((_===5||_===6||_===26||_===27)&&(u=e0(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case sr:if((_===5||_===26||_===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Yp(u){switch(u.$$typeof){case Wc:return"<"+(o(u.value)||"Unknown")+">";case Pa:return":has("+(Yp(u)||"")+")";case hi:return'[role="'+u.value+'"]';case Er:return'"'+u.value+'"';case sr:return'[data-testname="'+u.value+'"]';default:throw Error(s(365))}}function Js(u,h){var _=[];u=[u,0];for(var b=0;b<u.length;){var R=u[b++],U=R.tag,q=u[b++],le=h[q];if(U!==5&&U!==26&&U!==27||!Fc(R)){for(;le!=null&&Po(R,le);)q++,le=h[q];if(q===h.length)_.push(R);else for(R=R.child;R!==null;)u.push(R,q),R=R.sibling}}return _}function Ku(u,h){if(!Yo)throw Error(s(363));u=Tc(u),u=Js(u,h),h=[],u=Array.from(u);for(var _=0;_<u.length;){var b=u[_++],R=b.tag;if(R===5||R===26||R===27)Fc(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)u.push(b),b=b.sibling}return h}function Ri(){if((Ln&2)!==0&&bn!==0)return bn&-bn;if(en.T!==null){var u=fa;return u!==0?u:pt()}return Qv()}function qp(){ya===0&&(ya=(bn&536870912)===0||Dn?P():536870912);var u=ha.current;return u!==null&&(u.flags|=32),ya}function es(u,h,_){(u===Xn&&Kn===2||u.cancelPendingCommit!==null)&&(us(u,0),Ks(u,bn,ya,!1)),j(u,_),((Ln&2)===0||u!==Xn)&&(u===Xn&&((Ln&2)===0&&(uo|=_),ni===4&&Ks(u,bn,ya,!1)),We(u))}function Fo(u,h,_){if((Ln&6)!==0)throw Error(s(327));var b=!_&&(h&60)===0&&(h&u.expiredLanes)===0||I(u,h),R=b?Kp(u,h):Oh(u,h,!0),U=b;do{if(R===0){ga&&!b&&Ks(u,h,0,!1);break}else if(R===6)Ks(u,h,0,!Ha);else{if(_=u.current.alternate,U&&!Cc(_)){R=Oh(u,h,!1),U=!1;continue}if(R===2){if(U=h,u.errorRecoveryDisabledLanes&U)var q=0;else q=u.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){h=q;e:{var le=u;R=Xl;var Me=fs&&le.current.memoizedState.isDehydrated;if(Me&&(us(le,q).flags|=256),q=Oh(le,q,!1),q!==2){if(qi&&!Me){le.errorRecoveryDisabledLanes|=U,uo|=U,R=4;break e}U=Mi,Mi=R,U!==null&&Wu(U)}R=q}if(U=!1,R!==2)continue}}if(R===1){us(u,0),Ks(u,h,0,!0);break}e:{switch(b=u,R){case 0:case 1:throw Error(s(345));case 4:if((h&4194176)===h){Ks(b,h,ya,!Ha);break e}break;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(s(329))}if(b.finishedWork=_,b.finishedLanes=h,(h&62914560)===h&&(U=Ps+300-La(),10<U)){if(Ks(b,h,ya,!Ha),O(b,0)!==0)break e;b.timeoutHandle=Hi(Nh.bind(null,b,_,Mi,xf,ud,h,ya,uo,Tr,Ha,2,-0,0),U);break e}Nh(b,_,Mi,xf,ud,h,ya,uo,Tr,Ha,0,-0,0)}}break}while(!0);We(u)}function Wu(u){Mi===null?Mi=u:Mi.push.apply(Mi,u)}function Nh(u,h,_,b,R,U,q,le,Me,qe,ht,Ct,Bt){var cn=h.subtreeFlags;if((cn&8192||(cn&16785408)===16785408)&&(rm(),Uh(h),h=zi(),h!==null)){u.cancelPendingCommit=h(zo.bind(null,u,_,b,R,q,le,Me,1,Ct,Bt)),Ks(u,U,q,!qe);return}zo(u,_,b,R,q,le,Me,ht,Ct,Bt)}function Cc(u){for(var h=u;;){var _=h.tag;if((_===0||_===11||_===15)&&h.flags&16384&&(_=h.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var b=0;b<_.length;b++){var R=_[b],U=R.getSnapshot;R=R.value;try{if(!Zs(U(),R))return!1}catch{return!1}}if(_=h.child,h.subtreeFlags&16384&&_!==null)_.return=h,h=_;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ks(u,h,_,b){h&=~_f,h&=~uo,u.suspendedLanes|=h,u.pingedLanes&=~h,b&&(u.warmLanes|=h),b=u.expirationTimes;for(var R=h;0<R;){var U=31-Os(R),q=1<<U;b[U]=-1,R&=~q}_!==0&&ne(u,_,h)}function Zu(){return(Ln&6)===0?(Z(0),!1):!0}function Rc(){if(Kt!==null){if(Kn===0)var u=Kt.return;else u=Kt,pa=ir=null,st(u),Qo=null,$o=0,u=Kt;for(;u!==null;)Vv(u.alternate,u),u=u.return;Kt=null}}function us(u,h){u.finishedWork=null,u.finishedLanes=0;var _=u.timeoutHandle;_!==Xo&&(u.timeoutHandle=Xo,Xh(_)),_=u.cancelPendingCommit,_!==null&&(u.cancelPendingCommit=null,_()),Rc(),Xn=u,Kt=_=wa(u.current,null),bn=h,Kn=0,xs=null,Ha=!1,ga=I(u,h),qi=!1,Tr=ya=_f=uo=va=ni=0,Mi=Xl=null,ud=!1,(h&8)!==0&&(h|=h&32);var b=u.entangledLanes;if(b!==0)for(u=u.entanglements,b&=h;0<b;){var R=31-Os(b),U=1<<R;h|=u[R],b&=~U}return As=h,K(),_}function aa(u,h){yn=null,en.H=Ai,h===Yc?(h=Ft(),Kn=3):h===vf?(h=Ft(),Kn=4):Kn=h===ld?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,xs=h,Kt===null&&(ni=1,_c(u,ve(h,u.current)))}function Ho(){var u=ha.current;return u===null?!0:(bn&4194176)===bn?ei===null:(bn&62914560)===bn||(bn&536870912)!==0?u===ei:!1}function dr(){var u=en.H;return en.H=Ai,u===null?Ai:u}function pr(){var u=en.A;return en.A=Kc,u}function Zr(){ni=4,Ha||(bn&4194176)!==bn&&ha.current!==null||(ga=!0),(va&134217727)===0&&(uo&134217727)===0||Xn===null||Ks(Xn,bn,ya,!1)}function Oh(u,h,_){var b=Ln;Ln|=2;var R=dr(),U=pr();(Xn!==u||bn!==h)&&(xf=null,us(u,h)),h=!1;var q=ni;e:do try{if(Kn!==0&&Kt!==null){var le=Kt,Me=xs;switch(Kn){case 8:Rc(),q=6;break e;case 3:case 2:case 6:ha.current===null&&(h=!0);var qe=Kn;if(Kn=0,xs=null,Ra(u,le,Me,qe),_&&ga){q=0;break e}break;default:qe=Kn,Kn=0,xs=null,Ra(u,le,Me,qe)}}Jp(),q=ni;break}catch(ht){aa(u,ht)}while(!0);return h&&u.shellSuspendCounter++,pa=ir=null,Ln=b,en.H=R,en.A=U,Kt===null&&(Xn=null,bn=0,K()),q}function Jp(){for(;Kt!==null;)mi(Kt)}function Kp(u,h){var _=Ln;Ln|=2;var b=dr(),R=pr();Xn!==u||bn!==h?(xf=null,Zc=La()+500,us(u,h)):ga=I(u,h);e:do try{if(Kn!==0&&Kt!==null){h=Kt;var U=xs;t:switch(Kn){case 1:Kn=0,xs=null,Ra(u,h,U,1);break;case 2:if(ke(U)){Kn=0,xs=null,In(h);break}h=function(){Kn===2&&Xn===u&&(Kn=7),We(u)},U.then(h,h);break e;case 3:Kn=7;break e;case 4:Kn=5;break e;case 7:ke(U)?(Kn=0,xs=null,In(h)):(Kn=0,xs=null,Ra(u,h,U,7));break;case 5:var q=null;switch(Kt.tag){case 26:q=Kt.memoizedState;case 5:case 27:var le=Kt,Me=le.type,qe=le.pendingProps;if(q?Bl(q):jh(Me,qe)){Kn=0,xs=null;var ht=le.sibling;if(ht!==null)Kt=ht;else{var Ct=le.return;Ct!==null?(Kt=Ct,ra(Ct)):Kt=null}break t}}Kn=0,xs=null,Ra(u,h,U,5);break;case 6:Kn=0,xs=null,Ra(u,h,U,6);break;case 8:Rc(),ni=6;break e;default:throw Error(s(462))}}Us();break}catch(Bt){aa(u,Bt)}while(!0);return pa=ir=null,en.H=b,en.A=R,Ln=_,Kt!==null?0:(Xn=null,bn=0,K(),ni)}function Us(){for(;Kt!==null&&!U0();)mi(Kt)}function mi(u){var h=Hv(u.alternate,u,As);u.memoizedProps=u.pendingProps,h===null?ra(u):Kt=h}function In(u){var h=u,_=h.alternate;switch(h.tag){case 15:case 0:h=Lv(_,h,h.pendingProps,h.type,void 0,bn);break;case 11:h=Lv(_,h,h.pendingProps,h.type.render,h.ref,bn);break;case 5:st(h);default:Vv(_,h),h=Kt=$u(h,As),h=Hv(_,h,As)}u.memoizedProps=u.pendingProps,h===null?ra(u):Kt=h}function Ra(u,h,_,b){pa=ir=null,st(h),Qo=null,$o=0;var R=h.return;try{if(lA(u,R,h,_,bn)){ni=1,_c(u,ve(_,u.current)),Kt=null;return}}catch(U){if(R!==null)throw Kt=R,U;ni=1,_c(u,ve(_,u.current)),Kt=null;return}h.flags&32768?(Dn||b===1?u=!0:ga||(bn&536870912)!==0?u=!1:(Ha=u=!0,(b===2||b===3||b===6)&&(b=ha.current,b!==null&&b.tag===13&&(b.flags|=16384))),Ih(h,u)):ra(h)}function ra(u){var h=u;do{if((h.flags&32768)!==0){Ih(h,Ha);return}u=h.return;var _=Gv(h.alternate,h,As);if(_!==null){Kt=_;return}if(h=h.sibling,h!==null){Kt=h;return}Kt=h=u}while(h!==null);ni===0&&(ni=5)}function Ih(u,h){do{var _=uA(u.alternate,u);if(_!==null){_.flags&=32767,Kt=_;return}if(_=u.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!h&&(u=u.sibling,u!==null)){Kt=u;return}Kt=u=_}while(u!==null);ni=6,Kt=null}function zo(u,h,_,b,R,U,q,le,Me,qe){var ht=en.T,Ct=io();try{_s(2),en.T=null,Yv(u,h,_,b,Ct,R,U,q,le,Me,qe)}finally{en.T=ht,_s(Ct)}}function Yv(u,h,_,b,R,U,q,le){do Ka();while(Cr!==null);if((Ln&6)!==0)throw Error(s(327));var Me=u.finishedWork;if(b=u.finishedLanes,Me===null)return null;if(u.finishedWork=null,u.finishedLanes=0,Me===u.current)throw Error(s(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var qe=Me.lanes|Me.childLanes;if(qe|=tr,ce(u,b,qe,U,q,le),u===Xn&&(Kt=Xn=null,bn=0),(Me.subtreeFlags&10256)===0&&(Me.flags&10256)===0||ar||(ar=!0,sl=qe,fd=_,$r(sd,function(){return Ka(),null})),_=(Me.flags&15990)!==0,(Me.subtreeFlags&15990)!==0||_?(_=en.T,en.T=null,U=io(),_s(2),q=Ln,Ln|=4,Yu(u,Me),kp(Me,u),Wv(u.containerInfo),u.current=Me,wh(u,Me.alternate,Me),nd(),Ln=q,_s(U),en.T=_):u.current=Me,ar?(ar=!1,Cr=u,jl=b):Wp(u,qe),qe=u.pendingLanes,qe===0&&(il=null),H(Me.stateNode),We(u),h!==null)for(R=u.onRecoverableError,Me=0;Me<h.length;Me++)qe=h[Me],R(qe.value,{componentStack:qe.stack});return(jl&3)!==0&&Ka(),qe=u.pendingLanes,(b&4194218)!==0&&(qe&42)!==0?u===hd?Qc++:(Qc=0,hd=u):Qc=0,Z(0),null}function Wp(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,Vu(h)))}function Ka(){if(Cr!==null){var u=Cr,h=sl;sl=0;var _=_e(jl),b=32>_?32:_;_=en.T;var R=io();try{if(_s(b),en.T=null,Cr===null)var U=!1;else{b=fd,fd=null;var q=Cr,le=jl;if(Cr=null,jl=0,(Ln&6)!==0)throw Error(s(331));var Me=Ln;if(Ln|=4,Lh(q.current),Xp(q,q.current,le,b),Ln=Me,Z(0,!1),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(Di,q)}catch{}U=!0}return U}finally{_s(R),en.T=_,Wp(u,h)}}return!1}function wc(u,h,_){h=ve(_,h),h=Ac(u.stateNode,h,2),u=St(u,h,2),u!==null&&(j(u,2),We(u))}function Vn(u,h,_){if(u.tag===3)wc(u,u,_);else for(;h!==null;){if(h.tag===3){wc(h,u,_);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(il===null||!il.has(b))){u=ve(_,u),_=wp(2),b=St(h,_,2),b!==null&&(Rv(_,b,h,u),j(b,2),We(b));break}}h=h.return}}function Cl(u,h,_){var b=u.pingCache;if(b===null){b=u.pingCache=new Fa;var R=new Set;b.set(h,R)}else R=b.get(h),R===void 0&&(R=new Set,b.set(h,R));R.has(_)||(qi=!0,R.add(_),u=Zp.bind(null,u,h,_),h.then(u,u))}function Zp(u,h,_){var b=u.pingCache;b!==null&&b.delete(h),u.pingedLanes|=u.suspendedLanes&_,u.warmLanes&=~_,Xn===u&&(bn&_)===_&&(ni===4||ni===3&&(bn&62914560)===bn&&300>La()-Ps?(Ln&2)===0&&us(u,0):_f|=_,Tr===bn&&(Tr=0)),We(u)}function Go(u,h){h===0&&(h=L()),u=je(u,h),u!==null&&(j(u,h),We(u))}function Qr(u){var h=u.memoizedState,_=0;h!==null&&(_=h.retryLane),Go(u,_)}function Vo(u,h){var _=0;switch(u.tag){case 13:var b=u.stateNode,R=u.memoizedState;R!==null&&(_=R.retryLane);break;case 19:b=u.stateNode;break;case 22:b=u.stateNode._retryCache;break;default:throw Error(s(314))}b!==null&&b.delete(h),Go(u,_)}function $r(u,h){return pf(u,h)}function Qp(u,h,_,b){this.tag=u,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qu(u){return u=u.prototype,!(!u||!u.isReactComponent)}function wa(u,h){var _=u.alternate;return _===null?(_=t(u.tag,h,u.key,u.mode),_.elementType=u.elementType,_.type=u.type,_.stateNode=u.stateNode,_.alternate=u,u.alternate=_):(_.pendingProps=h,_.type=u.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=u.flags&31457280,_.childLanes=u.childLanes,_.lanes=u.lanes,_.child=u.child,_.memoizedProps=u.memoizedProps,_.memoizedState=u.memoizedState,_.updateQueue=u.updateQueue,h=u.dependencies,_.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},_.sibling=u.sibling,_.index=u.index,_.ref=u.ref,_.refCleanup=u.refCleanup,_}function $u(u,h){u.flags&=31457282;var _=u.alternate;return _===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=_.childLanes,u.lanes=_.lanes,u.child=_.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=_.memoizedProps,u.memoizedState=_.memoizedState,u.updateQueue=_.updateQueue,u.type=_.type,h=_.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function mr(u,h,_,b,R,U){var q=0;if(b=u,typeof u=="function")Qu(u)&&(q=1);else if(typeof u=="string")q=la&&$n?ff(u,_,ji.current)?26:vr(u)?27:5:la?ff(u,_,ji.current)?26:5:$n&&vr(u)?27:5;else e:switch(u){case ko:return xi(_.children,R,U,h);case sf:q=8,R|=24;break;case zh:return u=t(12,_,h,R|2),u.elementType=zh,u.lanes=U,u;case Gh:return u=t(13,_,h,R),u.elementType=Gh,u.lanes=U,u;case Lc:return u=t(19,_,h,R),u.elementType=Lc,u.lanes=U,u;case tm:return ef(_,R,U,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case af:case Wa:q=10;break e;case em:q=9;break e;case rf:q=11;break e;case Vh:q=14;break e;case Da:q=16,b=null;break e}q=29,_=Error(s(130,u===null?"null":typeof u,"")),b=null}return h=t(q,_,h,R),h.elementType=u,h.type=b,h.lanes=U,h}function xi(u,h,_,b){return u=t(7,u,b,h),u.lanes=_,u}function ef(u,h,_,b){u=t(22,u,b,h),u.elementType=tm,u.lanes=_;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var U=R._current;if(U===null)throw Error(s(456));if((R._pendingVisibility&2)===0){var q=je(U,2);q!==null&&(R._pendingVisibility|=2,es(q,U,2))}},attach:function(){var U=R._current;if(U===null)throw Error(s(456));if((R._pendingVisibility&2)!==0){var q=je(U,2);q!==null&&(R._pendingVisibility&=-3,es(q,U,2))}}};return u.stateNode=R,u}function Ph(u,h,_){return u=t(6,u,null,h),u.lanes=_,u}function $p(u,h,_){return h=t(4,u.children!==null?u.children:[],u.key,h),h.lanes=_,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function fA(u,h,_,b,R,U,q,le){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=N(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N(0),this.hiddenUpdates=N(null),this.identifierPrefix=b,this.onUncaughtError=R,this.onCaughtError=U,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=le,this.incompleteTransitions=new Map}function qv(u,h,_,b,R,U,q,le,Me,qe,ht,Ct){return u=new fA(u,h,_,q,le,Me,qe,Ct),h=1,U===!0&&(h|=24),U=t(3,null,null,h),u.current=U,U.stateNode=u,h=Lo(),h.refCount++,u.pooledCache=h,h.refCount++,U.memoizedState={element:b,isDehydrated:_,cache:h},at(U),u}function Fi(u){return u?(u=Ko,u):Ko}function Fh(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(s(188)):(u=Object.keys(u).join(","),Error(s(268,u)));return u=x(h),u=u!==null?S(u):null,u===null?null:Ic(u.stateNode)}function Bc(u,h,_,b,R,U){R=Fi(R),b.context===null?b.context=R:b.pendingContext=R,b=Et(h),b.payload={element:_},U=U===void 0?null:U,U!==null&&(b.callback=U),_=St(u,b,h),_!==null&&(es(_,u,h),mt(_,u,h))}function Dc(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var _=u.retryLane;u.retryLane=_!==0&&_<h?_:h}}function tf(u,h){Dc(u,h),(u=u.alternate)&&Dc(u,h)}var un={},Uc=dp(),oa=EX(),Hh=Object.assign,hA=Symbol.for("react.element"),nf=Symbol.for("react.transitional.element"),Ba=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),sf=Symbol.for("react.strict_mode"),zh=Symbol.for("react.profiler"),af=Symbol.for("react.provider"),em=Symbol.for("react.consumer"),Wa=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),Gh=Symbol.for("react.suspense"),Lc=Symbol.for("react.suspense_list"),Vh=Symbol.for("react.memo"),Da=Symbol.for("react.lazy"),tm=Symbol.for("react.offscreen"),Jv=Symbol.for("react.memo_cache_sentinel"),eo=Symbol.iterator,nm=Symbol.for("react.client.reference"),en=Uc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gr,to,Rl=!1,Nc=Array.isArray,im=e.rendererVersion,of=e.rendererPackageName,Oc=e.extraDevToolsConfig,Ic=e.getPublicInstance,Kv=e.getRootHostContext,Pc=e.getChildHostContext,kh=e.prepareForCommit,Wv=e.resetAfterCommit,sm=e.createInstance,lf=e.appendInitialChild,no=e.finalizeInitialChildren,fn=e.shouldSetTextContent,qn=e.createTextInstance,Hi=e.scheduleTimeout,Xh=e.cancelTimeout,Xo=e.noTimeout,Ls=e.isPrimaryRenderer;e.warnsIfNotActing;var Xi=e.supportsMutation,Ua=e.supportsPersistence,fs=e.supportsHydration,Zv=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var wi=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var _s=e.setCurrentUpdatePriority,io=e.getCurrentUpdatePriority,Qv=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var $v=e.shouldAttemptEagerTransition,dA=e.detachDeletedInstance;e.requestPostPaintCallback;var am=e.maySuspendCommit,jh=e.preloadInstance,rm=e.startSuspendingCommit,Ns=e.suspendInstance,zi=e.waitForCommitToBeReady,jo=e.NotPendingTransition,Za=e.HostTransitionContext,Yh=e.resetFormInstance;e.bindToConsole;var om=e.supportsMicrotasks,so=e.scheduleMicrotask,Yo=e.supportsTestSelectors,lm=e.findFiberRoot,cm=e.getBoundingRect,e0=e.getTextContent,Fc=e.isHiddenSubtree,t0=e.matchAccessibilityRole,n0=e.setFocusIfFocusable,i0=e.setupIntersectionObserver,s0=e.appendChild,um=e.appendChildToContainer,a0=e.commitTextUpdate,pA=e.commitMount,r0=e.commitUpdate,o0=e.insertBefore,l0=e.insertInContainerBefore,fm=e.removeChild,c0=e.removeChildFromContainer,hm=e.resetTextContent,u0=e.hideInstance,f0=e.hideTextInstance,h0=e.unhideInstance,mA=e.unhideTextInstance,d0=e.clearContainer,Hc=e.cloneInstance,cf=e.createContainerChildSet,dm=e.appendChildToContainerChildSet,qh=e.finalizeContainerChildren,zc=e.replaceContainerChildren,pm=e.cloneHiddenInstance,mm=e.cloneHiddenTextInstance,Jh=e.isSuspenseInstancePending,Kh=e.isSuspenseInstanceFallback,p0=e.getSuspenseInstanceFallbackErrorDetails,m0=e.registerSuspenseInstanceRetry,gm=e.canHydrateFormStateMarker,g0=e.isFormStateMarkerMatching,vm=e.getNextHydratableSibling,Wh=e.getFirstHydratableChild,v0=e.getFirstHydratableChildWithinContainer,y0=e.getFirstHydratableChildWithinSuspenseInstance,gA=e.canHydrateInstance,ym=e.canHydrateTextInstance,_0=e.canHydrateSuspenseInstance,x0=e.hydrateInstance,_m=e.hydrateTextInstance,A0=e.hydrateSuspenseInstance,S0=e.getNextHydratableInstanceAfterSuspenseInstance,vA=e.commitHydratedContainer,yA=e.commitHydratedSuspenseInstance,M0=e.clearSuspenseBoundary,uf=e.clearSuspenseBoundaryFromContainer,Zh=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Qh=e.validateHydratableInstance,b0=e.validateHydratableTextInstance,la=e.supportsResources,ff=e.isHostHoistableType,$h=e.getHoistableRoot,xm=e.getResource,E0=e.acquireResource,wl=e.releaseResource,hf=e.hydrateHoistable,df=e.mountHoistable,Gc=e.unmountHoistable,ed=e.createHoistableInstance,T0=e.prepareToCommitHoistables,C0=e.mayResourceSuspendCommit,Bl=e.preloadResource,R0=e.suspendResource,$n=e.supportsSingletons,Qa=e.resolveSingletonInstance,qo=e.clearSingleton,w0=e.acquireSingletonInstance,Jo=e.releaseSingletonInstance,vr=e.isHostSingletonType,Bi=[],ao=-1,Ko={},Os=Math.clz32?Math.clz32:B,B0=Math.log,D0=Math.LN2,yr=128,Dl=4194304,pf=oa.unstable_scheduleCallback,td=oa.unstable_cancelCallback,U0=oa.unstable_shouldYield,nd=oa.unstable_requestPaint,La=oa.unstable_now,id=oa.unstable_ImmediatePriority,L0=oa.unstable_UserBlockingPriority,sd=oa.unstable_NormalPriority,_A=oa.unstable_IdlePriority,N0=oa.log,ts=oa.unstable_setDisableYieldValue,Di=null,Ws=null,Zs=typeof Object.is=="function"?Object.is:Q,Am=new WeakMap,Ul=[],Ll=0,Nl=null,Vc=0,ca=[],ua=0,Wo=null,$a=1,er="",ji=E(null),kc=E(null),_r=E(null),Ol=E(null),hs=null,ds=null,Dn=!1,Na=null,ns=!1,mf=Error(s(519)),Oa=[],Il=0,tr=0,gf=null,ro=null,Pl=!1,ri=!1,Sm=!1,Xc=0,jc=null,Fl=0,fa=0,Hl=null,oo=!1,zl=!1,xr=Object.prototype.hasOwnProperty,Yc=Error(s(460)),vf=Error(s(474)),yf={then:function(){}},Zo=null,Qo=null,$o=0,el=ai(!0),Ar=ai(!1),oi=E(null),qc=E(0),ha=E(null),ei=null,Yi=E(0),lo=0,yn=null,qt=null,Un=null,Ia=!1,Gl=!1,tl=!1,ad=0,Vl=0,is=null,nr=0,rd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ai={readContext:os,use:ae,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn};Ai.useCacheRefresh=Gn,Ai.useMemoCache=Gn,Ai.useHostTransitionStatus=Gn,Ai.useFormState=Gn,Ai.useActionState=Gn,Ai.useOptimistic=Gn;var nl={readContext:os,use:ae,useCallback:function(u,h){return V().memoizedState=[u,h===void 0?null:h],u},useContext:os,useEffect:vh,useImperativeHandle:function(u,h,_){_=_!=null?_.concat([u]):null,Bu(4194308,4,yh.bind(null,h,u),_)},useLayoutEffect:function(u,h){return Bu(4194308,4,u,h)},useInsertionEffect:function(u,h){Bu(4,2,u,h)},useMemo:function(u,h){var _=V();h=h===void 0?null:h;var b=u();if(tl){W(!0);try{u()}finally{W(!1)}}return _.memoizedState=[b,h],b},useReducer:function(u,h,_){var b=V();if(_!==void 0){var R=_(h);if(tl){W(!0);try{_(h)}finally{W(!1)}}}else R=h;return b.memoizedState=b.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},b.queue=u,u=u.dispatch=xh.bind(null,yn,u),[b.memoizedState,u]},useRef:function(u){var h=V();return u={current:u},h.memoizedState=u},useState:function(u){u=Ut(u);var h=u.queue,_=Rp.bind(null,yn,h);return h.dispatch=_,[u.memoizedState,_]},useDebugValue:Ro,useDeferredValue:function(u,h){var _=V();return Lu(_,u,h)},useTransition:function(){var u=Ut(!1);return u=pc.bind(null,yn,u.queue,!0,!1),V().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,_){var b=yn,R=V();if(Dn){if(_===void 0)throw Error(s(407));_=_()}else{if(_=h(),Xn===null)throw Error(s(349));(bn&60)!==0||vt(b,h,_)}R.memoizedState=_;var U={value:_,getSnapshot:h};return R.queue=U,vh(kt.bind(null,b,U,u),[u]),b.flags|=2048,ws(9,bt.bind(null,b,U,_,h),{destroy:void 0},null),_},useId:function(){var u=V(),h=Xn.identifierPrefix;if(Dn){var _=er,b=$a;_=(b&~(1<<32-Os(b)-1)).toString(32)+_,h=":"+h+"R"+_,_=ad++,0<_&&(h+="H"+_.toString(32)),h+=":"}else _=nr++,h=":"+h+"r"+_.toString(32)+":";return u.memoizedState=h},useCacheRefresh:function(){return V().memoizedState=Cp.bind(null,yn)}};nl.useMemoCache=ge,nl.useHostTransitionStatus=Nu,nl.useFormState=pn,nl.useActionState=pn,nl.useOptimistic=function(u){var h=V();h.memoizedState=h.baseState=u;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=_,h=gc.bind(null,yn,!0,_),_.dispatch=h,[u,h]};var Is={readContext:os,use:ae,useCallback:bl,useContext:os,useEffect:bp,useImperativeHandle:_h,useInsertionEffect:Tv,useLayoutEffect:Uu,useMemo:Ep,useReducer:Ve,useRef:fr,useState:function(){return Ve(Te)},useDebugValue:Ro,useDeferredValue:function(u,h){var _=te();return Tp(_,qt.memoizedState,u,h)},useTransition:function(){var u=Ve(Te)[0],h=te().memoizedState;return[typeof u=="boolean"?u:se(u),h]},useSyncExternalStore:Mt,useId:mc};Is.useCacheRefresh=Vr,Is.useMemoCache=ge,Is.useHostTransitionStatus=Nu,Is.useFormState=fi,Is.useActionState=fi,Is.useOptimistic=function(u,h){var _=te();return Gt(_,qt,u,h)};var da={readContext:os,use:ae,useCallback:bl,useContext:os,useEffect:bp,useImperativeHandle:_h,useInsertionEffect:Tv,useLayoutEffect:Uu,useMemo:Ep,useReducer:it,useRef:fr,useState:function(){return it(Te)},useDebugValue:Ro,useDeferredValue:function(u,h){var _=te();return qt===null?Lu(_,u,h):Tp(_,qt.memoizedState,u,h)},useTransition:function(){var u=it(Te)[0],h=te().memoizedState;return[typeof u=="boolean"?u:se(u),h]},useSyncExternalStore:Mt,useId:mc};da.useCacheRefresh=Vr,da.useMemoCache=ge,da.useHostTransitionStatus=Nu,da.useFormState=Qi,da.useActionState=Qi,da.useOptimistic=function(u,h){var _=te();return qt!==null?Gt(_,qt,u,h):(_.baseState=u,[u,_.queue.dispatch])};var Sr={isMounted:function(u){return(u=u._reactInternals)?v(u)===u:!1},enqueueSetState:function(u,h,_){u=u._reactInternals;var b=Ri(),R=Et(b);R.payload=h,_!=null&&(R.callback=_),h=St(u,R,b),h!==null&&(es(h,u,b),mt(h,u,b))},enqueueReplaceState:function(u,h,_){u=u._reactInternals;var b=Ri(),R=Et(b);R.tag=1,R.payload=h,_!=null&&(R.callback=_),h=St(u,R,b),h!==null&&(es(h,u,b),mt(h,u,b))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var _=Ri(),b=Et(_);b.tag=2,h!=null&&(b.callback=h),h=St(u,b,_),h!==null&&(es(h,u,_),mt(h,u,_))}},od=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},ld=Error(s(461)),ti=!1,cd={dehydrated:null,treeContext:null,retryLane:0},co=E(null),ir=null,pa=null,Jc=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(_,b){u.push(b)}};this.abort=function(){h.aborted=!0,u.forEach(function(_){return _()})}},O0=oa.unstable_scheduleCallback,I0=oa.unstable_NormalPriority,li={$$typeof:Wa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Mm=en.S;en.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&ut(u,h),Mm!==null&&Mm(u,h)};var Mr=E(null),br=!1,Si=!1,bm=!1,kn=typeof WeakSet=="function"?WeakSet:Set,ln=null,Sn=!1,Xt=null,mn=!1,gi=null,ma=8192,Kc={getCacheForType:function(u){var h=os(li),_=h.data.get(u);return _===void 0&&(_=u(),h.data.set(u,_)),_}},Wc=0,Pa=1,hi=2,sr=3,Er=4;if(typeof Symbol=="function"&&Symbol.for){var kl=Symbol.for;Wc=kl("selector.component"),Pa=kl("selector.has_pseudo_class"),hi=kl("selector.role"),sr=kl("selector.test_id"),Er=kl("selector.text")}var Fa=typeof WeakMap=="function"?WeakMap:Map,Ln=0,Xn=null,Kt=null,bn=0,Kn=0,xs=null,Ha=!1,ga=!1,qi=!1,As=0,ni=0,va=0,uo=0,_f=0,ya=0,Tr=0,Xl=null,Mi=null,ud=!1,Ps=0,Zc=1/0,xf=null,il=null,ar=!1,Cr=null,jl=0,sl=0,fd=null,Qc=0,hd=null;return un.attemptContinuousHydration=function(u){if(u.tag===13){var h=je(u,67108864);h!==null&&es(h,u,67108864),tf(u,67108864)}},un.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=Ri(),_=je(u,h);_!==null&&es(_,u,h),tf(u,h)}},un.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=D(u.pendingLanes);if(h!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;h;){var _=1<<31-Os(h);u.entanglements[1]|=_,h&=~_}We(u),(Ln&6)===0&&(Zc=La()+500,Z(0))}}break;case 13:h=je(u,2),h!==null&&es(h,u,2),Zu(),tf(u,2)}},un.batchedUpdates=function(u,h){return u(h)},un.createComponentSelector=function(u){return{$$typeof:Wc,value:u}},un.createContainer=function(u,h,_,b,R,U,q,le,Me,qe){return qv(u,h,!1,null,_,b,U,q,le,Me,qe,null)},un.createHasPseudoClassSelector=function(u){return{$$typeof:Pa,value:u}},un.createHydrationContainer=function(u,h,_,b,R,U,q,le,Me,qe,ht,Ct,Bt){return u=qv(_,b,!0,u,R,U,le,Me,qe,ht,Ct,Bt),u.context=Fi(null),_=u.current,b=Ri(),R=Et(b),R.callback=h??null,St(_,R,b),u.current.lanes=b,j(u,b),We(u),u},un.createPortal=function(u,h,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ba,key:b==null?null:""+b,children:u,containerInfo:h,implementation:_}},un.createRoleSelector=function(u){return{$$typeof:hi,value:u}},un.createTestNameSelector=function(u){return{$$typeof:sr,value:u}},un.createTextSelector=function(u){return{$$typeof:Er,value:u}},un.defaultOnCaughtError=function(u){console.error(u)},un.defaultOnRecoverableError=function(u){od(u)},un.defaultOnUncaughtError=function(u){od(u)},un.deferredUpdates=function(u){var h=en.T,_=io();try{return _s(32),en.T=null,u()}finally{_s(_),en.T=h}},un.discreteUpdates=function(u,h,_,b,R){var U=en.T,q=io();try{return _s(2),en.T=null,u(h,_,b,R)}finally{_s(q),en.T=U,Ln===0&&(Zc=La()+500)}},un.findAllNodes=Ku,un.findBoundingRects=function(u,h){if(!Yo)throw Error(s(363));h=Ku(u,h),u=[];for(var _=0;_<h.length;_++)u.push(cm(h[_]));for(h=u.length-1;0<h;h--){_=u[h];for(var b=_.x,R=b+_.width,U=_.y,q=U+_.height,le=h-1;0<=le;le--)if(h!==le){var Me=u[le],qe=Me.x,ht=qe+Me.width,Ct=Me.y,Bt=Ct+Me.height;if(b>=qe&&U>=Ct&&R<=ht&&q<=Bt){u.splice(h,1);break}else if(b!==qe||_.width!==Me.width||Bt<U||Ct>q){if(!(U!==Ct||_.height!==Me.height||ht<b||qe>R)){qe>b&&(Me.width+=qe-b,Me.x=b),ht<R&&(Me.width=R-qe),u.splice(h,1);break}}else{Ct>U&&(Me.height+=Ct-U,Me.y=U),Bt<q&&(Me.height=q-Ct),u.splice(h,1);break}}}return u},un.findHostInstance=Fh,un.findHostInstanceWithNoPortals=function(u){return u=x(u),u=u!==null?T(u):null,u===null?null:Ic(u.stateNode)},un.findHostInstanceWithWarning=function(u){return Fh(u)},un.flushPassiveEffects=Ka,un.flushSyncFromReconciler=function(u){var h=Ln;Ln|=1;var _=en.T,b=io();try{if(_s(2),en.T=null,u)return u()}finally{_s(b),en.T=_,Ln=h,(Ln&6)===0&&Z(0)}},un.flushSyncWork=Zu,un.focusWithin=function(u,h){if(!Yo)throw Error(s(363));for(u=Tc(u),h=Js(u,h),h=Array.from(h),u=0;u<h.length;){var _=h[u++],b=_.tag;if(!Fc(_)){if((b===5||b===26||b===27)&&n0(_.stateNode))return!0;for(_=_.child;_!==null;)h.push(_),_=_.sibling}}return!1},un.getFindAllNodesFailureDescription=function(u,h){if(!Yo)throw Error(s(363));var _=0,b=[];u=[Tc(u),0];for(var R=0;R<u.length;){var U=u[R++],q=U.tag,le=u[R++],Me=h[le];if((q!==5&&q!==26&&q!==27||!Fc(U))&&(Po(U,Me)&&(b.push(Yp(Me)),le++,le>_&&(_=le)),le<h.length))for(U=U.child;U!==null;)u.push(U,le),U=U.sibling}if(_<h.length){for(u=[];_<h.length;_++)u.push(Yp(h[_]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},un.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return Ic(u.child.stateNode);default:return u.child.stateNode}},un.injectIntoDevTools=function(){var u={bundleType:0,version:im,rendererPackageName:of,currentDispatcherRef:en,findFiberByHostInstance:Zv,reconcilerVersion:"19.0.0"};if(Oc!==null&&(u.rendererConfig=Oc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{Di=h.inject(u),Ws=h}catch{}u=!!h.checkDCE}}return u},un.isAlreadyRendering=function(){return!1},un.observeVisibleRects=function(u,h,_,b){if(!Yo)throw Error(s(363));u=Ku(u,h);var R=i0(u,_,b).disconnect;return{disconnect:function(){R()}}},un.shouldError=function(){return null},un.shouldSuspend=function(){return!1},un.startHostTransition=function(u,h,_,b){if(u.tag!==5)throw Error(s(476));var R=hr(u).queue;pc(u,R,h,jo,_===null?n:function(){var U=hr(u).next.queue;return wo(u,U,{},Ri()),_(b)})},un.updateContainer=function(u,h,_,b){var R=h.current,U=Ri();return Bc(R,U,u,h,_,b),U},un.updateContainerSync=function(u,h,_,b){return h.tag===0&&Ka(),Bc(h.current,2,u,h,_,b),2},un},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(iM)),iM.exports}var Nw;function CX(){return Nw||(Nw=1,nM.exports=TX()),nM.exports}var RX=CX();const wX=Ab(RX);var rM={exports:{}},oM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function BX(){return Ow||(Ow=1,function(i){function e(H,W){var Q=H.length;H.push(W);e:for(;0<Q;){var ve=Q-1>>>1,X=H[ve];if(0<s(X,W))H[ve]=W,H[Q]=X,Q=ve;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var W=H[0],Q=H.pop();if(Q!==W){H[0]=Q;e:for(var ve=0,X=H.length,re=X>>>1;ve<re;){var Ae=2*(ve+1)-1,Ce=H[Ae],oe=Ae+1,Ne=H[oe];if(0>s(Ce,Q))oe<X&&0>s(Ne,Ce)?(H[ve]=Ne,H[oe]=Q,ve=oe):(H[ve]=Ce,H[Ae]=Q,ve=Ae);else if(oe<X&&0>s(Ne,Q))H[ve]=Ne,H[oe]=Q,ve=oe;else break e}}return W}function s(H,W){var Q=H.sortIndex-W.sortIndex;return Q!==0?Q:H.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],p=[],m=1,v=null,y=3,x=!1,S=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function B(H){for(var W=t(p);W!==null;){if(W.callback===null)n(p);else if(W.startTime<=H)n(p),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(p)}}function D(H){if(T=!1,B(H),!S)if(t(f)!==null)S=!0,fe();else{var W=t(p);W!==null&&_e(D,W.startTime-H)}}var O=!1,I=-1,z=5,P=-1;function L(){return!(i.unstable_now()-P<z)}function N(){if(O){var H=i.unstable_now();P=H;var W=!0;try{e:{S=!1,T&&(T=!1,A(I),I=-1),x=!0;var Q=y;try{t:{for(B(H),v=t(f);v!==null&&!(v.expirationTime>H&&L());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,y=v.priorityLevel;var X=ve(v.expirationTime<=H);if(H=i.unstable_now(),typeof X=="function"){v.callback=X,B(H),W=!0;break t}v===t(f)&&n(f),B(H)}else n(f);v=t(f)}if(v!==null)W=!0;else{var re=t(p);re!==null&&_e(D,re.startTime-H),W=!1}}break e}finally{v=null,y=Q,x=!1}W=void 0}}finally{W?j():O=!1}}}var j;if(typeof w=="function")j=function(){w(N)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ne=ce.port2;ce.port1.onmessage=N,j=function(){ne.postMessage(null)}}else j=function(){E(N,0)};function fe(){O||(O=!0,j())}function _e(H,W){I=E(function(){H(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){S||x||(S=!0,fe())},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(H){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var Q=y;y=W;try{return H()}finally{y=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=y;y=H;try{return W()}finally{y=Q}},i.unstable_scheduleCallback=function(H,W,Q){var ve=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ve+Q:ve):Q=ve,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Q+X,H={id:m++,callback:W,priorityLevel:H,startTime:Q,expirationTime:X,sortIndex:-1},Q>ve?(H.sortIndex=Q,e(p,H),t(f)===null&&H===t(p)&&(T?(A(I),I=-1):T=!0,_e(D,Q-ve))):(H.sortIndex=X,e(f,H),S||x||(S=!0,fe())),H},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(H){var W=y;return function(){var Q=y;y=W;try{return H.apply(this,arguments)}finally{y=Q}}}}(oM)),oM}var Iw;function DX(){return Iw||(Iw=1,rM.exports=BX()),rM.exports}var Pw=DX();const UX=i=>typeof i=="object"&&typeof i.then=="function",Wf=[];function nU(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(i[s],e[s]))return!1;return!0}function iU(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const r of Wf)if(nU(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:n.equal,remove:()=>{const r=Wf.indexOf(s);r!==-1&&Wf.splice(r,1)},promise:(UX(i)?i:i(...e)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Wf.push(s),!t)throw s.promise}const LX=(i,e,t)=>iU(i,e,!1,t),NX=(i,e,t)=>void iU(i,e,!0,t),OX=i=>{if(i===void 0||i.length===0)Wf.splice(0,Wf.length);else{const e=Wf.find(t=>nU(i,t.keys,t.equal));e&&e.remove()}};function r1(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const s=r1(n,e,t);if(s)return s;n=e?null:n.sibling}}function sU(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const o1=sU(ee.createContext(null));class aU extends ee.Component{render(){return ee.createElement(o1.Provider,{value:this._reactInternals},this.props.children)}}function rU(){const i=ee.useContext(o1);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ee.useId();return ee.useMemo(()=>{for(const t of[i,i==null?void 0:i.alternate]){if(!t)continue;const n=r1(t,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(n)return n}},[i,e])}const IX=Symbol.for("react.context"),PX=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===IX;function FX(){const i=rU(),[e]=ee.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;PX(n)&&n!==o1&&!e.has(n)&&e.set(n,ee.use(sU(n))),t=t.return}return e}function HX(){const i=FX();return ee.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>ee.createElement(e,null,ee.createElement(t.Provider,{...n,value:i.get(t)})),e=>ee.createElement(aU,{...e})),[i])}function oU(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const lU=i=>i&&i.isOrthographicCamera,zX=i=>i&&i.hasOwnProperty("current"),GX=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),Mv=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?ee.useLayoutEffect:ee.useEffect;function l1(i){const e=ee.useRef(i);return Mv(()=>void(e.current=i),[i]),e}function VX(){const i=rU(),e=HX();return ee.useMemo(()=>({children:t})=>{const s=!!r1(i,!0,r=>r.type===ee.StrictMode)?ee.StrictMode:ee.Fragment;return pe.jsx(s,{children:pe.jsx(e,{children:t})})},[i,e])}function kX({set:i}){return Mv(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const XX=(i=>(i=class extends ee.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function cU(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function Id(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const bi={obj:i=>i===Object(i)&&!bi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(bi.str(i)||bi.num(i)||bi.boo(i))return i===e;const r=bi.obj(i);if(r&&n==="reference")return i===e;const o=bi.arr(i);if(o&&t==="reference")return i===e;if((o||r)&&i===e)return!0;let c;for(c in i)if(!(c in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(c in s?e:i)if(!bi.equ(i[c],e[c],{strict:s,objects:"reference"}))return!1}else for(c in s?e:i)if(i[c]!==e[c])return!1;if(bi.und(c)){if(o&&i.length===0&&e.length===0||r&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function jX(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function YX(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const uU=["children","key","ref"];function qX(i){const e={};for(const t in i)uU.includes(t)||(e[t]=i[t]);return e}function fx(i,e,t,n){const s=i;let r=s==null?void 0:s.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:qX(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function Zg(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const s of e.split("-")){var n;e=s,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const Fw=/-\d+$/;function hx(i,e){if(bi.str(e.props.attach)){if(Fw.test(e.props.attach)){const s=e.props.attach.replace(Fw,""),{root:r,key:o}=Zg(i.object,s);Array.isArray(r[o])||(r[o]=[])}const{root:t,key:n}=Zg(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else bi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function dx(i,e){if(bi.str(e.props.attach)){const{root:t,key:n}=Zg(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[n]:t[n]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const hb=[...uU,"args","dispose","attach","object","onUpdate","dispose"],Hw=new Map;function JX(i){let e=Hw.get(i.constructor);try{e||(e=new i.constructor,Hw.set(i.constructor,e))}catch{}return e}function KX(i,e){const t={};for(const n in e)if(!hb.includes(n)&&!bi.equ(e[n],i.props[n])){t[n]=e[n];for(const s in e)s.startsWith(`${n}-`)&&(t[s]=e[s])}for(const n in i.props){if(hb.includes(n)||e.hasOwnProperty(n))continue;const{root:s,key:r}=Zg(i.object,n);if(s.constructor&&s.constructor.length===0){const o=JX(s);bi.und(o)||(t[r]=o[r])}else t[r]=0}return t}const WX=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],ZX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ul(i,e){var t;const n=i.__r3f,s=n&&oU(n).getState(),r=n==null?void 0:n.eventCount;for(const c in e){let f=e[c];if(hb.includes(c))continue;if(n&&ZX.test(c)){typeof f=="function"?n.handlers[c]=f:delete n.handlers[c],n.eventCount=Object.keys(n.handlers).length;continue}if(f===void 0)continue;let{root:p,key:m,target:v}=Zg(i,c);if(v instanceof lp&&f instanceof lp)v.mask=f.mask;else if(v instanceof Tt&&GX(f))v.set(f);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof v.copy=="function"&&f!=null&&f.constructor&&v.constructor===f.constructor)v.copy(f);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&Array.isArray(f))typeof v.fromArray=="function"?v.fromArray(f):v.set(...f);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof f=="number")typeof v.setScalar=="function"?v.setScalar(f):v.set(f);else{var o;p[m]=f,s&&!s.linear&&WX.includes(m)&&(o=p[m])!=null&&o.isTexture&&p[m].format===Zi&&p[m].type===Ta&&(p[m].colorSpace=Hs)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(t=n.object)!=null&&t.isObject3D&&r!==n.eventCount){const c=n.object,f=s.internal.interaction.indexOf(c);f>-1&&s.internal.interaction.splice(f,1),n.eventCount&&c.raycast!==null&&s.internal.interaction.push(c)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Mp(n),i}function Mp(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function fU(i,e){i.manual||(lU(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Sa=i=>i==null?void 0:i.isObject3D;function Wy(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function hU(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function QX(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{hU(t.capturedMap,e,n,s)})}function $X(i){function e(f){const{internal:p}=i.getState(),m=f.offsetX-p.initialClick[0],v=f.offsetY-p.initialClick[1];return Math.round(Math.sqrt(m*m+v*v))}function t(f){return f.filter(p=>["Move","Over","Enter","Out","Leave"].some(m=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+m]}))}function n(f,p){const m=i.getState(),v=new Set,y=[],x=p?p(m.internal.interaction):m.internal.interaction;for(let A=0;A<x.length;A++){const w=Id(x[A]);w&&(w.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(f,m);function S(A){const w=Id(A);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var B;w.events.compute==null||w.events.compute(f,w,(B=w.previousRoot)==null?void 0:B.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(A,!0):[]}let T=x.flatMap(S).sort((A,w)=>{const B=Id(A.object),D=Id(w.object);return!B||!D?A.distance-w.distance:D.events.priority-B.events.priority||A.distance-w.distance}).filter(A=>{const w=Wy(A);return v.has(w)?!1:(v.add(w),!0)});m.events.filter&&(T=m.events.filter(T,m));for(const A of T){let w=A.object;for(;w;){var E;(E=w.__r3f)!=null&&E.eventCount&&y.push({...A,eventObject:w}),w=w.parent}}if("pointerId"in f&&m.internal.capturedMap.has(f.pointerId))for(let A of m.internal.capturedMap.get(f.pointerId).values())v.has(Wy(A.intersection))||y.push(A.intersection);return y}function s(f,p,m,v){if(f.length){const y={stopped:!1};for(const x of f){let S=Id(x.object);if(S||x.object.traverseAncestors(T=>{const E=Id(T);if(E)return S=E,!1}),S){const{raycaster:T,pointer:E,camera:A,internal:w}=S,B=new $(E.x,E.y,0).unproject(A),D=L=>{var N,j;return(N=(j=w.capturedMap.get(L))==null?void 0:j.has(x.eventObject))!=null?N:!1},O=L=>{const N={intersection:x,target:p.target};w.capturedMap.has(L)?w.capturedMap.get(L).set(x.eventObject,N):w.capturedMap.set(L,new Map([[x.eventObject,N]])),p.target.setPointerCapture(L)},I=L=>{const N=w.capturedMap.get(L);N&&hU(w.capturedMap,x.eventObject,N,L)};let z={};for(let L in p){let N=p[L];typeof N!="function"&&(z[L]=N)}let P={...x,...z,pointer:E,intersections:f,stopped:y.stopped,delta:m,unprojectedPoint:B,ray:T.ray,camera:A,stopPropagation(){const L="pointerId"in p&&w.capturedMap.get(p.pointerId);if((!L||L.has(x.eventObject))&&(P.stopped=y.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(N=>N.eventObject===x.eventObject))){const N=f.slice(0,f.indexOf(x));r([...N,x])}},target:{hasPointerCapture:D,setPointerCapture:O,releasePointerCapture:I},currentTarget:{hasPointerCapture:D,setPointerCapture:O,releasePointerCapture:I},nativeEvent:p};if(v(P),y.stopped===!0)break}}}return f}function r(f){const{internal:p}=i.getState();for(const m of p.hovered.values())if(!f.length||!f.find(v=>v.object===m.object&&v.index===m.index&&v.instanceId===m.instanceId)){const y=m.eventObject.__r3f;if(p.hovered.delete(Wy(m)),y!=null&&y.eventCount){const x=y.handlers,S={...m,intersections:f};x.onPointerOut==null||x.onPointerOut(S),x.onPointerLeave==null||x.onPointerLeave(S)}}}function o(f,p){for(let m=0;m<p.length;m++){const v=p[m].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(f)}}function c(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return p=>{const{internal:m}=i.getState();"pointerId"in p&&m.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(p.pointerId)&&(m.capturedMap.delete(p.pointerId),r([]))})}}return function(m){const{onPointerMissed:v,internal:y}=i.getState();y.lastEvent.current=m;const x=f==="onPointerMove",S=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",E=n(m,x?t:void 0),A=S?e(m):0;f==="onPointerDown"&&(y.initialClick=[m.offsetX,m.offsetY],y.initialHits=E.map(B=>B.eventObject)),S&&!E.length&&A<=2&&(o(m,y.interaction),v&&v(m)),x&&r(E);function w(B){const D=B.eventObject,O=D.__r3f;if(!(O!=null&&O.eventCount))return;const I=O.handlers;if(x){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const z=Wy(B),P=y.hovered.get(z);P?P.stopped&&B.stopPropagation():(y.hovered.set(z,B),I.onPointerOver==null||I.onPointerOver(B),I.onPointerEnter==null||I.onPointerEnter(B))}I.onPointerMove==null||I.onPointerMove(B)}else{const z=I[f];z?(!S||y.initialHits.includes(D))&&(o(m,y.interaction.filter(P=>!y.initialHits.includes(P))),z(B)):S&&y.initialHits.includes(D)&&o(m,y.interaction.filter(P=>!y.initialHits.includes(P)))}}s(E,m,A,w)}}return{handlePointer:c}}const zw=i=>!!(i!=null&&i.render),c1=ee.createContext(null),e7=(i,e)=>{const t=tU((c,f)=>{const p=new $,m=new $,v=new $;function y(A=f().camera,w=m,B=f().size){const{width:D,height:O,top:I,left:z}=B,P=D/O;w.isVector3?v.copy(w):v.set(...w);const L=A.getWorldPosition(p).distanceTo(v);if(lU(A))return{width:D/A.zoom,height:O/A.zoom,top:I,left:z,factor:1,distance:L,aspect:P};{const N=A.fov*Math.PI/180,j=2*Math.tan(N/2)*L,ce=j*(D/O);return{width:ce,height:j,top:I,left:z,factor:D/ce,distance:L,aspect:P}}}let x;const S=A=>c(w=>({performance:{...w.performance,current:A}})),T=new Ke;return{set:c,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(A=1)=>i(f(),A),advance:(A,w)=>e(A,w,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new QE,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=f();x&&clearTimeout(x),A.performance.current!==A.performance.min&&S(A.performance.min),x=setTimeout(()=>S(f().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:A=>c(w=>({...w,events:{...w.events,...A}})),setSize:(A,w,B=0,D=0)=>{const O=f().camera,I={width:A,height:w,top:B,left:D};c(z=>({size:I,viewport:{...z.viewport,...y(O,m,I)}}))},setDpr:A=>c(w=>{const B=cU(A);return{viewport:{...w.viewport,dpr:B,initialDpr:w.viewport.initialDpr||B}}}),setFrameloop:(A="always")=>{const w=f().clock;w.stop(),w.elapsedTime=0,A!=="never"&&(w.start(),w.elapsedTime=0),c(()=>({frameloop:A}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ee.createRef(),active:!1,frames:0,priority:0,subscribe:(A,w,B)=>{const D=f().internal;return D.priority=D.priority+(w>0?1:0),D.subscribers.push({ref:A,priority:w,store:B}),D.subscribers=D.subscribers.sort((O,I)=>O.priority-I.priority),()=>{const O=f().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(w>0?1:0),O.subscribers=O.subscribers.filter(I=>I.ref!==A))}}}}}),n=t.getState();let s=n.size,r=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:c,size:f,viewport:p,gl:m,set:v}=t.getState();if(f.width!==s.width||f.height!==s.height||p.dpr!==r){s=f,r=p.dpr,fU(c,f),p.dpr>0&&m.setPixelRatio(p.dpr);const y=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(f.width,f.height,y)}c!==o&&(o=c,v(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>i(c)),t};function u1(){const i=ee.useContext(c1);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function lr(i=t=>t,e){return u1()(i,e)}function dU(i,e=0){const t=u1(),n=t.getState().internal.subscribe,s=l1(i);return Mv(()=>n(s,e,t),[e,n,t]),null}const Gw=new WeakMap,t7=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function pU(i,e){return function(t,...n){let s;return t7(t)?(s=Gw.get(t),s||(s=new t,Gw.set(t,s))):s=t,i&&i(s),Promise.all(n.map(r=>new Promise((o,c)=>s.load(r,f=>{Sa(f==null?void 0:f.scene)&&Object.assign(f,jX(f.scene)),o(f)},e,f=>c(new Error(`Could not load ${r}: ${f==null?void 0:f.message}`))))))}}function hc(i,e,t,n){const s=Array.isArray(e)?e:[e],r=LX(pU(t,n),[i,...s],{equal:bi.equ});return Array.isArray(e)?r:r[0]}hc.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return NX(pU(t),[i,...n])};hc.clear=function(i,e){const t=Array.isArray(e)?e:[e];return OX([i,...t])};function n7(i){const e=wX(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ee.version}),e}const mU=0,hp={},i7=/^three(?=[A-Z])/,rA=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let s7=0;const a7=i=>typeof i=="function";function gU(i){if(a7(i)){const e=`${s7++}`;return hp[e]=i,e}else Object.assign(hp,i)}function vU(i,e){const t=rA(i),n=hp[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function r7(i,e,t){var n;return i=rA(i)in hp?i:i.replace(i7,""),vU(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,fx(e.object,t,i,e)}function o7(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?dx(i.parent,i):Sa(i.object)&&(i.object.visible=!1),i.isHidden=!0,Mp(i)}}function yU(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?hx(i.parent,i):Sa(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Mp(i)}}function f1(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var s,r;const o=hp[rA(e.type)];e.object=(s=e.props.object)!=null?s:new o(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(ul(e.object,e.props),e.props.attach)hx(i,e);else if(Sa(e.object)&&Sa(i.object)){const o=i.object.children.indexOf(t==null?void 0:t.object);if(t&&o!==-1){const c=i.object.children.indexOf(e.object);if(c!==-1){i.object.children.splice(c,1);const f=c<o?o-1:o;i.object.children.splice(f,0,e.object)}else e.object.parent=i.object,i.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const o of e.children)f1(e,o);Mp(e)}}function lM(i,e){e&&(e.parent=i,i.children.push(e),f1(i,e))}function Vw(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),f1(i,e,t)}function _U(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():Pw.unstable_scheduleCallback(Pw.unstable_IdlePriority,e)}}function db(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?dx(i,e):Sa(e.object)&&Sa(i.object)&&(i.object.remove(e.object),QX(oU(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const o=e.children[r];db(e,o,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&_U(e.object),t===void 0&&Mp(e)}function l7(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const v_=[];function c7(){for(const[t]of v_){const n=t.parent;if(n){t.props.attach?dx(n,t):Sa(t.object)&&Sa(n.object)&&n.object.remove(t.object);for(const s of t.children)s.props.attach?dx(t,s):Sa(s.object)&&Sa(t.object)&&t.object.remove(s.object)}t.isHidden&&yU(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&_U(t.object)}for(const[t,n,s]of v_){t.props=n;const r=t.parent;if(r){var i,e;const o=hp[rA(t.type)];t.object=(i=t.props.object)!=null?i:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,l7(s,t.object),ul(t.object,t.props),t.props.attach?hx(r,t):Sa(t.object)&&Sa(r.object)&&r.object.add(t.object);for(const c of t.children)c.props.attach?hx(t,c):Sa(c.object)&&Sa(t.object)&&t.object.add(c.object);Mp(t)}}v_.length=0}const cM=()=>{},kw={};let Zy=mU;const u7=0,f7=4,px=n7({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:r7,removeChild:db,appendChild:lM,appendInitialChild:lM,insertBefore:Vw,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||lM(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||db(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||Vw(n,e,t)},getRootHostContext:()=>kw,getChildHostContext:()=>kw,commitUpdate(i,e,t,n,s){var r,o,c;vU(e,n);let f=!1;if((i.type==="primitive"&&t.object!==n.object||((r=n.args)==null?void 0:r.length)!==((o=t.args)==null?void 0:o.length)||(c=n.args)!=null&&c.some((m,v)=>{var y;return m!==((y=t.args)==null?void 0:y[v])}))&&(f=!0),f)v_.push([i,{...n},s]);else{const m=KX(i,n);Object.keys(m).length&&(Object.assign(i.props,m),ul(i.object,m))}(s.sibling===null||(s.flags&f7)===u7)&&c7()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>fx(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:o7,unhideInstance:yU,createTextInstance:cM,hideTextInstance:cM,unhideTextInstance:cM,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ee.createContext(null),setCurrentUpdatePriority(i){Zy=i},getCurrentUpdatePriority(){return Zy},resolveUpdatePriority(){var i;if(Zy!==mU)return Zy;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return g_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return g_.ContinuousEventPriority;default:return g_.DefaultEventPriority}},resetFormInstance(){}}),uh=new Map,Pd={objects:"shallow",strict:!1};function h7(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function d7(i){const e=uh.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||e7(gb,jw),o=t||px.createContainer(r,g_.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||uh.set(i,{fiber:o,store:r});let c,f,p=!1,m=null;return{async configure(v={}){let y;m=new Promise(re=>y=re);let{gl:x,size:S,scene:T,events:E,onCreated:A,shadows:w=!1,linear:B=!1,flat:D=!1,legacy:O=!1,orthographic:I=!1,frameloop:z="always",dpr:P=[1,2],performance:L,raycaster:N,camera:j,onPointerMissed:ce}=v,ne=r.getState(),fe=ne.gl;if(!ne.gl){const re={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},Ae=typeof x=="function"?await x(re):x;zw(Ae)?fe=Ae:fe=new a1({...re,...x}),ne.set({gl:fe})}let _e=ne.raycaster;_e||ne.set({raycaster:_e=new n1});const{params:H,...W}=N||{};if(bi.equ(W,_e,Pd)||ul(_e,{...W}),bi.equ(H,_e.params,Pd)||ul(_e,{params:{..._e.params,...H}}),!ne.camera||ne.camera===f&&!bi.equ(f,j,Pd)){f=j;const re=j==null?void 0:j.isCamera,Ae=re?j:I?new gl(0,0,0,0,.1,1e3):new ki(75,0,.1,1e3);re||(Ae.position.z=5,j&&(ul(Ae,j),Ae.manual||("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(Ae.manual=!0,Ae.updateProjectionMatrix())),!ne.camera&&!(j!=null&&j.rotation)&&Ae.lookAt(0,0,0)),ne.set({camera:Ae}),_e.camera=Ae}if(!ne.scene){let re;T!=null&&T.isScene?(re=T,fx(re,r,"",{})):(re=new pv,fx(re,r,"",{}),T&&ul(re,T)),ne.set({scene:re})}E&&!ne.events.handlers&&ne.set({events:E(r)});const Q=h7(i,S);if(bi.equ(Q,ne.size,Pd)||ne.setSize(Q.width,Q.height,Q.top,Q.left),P&&ne.viewport.dpr!==cU(P)&&ne.setDpr(P),ne.frameloop!==z&&ne.setFrameloop(z),ne.onPointerMissed||ne.set({onPointerMissed:ce}),L&&!bi.equ(L,ne.performance,Pd)&&ne.set(re=>({performance:{...re.performance,...L}})),!ne.xr){var ve;const re=(oe,Ne)=>{const Oe=r.getState();Oe.frameloop!=="never"&&jw(oe,!0,Oe,Ne)},Ae=()=>{const oe=r.getState();oe.gl.xr.enabled=oe.gl.xr.isPresenting,oe.gl.xr.setAnimationLoop(oe.gl.xr.isPresenting?re:null),oe.gl.xr.isPresenting||gb(oe)},Ce={connect(){const oe=r.getState().gl;oe.xr.addEventListener("sessionstart",Ae),oe.xr.addEventListener("sessionend",Ae)},disconnect(){const oe=r.getState().gl;oe.xr.removeEventListener("sessionstart",Ae),oe.xr.removeEventListener("sessionend",Ae)}};typeof((ve=fe.xr)==null?void 0:ve.addEventListener)=="function"&&Ce.connect(),ne.set({xr:Ce})}if(fe.shadowMap){const re=fe.shadowMap.enabled,Ae=fe.shadowMap.type;if(fe.shadowMap.enabled=!!w,bi.boo(w))fe.shadowMap.type=_g;else if(bi.str(w)){var X;const Ce={basic:lD,percentage:Tx,soft:_g,variance:yo};fe.shadowMap.type=(X=Ce[w])!=null?X:_g}else bi.obj(w)&&Object.assign(fe.shadowMap,w);(re!==fe.shadowMap.enabled||Ae!==fe.shadowMap.type)&&(fe.shadowMap.needsUpdate=!0)}return Nn.enabled=!O,p||(fe.outputColorSpace=B?Eo:Hs,fe.toneMapping=D?ml:vE),ne.legacy!==O&&ne.set(()=>({legacy:O})),ne.linear!==B&&ne.set(()=>({linear:B})),ne.flat!==D&&ne.set(()=>({flat:D})),x&&!bi.fun(x)&&!zw(x)&&!bi.equ(x,fe,Pd)&&ul(fe,x),c=A,p=!0,y(),this},render(v){return!p&&!m&&this.configure(),m.then(()=>{px.updateContainer(pe.jsx(p7,{store:r,children:v,onCreated:c,rootElement:i}),o,null,()=>{})}),r},unmount(){xU(i)}}}function p7({store:i,children:e,onCreated:t,rootElement:n}){return Mv(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),pe.jsx(c1.Provider,{value:i,children:e})}function xU(i,e){const t=uh.get(i),n=t==null?void 0:t.fiber;if(n){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),px.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,o,c,f;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(o=r.renderLists)==null||o.dispose==null||o.dispose(),(c=s.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(f=s.gl)!=null&&f.xr&&s.xr.disconnect(),YX(s.scene),uh.delete(i)}catch{}},500)})}}function m7(i,e,t){return pe.jsx(g7,{children:i,container:e,state:t})}function g7({state:i={},children:e,container:t}){const{events:n,size:s,...r}=i,o=u1(),[c]=ee.useState(()=>new n1),[f]=ee.useState(()=>new Ke),p=l1((v,y)=>{let x;if(y.camera&&s){const S=y.camera;x=v.viewport.getCurrentViewport(S,new $,s),S!==v.camera&&fU(S,s)}return{...v,...y,scene:t,raycaster:c,pointer:f,mouse:f,previousRoot:o,events:{...v.events,...y.events,...n},size:{...v.size,...s},viewport:{...v.viewport,...x},setEvents:S=>y.set(T=>({...T,events:{...T.events,...S}}))}}),m=ee.useMemo(()=>{const v=tU((x,S)=>({...r,set:x,get:S})),y=x=>v.setState(S=>p.current(x,S));return y(o.getState()),o.subscribe(y),v},[o,t]);return pe.jsx(pe.Fragment,{children:px.createPortal(pe.jsx(c1.Provider,{value:m,children:e}),m,null)})}const v7=new Set,y7=new Set,_7=new Set;function uM(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Rg(i,e){switch(i){case"before":return uM(v7,e);case"after":return uM(y7,e);case"tail":return uM(_7,e)}}let fM,hM;function pb(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),fM=e.internal.subscribers;for(let s=0;s<fM.length;s++)hM=fM[s],hM.ref.current(hM.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let mx=!1,mb=!1,dM,Xw,Fd;function AU(i){Xw=requestAnimationFrame(AU),mx=!0,dM=0,Rg("before",i),mb=!0;for(const t of uh.values()){var e;Fd=t.store.getState(),Fd.internal.active&&(Fd.frameloop==="always"||Fd.internal.frames>0)&&!((e=Fd.gl.xr)!=null&&e.isPresenting)&&(dM+=pb(i,Fd))}if(mb=!1,Rg("after",i),dM===0)return Rg("tail",i),mx=!1,cancelAnimationFrame(Xw)}function gb(i,e=1){var t;if(!i)return uh.forEach(n=>gb(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):mb?i.internal.frames=2:i.internal.frames=1,mx||(mx=!0,requestAnimationFrame(AU)))}function jw(i,e=!0,t,n){if(e&&Rg("before",i),t)pb(i,t,n);else for(const s of uh.values())pb(i,s.store.getState());e&&Rg("after",i)}const pM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function x7(i){const{handlePointer:e}=$X(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(pM).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:t}})),s.handlers)for(const r in s.handlers){const o=s.handlers[r],[c,f]=pM[r];t.addEventListener(c,o,{passive:f})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[o]=pM[s];n.connected.removeEventListener(o,r)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function Yw(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function A7({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,o]=ee.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=ee.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),f=i?typeof i=="number"?i:i.scroll:null,p=i?typeof i=="number"?i:i.resize:null,m=ee.useRef(!1);ee.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[v,y,x]=ee.useMemo(()=>{const A=()=>{if(!c.current.element)return;const{left:w,top:B,width:D,height:O,bottom:I,right:z,x:P,y:L}=c.current.element.getBoundingClientRect(),N={left:w,top:B,width:D,height:O,bottom:I,right:z,x:P,y:L};c.current.element instanceof HTMLElement&&n&&(N.height=c.current.element.offsetHeight,N.width=c.current.element.offsetWidth),Object.freeze(N),m.current&&!E7(c.current.lastBounds,N)&&o(c.current.lastBounds=N)};return[A,p?Yw(A,p):A,f?Yw(A,f):A]},[o,n,f,p]);function S(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",x,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function T(){c.current.element&&(c.current.resizeObserver=new s(x),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(A=>A.addEventListener("scroll",x,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const E=A=>{!A||A===c.current.element||(S(),c.current.element=A,c.current.scrollContainers=SU(A),T())};return M7(x,!!e),S7(y),ee.useEffect(()=>{S(),T()},[e,x,y]),ee.useEffect(()=>S,[]),[E,r,v]}function S7(i){ee.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function M7(i,e){ee.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function SU(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(r=>r==="auto"||r==="scroll")&&e.push(i),[...e,...SU(i.parentElement)]}const b7=["x","y","top","bottom","left","right","width","height"],E7=(i,e)=>b7.every(t=>i[t]===e[t]);function T7({ref:i,children:e,fallback:t,resize:n,style:s,gl:r,events:o=x7,eventSource:c,eventPrefix:f,shadows:p,linear:m,flat:v,legacy:y,orthographic:x,frameloop:S,dpr:T,performance:E,raycaster:A,camera:w,scene:B,onPointerMissed:D,onCreated:O,...I}){ee.useMemo(()=>gU(fX),[]);const z=VX(),[P,L]=A7({scroll:!0,debounce:{scroll:50,resize:0},...n}),N=ee.useRef(null),j=ee.useRef(null);ee.useImperativeHandle(i,()=>N.current);const ce=l1(D),[ne,fe]=ee.useState(!1),[_e,H]=ee.useState(!1);if(ne)throw ne;if(_e)throw _e;const W=ee.useRef(null);Mv(()=>{const ve=N.current;if(L.width>0&&L.height>0&&ve){W.current||(W.current=d7(ve));async function X(){await W.current.configure({gl:r,scene:B,events:o,shadows:p,linear:m,flat:v,legacy:y,orthographic:x,frameloop:S,dpr:T,performance:E,raycaster:A,camera:w,size:L,onPointerMissed:(...re)=>ce.current==null?void 0:ce.current(...re),onCreated:re=>{re.events.connect==null||re.events.connect(c?zX(c)?c.current:c:j.current),f&&re.setEvents({compute:(Ae,Ce)=>{const oe=Ae[f+"X"],Ne=Ae[f+"Y"];Ce.pointer.set(oe/Ce.size.width*2-1,-(Ne/Ce.size.height)*2+1),Ce.raycaster.setFromCamera(Ce.pointer,Ce.camera)}}),O==null||O(re)}}),W.current.render(pe.jsx(z,{children:pe.jsx(XX,{set:H,children:pe.jsx(ee.Suspense,{fallback:pe.jsx(kX,{set:fe}),children:e??null})})}))}X()}}),ee.useEffect(()=>{const ve=N.current;if(ve)return()=>xU(ve)},[]);const Q=c?"none":"auto";return pe.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...s},...I,children:pe.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:pe.jsx("canvas",{ref:N,style:{display:"block"},children:t})})})}function C7(i){return pe.jsx(aU,{children:pe.jsx(T7,{...i})})}function gx(){return gx=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},gx.apply(null,arguments)}const h1=parseInt(ov.replace(/\D+/g,""));function qw(i,e){if(e===HD)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===rx||e===bE){let t=i.getIndex();if(t===null){const o=[],c=i.getAttribute("position");if(c!==void 0){for(let f=0;f<c.count;f++)o.push(f);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,s=[];if(t)if(e===rx)for(let o=1;o<=n;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var Or=Uint8Array,yu=Uint16Array,vb=Uint32Array,MU=new Or([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bU=new Or([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),R7=new Or([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),EU=function(i,e){for(var t=new yu(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var s=new vb(t[30]),n=1;n<30;++n)for(var r=t[n];r<t[n+1];++r)s[r]=r-t[n]<<5|n;return[t,s]},TU=EU(MU,2),CU=TU[0],w7=TU[1];CU[28]=258,w7[258]=28;var B7=EU(bU,0),D7=B7[0],yb=new yu(32768);for(var vi=0;vi<32768;++vi){var hu=(vi&43690)>>>1|(vi&21845)<<1;hu=(hu&52428)>>>2|(hu&13107)<<2,hu=(hu&61680)>>>4|(hu&3855)<<4,yb[vi]=((hu&65280)>>>8|(hu&255)<<8)>>>1}var wg=function(i,e,t){for(var n=i.length,s=0,r=new yu(e);s<n;++s)++r[i[s]-1];var o=new yu(e);for(s=0;s<e;++s)o[s]=o[s-1]+r[s-1]<<1;var c;if(t){c=new yu(1<<e);var f=15-e;for(s=0;s<n;++s)if(i[s])for(var p=s<<4|i[s],m=e-i[s],v=o[i[s]-1]++<<m,y=v|(1<<m)-1;v<=y;++v)c[yb[v]>>>f]=p}else for(c=new yu(n),s=0;s<n;++s)i[s]&&(c[s]=yb[o[i[s]-1]++]>>>15-i[s]);return c},bv=new Or(288);for(var vi=0;vi<144;++vi)bv[vi]=8;for(var vi=144;vi<256;++vi)bv[vi]=9;for(var vi=256;vi<280;++vi)bv[vi]=7;for(var vi=280;vi<288;++vi)bv[vi]=8;var RU=new Or(32);for(var vi=0;vi<32;++vi)RU[vi]=5;var U7=wg(bv,9,1),L7=wg(RU,5,1),mM=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},go=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},gM=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},N7=function(i){return(i/8|0)+(i&7&&1)},O7=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof yu?yu:i instanceof vb?vb:Or)(t-e);return n.set(i.subarray(e,t)),n},I7=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new Or(0);var s=!e||t,r=!t||t.i;t||(t={}),e||(e=new Or(n*3));var o=function(Oe){var $e=e.length;if(Oe>$e){var tt=new Or(Math.max($e*2,Oe));tt.set(e),e=tt}},c=t.f||0,f=t.p||0,p=t.b||0,m=t.l,v=t.d,y=t.m,x=t.n,S=n*8;do{if(!m){t.f=c=go(i,f,1);var T=go(i,f+1,3);if(f+=3,T)if(T==1)m=U7,v=L7,y=9,x=5;else if(T==2){var B=go(i,f,31)+257,D=go(i,f+10,15)+4,O=B+go(i,f+5,31)+1;f+=14;for(var I=new Or(O),z=new Or(19),P=0;P<D;++P)z[R7[P]]=go(i,f+P*3,7);f+=D*3;for(var L=mM(z),N=(1<<L)-1,j=wg(z,L,1),P=0;P<O;){var ce=j[go(i,f,N)];f+=ce&15;var E=ce>>>4;if(E<16)I[P++]=E;else{var ne=0,fe=0;for(E==16?(fe=3+go(i,f,3),f+=2,ne=I[P-1]):E==17?(fe=3+go(i,f,7),f+=3):E==18&&(fe=11+go(i,f,127),f+=7);fe--;)I[P++]=ne}}var _e=I.subarray(0,B),H=I.subarray(B);y=mM(_e),x=mM(H),m=wg(_e,y,1),v=wg(H,x,1)}else throw"invalid block type";else{var E=N7(f)+4,A=i[E-4]|i[E-3]<<8,w=E+A;if(w>n){if(r)throw"unexpected EOF";break}s&&o(p+A),e.set(i.subarray(E,w),p),t.b=p+=A,t.p=f=w*8;continue}if(f>S){if(r)throw"unexpected EOF";break}}s&&o(p+131072);for(var W=(1<<y)-1,Q=(1<<x)-1,ve=f;;ve=f){var ne=m[gM(i,f)&W],X=ne>>>4;if(f+=ne&15,f>S){if(r)throw"unexpected EOF";break}if(!ne)throw"invalid length/literal";if(X<256)e[p++]=X;else if(X==256){ve=f,m=null;break}else{var re=X-254;if(X>264){var P=X-257,Ae=MU[P];re=go(i,f,(1<<Ae)-1)+CU[P],f+=Ae}var Ce=v[gM(i,f)&Q],oe=Ce>>>4;if(!Ce)throw"invalid distance";f+=Ce&15;var H=D7[oe];if(oe>3){var Ae=bU[oe];H+=gM(i,f)&(1<<Ae)-1,f+=Ae}if(f>S){if(r)throw"unexpected EOF";break}s&&o(p+131072);for(var Ne=p+re;p<Ne;p+=4)e[p]=e[p-H],e[p+1]=e[p+1-H],e[p+2]=e[p+2-H],e[p+3]=e[p+3-H];p=Ne}}t.l=m,t.p=ve,t.b=p,m&&(c=1,t.m=y,t.d=v,t.n=x)}while(!c);return p==e.length?e:O7(e,0,p)},P7=new Or(0),F7=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Qy(i,e){return I7((F7(i),i.subarray(2,-4)),e)}var H7=typeof TextDecoder<"u"&&new TextDecoder,z7=0;try{H7.decode(P7,{stream:!0}),z7=1}catch{}const G7=i=>i&&i.isCubeTexture;class V7 extends Ei{constructor(e,t){var n,s;const r=G7(e),c=((s=r?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?s:1024)/4,f=Math.floor(Math.log2(c)),p=Math.pow(2,f),m=3*Math.max(p,16*7),v=4*p,y=[r?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/m}`,`#define CUBEUV_TEXEL_HEIGHT ${1/v}`,`#define CUBEUV_MAX_MIP ${f}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,S=y.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${h1>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,T={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},E=new _v(1,16),A=new Ya({uniforms:T,fragmentShader:S,vertexShader:x,side:Nr});super(E,A)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var k7=Object.defineProperty,X7=(i,e,t)=>e in i?k7(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,j7=(i,e,t)=>(X7(i,e+"",t),t);class Y7{constructor(){j7(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}var q7=Object.defineProperty,J7=(i,e,t)=>e in i?q7(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Wt=(i,e,t)=>(J7(i,typeof e!="symbol"?e+"":e,t),t);const $y=new dh,Jw=new tc,K7=Math.cos(70*(Math.PI/180)),Kw=(i,e)=>(i%e+e)%e;let W7=class extends Y7{constructor(e,t){super(),Wt(this,"object"),Wt(this,"domElement"),Wt(this,"enabled",!0),Wt(this,"target",new $),Wt(this,"minDistance",0),Wt(this,"maxDistance",1/0),Wt(this,"minZoom",0),Wt(this,"maxZoom",1/0),Wt(this,"minPolarAngle",0),Wt(this,"maxPolarAngle",Math.PI),Wt(this,"minAzimuthAngle",-1/0),Wt(this,"maxAzimuthAngle",1/0),Wt(this,"enableDamping",!1),Wt(this,"dampingFactor",.05),Wt(this,"enableZoom",!0),Wt(this,"zoomSpeed",1),Wt(this,"enableRotate",!0),Wt(this,"rotateSpeed",1),Wt(this,"enablePan",!0),Wt(this,"panSpeed",1),Wt(this,"screenSpacePanning",!0),Wt(this,"keyPanSpeed",7),Wt(this,"zoomToCursor",!1),Wt(this,"autoRotate",!1),Wt(this,"autoRotateSpeed",2),Wt(this,"reverseOrbit",!1),Wt(this,"reverseHorizontalOrbit",!1),Wt(this,"reverseVerticalOrbit",!1),Wt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Wt(this,"mouseButtons",{LEFT:Ff.ROTATE,MIDDLE:Ff.DOLLY,RIGHT:Ff.PAN}),Wt(this,"touches",{ONE:Hf.ROTATE,TWO:Hf.DOLLY_PAN}),Wt(this,"target0"),Wt(this,"position0"),Wt(this,"zoom0"),Wt(this,"_domElementKeyEvents",null),Wt(this,"getPolarAngle"),Wt(this,"getAzimuthalAngle"),Wt(this,"setPolarAngle"),Wt(this,"setAzimuthalAngle"),Wt(this,"getDistance"),Wt(this,"getZoomScale"),Wt(this,"listenToKeyEvents"),Wt(this,"stopListenToKeyEvents"),Wt(this,"saveState"),Wt(this,"reset"),Wt(this,"update"),Wt(this,"connect"),Wt(this,"dispose"),Wt(this,"dollyIn"),Wt(this,"dollyOut"),Wt(this,"getScale"),Wt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=he=>{let Fe=Kw(he,2*Math.PI),lt=m.phi;lt<0&&(lt+=2*Math.PI),Fe<0&&(Fe+=2*Math.PI);let ue=Math.abs(Fe-lt);2*Math.PI-ue<ue&&(Fe<lt?Fe+=2*Math.PI:lt+=2*Math.PI),v.phi=Fe-lt,n.update()},this.setAzimuthalAngle=he=>{let Fe=Kw(he,2*Math.PI),lt=m.theta;lt<0&&(lt+=2*Math.PI),Fe<0&&(Fe+=2*Math.PI);let ue=Math.abs(Fe-lt);2*Math.PI-ue<ue&&(Fe<lt?Fe+=2*Math.PI:lt+=2*Math.PI),v.theta=Fe-lt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",ut),this._domElementKeyEvents=he},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ut),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(s),n.update(),f=c.NONE},this.update=(()=>{const he=new $,Fe=new $(0,1,0),lt=new Cs().setFromUnitVectors(e.up,Fe),ue=lt.clone().invert(),be=new $,De=new Cs,ke=2*Math.PI;return function(){const gt=n.object.position;lt.setFromUnitVectors(e.up,Fe),ue.copy(lt).invert(),he.copy(gt).sub(n.target),he.applyQuaternion(lt),m.setFromVector3(he),n.autoRotate&&f===c.NONE&&fe(ce()),n.enableDamping?(m.theta+=v.theta*n.dampingFactor,m.phi+=v.phi*n.dampingFactor):(m.theta+=v.theta,m.phi+=v.phi);let Ft=n.minAzimuthAngle,rn=n.maxAzimuthAngle;isFinite(Ft)&&isFinite(rn)&&(Ft<-Math.PI?Ft+=ke:Ft>Math.PI&&(Ft-=ke),rn<-Math.PI?rn+=ke:rn>Math.PI&&(rn-=ke),Ft<=rn?m.theta=Math.max(Ft,Math.min(rn,m.theta)):m.theta=m.theta>(Ft+rn)/2?Math.max(Ft,m.theta):Math.min(rn,m.theta)),m.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,m.phi)),m.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(x,n.dampingFactor):n.target.add(x),n.zoomToCursor&&L||n.object.isOrthographicCamera?m.radius=Ce(m.radius):m.radius=Ce(m.radius*y),he.setFromSpherical(m),he.applyQuaternion(ue),gt.copy(n.target).add(he),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(v.theta*=1-n.dampingFactor,v.phi*=1-n.dampingFactor,x.multiplyScalar(1-n.dampingFactor)):(v.set(0,0,0),x.set(0,0,0));let wn=!1;if(n.zoomToCursor&&L){let on=null;if(n.object instanceof ki&&n.object.isPerspectiveCamera){const yi=he.length();on=Ce(yi*y);const ai=yi-on;n.object.position.addScaledVector(z,ai),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const yi=new $(P.x,P.y,0);yi.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix(),wn=!0;const ai=new $(P.x,P.y,0);ai.unproject(n.object),n.object.position.sub(ai).add(yi),n.object.updateMatrixWorld(),on=he.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;on!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(on).add(n.object.position):($y.origin.copy(n.object.position),$y.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot($y.direction))<K7?e.lookAt(n.target):(Jw.setFromNormalAndCoplanarPoint(n.object.up,n.target),$y.intersectPlane(Jw,n.target))))}else n.object instanceof gl&&n.object.isOrthographicCamera&&(wn=y!==1,wn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix()));return y=1,L=!1,wn||be.distanceToSquared(n.object.position)>p||8*(1-De.dot(n.object.quaternion))>p?(n.dispatchEvent(s),be.copy(n.object.position),De.copy(n.object.quaternion),wn=!1,!0):!1}})(),this.connect=he=>{n.domElement=he,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",at),n.domElement.addEventListener("pointerdown",k),n.domElement.addEventListener("pointercancel",ze),n.domElement.addEventListener("wheel",pt)},this.dispose=()=>{var he,Fe,lt,ue,be,De;n.domElement&&(n.domElement.style.touchAction="auto"),(he=n.domElement)==null||he.removeEventListener("contextmenu",at),(Fe=n.domElement)==null||Fe.removeEventListener("pointerdown",k),(lt=n.domElement)==null||lt.removeEventListener("pointercancel",ze),(ue=n.domElement)==null||ue.removeEventListener("wheel",pt),(be=n.domElement)==null||be.ownerDocument.removeEventListener("pointermove",xe),(De=n.domElement)==null||De.ownerDocument.removeEventListener("pointerup",ze),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ut)};const n=this,s={type:"change"},r={type:"start"},o={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=c.NONE;const p=1e-6,m=new lb,v=new lb;let y=1;const x=new $,S=new Ke,T=new Ke,E=new Ke,A=new Ke,w=new Ke,B=new Ke,D=new Ke,O=new Ke,I=new Ke,z=new $,P=new Ke;let L=!1;const N=[],j={};function ce(){return 2*Math.PI/60/60*n.autoRotateSpeed}function ne(){return Math.pow(.95,n.zoomSpeed)}function fe(he){n.reverseOrbit||n.reverseHorizontalOrbit?v.theta+=he:v.theta-=he}function _e(he){n.reverseOrbit||n.reverseVerticalOrbit?v.phi+=he:v.phi-=he}const H=(()=>{const he=new $;return function(lt,ue){he.setFromMatrixColumn(ue,0),he.multiplyScalar(-lt),x.add(he)}})(),W=(()=>{const he=new $;return function(lt,ue){n.screenSpacePanning===!0?he.setFromMatrixColumn(ue,1):(he.setFromMatrixColumn(ue,0),he.crossVectors(n.object.up,he)),he.multiplyScalar(lt),x.add(he)}})(),Q=(()=>{const he=new $;return function(lt,ue){const be=n.domElement;if(be&&n.object instanceof ki&&n.object.isPerspectiveCamera){const De=n.object.position;he.copy(De).sub(n.target);let ke=he.length();ke*=Math.tan(n.object.fov/2*Math.PI/180),H(2*lt*ke/be.clientHeight,n.object.matrix),W(2*ue*ke/be.clientHeight,n.object.matrix)}else be&&n.object instanceof gl&&n.object.isOrthographicCamera?(H(lt*(n.object.right-n.object.left)/n.object.zoom/be.clientWidth,n.object.matrix),W(ue*(n.object.top-n.object.bottom)/n.object.zoom/be.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ve(he){n.object instanceof ki&&n.object.isPerspectiveCamera||n.object instanceof gl&&n.object.isOrthographicCamera?y=he:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function X(he){ve(y/he)}function re(he){ve(y*he)}function Ae(he){if(!n.zoomToCursor||!n.domElement)return;L=!0;const Fe=n.domElement.getBoundingClientRect(),lt=he.clientX-Fe.left,ue=he.clientY-Fe.top,be=Fe.width,De=Fe.height;P.x=lt/be*2-1,P.y=-(ue/De)*2+1,z.set(P.x,P.y,1).unproject(n.object).sub(n.object.position).normalize()}function Ce(he){return Math.max(n.minDistance,Math.min(n.maxDistance,he))}function oe(he){S.set(he.clientX,he.clientY)}function Ne(he){Ae(he),D.set(he.clientX,he.clientY)}function Oe(he){A.set(he.clientX,he.clientY)}function $e(he){T.set(he.clientX,he.clientY),E.subVectors(T,S).multiplyScalar(n.rotateSpeed);const Fe=n.domElement;Fe&&(fe(2*Math.PI*E.x/Fe.clientHeight),_e(2*Math.PI*E.y/Fe.clientHeight)),S.copy(T),n.update()}function tt(he){O.set(he.clientX,he.clientY),I.subVectors(O,D),I.y>0?X(ne()):I.y<0&&re(ne()),D.copy(O),n.update()}function Dt(he){w.set(he.clientX,he.clientY),B.subVectors(w,A).multiplyScalar(n.panSpeed),Q(B.x,B.y),A.copy(w),n.update()}function wt(he){Ae(he),he.deltaY<0?re(ne()):he.deltaY>0&&X(ne()),n.update()}function Pt(he){let Fe=!1;switch(he.code){case n.keys.UP:Q(0,n.keyPanSpeed),Fe=!0;break;case n.keys.BOTTOM:Q(0,-n.keyPanSpeed),Fe=!0;break;case n.keys.LEFT:Q(n.keyPanSpeed,0),Fe=!0;break;case n.keys.RIGHT:Q(-n.keyPanSpeed,0),Fe=!0;break}Fe&&(he.preventDefault(),n.update())}function ot(){if(N.length==1)S.set(N[0].pageX,N[0].pageY);else{const he=.5*(N[0].pageX+N[1].pageX),Fe=.5*(N[0].pageY+N[1].pageY);S.set(he,Fe)}}function dt(){if(N.length==1)A.set(N[0].pageX,N[0].pageY);else{const he=.5*(N[0].pageX+N[1].pageX),Fe=.5*(N[0].pageY+N[1].pageY);A.set(he,Fe)}}function K(){const he=N[0].pageX-N[1].pageX,Fe=N[0].pageY-N[1].pageY,lt=Math.sqrt(he*he+Fe*Fe);D.set(0,lt)}function rt(){n.enableZoom&&K(),n.enablePan&&dt()}function Ze(){n.enableZoom&&K(),n.enableRotate&&ot()}function je(he){if(N.length==1)T.set(he.pageX,he.pageY);else{const lt=mt(he),ue=.5*(he.pageX+lt.x),be=.5*(he.pageY+lt.y);T.set(ue,be)}E.subVectors(T,S).multiplyScalar(n.rotateSpeed);const Fe=n.domElement;Fe&&(fe(2*Math.PI*E.x/Fe.clientHeight),_e(2*Math.PI*E.y/Fe.clientHeight)),S.copy(T)}function Xe(he){if(N.length==1)w.set(he.pageX,he.pageY);else{const Fe=mt(he),lt=.5*(he.pageX+Fe.x),ue=.5*(he.pageY+Fe.y);w.set(lt,ue)}B.subVectors(w,A).multiplyScalar(n.panSpeed),Q(B.x,B.y),A.copy(w)}function _t(he){const Fe=mt(he),lt=he.pageX-Fe.x,ue=he.pageY-Fe.y,be=Math.sqrt(lt*lt+ue*ue);O.set(0,be),I.set(0,Math.pow(O.y/D.y,n.zoomSpeed)),X(I.y),D.copy(O)}function We(he){n.enableZoom&&_t(he),n.enablePan&&Xe(he)}function Z(he){n.enableZoom&&_t(he),n.enableRotate&&je(he)}function k(he){var Fe,lt;n.enabled!==!1&&(N.length===0&&((Fe=n.domElement)==null||Fe.ownerDocument.addEventListener("pointermove",xe),(lt=n.domElement)==null||lt.ownerDocument.addEventListener("pointerup",ze)),At(he),he.pointerType==="touch"?xt(he):Qe(he))}function xe(he){n.enabled!==!1&&(he.pointerType==="touch"?Nt(he):He(he))}function ze(he){var Fe,lt,ue;Et(he),N.length===0&&((Fe=n.domElement)==null||Fe.releasePointerCapture(he.pointerId),(lt=n.domElement)==null||lt.ownerDocument.removeEventListener("pointermove",xe),(ue=n.domElement)==null||ue.ownerDocument.removeEventListener("pointerup",ze)),n.dispatchEvent(o),f=c.NONE}function Qe(he){let Fe;switch(he.button){case 0:Fe=n.mouseButtons.LEFT;break;case 1:Fe=n.mouseButtons.MIDDLE;break;case 2:Fe=n.mouseButtons.RIGHT;break;default:Fe=-1}switch(Fe){case Ff.DOLLY:if(n.enableZoom===!1)return;Ne(he),f=c.DOLLY;break;case Ff.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(n.enablePan===!1)return;Oe(he),f=c.PAN}else{if(n.enableRotate===!1)return;oe(he),f=c.ROTATE}break;case Ff.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(n.enableRotate===!1)return;oe(he),f=c.ROTATE}else{if(n.enablePan===!1)return;Oe(he),f=c.PAN}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(r)}function He(he){if(n.enabled!==!1)switch(f){case c.ROTATE:if(n.enableRotate===!1)return;$e(he);break;case c.DOLLY:if(n.enableZoom===!1)return;tt(he);break;case c.PAN:if(n.enablePan===!1)return;Dt(he);break}}function pt(he){n.enabled===!1||n.enableZoom===!1||f!==c.NONE&&f!==c.ROTATE||(he.preventDefault(),n.dispatchEvent(r),wt(he),n.dispatchEvent(o))}function ut(he){n.enabled===!1||n.enablePan===!1||Pt(he)}function xt(he){switch(St(he),N.length){case 1:switch(n.touches.ONE){case Hf.ROTATE:if(n.enableRotate===!1)return;ot(),f=c.TOUCH_ROTATE;break;case Hf.PAN:if(n.enablePan===!1)return;dt(),f=c.TOUCH_PAN;break;default:f=c.NONE}break;case 2:switch(n.touches.TWO){case Hf.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;rt(),f=c.TOUCH_DOLLY_PAN;break;case Hf.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ze(),f=c.TOUCH_DOLLY_ROTATE;break;default:f=c.NONE}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(r)}function Nt(he){switch(St(he),f){case c.TOUCH_ROTATE:if(n.enableRotate===!1)return;je(he),n.update();break;case c.TOUCH_PAN:if(n.enablePan===!1)return;Xe(he),n.update();break;case c.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;We(he),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Z(he),n.update();break;default:f=c.NONE}}function at(he){n.enabled!==!1&&he.preventDefault()}function At(he){N.push(he)}function Et(he){delete j[he.pointerId];for(let Fe=0;Fe<N.length;Fe++)if(N[Fe].pointerId==he.pointerId){N.splice(Fe,1);return}}function St(he){let Fe=j[he.pointerId];Fe===void 0&&(Fe=new Ke,j[he.pointerId]=Fe),Fe.set(he.pageX,he.pageY)}function mt(he){const Fe=he.pointerId===N[0].pointerId?N[1]:N[0];return j[Fe.pointerId]}this.dollyIn=(he=ne())=>{re(he),n.update()},this.dollyOut=(he=ne())=>{X(he),n.update()},this.getScale=()=>y,this.setScale=he=>{ve(he),n.update()},this.getZoomScale=()=>ne(),t!==void 0&&this.connect(t),this.update()}};function vx(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Zf="srgb",lc="srgb-linear",Ww=3001,Z7=3e3;class d1 extends Vs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new nj(t)}),this.register(function(t){return new ij(t)}),this.register(function(t){return new hj(t)}),this.register(function(t){return new dj(t)}),this.register(function(t){return new pj(t)}),this.register(function(t){return new aj(t)}),this.register(function(t){return new rj(t)}),this.register(function(t){return new oj(t)}),this.register(function(t){return new lj(t)}),this.register(function(t){return new tj(t)}),this.register(function(t){return new cj(t)}),this.register(function(t){return new sj(t)}),this.register(function(t){return new fj(t)}),this.register(function(t){return new uj(t)}),this.register(function(t){return new $7(t)}),this.register(function(t){return new mj(t)}),this.register(function(t){return new gj(t)})}load(e,t,n,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const p=_u.extractUrlBase(e);o=_u.resolveURL(p,this.path)}else o=_u.extractUrlBase(e);this.manager.itemStart(e);const c=function(p){s?s(p):console.error(p),r.manager.itemError(e),r.manager.itemEnd(e)},f=new Gs(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(p){try{r.parse(p,o,function(m){t(m),r.manager.itemEnd(e)},c)}catch(m){c(m)}},n,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let r;const o={},c={};if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(vx(new Uint8Array(e.slice(0,4)))===wU){try{o[Rn.KHR_BINARY_GLTF]=new vj(e)}catch(m){s&&s(m);return}r=JSON.parse(o[Rn.KHR_BINARY_GLTF].content)}else r=JSON.parse(vx(new Uint8Array(e)));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const f=new Bj(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const m=this.pluginCallbacks[p](f);m.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[m.name]=m,o[m.name]=!0}if(r.extensionsUsed)for(let p=0;p<r.extensionsUsed.length;++p){const m=r.extensionsUsed[p],v=r.extensionsRequired||[];switch(m){case Rn.KHR_MATERIALS_UNLIT:o[m]=new ej;break;case Rn.KHR_DRACO_MESH_COMPRESSION:o[m]=new yj(r,this.dracoLoader);break;case Rn.KHR_TEXTURE_TRANSFORM:o[m]=new _j;break;case Rn.KHR_MESH_QUANTIZATION:o[m]=new xj;break;default:v.indexOf(m)>=0&&c[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}f.setExtensions(o),f.setPlugins(c),f.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,r){n.parse(e,t,s,r)})}}function Q7(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Rn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class $7{constructor(e){this.parser=e,this.name=Rn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const r=t.json,f=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let p;const m=new Tt(16777215);f.color!==void 0&&m.setRGB(f.color[0],f.color[1],f.color[2],lc);const v=f.range!==void 0?f.range:0;switch(f.type){case"directional":p=new WE(m),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new KE(m),p.distance=v;break;case"spot":p=new JE(m),p.distance=v,f.spot=f.spot||{},f.spot.innerConeAngle=f.spot.innerConeAngle!==void 0?f.spot.innerConeAngle:0,f.spot.outerConeAngle=f.spot.outerConeAngle!==void 0?f.spot.outerConeAngle:Math.PI/4,p.angle=f.spot.outerConeAngle,p.penumbra=1-f.spot.innerConeAngle/f.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+f.type)}return p.position.set(0,0,0),p.decay=2,ec(p,f),f.intensity!==void 0&&(p.intensity=f.intensity),p.name=t.createUniqueName(f.name||"light_"+e),s=Promise.resolve(p),t.cache.add(n,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],c=(r.extensions&&r.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(f){return n._getNodeRef(t.cache,c,f)})}}class ej{constructor(){this.name=Rn.KHR_MATERIALS_UNLIT}getMaterialType(){return Xa}extendParams(e,t,n){const s=[];e.color=new Tt(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],lc),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",r.baseColorTexture,Zf))}return Promise.all(s)}}class tj{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class nj{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const c=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ke(c,c)}return Promise.all(r)}}class ij{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class sj{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class aj{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Tt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const c=o.sheenColorFactor;t.sheenColor.setRGB(c[0],c[1],c[2],lc)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Zf)),o.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class rj{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class oj{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const c=o.attenuationColor||[1,1,1];return t.attenuationColor=new Tt().setRGB(c[0],c[1],c[2],lc),Promise.all(r)}}class lj{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class cj{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const c=o.specularColorFactor||[1,1,1];return t.specularColor=new Tt().setRGB(c[0],c[1],c[2],lc),o.specularColorTexture!==void 0&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Zf)),Promise.all(r)}}class uj{constructor(e){this.parser=e,this.name=Rn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class fj{constructor(e){this.parser=e,this.name=Rn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class hj{constructor(e){this.parser=e,this.name=Rn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class dj{constructor(e){this.parser=e,this.name=Rn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],c=s.images[o.source];let f=n.textureLoader;if(c.uri){const p=n.options.manager.getHandler(c.uri);p!==null&&(f=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(e,o.source,f);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class pj{constructor(e){this.parser=e,this.name=Rn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],c=s.images[o.source];let f=n.textureLoader;if(c.uri){const p=n.options.manager.getHandler(c.uri);p!==null&&(f=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(e,o.source,f);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class mj{constructor(e){this.name=Rn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(c){const f=s.byteOffset||0,p=s.byteLength||0,m=s.count,v=s.byteStride,y=new Uint8Array(c,f,p);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(m,v,y,s.mode,s.filter).then(function(x){return x.buffer}):o.ready.then(function(){const x=new ArrayBuffer(m*v);return o.decodeGltfBuffer(new Uint8Array(x),m,v,y,s.mode,s.filter),x})})}else return null}}class gj{constructor(e){this.name=Rn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=t.meshes[n.mesh];for(const p of s.primitives)if(p.mode!==Lr.TRIANGLES&&p.mode!==Lr.TRIANGLE_STRIP&&p.mode!==Lr.TRIANGLE_FAN&&p.mode!==void 0)return null;const o=n.extensions[this.name].attributes,c=[],f={};for(const p in o)c.push(this.parser.getDependency("accessor",o[p]).then(m=>(f[p]=m,f[p])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(p=>{const m=p.pop(),v=m.isGroup?m.children:[m],y=p[0].count,x=[];for(const S of v){const T=new Jt,E=new $,A=new Cs,w=new $(1,1,1),B=new UE(S.geometry,S.material,y);for(let D=0;D<y;D++)f.TRANSLATION&&E.fromBufferAttribute(f.TRANSLATION,D),f.ROTATION&&A.fromBufferAttribute(f.ROTATION,D),f.SCALE&&w.fromBufferAttribute(f.SCALE,D),B.setMatrixAt(D,T.compose(E,A,w));for(const D in f)if(D==="_COLOR_0"){const O=f[D];B.instanceColor=new ah(O.array,O.itemSize,O.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&S.geometry.setAttribute(D,f[D]);On.prototype.copy.call(B,S),this.parser.assignFinalMaterial(B),x.push(B)}return m.isGroup?(m.clear(),m.add(...x),m):x[0]}))}}const wU="glTF",tg=12,Zw={JSON:1313821514,BIN:5130562};class vj{constructor(e){this.name=Rn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,tg);if(this.header={magic:vx(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==wU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-tg,s=new DataView(e,tg);let r=0;for(;r<n;){const o=s.getUint32(r,!0);r+=4;const c=s.getUint32(r,!0);if(r+=4,c===Zw.JSON){const f=new Uint8Array(e,tg+r,o);this.content=vx(f)}else if(c===Zw.BIN){const f=tg+r;this.body=e.slice(f,f+o)}r+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class yj{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,c={},f={},p={};for(const m in o){const v=_b[m]||m.toLowerCase();c[v]=o[m]}for(const m in e.attributes){const v=_b[m]||m.toLowerCase();if(o[m]!==void 0){const y=n.accessors[e.attributes[m]],x=Jd[y.componentType];p[v]=x.name,f[v]=y.normalized===!0}}return t.getDependency("bufferView",r).then(function(m){return new Promise(function(v,y){s.decodeDracoFile(m,function(x){for(const S in x.attributes){const T=x.attributes[S],E=f[S];E!==void 0&&(T.normalized=E)}v(x)},c,p,lc,y)})})}}class _j{constructor(){this.name=Rn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class xj{constructor(){this.name=Rn.KHR_MESH_QUANTIZATION}}class BU extends Ap{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=n[r+o];return t}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=c*2,p=c*3,m=s-t,v=(n-t)/m,y=v*v,x=y*v,S=e*p,T=S-p,E=-2*x+3*y,A=x-y,w=1-E,B=A-y+v;for(let D=0;D!==c;D++){const O=o[T+D+c],I=o[T+D+f]*m,z=o[S+D+c],P=o[S+D]*m;r[D]=w*O+B*I+E*z+A*P}return r}}const Aj=new Cs;class Sj extends BU{interpolate_(e,t,n,s){const r=super.interpolate_(e,t,n,s);return Aj.fromArray(r).normalize().toArray(r),r}}const Lr={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Jd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Qw={9728:Ts,9729:Jn,9984:Cx,9985:Yd,9986:jf,9987:Ir},$w={33071:Wi,33648:ep,10497:Mu},vM={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_b={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...h1>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},du={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Mj={CUBICSPLINE:void 0,LINEAR:rp,STEP:ap},yM={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function bj(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Sv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:yl})),i.DefaultMaterial}function If(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function ec(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Ej(i,e,t){let n=!1,s=!1,r=!1;for(let p=0,m=e.length;p<m;p++){const v=e[p];if(v.POSITION!==void 0&&(n=!0),v.NORMAL!==void 0&&(s=!0),v.COLOR_0!==void 0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(i);const o=[],c=[],f=[];for(let p=0,m=e.length;p<m;p++){const v=e[p];if(n){const y=v.POSITION!==void 0?t.getDependency("accessor",v.POSITION):i.attributes.position;o.push(y)}if(s){const y=v.NORMAL!==void 0?t.getDependency("accessor",v.NORMAL):i.attributes.normal;c.push(y)}if(r){const y=v.COLOR_0!==void 0?t.getDependency("accessor",v.COLOR_0):i.attributes.color;f.push(y)}}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(f)]).then(function(p){const m=p[0],v=p[1],y=p[2];return n&&(i.morphAttributes.position=m),s&&(i.morphAttributes.normal=v),r&&(i.morphAttributes.color=y),i.morphTargetsRelative=!0,i})}function Tj(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Cj(i){let e;const t=i.extensions&&i.extensions[Rn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+_M(t.attributes):e=i.indices+":"+_M(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)e+=":"+_M(i.targets[n]);return e}function _M(i){let e="";const t=Object.keys(i).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+i[t[n]]+";";return e}function xb(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Rj(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const wj=new Jt;class Bj{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Q7,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&r<98?this.textureLoader=new O3(this.options.manager):this.textureLoader=new k3(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const c={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:n,userData:{}};return If(r,c,s),ec(c,s),Promise.all(n._invokeAll(function(f){return f.afterRoot&&f.afterRoot(c)})).then(function(){for(const f of c.scenes)f.updateMatrixWorld();e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let c=0,f=o.length;c<f;c++)e[o[c]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),r=(o,c)=>{const f=this.associations.get(o);f!=null&&this.associations.set(c,f);for(const[p,m]of o.children.entries())r(m,c.children[p])};return r(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Rn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){n.load(_u.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=vM[s.type],c=Jd[s.componentType],f=s.normalized===!0,p=new c(s.count*o);return Promise.resolve(new zn(p,o,f))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const c=o[0],f=vM[s.type],p=Jd[s.componentType],m=p.BYTES_PER_ELEMENT,v=m*f,y=s.byteOffset||0,x=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,S=s.normalized===!0;let T,E;if(x&&x!==v){const A=Math.floor(y/x),w="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+A+":"+s.count;let B=t.cache.get(w);B||(T=new p(c,A*x,s.count*x/m),B=new mv(T,x/m),t.cache.add(w,B)),E=new bu(B,f,y%x/m,S)}else c===null?T=new p(s.count*f):T=new p(c,y,s.count*f),E=new zn(T,f,S);if(s.sparse!==void 0){const A=vM.SCALAR,w=Jd[s.sparse.indices.componentType],B=s.sparse.indices.byteOffset||0,D=s.sparse.values.byteOffset||0,O=new w(o[1],B,s.sparse.count*A),I=new p(o[2],D,s.sparse.count*f);c!==null&&(E=new zn(E.array.slice(),E.itemSize,E.normalized));for(let z=0,P=O.length;z<P;z++){const L=O[z];if(E.setX(L,I[z*f]),f>=2&&E.setY(L,I[z*f+1]),f>=3&&E.setZ(L,I[z*f+2]),f>=4&&E.setW(L,I[z*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return E})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,o=t.images[r];let c=this.textureLoader;if(o.uri){const f=n.manager.getHandler(o.uri);f!==null&&(c=f)}return this.loadTextureImage(e,r,c)}loadTextureImage(e,t,n){const s=this,r=this.json,o=r.textures[e],c=r.images[t],f=(c.uri||c.bufferView)+":"+o.sampler;if(this.textureCache[f])return this.textureCache[f];const p=this.loadImageSource(t,n).then(function(m){m.flipY=!1,m.name=o.name||c.name||"",m.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(m.name=c.uri);const y=(r.samplers||{})[o.sampler]||{};return m.magFilter=Qw[y.magFilter]||Jn,m.minFilter=Qw[y.minFilter]||Ir,m.wrapS=$w[y.wrapS]||Mu,m.wrapT=$w[y.wrapT]||Mu,s.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[f]=p,p}loadImageSource(e,t){const n=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(v=>v.clone());const o=s.images[e],c=self.URL||self.webkitURL;let f=o.uri||"",p=!1;if(o.bufferView!==void 0)f=n.getDependency("bufferView",o.bufferView).then(function(v){p=!0;const y=new Blob([v],{type:o.mimeType});return f=c.createObjectURL(y),f});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(f).then(function(v){return new Promise(function(y,x){let S=y;t.isImageBitmapLoader===!0&&(S=function(T){const E=new Wn(T);E.needsUpdate=!0,y(E)}),t.load(_u.resolveURL(v,r.path),S,void 0,x)})}).then(function(v){return p===!0&&c.revokeObjectURL(f),ec(v,o),v.userData.mimeType=o.mimeType||Rj(o.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),v});return this.sourceCache[e]=m,m}assignTexture(e,t,n,s){const r=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),r.extensions[Rn.KHR_TEXTURE_TRANSFORM]){const c=n.extensions!==void 0?n.extensions[Rn.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const f=r.associations.get(o);o=r.extensions[Rn.KHR_TEXTURE_TRANSFORM].extendTexture(o,c),r.associations.set(o,f)}}return s!==void 0&&(typeof s=="number"&&(s=s===Ww?Zf:lc),"colorSpace"in o?o.colorSpace=s:o.encoding=s===Zf?Ww:Z7),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+n.uuid;let f=this.cache.get(c);f||(f=new Vx,ps.prototype.copy.call(f,n),f.color.copy(n.color),f.map=n.map,f.sizeAttenuation=!1,this.cache.add(c,f)),n=f}else if(e.isLine){const c="LineBasicMaterial:"+n.uuid;let f=this.cache.get(c);f||(f=new sa,ps.prototype.copy.call(f,n),f.color.copy(n.color),f.map=n.map,this.cache.add(c,f)),n=f}if(s||r||o){let c="ClonedMaterial:"+n.uuid+":";s&&(c+="derivative-tangents:"),r&&(c+="vertex-colors:"),o&&(c+="flat-shading:");let f=this.cache.get(c);f||(f=n.clone(),r&&(f.vertexColors=!0),o&&(f.flatShading=!0),s&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(c,f),this.associations.set(f,this.associations.get(n))),n=f}e.material=n}getMaterialType(){return Sv}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let o;const c={},f=r.extensions||{},p=[];if(f[Rn.KHR_MATERIALS_UNLIT]){const v=s[Rn.KHR_MATERIALS_UNLIT];o=v.getMaterialType(),p.push(v.extendParams(c,r,t))}else{const v=r.pbrMetallicRoughness||{};if(c.color=new Tt(1,1,1),c.opacity=1,Array.isArray(v.baseColorFactor)){const y=v.baseColorFactor;c.color.setRGB(y[0],y[1],y[2],lc),c.opacity=y[3]}v.baseColorTexture!==void 0&&p.push(t.assignTexture(c,"map",v.baseColorTexture,Zf)),c.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,c.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(c,"metalnessMap",v.metallicRoughnessTexture)),p.push(t.assignTexture(c,"roughnessMap",v.metallicRoughnessTexture))),o=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,c)})))}r.doubleSided===!0&&(c.side=Nr);const m=r.alphaMode||yM.OPAQUE;if(m===yM.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,m===yM.MASK&&(c.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Xa&&(p.push(t.assignTexture(c,"normalMap",r.normalTexture)),c.normalScale=new Ke(1,1),r.normalTexture.scale!==void 0)){const v=r.normalTexture.scale;c.normalScale.set(v,v)}if(r.occlusionTexture!==void 0&&o!==Xa&&(p.push(t.assignTexture(c,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Xa){const v=r.emissiveFactor;c.emissive=new Tt().setRGB(v[0],v[1],v[2],lc)}return r.emissiveTexture!==void 0&&o!==Xa&&p.push(t.assignTexture(c,"emissiveMap",r.emissiveTexture,Zf)),Promise.all(p).then(function(){const v=new o(c);return r.name&&(v.name=r.name),ec(v,r),t.associations.set(v,{materials:e}),r.extensions&&If(s,v,r),v})}createUniqueName(e){const t=Fn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function r(c){return n[Rn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(f){return eB(f,c,t)})}const o=[];for(let c=0,f=e.length;c<f;c++){const p=e[c],m=Cj(p),v=s[m];if(v)o.push(v.promise);else{let y;p.extensions&&p.extensions[Rn.KHR_DRACO_MESH_COMPRESSION]?y=r(p):y=eB(new dn,p,t),s[m]={primitive:p,promise:y},o.push(y)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,s=this.extensions,r=n.meshes[e],o=r.primitives,c=[];for(let f=0,p=o.length;f<p;f++){const m=o[f].material===void 0?bj(this.cache):this.getDependency("material",o[f].material);c.push(m)}return c.push(t.loadGeometries(o)),Promise.all(c).then(function(f){const p=f.slice(0,f.length-1),m=f[f.length-1],v=[];for(let x=0,S=m.length;x<S;x++){const T=m[x],E=o[x];let A;const w=p[x];if(E.mode===Lr.TRIANGLES||E.mode===Lr.TRIANGLE_STRIP||E.mode===Lr.TRIANGLE_FAN||E.mode===void 0)A=r.isSkinnedMesh===!0?new DE(T,w):new Ei(T,w),A.isSkinnedMesh===!0&&A.normalizeSkinWeights(),E.mode===Lr.TRIANGLE_STRIP?A.geometry=qw(A.geometry,bE):E.mode===Lr.TRIANGLE_FAN&&(A.geometry=qw(A.geometry,rx));else if(E.mode===Lr.LINES)A=new To(T,w);else if(E.mode===Lr.LINE_STRIP)A=new fc(T,w);else if(E.mode===Lr.LINE_LOOP)A=new LE(T,w);else if(E.mode===Lr.POINTS)A=new NE(T,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);Object.keys(A.geometry.morphAttributes).length>0&&Tj(A,r),A.name=t.createUniqueName(r.name||"mesh_"+e),ec(A,r),E.extensions&&If(s,A,E),t.assignFinalMaterial(A),v.push(A)}for(let x=0,S=v.length;x<S;x++)t.associations.set(v[x],{meshes:e,primitives:x});if(v.length===1)return r.extensions&&If(s,v[0],r),v[0];const y=new sc;r.extensions&&If(s,y,r),t.associations.set(y,{meshes:e});for(let x=0,S=v.length;x<S;x++)y.add(v[x]);return y})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new ki(WD.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new gl(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ec(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,r=t.joints.length;s<r;s++)n.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const r=s.pop(),o=s,c=[],f=[];for(let p=0,m=o.length;p<m;p++){const v=o[p];if(v){c.push(v);const y=new Jt;r!==null&&y.fromArray(r.array,p*16),f.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new gv(c,f)})}loadAnimation(e){const t=this.json,n=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],c=[],f=[],p=[],m=[];for(let v=0,y=s.channels.length;v<y;v++){const x=s.channels[v],S=s.samplers[x.sampler],T=x.target,E=T.node,A=s.parameters!==void 0?s.parameters[S.input]:S.input,w=s.parameters!==void 0?s.parameters[S.output]:S.output;T.node!==void 0&&(o.push(this.getDependency("node",E)),c.push(this.getDependency("accessor",A)),f.push(this.getDependency("accessor",w)),p.push(S),m.push(T))}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(f),Promise.all(p),Promise.all(m)]).then(function(v){const y=v[0],x=v[1],S=v[2],T=v[3],E=v[4],A=[];for(let w=0,B=y.length;w<B;w++){const D=y[w],O=x[w],I=S[w],z=T[w],P=E[w];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();const L=n._createAnimationTracks(D,O,I,z,P);if(L)for(let N=0;N<L.length;N++)A.push(L[N])}return new fp(r,void 0,A)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const o=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(c){if(c.isMesh)for(let f=0,p=s.weights.length;f<p;f++)c.morphTargetInfluences[f]=s.weights[f]}),o})}loadNode(e){const t=this.json,n=this,s=t.nodes[e],r=n._loadNodeShallow(e),o=[],c=s.children||[];for(let p=0,m=c.length;p<m;p++)o.push(n.getDependency("node",c[p]));const f=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),f]).then(function(p){const m=p[0],v=p[1],y=p[2];y!==null&&m.traverse(function(x){x.isSkinnedMesh&&x.bind(y,wj)});for(let x=0,S=v.length;x<S;x++)m.add(v[x]);return m})}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",c=[],f=s._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return f&&c.push(f),r.camera!==void 0&&c.push(s.getDependency("camera",r.camera).then(function(p){return s._getNodeRef(s.cameraCache,r.camera,p)})),s._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){c.push(p)}),this.nodeCache[e]=Promise.all(c).then(function(p){let m;if(r.isBone===!0?m=new zx:p.length>1?m=new sc:p.length===1?m=p[0]:m=new On,m!==p[0])for(let v=0,y=p.length;v<y;v++)m.add(p[v]);if(r.name&&(m.userData.name=r.name,m.name=o),ec(m,r),r.extensions&&If(n,m,r),r.matrix!==void 0){const v=new Jt;v.fromArray(r.matrix),m.applyMatrix4(v)}else r.translation!==void 0&&m.position.fromArray(r.translation),r.rotation!==void 0&&m.quaternion.fromArray(r.rotation),r.scale!==void 0&&m.scale.fromArray(r.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,r=new sc;n.name&&(r.name=s.createUniqueName(n.name)),ec(r,n),n.extensions&&If(t,r,n);const o=n.nodes||[],c=[];for(let f=0,p=o.length;f<p;f++)c.push(s.getDependency("node",o[f]));return Promise.all(c).then(function(f){for(let m=0,v=f.length;m<v;m++)r.add(f[m]);const p=m=>{const v=new Map;for(const[y,x]of s.associations)(y instanceof ps||y instanceof Wn)&&v.set(y,x);return m.traverse(y=>{const x=s.associations.get(y);x!=null&&v.set(y,x)}),v};return s.associations=p(r),r})}_createAnimationTracks(e,t,n,s,r){const o=[],c=e.name?e.name:e.uuid,f=[];du[r.path]===du.weights?e.traverse(function(y){y.morphTargetInfluences&&f.push(y.name?y.name:y.uuid)}):f.push(c);let p;switch(du[r.path]){case du.weights:p=oh;break;case du.rotation:p=lh;break;case du.position:case du.scale:p=ch;break;default:switch(n.itemSize){case 1:p=oh;break;case 2:case 3:default:p=ch;break}break}const m=s.interpolation!==void 0?Mj[s.interpolation]:rp,v=this._getArrayFromAccessor(n);for(let y=0,x=f.length;y<x;y++){const S=new p(f[y]+"."+du[r.path],t.array,v,m);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(S),o.push(S)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=xb(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*n;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const s=this instanceof lh?Sj:BU;return new s(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Dj(i,e,t){const n=e.attributes,s=new zs;if(n.POSITION!==void 0){const c=t.json.accessors[n.POSITION],f=c.min,p=c.max;if(f!==void 0&&p!==void 0){if(s.set(new $(f[0],f[1],f[2]),new $(p[0],p[1],p[2])),c.normalized){const m=xb(Jd[c.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const c=new $,f=new $;for(let p=0,m=r.length;p<m;p++){const v=r[p];if(v.POSITION!==void 0){const y=t.json.accessors[v.POSITION],x=y.min,S=y.max;if(x!==void 0&&S!==void 0){if(f.setX(Math.max(Math.abs(x[0]),Math.abs(S[0]))),f.setY(Math.max(Math.abs(x[1]),Math.abs(S[1]))),f.setZ(Math.max(Math.abs(x[2]),Math.abs(S[2]))),y.normalized){const T=xb(Jd[y.componentType]);f.multiplyScalar(T)}c.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(c)}i.boundingBox=s;const o=new Rs;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=o}function eB(i,e,t){const n=e.attributes,s=[];function r(o,c){return t.getDependency("accessor",o).then(function(f){i.setAttribute(c,f)})}for(const o in n){const c=_b[o]||o.toLowerCase();c in i.attributes||s.push(r(n[o],c))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(c){i.setIndex(c)});s.push(o)}return ec(i,e),Dj(i,e,t),Promise.all(s).then(function(){return e.targets!==void 0?Ej(i,e.targets,t):i})}class Uj extends YE{constructor(e){super(e),this.type=Es}parse(e){const o=function(P,L){switch(P){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(L||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(L||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(L||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(L||""))}},m=`
`,v=function(P,L,N){L=L||1024;let ce=P.pos,ne=-1,fe=0,_e="",H=String.fromCharCode.apply(null,new Uint16Array(P.subarray(ce,ce+128)));for(;0>(ne=H.indexOf(m))&&fe<L&&ce<P.byteLength;)_e+=H,fe+=H.length,ce+=128,H+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(ce,ce+128)));return-1<ne?(P.pos+=fe+ne+1,_e+H.slice(0,ne)):!1},y=function(P){const L=/^#\?(\S+)/,N=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,j=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ce=/^\s*FORMAT=(\S+)\s*$/,ne=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,fe={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let _e,H;for((P.pos>=P.byteLength||!(_e=v(P)))&&o(1,"no header found"),(H=_e.match(L))||o(3,"bad initial token"),fe.valid|=1,fe.programtype=H[1],fe.string+=_e+`
`;_e=v(P),_e!==!1;){if(fe.string+=_e+`
`,_e.charAt(0)==="#"){fe.comments+=_e+`
`;continue}if((H=_e.match(N))&&(fe.gamma=parseFloat(H[1])),(H=_e.match(j))&&(fe.exposure=parseFloat(H[1])),(H=_e.match(ce))&&(fe.valid|=2,fe.format=H[1]),(H=_e.match(ne))&&(fe.valid|=4,fe.height=parseInt(H[1],10),fe.width=parseInt(H[2],10)),fe.valid&2&&fe.valid&4)break}return fe.valid&2||o(3,"missing format specifier"),fe.valid&4||o(3,"missing image size specifier"),fe},x=function(P,L,N){const j=L;if(j<8||j>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);j!==(P[2]<<8|P[3])&&o(3,"wrong scanline width");const ce=new Uint8Array(4*L*N);ce.length||o(4,"unable to allocate buffer space");let ne=0,fe=0;const _e=4*j,H=new Uint8Array(4),W=new Uint8Array(_e);let Q=N;for(;Q>0&&fe<P.byteLength;){fe+4>P.byteLength&&o(1),H[0]=P[fe++],H[1]=P[fe++],H[2]=P[fe++],H[3]=P[fe++],(H[0]!=2||H[1]!=2||(H[2]<<8|H[3])!=j)&&o(3,"bad rgbe scanline format");let ve=0,X;for(;ve<_e&&fe<P.byteLength;){X=P[fe++];const Ae=X>128;if(Ae&&(X-=128),(X===0||ve+X>_e)&&o(3,"bad scanline data"),Ae){const Ce=P[fe++];for(let oe=0;oe<X;oe++)W[ve++]=Ce}else W.set(P.subarray(fe,fe+X),ve),ve+=X,fe+=X}const re=j;for(let Ae=0;Ae<re;Ae++){let Ce=0;ce[ne]=W[Ae+Ce],Ce+=j,ce[ne+1]=W[Ae+Ce],Ce+=j,ce[ne+2]=W[Ae+Ce],Ce+=j,ce[ne+3]=W[Ae+Ce],ne+=4}Q--}return ce},S=function(P,L,N,j){const ce=P[L+3],ne=Math.pow(2,ce-128)/255;N[j+0]=P[L+0]*ne,N[j+1]=P[L+1]*ne,N[j+2]=P[L+2]*ne,N[j+3]=1},T=function(P,L,N,j){const ce=P[L+3],ne=Math.pow(2,ce-128)/255;N[j+0]=Jf.toHalfFloat(Math.min(P[L+0]*ne,65504)),N[j+1]=Jf.toHalfFloat(Math.min(P[L+1]*ne,65504)),N[j+2]=Jf.toHalfFloat(Math.min(P[L+2]*ne,65504)),N[j+3]=Jf.toHalfFloat(1)},E=new Uint8Array(e);E.pos=0;const A=y(E),w=A.width,B=A.height,D=x(E.subarray(E.pos),w,B);let O,I,z;switch(this.type){case Ii:z=D.length/4;const P=new Float32Array(z*4);for(let N=0;N<z;N++)S(D,N*4,P,N*4);O=P,I=Ii;break;case Es:z=D.length/4;const L=new Uint16Array(z*4);for(let N=0;N<z;N++)T(D,N*4,L,N*4);O=L,I=Es;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:B,data:O,header:A.string,gamma:A.gamma,exposure:A.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,n,s){function r(o,c){switch(o.type){case Ii:case Es:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Jn,o.magFilter=Jn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,c)}return super.load(e,r,n,s)}}const ng=h1>=152;class Lj extends YE{constructor(e){super(e),this.type=Es}parse(e){const L=Math.pow(2.7182818,2.2);function N(G,J){for(var de=0,we=0;we<65536;++we)(we==0||G[we>>3]&1<<(we&7))&&(J[de++]=we);for(var Ue=de-1;de<65536;)J[de++]=0;return Ue}function j(G){for(var J=0;J<16384;J++)G[J]={},G[J].len=0,G[J].lit=0,G[J].p=null}const ce={l:0,c:0,lc:0};function ne(G,J,de,we,Ue){for(;de<G;)J=J<<8|mt(we,Ue),de+=8;de-=G,ce.l=J>>de&(1<<G)-1,ce.c=J,ce.lc=de}const fe=new Array(59);function _e(G){for(var J=0;J<=58;++J)fe[J]=0;for(var J=0;J<65537;++J)fe[G[J]]+=1;for(var de=0,J=58;J>0;--J){var we=de+fe[J]>>1;fe[J]=de,de=we}for(var J=0;J<65537;++J){var Ue=G[J];Ue>0&&(G[J]=Ue|fe[Ue]++<<6)}}function H(G,J,de,we,Ue,Ge,ct){for(var st=de,V=0,te=0;Ue<=Ge;Ue++){if(st.value-de.value>we)return!1;ne(6,V,te,G,st);var se=ce.l;if(V=ce.c,te=ce.lc,ct[Ue]=se,se==63){if(st.value-de.value>we)throw"Something wrong with hufUnpackEncTable";ne(8,V,te,G,st);var ae=ce.l+6;if(V=ce.c,te=ce.lc,Ue+ae>Ge+1)throw"Something wrong with hufUnpackEncTable";for(;ae--;)ct[Ue++]=0;Ue--}else if(se>=59){var ae=se-59+2;if(Ue+ae>Ge+1)throw"Something wrong with hufUnpackEncTable";for(;ae--;)ct[Ue++]=0;Ue--}}_e(ct)}function W(G){return G&63}function Q(G){return G>>6}function ve(G,J,de,we){for(;J<=de;J++){var Ue=Q(G[J]),Ge=W(G[J]);if(Ue>>Ge)throw"Invalid table entry";if(Ge>14){var ct=we[Ue>>Ge-14];if(ct.len)throw"Invalid table entry";if(ct.lit++,ct.p){var st=ct.p;ct.p=new Array(ct.lit);for(var V=0;V<ct.lit-1;++V)ct.p[V]=st[V]}else ct.p=new Array(1);ct.p[ct.lit-1]=J}else if(Ge)for(var te=0,V=1<<14-Ge;V>0;V--){var ct=we[(Ue<<14-Ge)+te];if(ct.len||ct.p)throw"Invalid table entry";ct.len=Ge,ct.lit=J,te++}}return!0}const X={c:0,lc:0};function re(G,J,de,we){G=G<<8|mt(de,we),J+=8,X.c=G,X.lc=J}const Ae={c:0,lc:0};function Ce(G,J,de,we,Ue,Ge,ct,st,V,te){if(G==J){we<8&&(re(de,we,Ue,ct),de=X.c,we=X.lc),we-=8;var se=de>>we,se=new Uint8Array([se])[0];if(V.value+se>te)return!1;for(var ae=st[V.value-1];se-- >0;)st[V.value++]=ae}else if(V.value<te)st[V.value++]=G;else return!1;Ae.c=de,Ae.lc=we}function oe(G){return G&65535}function Ne(G){var J=oe(G);return J>32767?J-65536:J}const Oe={a:0,b:0};function $e(G,J){var de=Ne(G),we=Ne(J),Ue=we,Ge=de+(Ue&1)+(Ue>>1),ct=Ge,st=Ge-Ue;Oe.a=ct,Oe.b=st}function tt(G,J){var de=oe(G),we=oe(J),Ue=de-(we>>1)&65535,Ge=we+Ue-32768&65535;Oe.a=Ge,Oe.b=Ue}function Dt(G,J,de,we,Ue,Ge,ct){for(var st=ct<16384,V=de>Ue?Ue:de,te=1,se;te<=V;)te<<=1;for(te>>=1,se=te,te>>=1;te>=1;){for(var ae=0,ge=ae+Ge*(Ue-se),Te=Ge*te,Ve=Ge*se,Ye=we*te,it=we*se,Mt,vt,bt,kt;ae<=ge;ae+=Ve){for(var Ht=ae,Tn=ae+we*(de-se);Ht<=Tn;Ht+=it){var Ut=Ht+Ye,Gt=Ht+Te,Lt=Gt+Ye;st?($e(G[Ht+J],G[Gt+J]),Mt=Oe.a,bt=Oe.b,$e(G[Ut+J],G[Lt+J]),vt=Oe.a,kt=Oe.b,$e(Mt,vt),G[Ht+J]=Oe.a,G[Ut+J]=Oe.b,$e(bt,kt),G[Gt+J]=Oe.a,G[Lt+J]=Oe.b):(tt(G[Ht+J],G[Gt+J]),Mt=Oe.a,bt=Oe.b,tt(G[Ut+J],G[Lt+J]),vt=Oe.a,kt=Oe.b,tt(Mt,vt),G[Ht+J]=Oe.a,G[Ut+J]=Oe.b,tt(bt,kt),G[Gt+J]=Oe.a,G[Lt+J]=Oe.b)}if(de&te){var Gt=Ht+Te;st?$e(G[Ht+J],G[Gt+J]):tt(G[Ht+J],G[Gt+J]),Mt=Oe.a,G[Gt+J]=Oe.b,G[Ht+J]=Mt}}if(Ue&te)for(var Ht=ae,Tn=ae+we*(de-se);Ht<=Tn;Ht+=it){var Ut=Ht+Ye;st?$e(G[Ht+J],G[Ut+J]):tt(G[Ht+J],G[Ut+J]),Mt=Oe.a,G[Ut+J]=Oe.b,G[Ht+J]=Mt}se=te,te>>=1}return ae}function wt(G,J,de,we,Ue,Ge,ct,st,V,te){for(var se=0,ae=0,ge=st,Te=Math.trunc(Ue.value+(Ge+7)/8);Ue.value<Te;)for(re(se,ae,de,Ue),se=X.c,ae=X.lc;ae>=14;){var Ve=se>>ae-14&16383,Ye=J[Ve];if(Ye.len)ae-=Ye.len,Ce(Ye.lit,ct,se,ae,de,we,Ue,V,te,ge),se=Ae.c,ae=Ae.lc;else{if(!Ye.p)throw"hufDecode issues";var it;for(it=0;it<Ye.lit;it++){for(var Mt=W(G[Ye.p[it]]);ae<Mt&&Ue.value<Te;)re(se,ae,de,Ue),se=X.c,ae=X.lc;if(ae>=Mt&&Q(G[Ye.p[it]])==(se>>ae-Mt&(1<<Mt)-1)){ae-=Mt,Ce(Ye.p[it],ct,se,ae,de,we,Ue,V,te,ge),se=Ae.c,ae=Ae.lc;break}}if(it==Ye.lit)throw"hufDecode issues"}}var vt=8-Ge&7;for(se>>=vt,ae-=vt;ae>0;){var Ye=J[se<<14-ae&16383];if(Ye.len)ae-=Ye.len,Ce(Ye.lit,ct,se,ae,de,we,Ue,V,te,ge),se=Ae.c,ae=Ae.lc;else throw"hufDecode issues"}return!0}function Pt(G,J,de,we,Ue,Ge){var ct={value:0},st=de.value,V=St(J,de),te=St(J,de);de.value+=4;var se=St(J,de);if(de.value+=4,V<0||V>=65537||te<0||te>=65537)throw"Something wrong with HUF_ENCSIZE";var ae=new Array(65537),ge=new Array(16384);j(ge);var Te=we-(de.value-st);if(H(G,J,de,Te,V,te,ae),se>8*(we-(de.value-st)))throw"Something wrong with hufUncompress";ve(ae,V,te,ge),wt(ae,ge,G,J,de,se,te,Ge,Ue,ct)}function ot(G,J,de){for(var we=0;we<de;++we)J[we]=G[J[we]]}function dt(G){for(var J=1;J<G.length;J++){var de=G[J-1]+G[J]-128;G[J]=de}}function K(G,J){for(var de=0,we=Math.floor((G.length+1)/2),Ue=0,Ge=G.length-1;!(Ue>Ge||(J[Ue++]=G[de++],Ue>Ge));)J[Ue++]=G[we++]}function rt(G){for(var J=G.byteLength,de=new Array,we=0,Ue=new DataView(G);J>0;){var Ge=Ue.getInt8(we++);if(Ge<0){var ct=-Ge;J-=ct+1;for(var st=0;st<ct;st++)de.push(Ue.getUint8(we++))}else{var ct=Ge;J-=2;for(var V=Ue.getUint8(we++),st=0;st<ct+1;st++)de.push(V)}}return de}function Ze(G,J,de,we,Ue,Ge){var Ut=new DataView(Ge.buffer),ct=de[G.idx[0]].width,st=de[G.idx[0]].height,V=3,te=Math.floor(ct/8),se=Math.ceil(ct/8),ae=Math.ceil(st/8),ge=ct-(se-1)*8,Te=st-(ae-1)*8,Ve={value:0},Ye=new Array(V),it=new Array(V),Mt=new Array(V),vt=new Array(V),bt=new Array(V);for(let an=0;an<V;++an)bt[an]=J[G.idx[an]],Ye[an]=an<1?0:Ye[an-1]+se*ae,it[an]=new Float32Array(64),Mt[an]=new Uint16Array(64),vt[an]=new Uint16Array(se*64);for(let an=0;an<ae;++an){var kt=8;an==ae-1&&(kt=Te);var Ht=8;for(let jt=0;jt<se;++jt){jt==se-1&&(Ht=ge);for(let vn=0;vn<V;++vn)Mt[vn].fill(0),Mt[vn][0]=Ue[Ye[vn]++],je(Ve,we,Mt[vn]),Xe(Mt[vn],it[vn]),_t(it[vn]);We(it);for(let vn=0;vn<V;++vn)Z(it[vn],vt[vn],jt*64)}let Zn=0;for(let jt=0;jt<V;++jt){const vn=de[G.idx[jt]].type;for(let pn=8*an;pn<8*an+kt;++pn){Zn=bt[jt][pn];for(let fi=0;fi<te;++fi){const Bn=fi*64+(pn&7)*8;Ut.setUint16(Zn+0*2*vn,vt[jt][Bn+0],!0),Ut.setUint16(Zn+1*2*vn,vt[jt][Bn+1],!0),Ut.setUint16(Zn+2*2*vn,vt[jt][Bn+2],!0),Ut.setUint16(Zn+3*2*vn,vt[jt][Bn+3],!0),Ut.setUint16(Zn+4*2*vn,vt[jt][Bn+4],!0),Ut.setUint16(Zn+5*2*vn,vt[jt][Bn+5],!0),Ut.setUint16(Zn+6*2*vn,vt[jt][Bn+6],!0),Ut.setUint16(Zn+7*2*vn,vt[jt][Bn+7],!0),Zn+=8*2*vn}}if(te!=se)for(let pn=8*an;pn<8*an+kt;++pn){const fi=bt[jt][pn]+8*te*2*vn,Bn=te*64+(pn&7)*8;for(let Qn=0;Qn<Ht;++Qn)Ut.setUint16(fi+Qn*2*vn,vt[jt][Bn+Qn],!0)}}}for(var Tn=new Uint16Array(ct),Ut=new DataView(Ge.buffer),Gt=0;Gt<V;++Gt){de[G.idx[Gt]].decoded=!0;var Lt=de[G.idx[Gt]].type;if(de[Gt].type==2)for(var Yn=0;Yn<st;++Yn){const an=bt[Gt][Yn];for(var $t=0;$t<ct;++$t)Tn[$t]=Ut.getUint16(an+$t*2*Lt,!0);for(var $t=0;$t<ct;++$t)Ut.setFloat32(an+$t*2*Lt,be(Tn[$t]),!0)}}}function je(G,J,de){for(var we,Ue=1;Ue<64;)we=J[G.value],we==65280?Ue=64:we>>8==255?Ue+=we&255:(de[Ue]=we,Ue++),G.value++}function Xe(G,J){J[0]=be(G[0]),J[1]=be(G[1]),J[2]=be(G[5]),J[3]=be(G[6]),J[4]=be(G[14]),J[5]=be(G[15]),J[6]=be(G[27]),J[7]=be(G[28]),J[8]=be(G[2]),J[9]=be(G[4]),J[10]=be(G[7]),J[11]=be(G[13]),J[12]=be(G[16]),J[13]=be(G[26]),J[14]=be(G[29]),J[15]=be(G[42]),J[16]=be(G[3]),J[17]=be(G[8]),J[18]=be(G[12]),J[19]=be(G[17]),J[20]=be(G[25]),J[21]=be(G[30]),J[22]=be(G[41]),J[23]=be(G[43]),J[24]=be(G[9]),J[25]=be(G[11]),J[26]=be(G[18]),J[27]=be(G[24]),J[28]=be(G[31]),J[29]=be(G[40]),J[30]=be(G[44]),J[31]=be(G[53]),J[32]=be(G[10]),J[33]=be(G[19]),J[34]=be(G[23]),J[35]=be(G[32]),J[36]=be(G[39]),J[37]=be(G[45]),J[38]=be(G[52]),J[39]=be(G[54]),J[40]=be(G[20]),J[41]=be(G[22]),J[42]=be(G[33]),J[43]=be(G[38]),J[44]=be(G[46]),J[45]=be(G[51]),J[46]=be(G[55]),J[47]=be(G[60]),J[48]=be(G[21]),J[49]=be(G[34]),J[50]=be(G[37]),J[51]=be(G[47]),J[52]=be(G[50]),J[53]=be(G[56]),J[54]=be(G[59]),J[55]=be(G[61]),J[56]=be(G[35]),J[57]=be(G[36]),J[58]=be(G[48]),J[59]=be(G[49]),J[60]=be(G[57]),J[61]=be(G[58]),J[62]=be(G[62]),J[63]=be(G[63])}function _t(G){const J=.5*Math.cos(.7853975),de=.5*Math.cos(3.14159/16),we=.5*Math.cos(3.14159/8),Ue=.5*Math.cos(3*3.14159/16),Ge=.5*Math.cos(5*3.14159/16),ct=.5*Math.cos(3*3.14159/8),st=.5*Math.cos(7*3.14159/16);for(var V=new Array(4),te=new Array(4),se=new Array(4),ae=new Array(4),ge=0;ge<8;++ge){var Te=ge*8;V[0]=we*G[Te+2],V[1]=ct*G[Te+2],V[2]=we*G[Te+6],V[3]=ct*G[Te+6],te[0]=de*G[Te+1]+Ue*G[Te+3]+Ge*G[Te+5]+st*G[Te+7],te[1]=Ue*G[Te+1]-st*G[Te+3]-de*G[Te+5]-Ge*G[Te+7],te[2]=Ge*G[Te+1]-de*G[Te+3]+st*G[Te+5]+Ue*G[Te+7],te[3]=st*G[Te+1]-Ge*G[Te+3]+Ue*G[Te+5]-de*G[Te+7],se[0]=J*(G[Te+0]+G[Te+4]),se[3]=J*(G[Te+0]-G[Te+4]),se[1]=V[0]+V[3],se[2]=V[1]-V[2],ae[0]=se[0]+se[1],ae[1]=se[3]+se[2],ae[2]=se[3]-se[2],ae[3]=se[0]-se[1],G[Te+0]=ae[0]+te[0],G[Te+1]=ae[1]+te[1],G[Te+2]=ae[2]+te[2],G[Te+3]=ae[3]+te[3],G[Te+4]=ae[3]-te[3],G[Te+5]=ae[2]-te[2],G[Te+6]=ae[1]-te[1],G[Te+7]=ae[0]-te[0]}for(var Ve=0;Ve<8;++Ve)V[0]=we*G[16+Ve],V[1]=ct*G[16+Ve],V[2]=we*G[48+Ve],V[3]=ct*G[48+Ve],te[0]=de*G[8+Ve]+Ue*G[24+Ve]+Ge*G[40+Ve]+st*G[56+Ve],te[1]=Ue*G[8+Ve]-st*G[24+Ve]-de*G[40+Ve]-Ge*G[56+Ve],te[2]=Ge*G[8+Ve]-de*G[24+Ve]+st*G[40+Ve]+Ue*G[56+Ve],te[3]=st*G[8+Ve]-Ge*G[24+Ve]+Ue*G[40+Ve]-de*G[56+Ve],se[0]=J*(G[Ve]+G[32+Ve]),se[3]=J*(G[Ve]-G[32+Ve]),se[1]=V[0]+V[3],se[2]=V[1]-V[2],ae[0]=se[0]+se[1],ae[1]=se[3]+se[2],ae[2]=se[3]-se[2],ae[3]=se[0]-se[1],G[0+Ve]=ae[0]+te[0],G[8+Ve]=ae[1]+te[1],G[16+Ve]=ae[2]+te[2],G[24+Ve]=ae[3]+te[3],G[32+Ve]=ae[3]-te[3],G[40+Ve]=ae[2]-te[2],G[48+Ve]=ae[1]-te[1],G[56+Ve]=ae[0]-te[0]}function We(G){for(var J=0;J<64;++J){var de=G[0][J],we=G[1][J],Ue=G[2][J];G[0][J]=de+1.5747*Ue,G[1][J]=de-.1873*we-.4682*Ue,G[2][J]=de+1.8556*we}}function Z(G,J,de){for(var we=0;we<64;++we)J[de+we]=Jf.toHalfFloat(k(G[we]))}function k(G){return G<=1?Math.sign(G)*Math.pow(Math.abs(G),2.2):Math.sign(G)*Math.pow(L,Math.abs(G)-1)}function xe(G){return new DataView(G.array.buffer,G.offset.value,G.size)}function ze(G){var J=G.viewer.buffer.slice(G.offset.value,G.offset.value+G.size),de=new Uint8Array(rt(J)),we=new Uint8Array(de.length);return dt(de),K(de,we),new DataView(we.buffer)}function Qe(G){var J=G.array.slice(G.offset.value,G.offset.value+G.size),de=Qy(J),we=new Uint8Array(de.length);return dt(de),K(de,we),new DataView(we.buffer)}function He(G){for(var J=G.viewer,de={value:G.offset.value},we=new Uint16Array(G.width*G.scanlineBlockSize*(G.channels*G.type)),Ue=new Uint8Array(8192),Ge=0,ct=new Array(G.channels),st=0;st<G.channels;st++)ct[st]={},ct[st].start=Ge,ct[st].end=ct[st].start,ct[st].nx=G.width,ct[st].ny=G.lines,ct[st].size=G.type,Ge+=ct[st].nx*ct[st].ny*ct[st].size;var V=De(J,de),te=De(J,de);if(te>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(V<=te)for(var st=0;st<te-V+1;st++)Ue[st+V]=he(J,de);var se=new Uint16Array(65536),ae=N(Ue,se),ge=St(J,de);Pt(G.array,J,de,ge,we,Ge);for(var st=0;st<G.channels;++st)for(var Te=ct[st],Ve=0;Ve<ct[st].size;++Ve)Dt(we,Te.start+Ve,Te.nx,Te.size,Te.ny,Te.nx*Te.size,ae);ot(se,we,Ge);for(var Ye=0,it=new Uint8Array(we.buffer.byteLength),Mt=0;Mt<G.lines;Mt++)for(var vt=0;vt<G.channels;vt++){var Te=ct[vt],bt=Te.nx*Te.size,kt=new Uint8Array(we.buffer,Te.end*2,bt*2);it.set(kt,Ye),Ye+=bt*2,Te.end+=bt}return new DataView(it.buffer)}function pt(G){var J=G.array.slice(G.offset.value,G.offset.value+G.size),de=Qy(J);const we=G.lines*G.channels*G.width,Ue=G.type==1?new Uint16Array(we):new Uint32Array(we);let Ge=0,ct=0;const st=new Array(4);for(let V=0;V<G.lines;V++)for(let te=0;te<G.channels;te++){let se=0;switch(G.type){case 1:st[0]=Ge,st[1]=st[0]+G.width,Ge=st[1]+G.width;for(let ae=0;ae<G.width;++ae){const ge=de[st[0]++]<<8|de[st[1]++];se+=ge,Ue[ct]=se,ct++}break;case 2:st[0]=Ge,st[1]=st[0]+G.width,st[2]=st[1]+G.width,Ge=st[2]+G.width;for(let ae=0;ae<G.width;++ae){const ge=de[st[0]++]<<24|de[st[1]++]<<16|de[st[2]++]<<8;se+=ge,Ue[ct]=se,ct++}break}}return new DataView(Ue.buffer)}function ut(G){var J=G.viewer,de={value:G.offset.value},we=new Uint8Array(G.width*G.lines*(G.channels*G.type*2)),Ue={version:Fe(J,de),unknownUncompressedSize:Fe(J,de),unknownCompressedSize:Fe(J,de),acCompressedSize:Fe(J,de),dcCompressedSize:Fe(J,de),rleCompressedSize:Fe(J,de),rleUncompressedSize:Fe(J,de),rleRawSize:Fe(J,de),totalAcUncompressedCount:Fe(J,de),totalDcUncompressedCount:Fe(J,de),acCompression:Fe(J,de)};if(Ue.version<2)throw"EXRLoader.parse: "+as.compression+" version "+Ue.version+" is unsupported";for(var Ge=new Array,ct=De(J,de)-2;ct>0;){var st=xt(J.buffer,de),V=he(J,de),te=V>>2&3,se=(V>>4)-1,ae=new Int8Array([se])[0],ge=he(J,de);Ge.push({name:st,index:ae,type:ge,compression:te}),ct-=st.length+3}for(var Te=as.channels,Ve=new Array(G.channels),Ye=0;Ye<G.channels;++Ye){var it=Ve[Ye]={},Mt=Te[Ye];it.name=Mt.name,it.compression=0,it.decoded=!1,it.type=Mt.pixelType,it.pLinear=Mt.pLinear,it.width=G.width,it.height=G.lines}for(var vt={idx:new Array(3)},bt=0;bt<G.channels;++bt)for(var it=Ve[bt],Ye=0;Ye<Ge.length;++Ye){var kt=Ge[Ye];it.name==kt.name&&(it.compression=kt.compression,kt.index>=0&&(vt.idx[kt.index]=bt),it.offset=bt)}if(Ue.acCompressedSize>0)switch(Ue.acCompression){case 0:var Ut=new Uint16Array(Ue.totalAcUncompressedCount);Pt(G.array,J,de,Ue.acCompressedSize,Ut,Ue.totalAcUncompressedCount);break;case 1:var Ht=G.array.slice(de.value,de.value+Ue.totalAcUncompressedCount),Tn=Qy(Ht),Ut=new Uint16Array(Tn.buffer);de.value+=Ue.totalAcUncompressedCount;break}if(Ue.dcCompressedSize>0){var Gt={array:G.array,offset:de,size:Ue.dcCompressedSize},Lt=new Uint16Array(Qe(Gt).buffer);de.value+=Ue.dcCompressedSize}if(Ue.rleRawSize>0){var Ht=G.array.slice(de.value,de.value+Ue.rleCompressedSize),Tn=Qy(Ht),Yn=rt(Tn.buffer);de.value+=Ue.rleCompressedSize}for(var $t=0,an=new Array(Ve.length),Ye=0;Ye<an.length;++Ye)an[Ye]=new Array;for(var Zn=0;Zn<G.lines;++Zn)for(var jt=0;jt<Ve.length;++jt)an[jt].push($t),$t+=Ve[jt].width*G.type*2;Ze(vt,an,Ve,Ut,Lt,we);for(var Ye=0;Ye<Ve.length;++Ye){var it=Ve[Ye];if(!it.decoded)switch(it.compression){case 2:for(var vn=0,pn=0,Zn=0;Zn<G.lines;++Zn){for(var fi=an[Ye][vn],Bn=0;Bn<it.width;++Bn){for(var Qn=0;Qn<2*it.type;++Qn)we[fi++]=Yn[pn+Qn*it.width*it.height];pn++}vn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(we.buffer)}function xt(G,J){for(var de=new Uint8Array(G),we=0;de[J.value+we]!=0;)we+=1;var Ue=new TextDecoder().decode(de.slice(J.value,J.value+we));return J.value=J.value+we+1,Ue}function Nt(G,J,de){var we=new TextDecoder().decode(new Uint8Array(G).slice(J.value,J.value+de));return J.value=J.value+de,we}function at(G,J){var de=Et(G,J),we=St(G,J);return[de,we]}function At(G,J){var de=St(G,J),we=St(G,J);return[de,we]}function Et(G,J){var de=G.getInt32(J.value,!0);return J.value=J.value+4,de}function St(G,J){var de=G.getUint32(J.value,!0);return J.value=J.value+4,de}function mt(G,J){var de=G[J.value];return J.value=J.value+1,de}function he(G,J){var de=G.getUint8(J.value);return J.value=J.value+1,de}const Fe=function(G,J){let de;return"getBigInt64"in DataView.prototype?de=Number(G.getBigInt64(J.value,!0)):de=G.getUint32(J.value+4,!0)+Number(G.getUint32(J.value,!0)<<32),J.value+=8,de};function lt(G,J){var de=G.getFloat32(J.value,!0);return J.value+=4,de}function ue(G,J){return Jf.toHalfFloat(lt(G,J))}function be(G){var J=(G&31744)>>10,de=G&1023;return(G>>15?-1:1)*(J?J===31?de?NaN:1/0:Math.pow(2,J-15)*(1+de/1024):6103515625e-14*(de/1024))}function De(G,J){var de=G.getUint16(J.value,!0);return J.value+=2,de}function ke(G,J){return be(De(G,J))}function yt(G,J,de,we){for(var Ue=de.value,Ge=[];de.value<Ue+we-1;){var ct=xt(J,de),st=Et(G,de),V=he(G,de);de.value+=3;var te=Et(G,de),se=Et(G,de);Ge.push({name:ct,pixelType:st,pLinear:V,xSampling:te,ySampling:se})}return de.value+=1,Ge}function gt(G,J){var de=lt(G,J),we=lt(G,J),Ue=lt(G,J),Ge=lt(G,J),ct=lt(G,J),st=lt(G,J),V=lt(G,J),te=lt(G,J);return{redX:de,redY:we,greenX:Ue,greenY:Ge,blueX:ct,blueY:st,whiteX:V,whiteY:te}}function Ft(G,J){var de=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],we=he(G,J);return de[we]}function rn(G,J){var de=St(G,J),we=St(G,J),Ue=St(G,J),Ge=St(G,J);return{xMin:de,yMin:we,xMax:Ue,yMax:Ge}}function wn(G,J){var de=["INCREASING_Y"],we=he(G,J);return de[we]}function on(G,J){var de=lt(G,J),we=lt(G,J);return[de,we]}function yi(G,J){var de=lt(G,J),we=lt(G,J),Ue=lt(G,J);return[de,we,Ue]}function ai(G,J,de,we,Ue){if(we==="string"||we==="stringvector"||we==="iccProfile")return Nt(J,de,Ue);if(we==="chlist")return yt(G,J,de,Ue);if(we==="chromaticities")return gt(G,de);if(we==="compression")return Ft(G,de);if(we==="box2i")return rn(G,de);if(we==="lineOrder")return wn(G,de);if(we==="float")return lt(G,de);if(we==="v2f")return on(G,de);if(we==="v3f")return yi(G,de);if(we==="int")return Et(G,de);if(we==="rational")return at(G,de);if(we==="timecode")return At(G,de);if(we==="preview")return de.value+=Ue,"skipped";de.value+=Ue}function _i(G,J,de){const we={};if(G.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";we.version=G.getUint8(4);const Ue=G.getUint8(5);we.spec={singleTile:!!(Ue&2),longName:!!(Ue&4),deepFormat:!!(Ue&8),multiPart:!!(Ue&16)},de.value=8;for(var Ge=!0;Ge;){var ct=xt(J,de);if(ct==0)Ge=!1;else{var st=xt(J,de),V=St(G,de),te=ai(G,J,de,st,V);te===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${st}'.`):we[ct]=te}}if((Ue&-5)!=0)throw console.error("EXRHeader:",we),"THREE.EXRLoader: provided file is currently unsupported.";return we}function Ti(G,J,de,we,Ue){const Ge={size:0,viewer:J,array:de,offset:we,width:G.dataWindow.xMax-G.dataWindow.xMin+1,height:G.dataWindow.yMax-G.dataWindow.yMin+1,channels:G.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:G.channels[0].pixelType,uncompress:null,getter:null,format:null,[ng?"colorSpace":"encoding"]:null};switch(G.compression){case"NO_COMPRESSION":Ge.lines=1,Ge.uncompress=xe;break;case"RLE_COMPRESSION":Ge.lines=1,Ge.uncompress=ze;break;case"ZIPS_COMPRESSION":Ge.lines=1,Ge.uncompress=Qe;break;case"ZIP_COMPRESSION":Ge.lines=16,Ge.uncompress=Qe;break;case"PIZ_COMPRESSION":Ge.lines=32,Ge.uncompress=He;break;case"PXR24_COMPRESSION":Ge.lines=16,Ge.uncompress=pt;break;case"DWAA_COMPRESSION":Ge.lines=32,Ge.uncompress=ut;break;case"DWAB_COMPRESSION":Ge.lines=256,Ge.uncompress=ut;break;default:throw"EXRLoader.parse: "+G.compression+" is unsupported"}if(Ge.scanlineBlockSize=Ge.lines,Ge.type==1)switch(Ue){case Ii:Ge.getter=ke,Ge.inputSize=2;break;case Es:Ge.getter=De,Ge.inputSize=2;break}else if(Ge.type==2)switch(Ue){case Ii:Ge.getter=lt,Ge.inputSize=4;break;case Es:Ge.getter=ue,Ge.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ge.type+" for "+G.compression+".";Ge.blockCount=(G.dataWindow.yMax+1)/Ge.scanlineBlockSize;for(var ct=0;ct<Ge.blockCount;ct++)Fe(J,we);Ge.outputChannels=Ge.channels==3?4:Ge.channels;const st=Ge.width*Ge.height*Ge.outputChannels;switch(Ue){case Ii:Ge.byteArray=new Float32Array(st),Ge.channels<Ge.outputChannels&&Ge.byteArray.fill(1,0,st);break;case Es:Ge.byteArray=new Uint16Array(st),Ge.channels<Ge.outputChannels&&Ge.byteArray.fill(15360,0,st);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ue);break}return Ge.bytesPerLine=Ge.width*Ge.inputSize*Ge.channels,Ge.outputChannels==4?Ge.format=Zi:Ge.format=uv,ng?Ge.colorSpace="srgb-linear":Ge.encoding=3e3,Ge}const Ci=new DataView(e),vs=new Uint8Array(e),qa={value:0},as=_i(Ci,e,qa),Yt=Ti(as,Ci,vs,qa,this.type),ks={value:0},Gn={R:0,G:1,B:2,A:3,Y:0};for(let G=0;G<Yt.height/Yt.scanlineBlockSize;G++){const J=St(Ci,qa);Yt.size=St(Ci,qa),Yt.lines=J+Yt.scanlineBlockSize>Yt.height?Yt.height-J:Yt.scanlineBlockSize;const we=Yt.size<Yt.lines*Yt.bytesPerLine?Yt.uncompress(Yt):xe(Yt);qa.value+=Yt.size;for(let Ue=0;Ue<Yt.scanlineBlockSize;Ue++){const Ge=Ue+G*Yt.scanlineBlockSize;if(Ge>=Yt.height)break;for(let ct=0;ct<Yt.channels;ct++){const st=Gn[as.channels[ct].name];for(let V=0;V<Yt.width;V++){ks.value=(Ue*(Yt.channels*Yt.width)+ct*Yt.width+V)*Yt.inputSize;const te=(Yt.height-1-Ge)*(Yt.width*Yt.outputChannels)+V*Yt.outputChannels+st;Yt.byteArray[te]=Yt.getter(we,ks)}}}}return{header:as,width:Yt.width,height:Yt.height,data:Yt.byteArray,format:Yt.format,[ng?"colorSpace":"encoding"]:Yt[ng?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,s){function r(o,c){ng?o.colorSpace=c.colorSpace:o.encoding=c.encoding,o.minFilter=Jn,o.magFilter=Jn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,c)}return super.load(e,r,n,s)}}const xM=new WeakMap;class Nj extends Vs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const r=new Gs(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,c).then(t).catch(s)},n,s)}decodeDracoFile(e,t,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const f in t.attributeTypes){const p=t.attributeTypes[f];p.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[f]=p.name)}const n=JSON.stringify(t);if(xM.has(e)){const f=xM.get(e);if(f.key===n)return f.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,c=this._getWorker(r,o).then(f=>(s=f,new Promise((p,m)=>{s._callbacks[r]={resolve:p,reject:m},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(f=>this._createGeometry(f.geometry));return c.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),xM.set(e,{key:n,promise:c}),c}_createGeometry(e){const t=new dn;e.index&&t.setIndex(new zn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],r=s.name,o=s.array,c=s.itemSize;t.setAttribute(r,new zn(o,c))}return t}_loadLibrary(e,t){const n=new Gs(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const r=Oj.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Oj(){let i,e;onmessage=function(o){const c=o.data;switch(c.type){case"init":i=c.decoderConfig,e=new Promise(function(m){i.onModuleLoaded=function(v){m({draco:v})},DracoDecoderModule(i)});break;case"decode":const f=c.buffer,p=c.taskConfig;e.then(m=>{const v=m.draco,y=new v.Decoder,x=new v.DecoderBuffer;x.Init(new Int8Array(f),f.byteLength);try{const S=t(v,y,x,p),T=S.attributes.map(E=>E.array.buffer);S.index&&T.push(S.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:S},T)}catch(S){console.error(S),self.postMessage({type:"error",id:c.id,error:S.message})}finally{v.destroy(x),v.destroy(y)}});break}};function t(o,c,f,p){const m=p.attributeIDs,v=p.attributeTypes;let y,x;const S=c.GetEncodedGeometryType(f);if(S===o.TRIANGULAR_MESH)y=new o.Mesh,x=c.DecodeBufferToMesh(f,y);else if(S===o.POINT_CLOUD)y=new o.PointCloud,x=c.DecodeBufferToPointCloud(f,y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!x.ok()||y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+x.error_msg());const T={index:null,attributes:[]};for(const E in m){const A=self[v[E]];let w,B;if(p.useUniqueIDs)B=m[E],w=c.GetAttributeByUniqueId(y,B);else{if(B=c.GetAttributeId(y,o[m[E]]),B===-1)continue;w=c.GetAttribute(y,B)}T.attributes.push(s(o,c,y,E,A,w))}return S===o.TRIANGULAR_MESH&&(T.index=n(o,c,y)),o.destroy(y),T}function n(o,c,f){const m=f.num_faces()*3,v=m*4,y=o._malloc(v);c.GetTrianglesUInt32Array(f,v,y);const x=new Uint32Array(o.HEAPF32.buffer,y,m).slice();return o._free(y),{array:x,itemSize:1}}function s(o,c,f,p,m,v){const y=v.num_components(),S=f.num_points()*y,T=S*m.BYTES_PER_ELEMENT,E=r(o,m),A=o._malloc(T);c.GetAttributeDataArrayForAllPoints(f,v,E,T,A);const w=new m(o.HEAPF32.buffer,A,S).slice();return o._free(A),{name:p,array:w,itemSize:y}}function r(o,c){switch(c){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let e_;const AM=()=>{if(e_)return e_;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(t)&&(s=e);let r;const o=WebAssembly.instantiate(c(s),{}).then(v=>{r=v.instance,r.exports.__wasm_call_ctors()});function c(v){const y=new Uint8Array(v.length);for(let S=0;S<v.length;++S){const T=v.charCodeAt(S);y[S]=T>96?T-71:T>64?T-65:T>47?T+4:T>46?63:62}let x=0;for(let S=0;S<v.length;++S)y[x++]=y[S]<60?n[y[S]]:(y[S]-60)*64+y[++S];return y.buffer.slice(0,x)}function f(v,y,x,S,T,E){const A=r.exports.sbrk,w=x+3&-4,B=A(w*S),D=A(T.length),O=new Uint8Array(r.exports.memory.buffer);O.set(T,D);const I=v(B,x,S,D,T.length);if(I===0&&E&&E(B,w,S),y.set(O.subarray(B,B+x*S)),A(B-A(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return e_={ready:o,supported:!0,decodeVertexBuffer(v,y,x,S,T){f(r.exports.meshopt_decodeVertexBuffer,v,y,x,S,r.exports[p[T]])},decodeIndexBuffer(v,y,x,S){f(r.exports.meshopt_decodeIndexBuffer,v,y,x,S)},decodeIndexSequence(v,y,x,S){f(r.exports.meshopt_decodeIndexSequence,v,y,x,S)},decodeGltfBuffer(v,y,x,S,T,E){f(r.exports[m[T]],v,y,x,S,r.exports[p[E]])}},e_};let t_=null,DU="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function UU(i=!0,e=!0,t){return n=>{t&&t(n),i&&(t_||(t_=new Nj),t_.setDecoderPath(typeof i=="string"?i:DU),n.setDRACOLoader(t_)),e&&n.setMeshoptDecoder(typeof AM=="function"?AM():AM)}}const Ev=(i,e,t,n)=>hc(d1,i,UU(e,t,n));Ev.preload=(i,e,t,n)=>hc.preload(d1,i,UU(e,t,n));Ev.clear=i=>hc.clear(d1,i);Ev.setDecoderPath=i=>{DU=i};const Ij=ee.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:s=!0,keyEvents:r=!1,onChange:o,onStart:c,onEnd:f,...p},m)=>{const v=lr(I=>I.invalidate),y=lr(I=>I.camera),x=lr(I=>I.gl),S=lr(I=>I.events),T=lr(I=>I.setEvents),E=lr(I=>I.set),A=lr(I=>I.get),w=lr(I=>I.performance),B=e||y,D=n||S.connected||x.domElement,O=ee.useMemo(()=>new W7(B),[B]);return dU(()=>{O.enabled&&O.update()},-1),ee.useEffect(()=>(r&&O.connect(r===!0?D:r),O.connect(D),()=>void O.dispose()),[r,D,t,O,v]),ee.useEffect(()=>{const I=L=>{v(),t&&w.regress(),o&&o(L)},z=L=>{c&&c(L)},P=L=>{f&&f(L)};return O.addEventListener("change",I),O.addEventListener("start",z),O.addEventListener("end",P),()=>{O.removeEventListener("start",z),O.removeEventListener("end",P),O.removeEventListener("change",I)}},[o,c,f,O,v,T]),ee.useEffect(()=>{if(i){const I=A().controls;return E({controls:O}),()=>E({controls:I})}},[i,O]),ee.createElement("primitive",gx({ref:m,object:O,enableDamping:s},p))}),LU=(i,e,t)=>{let n;switch(i){case Ta:n=new Uint8ClampedArray(e*t*4);break;case Es:n=new Uint16Array(e*t*4);break;case xl:n=new Uint32Array(e*t*4);break;case Rx:n=new Int8Array(e*t*4);break;case wx:n=new Int16Array(e*t*4);break;case cv:n=new Int32Array(e*t*4);break;case Ii:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let n_;const Pj=(i,e,t,n)=>{if(n_!==void 0)return n_;const s=new Hr(1,1,n);e.setRenderTarget(s);const r=new Ei(new Ru,new Xa({color:16777215}));e.render(r,t),e.setRenderTarget(null);const o=LU(i,s.width,s.height);return e.readRenderTargetPixels(s,0,0,s.width,s.height,o),s.dispose(),r.geometry.dispose(),r.material.dispose(),n_=o[0]!==0,n_};class p1{constructor(e){var t,n,s,r,o,c,f,p,m,v,y,x,S,T,E,A;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(B){throw this._renderer.setRenderTarget(null),B}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const w={format:Zi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.magFilter:Jn,minFilter:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.minFilter)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.minFilter:Jn,samples:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.samples)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.samples:void 0,wrapS:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapS:Wi,wrapT:((S=e.renderTargetOptions)===null||S===void 0?void 0:S.wrapT)!==void 0?(T=e.renderTargetOptions)===null||T===void 0?void 0:T.wrapT:Wi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=p1.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new pv,this._camera=new gl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Pj(this._type,this._renderer,this._camera,w)){let B;switch(this._type){case Es:B=this._renderer.extensions.has("EXT_color_buffer_float")?Ii:void 0;break}B!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Ii}`),this._type=B):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ei(new Ru,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Hr(this.width,this.height,w),this._renderTarget.texture.mapping=((E=e.renderTargetOptions)===null||E===void 0?void 0:E.mapping)!==void 0?(A=e.renderTargetOptions)===null||A===void 0?void 0:A.mapping:Au}static instantiateRenderer(){const e=new a1;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=LU(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Mo(this.toArray(),this.width,this.height,Zi,this._type,(e==null?void 0:e.mapping)||Au,(e==null?void 0:e.wrapS)||Wi,(e==null?void 0:e.wrapT)||Wi,(e==null?void 0:e.magFilter)||Jn,(e==null?void 0:e.minFilter)||Jn,(e==null?void 0:e.anisotropy)||1,Eo);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ya&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Wn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Wn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Fj=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Hj=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class zj extends Ya{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:s,gainMapMax:r,maxDisplayBoost:o,hdrCapacityMin:c,hdrCapacityMax:f,sdr:p,gainMap:m}){super({name:"GainMapDecoderMaterial",vertexShader:Fj,fragmentShader:Hj,uniforms:{sdr:{value:p},gainMap:{value:m},gamma:{value:new $(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new $().fromArray(t)},offsetSdr:{value:new $().fromArray(n)},gainMapMin:{value:new $().fromArray(s)},gainMapMax:{value:new $().fromArray(r)},weightFactor:{value:(Math.log2(o)-c)/(f-c)}},blending:pl,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=c,this._hdrCapacityMax=f,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class NU extends Error{}class OU extends Error{}const ig=(i,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(i);if(n)return n[1];const s=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(i);if(s){const r=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(o=>o.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Gj=i=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(i):e=i.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),s=e.slice(t,n+10);try{const r=ig(s,"hdrgm:GainMapMin","0"),o=ig(s,"hdrgm:GainMapMax"),c=ig(s,"hdrgm:Gamma","1"),f=ig(s,"hdrgm:OffsetSDR","0.015625"),p=ig(s,"hdrgm:OffsetHDR","0.015625"),m=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),v=m?m[1]:"0",y=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!y)throw new Error("Incomplete gainmap metadata");const x=y[1];return{gainMapMin:Array.isArray(r)?r.map(S=>parseFloat(S)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(o)?o.map(S=>parseFloat(S)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(c)?c.map(S=>parseFloat(S)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetSdr:Array.isArray(f)?f.map(S=>parseFloat(S)):[parseFloat(f),parseFloat(f),parseFloat(f)],offsetHdr:Array.isArray(p)?p.map(S=>parseFloat(S)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(v),hdrCapacityMax:parseFloat(x)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class Vj{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const s=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const o=r.byteLength;let c=2,f=0,p;for(;c<o;){if(++f>250){n(new Error(`Found no marker after ${f} loops 😵`));return}if(r.getUint8(c)!==255){n(new Error(`Not a valid marker at offset 0x${c.toString(16)}, found: 0x${r.getUint8(c).toString(16)}`));return}if(p=r.getUint8(c+1),s&&console.log(`Marker: ${p.toString(16)}`),p===226){s&&console.log("Found APP2 marker (0xffe2)");const m=c+4;if(r.getUint32(m)===1297106432){const v=m+4;let y;if(r.getUint16(v)===18761)y=!1;else if(r.getUint16(v)===19789)y=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(v+2,!y)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=r.getUint32(v+4,!y);if(x<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const S=v+x,T=r.getUint16(S,!y),E=S+2;let A=0;for(let O=E;O<E+12*T;O+=12)r.getUint16(O,!y)===45057&&(A=r.getUint32(O+8,!y));const B=S+2+T*12+4,D=[];for(let O=B;O<B+A*16;O+=16){const I={MPType:r.getUint32(O,!y),size:r.getUint32(O+4,!y),dataOffset:r.getUint32(O+8,!y),dependantImages:r.getUint32(O+12,!y),start:-1,end:-1,isFII:!1};I.dataOffset?(I.start=v+I.dataOffset,I.isFII=!1):(I.start=0,I.isFII=!0),I.end=I.start+I.size,D.push(I)}if(this.options.extractNonFII&&D.length){const O=new Blob([r]),I=[];for(const z of D){if(z.isFII&&!this.options.extractFII)continue;const P=O.slice(z.start,z.end+1,"image/jpeg");I.push(P)}t(I)}}}c+=2+r.getUint16(c+2)}})}}const kj=async i=>{const e=Gj(i);if(!e)throw new OU("Gain map XMP metadata not found");const n=await new Vj({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new NU("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},tB=i=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=s=>{t(s)},n.src=URL.createObjectURL(i)});class IU extends Vs{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new iA}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new zj({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Wn,sdr:new Wn});return new p1({width:16,height:16,type:Es,colorSpace:Eo,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,s){const r=s?new Blob([s],{type:"image/jpeg"}):void 0,o=new Blob([n],{type:"image/jpeg"});let c,f,p=!1;if(typeof createImageBitmap>"u"){const y=await Promise.all([r?tB(r):Promise.resolve(void 0),tB(o)]);f=y[0],c=y[1],p=!0}else{const y=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);f=y[0],c=y[1]}const m=new Wn(f||new ImageData(2,2),Au,Wi,Wi,Jn,eb,Zi,Ta,1,Eo);m.flipY=p,m.needsUpdate=!0;const v=new Wn(c,Au,Wi,Wi,Jn,eb,Zi,Ta,1,Hs);v.flipY=p,v.needsUpdate=!0,e.width=c.width,e.height=c.height,e.material.gainMap=m,e.material.sdr=v,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Xj extends IU{load([e,t,n],s,r,o){const c=this.prepareQuadRenderer();let f,p,m;const v=async()=>{if(f&&p&&m){try{await this.render(c,m,f,p)}catch(L){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof o=="function"&&o(L),c.disposeOnDemandRenderer();return}typeof s=="function"&&s(c),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),c.disposeOnDemandRenderer()}};let y=!0,x=0,S=0,T=!0,E=0,A=0,w=!0,B=0,D=0;const O=()=>{if(typeof r=="function"){const L=x+E+B,N=S+A+D,j=y&&T&&w;r(new ProgressEvent("progress",{lengthComputable:j,loaded:N,total:L}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const I=new Gs(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(e,async L=>{if(typeof L=="string")throw new Error("Invalid sdr buffer");f=L,await v()},L=>{y=L.lengthComputable,S=L.loaded,x=L.total,O()},L=>{this.manager.itemError(e),typeof o=="function"&&o(L)});const z=new Gs(this._internalLoadingManager);z.setResponseType("arraybuffer"),z.setRequestHeader(this.requestHeader),z.setPath(this.path),z.setWithCredentials(this.withCredentials),z.load(t,async L=>{if(typeof L=="string")throw new Error("Invalid gainmap buffer");p=L,await v()},L=>{T=L.lengthComputable,A=L.loaded,E=L.total,O()},L=>{this.manager.itemError(t),typeof o=="function"&&o(L)});const P=new Gs(this._internalLoadingManager);return P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(n,async L=>{if(typeof L!="string")throw new Error("Invalid metadata string");m=JSON.parse(L),await v()},L=>{w=L.lengthComputable,D=L.loaded,B=L.total,O()},L=>{this.manager.itemError(n),typeof o=="function"&&o(L)}),c}}class jj extends IU{load(e,t,n,s){const r=this.prepareQuadRenderer(),o=new Gs(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async c=>{if(typeof c=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const f=new Uint8Array(c);let p,m,v;try{const y=await kj(f);p=y.sdr,m=y.gainMap,v=y.metadata}catch(y){if(y instanceof OU||y instanceof NU)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),v={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=f;else throw y}try{await this.render(r,v,p,m)}catch(y){this.manager.itemError(e),typeof s=="function"&&s(y),r.disposeOnDemandRenderer();return}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},n,c=>{this.manager.itemError(e),typeof s=="function"&&s(c)}),r}}const Qg={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},PU="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Kd=i=>Array.isArray(i),m1=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function oA({files:i=m1,path:e="",preset:t=void 0,colorSpace:n=void 0,extensions:s}={}){t&&(g1(t),i=Qg[t],e=PU);const r=Kd(i),{extension:o,isCubemap:c}=v1(i),f=y1(o);if(!f)throw new Error("useEnvironment: Unrecognized file extension: "+i);const p=lr(x=>x.gl);ee.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function x(){hc.clear(f,r?[i]:i)}p.domElement.addEventListener("webglcontextlost",x,{once:!0})},[i,p.domElement]);const m=hc(f,r?[i]:i,x=>{(o==="webp"||o==="jpg"||o==="jpeg")&&x.setRenderer(p),x.setPath==null||x.setPath(e),s&&s(x)});let v=r?m[0]:m;if(o==="jpg"||o==="jpeg"||o==="webp"){var y;v=(y=v.renderTarget)==null?void 0:y.texture}return v.mapping=c?_l:$d,v.colorSpace=n??(c?"srgb":"srgb-linear"),v}const Yj={files:m1,path:"",preset:void 0,extensions:void 0};oA.preload=i=>{const e={...Yj,...i};let{files:t,path:n=""}=e;const{preset:s,extensions:r}=e;s&&(g1(s),t=Qg[s],n=PU);const{extension:o}=v1(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const c=y1(o);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+t);hc.preload(c,Kd(t)?[t]:t,f=>{f.setPath==null||f.setPath(n),r&&r(f)})};const qj={files:m1,preset:void 0};oA.clear=i=>{const e={...qj,...i};let{files:t}=e;const{preset:n}=e;n&&(g1(n),t=Qg[n]);const{extension:s}=v1(t),r=y1(s);if(!r)throw new Error("useEnvironment: Unrecognized file extension: "+t);hc.clear(r,Kd(t)?[t]:t)};function g1(i){if(!(i in Qg))throw new Error("Preset must be one of: "+Object.keys(Qg).join(", "))}function v1(i){var e;const t=Kd(i)&&i.length===6,n=Kd(i)&&i.length===3&&i.some(o=>o.endsWith("json")),s=Kd(i)?i[0]:i;return{extension:t?"cube":n?"webp":s.startsWith("data:application/exr")?"exr":s.startsWith("data:application/hdr")?"hdr":s.startsWith("data:image/jpeg")?"jpg":(e=s.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function y1(i){return i==="cube"?N3:i==="hdr"?Uj:i==="exr"?Lj:i==="jpg"||i==="jpeg"?jj:i==="webp"?Xj:null}const Jj=i=>i.current&&i.current.isScene,Kj=i=>Jj(i)?i.current:i;function _1(i,e,t,n,s={}){var r,o,c,f;s={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...s};const p=Kj(e||t),m=p.background,v=p.environment,y={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(r=(o=p.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&r!==void 0?r:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(c=(f=p.environmentRotation)==null||f.clone==null?void 0:f.clone())!==null&&c!==void 0?c:[0,0,0]};return i!=="only"&&(p.environment=n),i&&(p.background=n),ul(p,s),()=>{i!=="only"&&(p.environment=v),i&&(p.background=m),ul(p,y)}}function x1({scene:i,background:e=!1,map:t,...n}){const s=lr(r=>r.scene);return ee.useLayoutEffect(()=>{if(t)return _1(e,i,s,t,n)}),null}function FU({background:i=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:o,environmentRotation:c,...f}){const p=oA(f),m=lr(v=>v.scene);return ee.useLayoutEffect(()=>_1(i,e,m,p,{backgroundBlurriness:t??n,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:o,environmentRotation:c})),ee.useEffect(()=>()=>{p.dispose()},[p]),null}function Wj({children:i,near:e=.1,far:t=1e3,resolution:n=256,frames:s=1,map:r,background:o=!1,blur:c,backgroundBlurriness:f,backgroundIntensity:p,backgroundRotation:m,environmentIntensity:v,environmentRotation:y,scene:x,files:S,path:T,preset:E=void 0,extensions:A}){const w=lr(P=>P.gl),B=lr(P=>P.scene),D=ee.useRef(null),[O]=ee.useState(()=>new pv),I=ee.useMemo(()=>{const P=new wE(n);return P.texture.type=Es,P},[n]);ee.useEffect(()=>()=>{I.dispose()},[I]),ee.useLayoutEffect(()=>{if(s===1){const P=w.autoClear;w.autoClear=!0,D.current.update(w,O),w.autoClear=P}return _1(o,x,B,I.texture,{backgroundBlurriness:c??f,backgroundIntensity:p,backgroundRotation:m,environmentIntensity:v,environmentRotation:y})},[i,O,I.texture,x,B,o,s,w]);let z=1;return dU(()=>{if(s===1/0||z<s){const P=w.autoClear;w.autoClear=!0,D.current.update(w,O),w.autoClear=P,z++}}),ee.createElement(ee.Fragment,null,m7(ee.createElement(ee.Fragment,null,i,ee.createElement("cubeCamera",{ref:D,args:[e,t,I]}),S||E?ee.createElement(FU,{background:!0,files:S,preset:E,path:T,extensions:A}):r?ee.createElement(x1,{background:!0,map:r,extensions:A}):null),O))}function Zj(i){var e,t,n,s;const r=oA(i),o=i.map||r;ee.useMemo(()=>gU({GroundProjectedEnvImpl:V7}),[]),ee.useEffect(()=>()=>{r.dispose()},[r]);const c=ee.useMemo(()=>[o],[o]),f=(e=i.ground)==null?void 0:e.height,p=(t=i.ground)==null?void 0:t.radius,m=(n=(s=i.ground)==null?void 0:s.scale)!==null&&n!==void 0?n:1e3;return ee.createElement(ee.Fragment,null,ee.createElement(x1,gx({},i,{map:o})),ee.createElement("groundProjectedEnvImpl",{args:c,scale:m,height:f,radius:p}))}function Qj(i){return i.ground?ee.createElement(Zj,i):i.map?ee.createElement(x1,i):i.children?ee.createElement(Wj,i):ee.createElement(FU,i)}const Bg="/cp-frontend-JordiDeLeeuw/",$j=()=>{const i=ee.useRef(null),e=ee.useRef(null),[t,n]=ee.useState(!1),[s,r]=ee.useState(!1),[o,c]=ee.useState(!1),{scrollYProgress:f}=yp({target:i,offset:["start end","end start"]}),p=()=>r(v=>!v),m=()=>{c(v=>!v)};return ee.useEffect(()=>f.on("change",y=>{const x=e.current;x&&(y>=.25&&y<=.75?x.play().catch(()=>{}):x.pause())}),[f]),Ex(f,"change",v=>{console.log("Scene 4 scrollYProgress",v)}),pe.jsxs("section",{className:"scene scene4",ref:i,children:[pe.jsxs("div",{className:"scene-sticky",children:[pe.jsx("div",{className:"background-image"}),pe.jsxs("div",{className:"content",children:[pe.jsx("img",{src:`${Bg}cat.png`,alt:"Reveal",className:"interactive-image fade-image",style:{opacity:s?1:.2},onClick:p}),pe.jsx("img",{src:`${Bg}watch.png`,alt:"Show 3D",className:"interactive-image model-trigger",onClick:m})," "]})]}),o&&pe.jsx("div",{className:"model-overlay",onClick:()=>n(!0),children:pe.jsxs(C7,{children:[pe.jsx(Ij,{enableDamping:!0,enabled:t,enableZoom:!1}),pe.jsx(Qj,{preset:"forest"}),pe.jsx(eY,{})]})}),pe.jsxs("audio",{ref:e,loop:!0,preload:"auto",children:[pe.jsx("source",{src:`${Bg}soundscene4.mp3`,type:"audio/mpeg"})," "]})]})};function eY(){const{scene:i}=Ev(`${Bg}watch.glb`);return pe.jsx("group",{position:[1.5,-.5,0],rotation:[0,Math.PI,0],children:pe.jsx("primitive",{object:i,scale:5})})}Ev.preload(`${Bg}watch.glb`);const SM="/cp-frontend-JordiDeLeeuw/",tY=()=>{const i=ee.useRef(null),e=ee.useRef(null),t=ee.useRef(null),{scrollYProgress:n}=yp({target:i,offset:["start end","end start"]});ee.useEffect(()=>n.on("change",o=>{const c=e.current;c&&(o>=.25&&o<=.75?c.play().catch(()=>{}):c.pause())}),[n]);const s=()=>{window.scrollTo({top:0,behavior:"instant"})};return pe.jsxs("section",{className:"scene scene5",ref:i,children:[pe.jsxs("div",{className:"scene-sticky",children:[pe.jsx("div",{className:"background-image"}),pe.jsxs("div",{className:"content",children:[pe.jsx("img",{src:`${SM}door.png`,alt:"Scroll to top",className:"interactive-image doorbutton",onClick:s}),pe.jsx("div",{ref:t,className:"drag-area",children:pe.jsx(Qd.img,{src:`${SM}head.png`,className:"draggable-image",drag:!0,dragMomentum:!1,dragConstraints:t})})]})]}),pe.jsx("audio",{ref:e,loop:!0,preload:"auto",children:pe.jsx("source",{src:`${SM}soundscene5.mp3`,type:"audio/mpeg"})})]})},sg=({suit:i="♥",value:e="5",children:t})=>pe.jsxs("div",{className:"playing-card",children:[pe.jsxs("div",{className:"card-corner top",children:[i,e]}),pe.jsx("div",{className:"card-content",children:t}),pe.jsxs("div",{className:"card-corner bottom",children:[i,e]})]}),nY="/cp-frontend-JordiDeLeeuw/",iY=()=>{const{scrollYProgress:i}=yp();return ee.useEffect(()=>{window.scrollTo(0,0)},[]),pe.jsxs("div",{className:"fairytale",children:[pe.jsx(Qd.div,{className:"scroll-line",style:{scaleY:i,transformOrigin:"top center"}}),pe.jsx("img",{src:`${nY}name.png`,alt:"",className:"name"}),pe.jsx(sg,{suit:"♦",value:"5",children:"Welkom in het verhaal van Alice, een meisje dat haar dag begon in stilte, tot een haastig konijn haar wereld op z'n kop zette. Ze stond op en volgde zonder aarzelen."}),pe.jsx(nG,{}),pe.jsx(sg,{suit:"♠",value:"7",children:"Ze liep en liep en liep, het konijn was binnen handbereik. Net toen ze hem bijna te pakken had, verdween de grond onder haar voeten."}),pe.jsx(iG,{}),pe.jsx(sg,{suit:"♦",value:"3",children:"Ze bleef maar vallen, niet snel, niet langzaam, gewoon eindeloos. Het leek alsof de tijd zelf even vergat wat boven en onder was."}),pe.jsx(sG,{}),pe.jsx(sg,{suit:"♣",value:"9",children:"Na eindelijk klein genoeg te zijn, paste Alice door het kleine deurtje. Aan de andere kant… wachtte een nieuw gezicht dat ze nog nooit had gezien."}),pe.jsx($j,{}),pe.jsx(sg,{suit:"♥",value:"Q",children:"Na een bizar theefeest werd Alice plots meegenomen door kaartsoldaten. Voor ze het wist, stond ze oog in oog met de hartenkoningin."}),pe.jsx(tY,{})]})},sY="/cp-frontend-JordiDeLeeuw/",aY=({story:i})=>{var s;const[e,t]=ee.useState(!1),n=hh();return pe.jsxs("div",{className:"making_div1",children:[pe.jsx("h1",{children:"MAKING OF"}),pe.jsxs("div",{className:"making_div2",children:[pe.jsx("img",{src:i.imgBanner,alt:"bannerfoto"}),pe.jsxs("div",{className:"making_div2_smaller",children:[pe.jsx("h2",{children:i.fairytale}),pe.jsx("h4",{children:i.nameStudent})]})]}),pe.jsxs("div",{className:"making_div_toggle",children:[pe.jsxs("div",{className:"making_div3",style:{display:e?"none":"flex"},children:[pe.jsxs("div",{className:"making_div3_left",children:[pe.jsx("h5",{children:"Verhaal"}),pe.jsx("p",{children:i.description}),pe.jsx("h5",{children:"Auteur"}),pe.jsxs("p",{children:[i.fairytaleAuthor," ",pe.jsx("br",{})," ",i.genre]}),pe.jsx("button",{className:"making_btn",onClick:()=>t(!0),children:"Lees meer"})]}),pe.jsxs("div",{className:"making_div3_right",children:[pe.jsx("img",{src:i.imgThumbnail,className:"thumbnail",alt:"thumbnail square"}),pe.jsxs("button",{className:"view-story",onClick:()=>{i.id==="jordi-de-leeuw-alice-in-wonderland"?n("/fairytale"):window.open(i.fairytaleLink,"_blank")},children:[pe.jsx("img",{src:`${sY}eye.png`,alt:"eyecon",style:{width:"1.6vw",height:"0.8vw"}}),"View Story"]})]})]}),pe.jsxs("div",{className:"making_div4",style:{display:e?"block":"none"},children:[pe.jsx("h5",{children:"Verhaal"}),pe.jsx("p",{children:i.description}),pe.jsx("h5",{children:"Parallax effect"}),pe.jsx("p",{children:i.parallaxInfo||"Hier komt extra uitleg over het parallax effect."}),pe.jsx("h5",{children:"Auteur"}),pe.jsxs("p",{children:[i.fairytaleAuthor," ",pe.jsx("br",{})," ",i.genre]}),pe.jsx("button",{className:"making_btn",onClick:()=>t(!1),children:"Lees minder"})]})]}),pe.jsxs("div",{className:"making_div5",children:[pe.jsx("h1",{children:"EXTRA INFORMATIE"}),pe.jsx("div",{className:"making_div5_images",children:(s=i.imgsExtra)==null?void 0:s.slice(0,3).map((r,o)=>pe.jsx("img",{src:r,alt:`extra img ${o+1}`},o))}),pe.jsx("p",{children:i.imgsInfo})]})]})},rY=()=>{const{id:i}=fN(),{fairytales:e,isLoading:t}=Ub(),[n,s]=ee.useState(null);return ee.useEffect(()=>{if(!i||e.length===0)return;const r=e.find(o=>o.id===i);s(r||null)},[i,e]),t||!i||e.length===0?pe.jsx("p",{children:"Loading..."}):n?pe.jsx("div",{className:"home_container",children:pe.jsx(aY,{story:n})}):pe.jsx("p",{children:"Story not found."})},oY="/cp-frontend-JordiDeLeeuw/",lY=()=>{const i=hh(),e=()=>{i("/about")};return pe.jsxs("div",{className:"footer_div1",children:[pe.jsx("img",{src:`${oY}Logo.png`,alt:"logo"}),pe.jsxs("div",{className:"footer_div2",children:[pe.jsxs("p",{children:["23 studenten van opleiding MCT die kozen voor Front-End Design. Met een ",pe.jsx("br",{})," dosis creativiteit, code en flinke scheut verbeelding verzamelden ",pe.jsx("br",{})," ze hier al hun sprookjes. Benieuwd wie wij zijn?"]}),pe.jsx("button",{onClick:e,children:pe.jsx("p",{children:"About us"})})]})]})},nB="/cp-frontend-JordiDeLeeuw/",cY=()=>{const[i,e]=ee.useState(!1),[t,n]=ee.useState(!1),[s,r]=ee.useState(""),[o,c]=xB(),f=ee.useRef(null),p=hh(),m=dc(),v=["AVONTUUR","FANTASIE","ROMANTIEK","HORROR"],y=x=>{x.target.closest(".dropdown_menu")||n(!1)};return ee.useEffect(()=>(document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}),[]),pe.jsxs("div",{className:"navigation_div1",children:[pe.jsx("img",{src:`${nB}Logo.png`,alt:"logo",onClick:()=>p("/")}),pe.jsxs("div",{className:"navigation_div2",children:[pe.jsx("div",{className:"navigation_div3",children:i?pe.jsx("input",{ref:f,type:"text",className:"navigation_input",placeholder:"Wat zoek je ...",value:s,onChange:x=>r(x.target.value),onKeyDown:x=>{x.key==="Enter"&&(s.trim()?(o.set("search",s.trim()),c(o)):(o.delete("search"),c(o)),e(!1))}}):pe.jsxs(pe.Fragment,{children:[pe.jsx("button",{onClick:x=>{x.stopPropagation(),m.pathname==="/"?n(S=>!S):p("/")},className:"nav_button",children:pe.jsx("h1",{className:m.pathname==="/"?"active":"",children:"SPROOKJES"})}),t&&pe.jsx("div",{className:"dropdown_menu",children:v.map(x=>pe.jsx("h2",{className:o.get("theme")===x?"selected-theme":"",onClick:()=>{o.get("theme")===x?(o.delete("theme"),c(o)):c({theme:x}),n(!1)},children:x},x))}),pe.jsx("h1",{onClick:()=>p("/makingof/jordi-de-leeuw-alice-in-wonderland"),className:m.pathname.startsWith("/makingof")?"active":"",children:"MAKING OF"}),pe.jsx("h1",{onClick:()=>p("/about"),className:m.pathname==="/about"?"active":"",children:"ABOUT US"})]})}),pe.jsx("button",{onClick:()=>{e(x=>(x&&r(""),!x))},children:pe.jsx("img",{src:`${nB}magnefyingglass.png`,alt:"magnefyingglass"})})]})]})};function uY(){return pe.jsxs(ZN,{children:[pe.jsx(cY,{}),pe.jsxs(TN,{children:[pe.jsx(ag,{path:"/",element:pe.jsx(JO,{})}),pe.jsx(ag,{path:"/about",element:pe.jsx(YO,{})}),pe.jsx(ag,{path:"/fairytale",element:pe.jsx(iY,{})}),pe.jsx(ag,{path:"/makingof/:id",element:pe.jsx(rY,{})})]}),pe.jsx(lY,{})]})}NL.createRoot(document.getElementById("root")).render(pe.jsx(ee.StrictMode,{children:pe.jsx(uY,{})}));
